/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2023年01月26日19时49分21秒
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors-dgiot-1c28f7ca"],{"09db":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("d3f4"),o=i("6a89");class r{static _handleEolEdits(e,t){let i=void 0,n=[];for(let o of t)"number"===typeof o.eol&&(i=o.eol),o.range&&"string"===typeof o.text&&n.push(o);return"number"===typeof i&&e.hasModel()&&e.getModel().pushEOL(i),n}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),n=i.validateRange(t.range),o=i.getFullModelRange();return o.equalsRange(n)}static execute(e,t,i){i&&e.pushUndoStop();const s=r._handleEolEdits(e,t);1===s.length&&r._isFullModelReplaceEdit(e,s[0])?e.executeEdits("formatEditsCommand",s.map(e=>n["a"].replace(o["a"].lift(e.range),e.text))):e.executeEdits("formatEditsCommand",s.map(e=>n["a"].replaceMove(o["a"].lift(e.range),e.text))),i&&e.pushUndoStop()}}},"0a33":function(e,t,i){},"1f84":function(e,t,i){"use strict";i.d(t,"a",(function(){return D}));var n=i("5fe7"),o=i("fdcc"),r=i("78bc"),s=i("a666"),a=i("ef8e"),d=(i("eb687"),i("bc04")),l=i("b2cc"),c=i("7061"),h=i("6a89"),u=i("b707"),g=i("5818"),f=i("b78f"),p=i("6816"),_=i("88d4"),m=i("dff7"),b=i("4fc3"),v=i("303e"),C=i("b7d0"),y=i("f187"),w=i("bd13"),k=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},M=function(e,t){return function(i,n){t(i,n,e)}};let D=class e{constructor(e,t,i){this.textModelResolverService=t,this.modeService=i,this.toUnhook=new s["b"],this.toUnhookForKeyboard=new s["b"],this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let n=new p["a"](e);this.toUnhook.add(n),this.toUnhook.add(n.onMouseMoveOrRelevantKeyDown(([e,t])=>{this.startFindDefinitionFromMouse(e,Object(a["p"])(t))})),this.toUnhook.add(n.onExecute(e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},e=>{this.removeLinkDecorations(),Object(o["f"])(e)})})),this.toUnhook.add(n.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(t){return t.getContribution(e.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(9===e.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const i=e.target.position;this.startFindDefinition(i)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;let s=new d["a"](this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Object(n["h"])(t=>this.findDefinition(e,t)),this.previousPromise.then(t=>{if(t&&t.length&&s.validate(this.editor))if(t.length>1)this.addDecoration(new h["a"](e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),(new r["a"]).appendText(m["a"]("multipleResults","Click to show {0} definitions.",t.length)));else{let n=t[0];if(!n.uri)return;this.textModelResolverService.createModelReference(n.uri).then(t=>{if(!t.object||!t.object.textEditorModel)return void t.dispose();const{object:{textEditorModel:o}}=t,{startLineNumber:s}=n.range;if(s<1||s>o.getLineCount())return void t.dispose();const a=this.getPreviewValue(o,s,n);let d;d=n.originSelectionRange?h["a"].lift(n.originSelectionRange):new h["a"](e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);const l=this.modeService.getModeIdByFilepathOrFirstLine(o.uri);this.addDecoration(d,(new r["a"]).appendCodeblock(l||"",a)),t.dispose()})}else this.removeLinkDecorations()}).then(void 0,o["f"])}getPreviewValue(t,i,n){let o=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(t,i);const r=o.endLineNumber-o.startLineNumber;r>=e.MAX_SOURCE_PREVIEW_LINES&&(o=this.getPreviewRangeBasedOnIndentation(t,i));const s=this.stripIndentationFromPreviewRange(t,i,o);return s}stripIndentationFromPreviewRange(e,t,i){const n=e.getLineFirstNonWhitespaceColumn(t);let o=n;for(let s=t+1;s<i.endLineNumber;s++){const t=e.getLineFirstNonWhitespaceColumn(s);o=Math.min(o,t)}const r=e.getValueInRange(i).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim();return r}getPreviewRangeBasedOnIndentation(t,i){const n=t.getLineFirstNonWhitespaceColumn(i),o=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES);let r=i+1;for(;r<o;r++){let e=t.getLineFirstNonWhitespaceColumn(r);if(n===e)break}return new h["a"](i,1,r+1,1)}getPreviewRangeBasedOnBrackets(t,i){const n=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES),o=[];let r=!0,s=t.findNextBracket(new c["a"](i,1));while(null!==s){if(0===o.length)o.push(s);else{const e=o[o.length-1];if(e.open[0]===s.open[0]&&e.isOpen&&!s.isOpen?o.pop():o.push(s),0===o.length){if(!r)return new h["a"](i,1,s.range.endLineNumber+1,1);r=!1}}const e=t.getLineMaxColumn(i);let a=s.range.endLineNumber,d=s.range.endColumn;if(e===s.range.endColumn&&(a++,d=1),a>n)return new h["a"](i,1,n+1,1);s=t.findNextBracket(new c["a"](a,d))}return new h["a"](i,1,n+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[i])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&u["f"].has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?Object(w["b"])(i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(e=>{const i=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(e),n=new y["a"]({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0});return n.run(e,this.editor)})}isInPeekEditor(e){const t=e.get(b["b"]);return _["b"].inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};D.ID="editor.contrib.gotodefinitionatposition",D.MAX_SOURCE_PREVIEW_LINES=8,D=k([M(1,f["a"]),M(2,g["a"])],D),Object(l["l"])(D.ID,D),Object(C["f"])((e,t)=>{const i=e.getColor(v["q"]);i&&t.addRule(`.monaco-editor .goto-definition-link { color: ${i} !important; }`)})},"29a1":function(e,t,i){},"418f":function(e,t,i){"use strict";i.d(t,"a",(function(){return he}));var n=i("5fe7"),o=i("fdcc"),r=i("fe45"),s=i("a666"),a=i("5717"),d=i("7061"),l=i("6a89"),c=i("88d4"),h=i("dff7"),u=i("9e74"),g=i("fbba"),f=i("4fc3"),p=i("0a0f"),_=i("9eb8"),m=i("93d9"),b=i("b0cd"),v=i("03e8"),C=i("f68e"),y=i("11f7"),w=i("e385"),k=i("ceb8"),M=i("308f"),D=i("b589"),O=i("82c9"),R=(i("29a1"),i("d379")),x=i("b57f"),S=i("70cb"),L=i("5818"),I=i("b78f"),N=i("3bfb"),P=i("ee56"),E=i("c4e3"),A=i("7e93"),j=i("debc"),T=i("6dec"),F=i("47cb"),W=i("a6d7"),H=i("b7d0"),U=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},V=function(e,t){return function(i,n){t(i,n,e)}};let K=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof C["c"]||e instanceof C["a"]}getChildren(e){if(e instanceof C["c"])return e.groups;if(e instanceof C["a"])return e.resolve(this._resolverService).then(e=>e.children);throw new Error("bad tree")}};K=U([V(0,I["a"])],K);class B{getHeight(){return 23}getTemplateId(e){return e instanceof C["a"]?z.id:Z.id}}let G=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof C["b"]){const i=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(i)return i.value}return Object(O["b"])(e.uri)}};G=U([V(0,T["a"])],G);class ${getId(e){return e instanceof C["b"]?e.id:e.uri}}let q=class extends s["a"]{constructor(e,t,i){super(),this._uriLabel=t;const n=document.createElement("div");n.classList.add("reference-file"),this.file=this._register(new E["a"](n,{supportHighlights:!0})),this.badge=new N["a"](y["q"](n,y["a"](".count"))),this._register(Object(W["a"])(this.badge,i)),e.appendChild(n)}set(e,t){let i=Object(O["d"])(e.uri);this.file.setLabel(Object(j["a"])(e.uri),this._uriLabel.getUriLabel(i,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat(Object(h["a"])("referencesCount","{0} references",n)):this.badge.setTitleFormat(Object(h["a"])("referenceCount","{0} reference",n))}};q=U([V(1,F["a"]),V(2,H["b"])],q);let z=class e{constructor(t){this._instantiationService=t,this.templateId=e.id}renderTemplate(e){return this._instantiationService.createInstance(q,e)}renderElement(e,t,i){i.set(e.element,Object(A["c"])(e.filterData))}disposeTemplate(e){e.dispose()}};z.id="FileReferencesRenderer",z=U([V(0,p["a"])],z);class X{constructor(e){this.label=new P["a"](e,!1)}set(e,t){var i;const n=null===(i=e.parent.getPreview(e))||void 0===i?void 0:i.preview(e.range);if(n&&n.value){const{value:e,highlight:i}=n;t&&!A["a"].isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,Object(A["c"])(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[i]))}else this.label.set(`${Object(O["b"])(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`)}}class Z{constructor(){this.templateId=Z.id}renderTemplate(e){return new X(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}}Z.id="OneReferenceRenderer";class J{getWidgetAriaLabel(){return Object(h["a"])("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var Q=i("303e"),Y=i("3803"),ee=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},te=function(e,t){return function(i,n){t(i,n,e)}},ie=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n["throw"](e))}catch(t){r(t)}}function d(e){e.done?i(e.value):o(e.value).then(s,a)}d((n=n.apply(e,t||[])).next())}))};class ne{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new s["b"],this._callOnModelChange=new s["b"],this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e)for(let t of this._model.references)if(t.uri.toString()===e.uri.toString())return void this._addDecorations(t.parent)}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let o=0,r=e.children.length;o<r;o++){let n=e.children[o];this._decorationIgnoreSet.has(n.id)||n.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:n.range,options:ne.DecorationOptions}),i.push(o))}const n=this._editor.deltaDecorations([],t);for(let o=0;o<n.length;o++)this._decorations.set(n[o],e.children[i[o]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[i,n]of this._decorations){const o=t.getDecorationRange(i);if(!o)continue;let r=!1;if(!l["a"].equalsRange(o,n.range)){if(l["a"].spansMultipleLines(o))r=!0;else{const e=n.range.endColumn-n.range.startColumn,t=o.endColumn-o.startColumn;e!==t&&(r=!0)}r?(this._decorationIgnoreSet.add(n.id),e.push(i)):n.range=o}}for(let t=0,i=e.length;t<i;t++)this._decorations.delete(e[t]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}ne.DecorationOptions=x["b"].register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class oe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const n=JSON.parse(e);t=n.ratio,i=n.heightInLines}catch(n){}return{ratio:t||.7,heightInLines:i||18}}}class re extends m["c"]{}let se=class extends c["c"]{constructor(e,t,i,n,o,r,a,d,l,c,h,u){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=a,this._uriLabel=d,this._undoRedoService=l,this._keybindingService=c,this._modeService=h,this._languageConfigurationService=u,this._disposeOnNewModel=new s["b"],this._callOnDispose=new s["b"],this._onDidSelectReference=new M["b"],this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new y["b"](0,0),this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Object(s["f"])(this._preview),Object(s["f"])(this._previewNotAvailableMessage),Object(s["f"])(this._tree),Object(s["f"])(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(c["e"])||k["a"].transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(c["p"])||k["a"].transparent,primaryHeadingColor:e.getColor(c["q"]),secondaryHeadingColor:e.getColor(c["r"])})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=y["q"](e,y["a"]("div.messages")),y["K"](this._messageContainer),this._splitView=new w["b"](e,{orientation:1}),this._previewContainer=y["q"](e,y["a"]("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(R["a"],this._previewContainer,t,this.editor),y["K"](this._previewContainer),this._previewNotAvailableMessage=new x["c"](h["a"]("missingPreviewMessage","no preview available"),x["c"].DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=y["q"](e,y["a"]("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new J,keyboardNavigationLabelProvider:this._instantiationService.createInstance(G),identityProvider:new $,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:c["j"]}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(y["o"](this._treeContainer,"keydown",e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(re,"ReferencesWidget",this._treeContainer,new B,[this._instantiationService.createInstance(z),this._instantiationService.createInstance(Z)],this._instantiationService.createInstance(K),i),this._splitView.addView({onDidChange:M["c"].None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},w["a"].Distribute),this._splitView.addView({onDidChange:M["c"].None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height=this._dim.height+"px",this._treeContainer.style.width=e+"px",this._tree.layout(this._dim.height,e)}},w["a"].Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let n=(e,t)=>{e instanceof C["b"]&&("show"===t&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:"tree"}))};this._tree.onDidOpen(e=>{e.sideBySide?n(e.element,"side"):e.editorOptions.pinned?n(e.element,"goto"):n(e.element,"show")}),y["K"](this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new y["b"](t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=h["a"]("noResults","No results"),y["W"](this._messageContainer),Promise.resolve(void 0)):(y["K"](this._messageContainer),this._decorationsManager=new ne(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const n=this._getFocusedReference();n&&this._onDidSelectReference.fire({element:{uri:n.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),y["W"](this._treeContainer),y["W"](this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();return e instanceof C["b"]?e:e instanceof C["a"]&&e.children.length>0?e.children[0]:void 0}revealReference(e){return ie(this,void 0,void 0,(function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}))}_revealReference(e,t){return ie(this,void 0,void 0,(function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==D["c"].inMemory?this.setTitle(Object(O["c"])(e.uri),this._uriLabel.getUriLabel(Object(O["d"])(e.uri))):this.setTitle(h["a"]("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent)),this._tree.reveal(e);const n=yield i;if(!this._model)return void n.dispose();Object(s["f"])(this._previewModelReference);const o=n.object;if(o){const t=this._preview.getModel()===o.textEditorModel?0:1,i=l["a"].lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(o.textEditorModel),this._preview.setSelection(i),this._preview.revealRangeInCenter(i,t)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()}))}};se=ee([te(3,H["b"]),te(4,I["a"]),te(5,p["a"]),te(6,c["a"]),te(7,F["a"]),te(8,Y["a"]),te(9,T["a"]),te(10,L["a"]),te(11,S["a"])],se),Object(H["f"])((e,t)=>{const i=e.getColor(c["m"]);i&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${i}; }`);const n=e.getColor(c["h"]);n&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${n}; }`);const o=e.getColor(c["i"]);o&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${o}; box-sizing: border-box; }`);const r=e.getColor(Q["b"]);r&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${r}; box-sizing: border-box; }`);const s=e.getColor(c["j"]);s&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${s}; }`);const a=e.getColor(c["l"]);a&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${a}; }`);const d=e.getColor(c["k"]);d&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${d}; }`);const l=e.getColor(c["n"]);l&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${l}; }`);const h=e.getColor(c["o"]);h&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${h} !important; }`);const u=e.getColor(c["f"]);u&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\tbackground-color: ${u};}`);const g=e.getColor(c["g"]);g&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\tbackground-color: ${g};}`)});var ae=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},de=function(e,t){return function(i,n){t(i,n,e)}},le=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n["throw"](e))}catch(t){r(t)}}function d(e){e.done?i(e.value):o(e.value).then(s,a)}d((n=n.apply(e,t||[])).next())}))};const ce=new f["c"]("referenceSearchVisible",!1,h["a"]("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let he=class e{constructor(e,t,i,n,o,r,a,d){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=n,this._notificationService=o,this._instantiationService=r,this._storageService=a,this._configurationService=d,this._disposables=new s["b"],this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=ce.bindTo(i)}static get(t){return t.getContribution(e.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const o="peekViewLayout",r=oe.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(se,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(h["a"]("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(e=>{let{element:t,kind:n}=e;if(t)switch(n){case"open":"editor"===e.source&&this._configurationService.getValue("editor.stablePeek")||this.openReference(t,!1,!1);break;case"side":this.openReference(t,!0,!1);break;case"goto":i?this._gotoReference(t):this.openReference(t,!1,!0);break}}));const s=++this._requestIdPool;t.then(t=>{var i;if(s===this._requestIdPool&&this._widget)return null===(i=this._model)||void 0===i||i.dispose(),this._model=t,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(h["a"]("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let t=this._editor.getModel().uri,i=new d["a"](e.startLineNumber,e.startColumn),n=this._model.nearestReference(t,i);if(n)return this._widget.setSelection(n).then(()=>{this._widget&&"editor"===this._editor.getOption(76)&&this._widget.focusOnPreviewEditor()})}});t.dispose()},e=>{this._notificationService.error(e)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return le(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const n=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(n),yield this._gotoReference(n),o?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}))}revealReference(e){return le(this,void 0,void 0,(function*(){this._editor.hasModel()&&this._model&&this._widget&&(yield this._widget.revealReference(e))}))}closeWidget(e=!0){var t,i;null===(t=this._widget)||void 0===t||t.dispose(),null===(i=this._model)||void 0===i||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(t){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const i=l["a"].lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:i}},this._editor).then(t=>{var o;if(this._ignoreModelChangeEvent=!1,t&&this._widget)if(this._editor===t)this._widget.show(i),this._widget.focusOnReferenceTree();else{const r=e.get(t),s=this._model.clone();this.closeWidget(),t.focus(),r.toggleWidget(i,Object(n["h"])(e=>Promise.resolve(s)),null!==(o=this._peekMode)&&void 0!==o&&o)}else this.closeWidget()},e=>{this._ignoreModelChangeEvent=!1,Object(o["f"])(e)})}openReference(e,t,i){t||this.closeWidget();const{uri:n,range:o}=e;this._editorService.openCodeEditor({resource:n,options:{selection:o,pinned:i}},this._editor,t)}};function ue(e,t){const i=Object(c["d"])(e);if(!i)return;let n=he.get(i);n&&t(n)}he.ID="editor.contrib.referencesController",he=ae([de(2,f["b"]),de(3,a["a"]),de(4,b["a"]),de(5,p["a"]),de(6,v["a"]),de(7,g["a"])],he),_["a"].registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Object(r["c"])(2089,60),when:f["a"].or(ce,c["b"].inPeekEditor),handler(e){ue(e,e=>{e.changeFocusBetweenPreviewAndReferences()})}}),_["a"].registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:f["a"].or(ce,c["b"].inPeekEditor),handler(e){ue(e,e=>{e.goToNextOrPreviousReference(!0)})}}),_["a"].registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:f["a"].or(ce,c["b"].inPeekEditor),handler(e){ue(e,e=>{e.goToNextOrPreviousReference(!1)})}}),u["a"].registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),u["a"].registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),u["a"].registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),u["a"].registerCommand("closeReferenceSearch",e=>ue(e,e=>e.closeWidget())),_["a"].registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:f["a"].and(c["b"].inPeekEditor,f["a"].not("config.editor.stablePeek"))}),_["a"].registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:f["a"].and(ce,f["a"].not("config.editor.stablePeek"))}),_["a"].registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:f["a"].and(ce,m["e"]),handler(e){var t;const i=e.get(m["a"]),n=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof C["b"]&&ue(e,e=>e.revealReference(n[0]))}}),_["a"].registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:f["a"].and(ce,m["e"]),handler(e){var t;const i=e.get(m["a"]),n=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof C["b"]&&ue(e,e=>e.openReference(n[0],!0,!0))}}),u["a"].registerCommand("openReference",e=>{var t;const i=e.get(m["a"]),n=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof C["b"]&&ue(e,e=>e.openReference(n[0],!1,!0))})},6816:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("308f"),o=i("a666"),r=i("30db");function s(e,t){return!!e[t]}class a{constructor(e,t){this.target=e.target,this.hasTriggerModifier=s(e.event,t.triggerModifier),this.hasSideBySideModifier=s(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class d{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=s(e,t.triggerModifier)}}class l{constructor(e,t,i,n){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=n}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function c(e){return"altKey"===e?r["f"]?new l(57,"metaKey",6,"altKey"):new l(5,"ctrlKey",6,"altKey"):r["f"]?new l(6,"altKey",57,"metaKey"):new l(6,"altKey",5,"ctrlKey")}class h extends o["a"]{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new n["b"]),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new n["b"]),this.onExecute=this._onExecute.event,this._onCancel=this._register(new n["b"]),this.onCancel=this._onCancel.event,this._editor=e,this._opts=c(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(e=>{if(e.hasChanged(69)){const e=c(this._editor.getOption(69));if(this._opts.equals(e))return;this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(e=>this._onEditorMouseMove(new a(e,this._opts)))),this._register(this._editor.onMouseDown(e=>this._onEditorMouseDown(new a(e,this._opts)))),this._register(this._editor.onMouseUp(e=>this._onEditorMouseUp(new a(e,this._opts)))),this._register(this._editor.onKeyDown(e=>this._onEditorKeyDown(new d(e,this._opts)))),this._register(this._editor.onKeyUp(e=>this._onEditorKeyUp(new d(e,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(e=>this._onDidChangeCursorSelection(e))),this._register(this._editor.onDidChangeModel(e=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}},"6df4":function(e,t,i){"use strict";var n=i("b2cc"),o=i("62bd"),r=i("dff7");class s extends n["b"]{constructor(){super({id:"editor.action.fontZoomIn",label:r["a"]("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){o["a"].setZoomLevel(o["a"].getZoomLevel()+1)}}class a extends n["b"]{constructor(){super({id:"editor.action.fontZoomOut",label:r["a"]("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){o["a"].setZoomLevel(o["a"].getZoomLevel()-1)}}class d extends n["b"]{constructor(){super({id:"editor.action.fontZoomReset",label:r["a"]("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){o["a"].setZoomLevel(0)}}Object(n["j"])(s),Object(n["j"])(a),Object(n["j"])(d)},7082:function(e,t,i){"use strict";var n=i("e8e3"),o=i("2504"),r=i("fdcc"),s=i("fe45"),a=i("a666"),d=i("b2cc"),l=i("5717"),c=i("3170"),h=i("6a89"),u=i("c101"),g=i("b707"),f=i("a40b"),p=i("84df"),_=i("09db"),m=i("dff7"),b=i("9e74"),v=i("4fc3"),C=i("0a0f"),y=i("b539"),w=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},k=function(e,t){return function(i,n){t(i,n,e)}},M=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n["throw"](e))}catch(t){r(t)}}function d(e){e.done?i(e.value):o(e.value).then(s,a)}d((n=n.apply(e,t||[])).next())}))};let D=class{constructor(e,t){this._workerService=t,this._callOnDispose=new a["b"],this._callOnModel=new a["b"],this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(g["x"].onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(48))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=g["x"].ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let i=new c["b"];for(let n of t.autoFormatTriggerCharacters)i.add(n.charCodeAt(0));this._callOnModel.add(this._editor.onDidType(e=>{let t=e.charCodeAt(e.length-1);i.has(t)&&this._trigger(String.fromCharCode(t))}))}_trigger(e){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition();let o=!1;const r=this._editor.onDidChangeModelContent(e=>{if(e.isFlush)return o=!0,void r.dispose();for(let t=0,n=e.changes.length;t<n;t++){const n=e.changes[t];if(n.range.endLineNumber<=i.lineNumber)return o=!0,void r.dispose()}});Object(p["e"])(this._workerService,t,i,e,t.getFormattingOptions()).then(e=>{r.dispose(),o||Object(n["n"])(e)&&(_["a"].execute(this._editor,e,!0),Object(p["b"])(e))},e=>{throw r.dispose(),e})}};D.ID="editor.contrib.autoFormat",D=w([k(1,f["a"])],D);let O=class{constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new a["b"],this._callOnModel=new a["b"],this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(g["j"].onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(47)&&this.editor.hasModel()&&g["j"].has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(p["c"],this.editor,e,2,y["b"].None,o["a"].None).catch(r["f"]))}};O.ID="editor.contrib.formatOnPaste",O=w([k(1,C["a"])],O);class R extends d["b"]{constructor(){super({id:"editor.action.formatDocument",label:m["a"]("formatDocument.label","Format Document"),alias:"Format Document",precondition:v["a"].and(u["a"].notInCompositeEditor,u["a"].writable,u["a"].hasDocumentFormattingProvider),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return M(this,void 0,void 0,(function*(){if(t.hasModel()){const i=e.get(C["a"]),n=e.get(y["a"]);yield n.showWhile(i.invokeFunction(p["d"],t,1,y["b"].None,o["a"].None),250)}}))}}class x extends d["b"]{constructor(){super({id:"editor.action.formatSelection",label:m["a"]("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:v["a"].and(u["a"].writable,u["a"].hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:Object(s["c"])(2089,2084),weight:100},contextMenuOpts:{when:u["a"].hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return M(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(C["a"]),n=t.getModel(),r=t.getSelections().map(e=>e.isEmpty()?new h["a"](e.startLineNumber,1,e.startLineNumber,n.getLineMaxColumn(e.startLineNumber)):e),s=e.get(y["a"]);yield s.showWhile(i.invokeFunction(p["c"],t,r,1,y["b"].None,o["a"].None),250)}))}}Object(d["l"])(D.ID,D),Object(d["l"])(O.ID,O),Object(d["j"])(R),Object(d["j"])(x),b["a"].registerCommand("editor.action.format",e=>M(void 0,void 0,void 0,(function*(){const t=e.get(l["a"]).getFocusedCodeEditor();if(!t||!t.hasModel())return;const i=e.get(b["b"]);t.getSelection().isEmpty()?yield i.executeCommand("editor.action.formatDocument"):yield i.executeCommand("editor.action.formatSelection")})))},7605:function(e,t,i){"use strict";var n=i("5fe7"),o=i("fdcc"),r=i("fe45"),s=i("a666"),a=i("3742"),d=i("ef8e"),l=(i("0a33"),i("bc04")),c=i("b2cc"),h=i("c101"),u=i("b707"),g=i("70cb"),f=i("308f");const p=65535,_=16777215,m=4278190080;class b{constructor(e,t,i){if(e.length!==t.length||e.length>p)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(t,i)=>{let n=e[e.length-1];return this.getStartLineNumber(n)<=t&&this.getEndLineNumber(n)>=i};for(let i=0,n=this._startIndexes.length;i<n;i++){let n=this._startIndexes[i],o=this._endIndexes[i];if(n>_||o>_)throw new Error("startLineNumber or endLineNumber must not exceed "+_);while(e.length>0&&!t(n,o))e.pop();let r=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=n+((255&r)<<24),this._endIndexes[i]=o+((65280&r)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&_}getEndLineNumber(e){return this._endIndexes[e]&_}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,i=e%32;return 0!==(this._collapseStates[t]&1<<i)}setCollapsed(e,t){let i=e/32|0,n=e%32,o=this._collapseStates[i];this._collapseStates[i]=t?o|1<<n:o&~(1<<n)}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let n=0;n<this._types.length;n++)this._types[n]===e&&(this.setCollapsed(n,t),i=!0);return i}toRegion(e){return new v(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&m)>>>24)+((this._endIndexes[e]&m)>>>16);return t===p?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(0===i)return-1;while(t<i){let n=Math.floor((t+i)/2);e<this.getStartLineNumber(n)?i=n:t=n+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){let i=this.getEndLineNumber(t);if(i>=e)return t;t=this.getParentIndex(t);while(-1!==t){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class v{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class C{constructor(e,t){this._updateEventEmitter=new f["b"],this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new b(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((e,t)=>e.regionIndex-t.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let n=0,o=-1,r=-1;const s=e=>{while(n<e){const e=this._regions.getEndLineNumber(n),t=this._regions.isCollapsed(n);e<=o&&i.changeDecorationOptions(this._editorDecorationIds[n],this._decorationProvider.getDecorationOption(t,e<=r)),t&&e>r&&(r=e),n++}};for(let a of e){let e=a.regionIndex,i=this._editorDecorationIds[e];if(i&&!t[i]){t[i]=!0,s(e);let n=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,n),o=Math.max(o,this._regions.getEndLineNumber(e))}}s(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let i=[],n=(e,i)=>{for(let n of t)if(e<n&&n<=i)return!0;return!1},o=-1,r=(t,r)=>{const s=e.getStartLineNumber(t),a=e.getEndLineNumber(t);r||(r=e.isCollapsed(t)),r&&n(s,a)&&(r=!1),e.setCollapsed(t,r);const d=this._textModel.getLineMaxColumn(s),l={startLineNumber:s,startColumn:Math.max(d-1,1),endLineNumber:s,endColumn:d};i.push({range:l,options:this._decorationProvider.getDecorationOption(r,a<=o)}),r&&a>o&&(o=a)},s=0,a=()=>{while(s<this._regions.length){let e=this._regions.isCollapsed(s);if(s++,e)return s-1}return-1},d=0,l=a();while(-1!==l&&d<e.length){let t=this._textModel.getDecorationRange(this._editorDecorationIds[l]);if(t){let i=t.startLineNumber;if(t.startColumn===Math.max(t.endColumn-1,1)&&this._textModel.getLineMaxColumn(i)===t.endColumn)while(d<e.length){let t=e.getStartLineNumber(d);if(!(i>=t))break;r(d,i===t),d++}}l=a()}while(d<e.length)r(d,!1),d++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,i),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let i=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(i){let n=i.startLineNumber,o=i.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:n,endLineNumber:o})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let i of e){let e=this.getRegionAtLine(i.startLineNumber);e&&!e.isCollapsed&&t.push(e)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let i=[];if(this._regions){let n=this._regions.findRange(e),o=1;while(n>=0){let e=this._regions.toRegion(n);t&&!t(e,o)||i.push(e),o++,n=e.parentIndex}}return i}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let i=[],n=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length){const e=[];for(let r=n,s=this._regions.length;r<s;r++){let n=this._regions.toRegion(r);if(!(this._regions.getStartLineNumber(r)<o))break;while(e.length>0&&!n.containedBy(e[e.length-1]))e.pop();e.push(n),t(n,e.length)&&i.push(n)}}else for(let r=n,s=this._regions.length;r<s;r++){let e=this._regions.toRegion(r);if(!(this._regions.getStartLineNumber(r)<o))break;t&&!t(e)||i.push(e)}return i}}function y(e,t,i){let n=[];for(let o of i){let i=e.getRegionAtLine(o);if(i){const o=!i.isCollapsed;if(n.push(i),t>1){let r=e.getRegionsInside(i,(e,i)=>e.isCollapsed!==o&&i<t);n.push(...r)}}}e.toggleCollapseState(n)}function w(e,t,i=Number.MAX_VALUE,n){let o=[];if(n&&n.length>0)for(let r of n){let n=e.getRegionAtLine(r);if(n&&(n.isCollapsed!==t&&o.push(n),i>1)){let r=e.getRegionsInside(n,(e,n)=>e.isCollapsed!==t&&n<i);o.push(...r)}}else{let n=e.getRegionsInside(null,(e,n)=>e.isCollapsed!==t&&n<i);o.push(...n)}e.toggleCollapseState(o)}function k(e,t,i,n){let o=[];for(let r of n){let n=e.getAllRegionsAtLine(r,(e,n)=>e.isCollapsed!==t&&n<=i);o.push(...n)}e.toggleCollapseState(o)}function M(e,t,i){let n=[];for(let o of i){let i=e.getAllRegionsAtLine(o,e=>e.isCollapsed!==t);i.length>0&&n.push(i[0])}e.toggleCollapseState(n)}function D(e,t,i,n){let o=(e,o)=>o===t&&e.isCollapsed!==i&&!n.some(t=>e.containsLine(t)),r=e.getRegionsInside(null,o);e.toggleCollapseState(r)}function O(e,t,i){let n=[];for(let s of i)n.push(e.getAllRegionsAtLine(s,void 0)[0]);let o=e=>n.every(t=>!t.containedBy(e)&&!e.containedBy(t))&&e.isCollapsed!==t,r=e.getRegionsInside(null,o);e.toggleCollapseState(r)}function R(e,t,i){let n=e.textModel,o=e.regions,r=[];for(let s=o.length-1;s>=0;s--)if(i!==o.isCollapsed(s)){let e=o.getStartLineNumber(s);t.test(n.getLineContent(e))&&r.push(o.toRegion(s))}e.toggleCollapseState(r)}function x(e,t,i){let n=e.regions,o=[];for(let r=n.length-1;r>=0;r--)i!==n.isCollapsed(r)&&t===n.getType(r)&&o.push(n.toRegion(r));e.toggleCollapseState(o)}function S(e,t){let i=null,n=t.getRegionAtLine(e);if(null!==n&&(i=n.startLineNumber,e===i)){let e=n.parentIndex;i=-1!==e?t.regions.getStartLineNumber(e):null}return i}function L(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){if(e!==i.startLineNumber)return i.startLineNumber;{let e=i.parentIndex,n=0;-1!==e&&(n=t.regions.getStartLineNumber(i.parentIndex));while(null!==i){if(!(i.regionIndex>0))return null;if(i=t.regions.toRegion(i.regionIndex-1),i.startLineNumber<=n)return null;if(i.parentIndex===e)return i.startLineNumber}}}else if(t.regions.length>0){i=t.regions.toRegion(t.regions.length-1);while(null!==i){if(i.startLineNumber<e)return i.startLineNumber;i=i.regionIndex>0?t.regions.toRegion(i.regionIndex-1):null}}return null}function I(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){let e=i.parentIndex,n=0;if(-1!==e)n=t.regions.getEndLineNumber(i.parentIndex);else{if(0===t.regions.length)return null;n=t.regions.getEndLineNumber(t.regions.length-1)}while(null!==i){if(!(i.regionIndex<t.regions.length))return null;if(i=t.regions.toRegion(i.regionIndex+1),i.startLineNumber>=n)return null;if(i.parentIndex===e)return i.startLineNumber}}else if(t.regions.length>0){i=t.regions.toRegion(0);while(null!==i){if(i.startLineNumber>e)return i.startLineNumber;i=i.regionIndex<t.regions.length?t.regions.toRegion(i.regionIndex+1):null}}return null}var N=i("e8e3"),P=i("6a89");class E{constructor(e){this._updateEventEmitter=new f["b"],this._foldingModel=e,this._foldingModelListener=e.onDidChange(e=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}updateHiddenRanges(){let e=!1,t=[],i=0,n=0,o=Number.MAX_VALUE,r=-1,s=this._foldingModel.regions;for(;i<s.length;i++){if(!s.isCollapsed(i))continue;let a=s.getStartLineNumber(i)+1,d=s.getEndLineNumber(i);o<=a&&d<=r||(!e&&n<this._hiddenRanges.length&&this._hiddenRanges[n].startLineNumber===a&&this._hiddenRanges[n].endLineNumber===d?(t.push(this._hiddenRanges[n]),n++):(e=!0,t.push(new P["a"](a,1,d,1))),o=a,r=d)}(e||n<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||0===e.length)return!1;let t=[];for(let i of e){if(!i.startLineNumber||!i.endLineNumber)return!1;t.push(new P["a"](i.startLineNumber+1,1,i.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return null!==j(this._hiddenRanges,e)}adjustSelections(e){let t=!1,i=this._foldingModel.textModel,n=null,o=e=>(n&&A(e,n)||(n=j(this._hiddenRanges,e)),n?n.startLineNumber-1:null);for(let r=0,s=e.length;r<s;r++){let n=e[r],s=o(n.startLineNumber);s&&(n=n.setStartPosition(s,i.getLineMaxColumn(s)),t=!0);let a=o(n.endLineNumber);a&&(n=n.setEndPosition(a,i.getLineMaxColumn(a)),t=!0),e[r]=n}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function A(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}function j(e,t){let i=Object(N["h"])(e,e=>t<e.startLineNumber)-1;return i>=0&&e[i].endLineNumber>=t?e[i]:null}var T=i("b57f");const F=5e3,W="indent";class H{constructor(e){this.editorModel=e,this.id=W}dispose(){}compute(e){let t=g["b"].getFoldingRules(this.editorModel.getLanguageId()),i=t&&!!t.offSide,n=t&&t.markers;return Promise.resolve(V(this.editorModel,i,n))}}class U{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>_||t>_)return;let n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=this._length-1,n=0;i>=0;i--,n++)e[n]=this._startIndexes[i],t[n]=this._endIndexes[i];return new b(e,t)}{let t=0,i=this._indentOccurrences.length;for(let e=0;e<this._indentOccurrences.length;e++){let n=this._indentOccurrences[e];if(n){if(n+t>this._foldingRangesLimit){i=e;break}t+=n}}const n=e.getOptions().tabSize;let o=new Uint32Array(this._foldingRangesLimit),r=new Uint32Array(this._foldingRangesLimit);for(let s=this._length-1,a=0;s>=0;s--){let d=this._startIndexes[s],l=e.getLineContent(d),c=T["c"].computeIndentLevel(l,n);(c<i||c===i&&t++<this._foldingRangesLimit)&&(o[a]=d,r[a]=this._endIndexes[s],a++)}return new b(o,r)}}}function V(e,t,i,n=F){const o=e.getOptions().tabSize;let r=new U(n),s=void 0;i&&(s=new RegExp(`(${i.start.source})|(?:${i.end.source})`));let a=[],d=e.getLineCount()+1;a.push({indent:-1,endAbove:d,line:d});for(let l=e.getLineCount();l>0;l--){let i,n=e.getLineContent(l),d=T["c"].computeIndentLevel(n,o),c=a[a.length-1];if(-1!==d){if(s&&(i=n.match(s))){if(!i[1]){a.push({indent:-2,endAbove:l,line:l});continue}{let e=a.length-1;while(e>0&&-2!==a[e].indent)e--;if(e>0){a.length=e+1,c=a[e],r.insertFirst(l,c.line,d),c.line=l,c.indent=d,c.endAbove=l;continue}}}if(c.indent>d){do{a.pop(),c=a[a.length-1]}while(c.indent>d);let e=c.endAbove-1;e-l>=1&&r.insertFirst(l,e,d)}c.indent===d?c.endAbove=l:a.push({indent:d,endAbove:l,line:l})}else t&&(c.endAbove=l)}return r.toIndentRanges(e)}const K=5e3,B={},G="syntax";class ${constructor(e,t,i,n=K){this.editorModel=e,this.providers=t,this.limit=n,this.id=G;for(const o of t)"function"===typeof o.onDidChange&&(this.disposables||(this.disposables=new s["b"]),this.disposables.add(o.onDidChange(i)))}compute(e){return q(this.providers,this.editorModel,e).then(e=>{if(e){let t=X(e,this.limit);return t}return null})}dispose(){var e;null===(e=this.disposables)||void 0===e||e.dispose()}}function q(e,t,i){let n=null,r=e.map((e,r)=>Promise.resolve(e.provideFoldingRanges(t,B,i)).then(e=>{if(!i.isCancellationRequested&&Array.isArray(e)){Array.isArray(n)||(n=[]);let i=t.getLineCount();for(let t of e)t.start>0&&t.end>t.start&&t.end<=i&&n.push({start:t.start,end:t.end,rank:r,kind:t.kind})}},o["g"]));return Promise.all(r).then(e=>n)}class z{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,n){if(e>_||t>_)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=n,this._types[o]=i,this._length++,n<30&&(this._nestingLevelCounts[n]=(this._nestingLevelCounts[n]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=0;i<this._length;i++)e[i]=this._startIndexes[i],t[i]=this._endIndexes[i];return new b(e,t,this._types)}{let e=0,t=this._nestingLevelCounts.length;for(let r=0;r<this._nestingLevelCounts.length;r++){let i=this._nestingLevelCounts[r];if(i){if(i+e>this._foldingRangesLimit){t=r;break}e+=i}}let i=new Uint32Array(this._foldingRangesLimit),n=new Uint32Array(this._foldingRangesLimit),o=[];for(let r=0,s=0;r<this._length;r++){let a=this._nestingLevels[r];(a<t||a===t&&e++<this._foldingRangesLimit)&&(i[s]=this._startIndexes[r],n[s]=this._endIndexes[r],o[s]=this._types[r],s++)}return new b(i,n,o)}}}function X(e,t){let i=e.sort((e,t)=>{let i=e.start-t.start;return 0===i&&(i=e.rank-t.rank),i}),n=new z(t),o=void 0,r=[];for(let s of i)if(o){if(s.start>o.start)if(s.end<=o.end)r.push(o),o=s,n.add(s.start,s.end,s.kind&&s.kind.value,r.length);else{if(s.start>o.end){do{o=r.pop()}while(o&&s.start>o.end);o&&r.push(o),o=s}n.add(s.start,s.end,s.kind&&s.kind.value,r.length)}}else o=s,n.add(s.start,s.end,s.kind&&s.kind.value,r.length);return n.toIndentRanges()}const Z="init";class J{constructor(e,t,i,n){if(this.editorModel=e,this.id=Z,t.length){let o=t=>({range:{startLineNumber:t.startLineNumber,startColumn:0,endLineNumber:t.endLineNumber,endColumn:e.getLineLength(t.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(o)),this.timeout=setTimeout(i,n)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),"number"===typeof this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let i of this.decorationIds){let e=this.editorModel.getDecorationRange(i);e&&t.push({start:e.startLineNumber,end:e.endLineNumber,rank:1})}return Promise.resolve(X(t,Number.MAX_VALUE))}}var Q=i("dff7"),Y=i("4fc3"),ee=i("303e"),te=i("b7d0"),ie=i("561a"),ne=i("bf5b");const oe=Object(ne["b"])("folding-expanded",ie["b"].chevronDown,Object(Q["a"])("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),re=Object(ne["b"])("folding-collapsed",ie["b"].chevronRight,Object(Q["a"])("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class se{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?se.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?se.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:se.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?se.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:se.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}se.COLLAPSED_VISUAL_DECORATION=T["b"].register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:te["d"].asClassName(re)}),se.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=T["b"].register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:te["d"].asClassName(re)}),se.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=T["b"].register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:te["d"].asClassName(oe)}),se.EXPANDED_VISUAL_DECORATION=T["b"].register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+te["d"].asClassName(oe)}),se.HIDDEN_RANGE_DECORATION=T["b"].register({description:"folding-hidden-range-decoration",stickiness:1});var ae=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},de=function(e,t){return function(i,n){t(i,n,e)}};const le=new Y["c"]("foldingEnabled",!1);let ce=class e extends s["a"]{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new s["b"]),this.editor=e;const i=this.editor.getOptions();this._isEnabled=i.get(37),this._useFoldingProviders="indentation"!==i.get(38),this._unfoldOnClickAfterEndOfLine=i.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=i.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new se(e),this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===i.get(98),this.foldingDecorationProvider.showFoldingHighlights=i.get(39),this.foldingEnabled=le.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(e=>{if(e.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(98)||e.hasChanged(39)){const e=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===e.get(98),this.foldingDecorationProvider.showFoldingHighlights=e.get(39),this.onModelContentChanged()}e.hasChanged(38)&&(this._useFoldingProviders="indentation"!==this.editor.getOptions().get(38),this.onFoldingStrategyChanged()),e.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),e.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(t){return t.getContribution(e.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)return;if(!e||e.lineCount!==t.getLineCount())return;if(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions)return;e.provider!==G&&e.provider!==Z||(this.foldingStateMemento=e);const i=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(i)){const e=this.getFoldingModel();e&&e.then(e=>{if(e){this._restoringViewState=!0;try{e.applyMemento(i)}finally{this._restoringViewState=!1}}}).then(void 0,o["f"])}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();this._isEnabled&&e&&!e.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new C(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new E(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(e=>this.onHiddenRangesChanges(e))),this.updateScheduler=new n["a"](200),this.cursorChangedScheduler=new n["e"](()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(u["o"].onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(()=>this.onModelContentChanged())),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(e=>this.onEditorMouseDown(e))),this.localToDispose.add(this.editor.onMouseUp(e=>this.onEditorMouseUp(e))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.onModelContentChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new H(e),this._useFoldingProviders&&this.foldingModel){let t=u["o"].ordered(this.foldingModel.textModel);if(0===t.length&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions){const t=this.rangeProvider=new J(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);return t}t.length>0&&(this.rangeProvider=new $(e,t,()=>this.onModelContentChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onModelContentChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let i=this.foldingRegionPromise=Object(n["h"])(e=>t.compute(e));return i.then(t=>{if(t&&i===this.foldingRegionPromise){let i;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const e=t.setCollapsedAllOfType(u["n"].Imports.value,!0);e&&(i=l["c"].capture(this.editor),this._currentModelHasFoldedImports=e)}let n=this.editor.getSelections(),o=n?n.map(e=>e.startLineNumber):[];e.update(t,o),i&&i.restore(this.editor)}return e})}).then(void 0,e=>(Object(o["f"])(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let e=this.editor.getSelections();e&&this.hiddenRangeModel.adjustSelections(e)&&this.editor.setSelections(e)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(e=>{if(e){let t=this.editor.getSelections();if(t&&t.length>0){let i=[];for(let n of t){let t=n.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(t)&&i.push(...e.getAllRegionsAtLine(t,e=>e.isCollapsed&&t>e.startLineNumber))}i.length&&(e.toggleCollapseState(i),this.reveal(t[0].getPosition()))}}}).then(void 0,o["f"])}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range)return;if(!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:const n=e.target.detail,o=e.target.element.offsetLeft,r=n.offsetX-o;if(r<5)return;i=!0;break;case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){const t=e.target.detail;if(!t.isAfterLines)break}return;case 6:if(this.hiddenRangeModel.hasRanges()){let e=this.editor.getModel();if(e&&t.startColumn===e.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let i=this.mouseDownInfo.lineNumber,n=this.mouseDownInfo.iconClicked,r=e.target.range;if(r&&r.startLineNumber===i){if(n){if(4!==e.target.type)return}else{let e=this.editor.getModel();if(!e||r.startColumn!==e.getLineMaxColumn(i))return}t.then(t=>{if(t){let o=t.getRegionAtLine(i);if(o&&o.startLineNumber===i){let r=o.isCollapsed;if(n||r){let n=e.event.altKey,s=[];if(n){let e=e=>!e.containedBy(o)&&!o.containedBy(e),i=t.getRegionsInside(null,e);for(const t of i)t.isCollapsed&&s.push(t);0===s.length&&(s=i)}else{let i=e.event.middleButton||e.event.shiftKey;if(i)for(const e of t.getRegionsInside(o))e.isCollapsed===r&&s.push(e);!r&&i&&0!==s.length||s.push(o)}t.toggleCollapseState(s),this.reveal({lineNumber:i,column:1})}}}}).then(void 0,o["f"])}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};ce.ID="editor.contrib.folding",ce=ae([de(1,Y["b"])],ce);class he extends c["b"]{runEditorCommand(e,t,i){let n=ce.get(t);if(!n)return;let o=n.getFoldingModel();return o?(this.reportTelemetry(e,t),o.then(e=>{if(e){this.invoke(n,e,t,i);const o=t.getSelection();o&&n.reveal(o.getStartPosition())}})):void 0}getSelectedLines(e){let t=e.getSelections();return t?t.map(e=>e.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(e=>e+1):this.getSelectedLines(t)}run(e,t){}}function ue(e){if(!d["m"](e)){if(!d["k"](e))return!1;const t=e;if(!d["m"](t.levels)&&!d["j"](t.levels))return!1;if(!d["m"](t.direction)&&!d["l"](t.direction))return!1;if(!d["m"](t.selectionLines)&&(!d["f"](t.selectionLines)||!t.selectionLines.every(d["j"])))return!1}return!0}class ge extends he{constructor(){super({id:"editor.unfold",label:Q["a"]("unfoldAction.label","Unfold"),alias:"Unfold",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:ue,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){let o=n&&n.levels||1,r=this.getLineNumbers(n,i);n&&"up"===n.direction?k(t,!1,o,r):w(t,!1,o,r)}}class fe extends he{constructor(){super({id:"editor.unfoldRecursively",label:Q["a"]("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(r["c"])(2089,2137),weight:100}})}invoke(e,t,i,n){w(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class pe extends he{constructor(){super({id:"editor.fold",label:Q["a"]("foldAction.label","Fold"),alias:"Fold",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:ue,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){let o=this.getLineNumbers(n,i);const r=n&&n.levels,s=n&&n.direction;"number"!==typeof r&&"string"!==typeof s?M(t,!0,o):"up"===s?k(t,!0,r||1,o):w(t,!0,r||1,o)}}class _e extends he{constructor(){super({id:"editor.toggleFold",label:Q["a"]("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(r["c"])(2089,2090),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);y(t,1,n)}}class me extends he{constructor(){super({id:"editor.foldRecursively",label:Q["a"]("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(r["c"])(2089,2135),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);w(t,!0,Number.MAX_VALUE,n)}}class be extends he{constructor(){super({id:"editor.foldAllBlockComments",label:Q["a"]("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(r["c"])(2089,2133),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())x(t,u["n"].Comment.value,!0);else{const e=i.getModel();if(!e)return;const n=g["b"].getComments(e.getLanguageId());if(n&&n.blockCommentStartToken){let e=new RegExp("^\\s*"+Object(a["t"])(n.blockCommentStartToken));R(t,e,!0)}}}}class ve extends he{constructor(){super({id:"editor.foldAllMarkerRegions",label:Q["a"]("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(r["c"])(2089,2077),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())x(t,u["n"].Region.value,!0);else{const e=i.getModel();if(!e)return;const n=g["b"].getFoldingRules(e.getLanguageId());if(n&&n.markers&&n.markers.start){let e=new RegExp(n.markers.start);R(t,e,!0)}}}}class Ce extends he{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:Q["a"]("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(r["c"])(2089,2078),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())x(t,u["n"].Region.value,!1);else{const e=i.getModel();if(!e)return;const n=g["b"].getFoldingRules(e.getLanguageId());if(n&&n.markers&&n.markers.start){let e=new RegExp(n.markers.start);R(t,e,!1)}}}}class ye extends he{constructor(){super({id:"editor.foldAllExcept",label:Q["a"]("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(r["c"])(2089,2131),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);O(t,!0,n)}}class we extends he{constructor(){super({id:"editor.unfoldAllExcept",label:Q["a"]("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(r["c"])(2089,2129),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);O(t,!1,n)}}class ke extends he{constructor(){super({id:"editor.foldAll",label:Q["a"]("foldAllAction.label","Fold All"),alias:"Fold All",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(r["c"])(2089,2069),weight:100}})}invoke(e,t,i){w(t,!0)}}class Me extends he{constructor(){super({id:"editor.unfoldAll",label:Q["a"]("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(r["c"])(2089,2088),weight:100}})}invoke(e,t,i){w(t,!1)}}class De extends he{getFoldingLevel(){return parseInt(this.id.substr(De.ID_PREFIX.length))}invoke(e,t,i){D(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}De.ID_PREFIX="editor.foldLevel",De.ID=e=>De.ID_PREFIX+e;class Oe extends he{constructor(){super({id:"editor.gotoParentFold",label:Q["a"]("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let e=S(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}class Re extends he{constructor(){super({id:"editor.gotoPreviousFold",label:Q["a"]("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let e=L(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}class xe extends he{constructor(){super({id:"editor.gotoNextFold",label:Q["a"]("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let e=I(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}Object(c["l"])(ce.ID,ce),Object(c["j"])(ge),Object(c["j"])(fe),Object(c["j"])(pe),Object(c["j"])(me),Object(c["j"])(ke),Object(c["j"])(Me),Object(c["j"])(be),Object(c["j"])(ve),Object(c["j"])(Ce),Object(c["j"])(ye),Object(c["j"])(we),Object(c["j"])(_e),Object(c["j"])(Oe),Object(c["j"])(Re),Object(c["j"])(xe);for(let Ie=1;Ie<=7;Ie++)Object(c["m"])(new De({id:De.ID(Ie),label:Q["a"]("foldLevelAction.label","Fold Level {0}",Ie),alias:"Fold Level "+Ie,precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(r["c"])(2089,2048|21+Ie),weight:100}}));const Se=Object(ee["Cc"])("editor.foldBackground",{light:Object(ee["Rc"])(ee["V"],.3),dark:Object(ee["Rc"])(ee["V"],.3),hc:null},Q["a"]("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),Le=Object(ee["Cc"])("editorGutter.foldingControlForeground",{dark:ee["jb"],light:ee["jb"],hc:ee["jb"]},Q["a"]("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));Object(te["f"])((e,t)=>{const i=e.getColor(Se);i&&t.addRule(`.monaco-editor .folded-background { background-color: ${i}; }`);const n=e.getColor(Le);n&&t.addRule(`\n\t\t.monaco-editor .cldr${te["d"].asCSSSelector(oe)},\n\t\t.monaco-editor .cldr${te["d"].asCSSSelector(re)} {\n\t\t\tcolor: ${n} !important;\n\t\t}\n\t\t`)})},"84df":function(e,t,i){"use strict";i.d(t,"b",(function(){return D})),i.d(t,"a",(function(){return R})),i.d(t,"c",(function(){return x})),i.d(t,"d",(function(){return L})),i.d(t,"e",(function(){return E}));var n=i("3813"),o=i("e8e3"),r=i("2504"),s=i("fdcc"),a=i("258a"),d=i("db88"),l=i("ef8e"),c=i("6d8e"),h=i("bc04"),u=i("b055"),g=i("7061"),f=i("6a89"),p=i("8025"),_=i("b707"),m=i("a40b"),b=i("b78f"),v=i("09db"),C=i("dff7"),y=i("9e74"),w=i("60d7"),k=i("0a0f"),M=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n["throw"](e))}catch(t){r(t)}}function d(e){e.done?i(e.value):o(e.value).then(s,a)}d((n=n.apply(e,t||[])).next())}))};function D(e){if(e=e.filter(e=>e.range),!e.length)return;let{range:t}=e[0];for(let n=1;n<e.length;n++)t=f["a"].plusRange(t,e[n].range);const{startLineNumber:i,endLineNumber:o}=t;i===o?1===e.length?Object(n["a"])(C["a"]("hint11","Made 1 formatting edit on line {0}",i)):Object(n["a"])(C["a"]("hintn1","Made {0} formatting edits on line {1}",e.length,i)):1===e.length?Object(n["a"])(C["a"]("hint1n","Made 1 formatting edit between lines {0} and {1}",i,o)):Object(n["a"])(C["a"]("hintnn","Made {0} formatting edits between lines {1} and {2}",e.length,i,o))}function O(e){const t=[],i=new Set,n=_["g"].ordered(e);for(const r of n)t.push(r),r.extensionId&&i.add(w["a"].toKey(r.extensionId));const o=_["j"].ordered(e);for(const r of o){if(r.extensionId){if(i.has(w["a"].toKey(r.extensionId)))continue;i.add(w["a"].toKey(r.extensionId))}t.push({displayName:r.displayName,extensionId:r.extensionId,provideDocumentFormattingEdits(e,t,i){return r.provideDocumentRangeFormattingEdits(e,e.getFullModelRange(),t,i)}})}return t}class R{static setFormatterSelector(e){const t=R._selectors.unshift(e);return{dispose:t}}static select(e,t,i){return M(this,void 0,void 0,(function*(){if(0===e.length)return;const n=a["a"].first(R._selectors);return n?yield n(e,t,i):void 0}))}}function x(e,t,i,n,o,r){return M(this,void 0,void 0,(function*(){const s=e.get(k["a"]),a=Object(u["b"])(t)?t.getModel():t,d=_["j"].ordered(a),l=yield R.select(d,a,n);l&&(o.report(l),yield s.invokeFunction(S,l,t,i,r))}))}function S(e,t,i,n,r){return M(this,void 0,void 0,(function*(){const s=e.get(m["a"]);let a,d;Object(u["b"])(i)?(a=i.getModel(),d=new h["b"](i,5,void 0,r)):(a=i,d=new h["d"](i,r));let l=[],c=0;for(let e of Object(o["c"])(n).sort(f["a"].compareRangesUsingStarts))c>0&&f["a"].areIntersectingOrTouching(l[c-1],e)?l[c-1]=f["a"].fromPositions(l[c-1].getStartPosition(),e.getEndPosition()):c=l.push(e);const g=e=>M(this,void 0,void 0,(function*(){return(yield t.provideDocumentRangeFormattingEdits(a,e,a.getFormattingOptions(),d.token))||[]})),_=(e,t)=>{if(!e.length||!t.length)return!1;const i=e.reduce((e,t)=>f["a"].plusRange(e,t.range),e[0].range);if(!t.some(e=>f["a"].intersectRanges(i,e.range)))return!1;for(let n of e)for(let e of t)if(f["a"].intersectRanges(n.range,e.range))return!0;return!1},b=[],C=[];try{for(let e of l){if(d.token.isCancellationRequested)return!0;C.push(yield g(e))}for(let e=0;e<l.length;++e)for(let t=e+1;t<l.length;++t){if(d.token.isCancellationRequested)return!0;if(_(C[e],C[t])){const i=f["a"].plusRange(l[e],l[t]),n=yield g(i);l.splice(t,1),l.splice(e,1),l.push(i),C.splice(t,1),C.splice(e,1),C.push(n),e=0,t=0}}for(let e of C){if(d.token.isCancellationRequested)return!0;const t=yield s.computeMoreMinimalEdits(a.uri,e);t&&b.push(...t)}}finally{d.dispose()}if(0===b.length)return!1;if(Object(u["b"])(i))v["a"].execute(i,b,!0),D(b),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{const[{range:e}]=b,t=new p["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);a.pushEditOperations([t],b.map(e=>({text:e.text,range:f["a"].lift(e.range),forceMoveMarkers:!0})),e=>{for(const{range:i}of e)if(f["a"].areIntersectingOrTouching(i,t))return[new p["a"](i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null})}return!0}))}function L(e,t,i,n,o){return M(this,void 0,void 0,(function*(){const r=e.get(k["a"]),s=Object(u["b"])(t)?t.getModel():t,a=O(s),d=yield R.select(a,s,i);d&&(n.report(d),yield r.invokeFunction(I,d,t,i,o))}))}function I(e,t,i,n,o){return M(this,void 0,void 0,(function*(){const r=e.get(m["a"]);let s,a,d;Object(u["b"])(i)?(s=i.getModel(),a=new h["b"](i,5,void 0,o)):(s=i,a=new h["d"](i,o));try{const e=yield t.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token);if(d=yield r.computeMoreMinimalEdits(s.uri,e),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!d||0===d.length)return!1;if(Object(u["b"])(i))v["a"].execute(i,d,2!==n),2!==n&&(D(d),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1));else{const[{range:e}]=d,t=new p["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);s.pushEditOperations([t],d.map(e=>({text:e.text,range:f["a"].lift(e.range),forceMoveMarkers:!0})),e=>{for(const{range:i}of e)if(f["a"].areIntersectingOrTouching(i,t))return[new p["a"](i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null})}return!0}))}function N(e,t,i,n,r){return M(this,void 0,void 0,(function*(){const a=_["j"].ordered(t);for(const d of a){let a=yield Promise.resolve(d.provideDocumentRangeFormattingEdits(t,i,n,r)).catch(s["g"]);if(Object(o["n"])(a))return yield e.computeMoreMinimalEdits(t.uri,a)}}))}function P(e,t,i,n){return M(this,void 0,void 0,(function*(){const r=O(t);for(const a of r){let r=yield Promise.resolve(a.provideDocumentFormattingEdits(t,i,n)).catch(s["g"]);if(Object(o["n"])(r))return yield e.computeMoreMinimalEdits(t.uri,r)}}))}function E(e,t,i,n,o){const a=_["x"].ordered(t);return 0===a.length||a[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,n,o,r["a"].None)).catch(s["g"]).then(i=>e.computeMoreMinimalEdits(t.uri,i))}R._selectors=new d["a"],y["a"].registerCommand("_executeFormatRangeProvider",(function(e,...t){return M(this,void 0,void 0,(function*(){const[i,n,o]=t;Object(l["c"])(c["a"].isUri(i)),Object(l["c"])(f["a"].isIRange(n));const s=e.get(b["a"]),a=e.get(m["a"]),d=yield s.createModelReference(i);try{return N(a,d.object.textEditorModel,f["a"].lift(n),o,r["a"].None)}finally{d.dispose()}}))})),y["a"].registerCommand("_executeFormatDocumentProvider",(function(e,...t){return M(this,void 0,void 0,(function*(){const[i,n]=t;Object(l["c"])(c["a"].isUri(i));const o=e.get(b["a"]),s=e.get(m["a"]),a=yield o.createModelReference(i);try{return P(s,a.object.textEditorModel,n,r["a"].None)}finally{a.dispose()}}))})),y["a"].registerCommand("_executeFormatOnTypeProvider",(function(e,...t){return M(this,void 0,void 0,(function*(){const[i,n,o,r]=t;Object(l["c"])(c["a"].isUri(i)),Object(l["c"])(g["a"].isIPosition(n)),Object(l["c"])("string"===typeof o);const s=e.get(b["a"]),a=e.get(m["a"]),d=yield s.createModelReference(i);try{return E(a,d.object.textEditorModel,g["a"].lift(n),o,r)}finally{d.dispose()}}))}))},9343:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return o}));class n{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}class o{constructor(e,t,i){this.priority=e,this.owner=t,this.range=i,this.type=2}equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,t){return 2===e.type&&this.owner===e.owner}}},"958f":function(e,t,i){"use strict";i.d(t,"a",(function(){return ne})),i.d(t,"b",(function(){return re}));var n=i("561a"),o=i("a666"),r=i("b2cc"),s=i("5717"),a=i("7061"),d=i("6a89"),l=i("c101"),c=i("e8e3"),h=i("308f"),u=i("db88"),g=i("3742"),f=i("6d8e"),p=i("f5f3"),_=i("0a0f"),m=i("b400"),b=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},v=function(e,t){return function(i,n){t(i,n,e)}};class C{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let y=class e{constructor(t,i){this._markerService=i,this._onDidChange=new h["b"],this.onDidChange=this._onDidChange.event,this._dispoables=new o["b"],this._markers=[],this._nextIdx=-1,f["a"].isUri(t)?this._resourceFilter=e=>e.toString()===t.toString():t&&(this._resourceFilter=t);const n=()=>{this._markers=this._markerService.read({resource:f["a"].isUri(t)?t:void 0,severities:m["c"].Error|m["c"].Warning|m["c"].Info}),"function"===typeof t&&(this._markers=this._markers.filter(e=>this._resourceFilter(e.resource))),this._markers.sort(e._compareMarker)};n(),this._dispoables.add(i.onMarkerChanged(e=>{this._resourceFilter&&!e.some(e=>this._resourceFilter(e))||(n(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new C(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let n=!1,o=this._markers.findIndex(t=>t.resource.toString()===e.uri.toString());o<0&&(o=Object(c["d"])(this._markers,{resource:e.uri},(e,t)=>Object(g["f"])(e.resource.toString(),t.resource.toString())),o<0&&(o=~o));for(let r=o;r<this._markers.length;r++){let i=d["a"].lift(this._markers[r]);if(i.isEmpty()){const t=e.getWordAtPosition(i.getStartPosition());t&&(i=new d["a"](i.startLineNumber,t.startColumn,i.startLineNumber,t.endColumn))}if(t&&(i.containsPosition(t)||t.isBeforeOrEqual(i.getStartPosition()))){this._nextIdx=r,n=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}n||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(0===this._markers.length)return!1;let n=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),n!==this._nextIdx}find(e,t){let i=this._markers.findIndex(t=>t.resource.toString()===e.toString());if(!(i<0))for(;i<this._markers.length;i++)if(d["a"].containsPosition(this._markers[i],t))return new C(this._markers[i],i+1,this._markers.length)}static _compareMarker(e,t){let i=Object(g["f"])(e.resource.toString(),t.resource.toString());return 0===i&&(i=m["c"].compare(e.severity,t.severity)),0===i&&(i=d["a"].compareRangesUsingStarts(e,t)),i}};y=b([v(1,m["b"])],y);const w=Object(_["c"])("IMarkerNavigationService");let k=class{constructor(e){this._markerService=e,this._provider=new u["a"]}getMarkerList(e){for(let t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new y(e,this._markerService)}};k=b([v(0,m["b"])],k),Object(p["b"])(w,k,!0);var M=i("dff7"),D=i("7e32"),O=i("4fc3"),R=i("bf5b"),x=i("11f7"),S=i("1898"),L=i("ceb8"),I=i("debc"),N=i("82c9"),P=(i("fe86"),i("88d4")),E=i("7944"),A=i("47cb"),j=i("5bd7"),T=i("4efb"),F=i("303e"),W=i("b7d0"),H=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},U=function(e,t){return function(i,n){t(i,n,e)}};class V{constructor(e,t,i,n,r){this._openerService=n,this._labelService=r,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new o["b"],this._editor=t;const s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(x["o"](this._relatedBlock,"click",e=>{e.preventDefault();const t=this._relatedDiagnostics.get(e.target);t&&i(t)})),this._scrollable=new S["b"](s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(e=>{s.style.left=`-${e.scrollLeft}px`,s.style.top=`-${e.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){Object(o["f"])(this._disposables)}update(e){const{source:t,message:i,relatedInformation:n,code:o}=e;let r=((null===t||void 0===t?void 0:t.length)||0)+"()".length;o&&(r+="string"===typeof o?o.length:o.value.length);const s=Object(g["Q"])(i);this._lines=s.length,this._longestLineLength=0;for(const c of s)this._longestLineLength=Math.max(c.length+r,this._longestLineLength);x["t"](this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let a=this._messageBlock;for(const c of s)a=document.createElement("div"),a.innerText=c,""===c&&(a.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(a);if(t||o){const e=document.createElement("span");if(e.classList.add("details"),a.appendChild(e),t){const i=document.createElement("span");i.innerText=t,i.classList.add("source"),e.appendChild(i)}if(o)if("string"===typeof o){const t=document.createElement("span");t.innerText=`(${o})`,t.classList.add("code"),e.appendChild(t)}else{this._codeLink=x["a"]("a.code-link"),this._codeLink.setAttribute("href",""+o.target.toString()),this._codeLink.onclick=e=>{this._openerService.open(o.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};const t=x["q"](this._codeLink,x["a"]("span"));t.innerText=o.value,e.appendChild(this._codeLink)}}if(x["t"](this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Object(c["n"])(n)){const e=this._relatedBlock.appendChild(document.createElement("div"));e.style.paddingTop=Math.floor(.66*this._editor.getOption(58))+"px",this._lines+=1;for(const t of n){let i=document.createElement("div"),n=document.createElement("a");n.classList.add("filename"),n.innerText=`${Object(I["a"])(t.resource)}(${t.startLineNumber}, ${t.startColumn}): `,n.title=this._labelService.getUriLabel(t.resource),this._relatedDiagnostics.set(n,t);let o=document.createElement("span");o.innerText=t.message,i.appendChild(n),i.appendChild(o),this._lines+=1,e.appendChild(i)}}const d=this._editor.getOption(43),l=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:l,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=e+"px",this._scrollable.getDomNode().style.width=t+"px",this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case m["c"].Error:t=M["a"]("Error","Error");break;case m["c"].Warning:t=M["a"]("Warning","Warning");break;case m["c"].Info:t=M["a"]("Info","Info");break;case m["c"].Hint:t=M["a"]("Hint","Hint");break}let i=M["a"]("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const n=this._editor.getModel();if(n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1){const t=n.getLineContent(e.startLineNumber);i=`${t}, ${i}`}return i}}let K=class e extends P["c"]{constructor(e,t,i,n,r,s,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},r),this._themeService=t,this._openerService=i,this._menuService=n,this._contextKeyService=s,this._labelService=a,this._callOnDispose=new o["b"],this._onDidSelectRelatedInformation=new h["b"],this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=m["c"].Warning,this._backgroundColor=L["a"].white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(Y);let t=q,i=z;this._severity===m["c"].Warning?(t=X,i=Z):this._severity===m["c"].Info&&(t=J,i=Q);const n=e.getColor(t),o=e.getColor(i);this.style({arrowColor:n,frameColor:n,headerBackgroundColor:o,primaryHeadingColor:e.getColor(P["q"]),secondaryHeadingColor:e.getColor(P["r"])})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(t){super._fillHead(t),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(e=>this.editor.focus()));const i=[],n=this._menuService.createMenu(e.TitleMenu,this._contextKeyService);Object(E["c"])(n,void 0,i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=x["q"](e,x["a"](""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new V(this._container,this.editor,e=>this._onDidSelectRelatedInformation.fire(e),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let n=d["a"].lift(e);const o=this.editor.getPosition();let r=o&&n.containsPosition(o)?o:n.getStartPosition();super.show(r,this.computeRequiredHeight());const s=this.editor.getModel();if(s){const e=i>1?M["a"]("problems","{0} of {1} problems",t,i):M["a"]("change","{0} of {1} problem",t,i);this.setTitle(Object(N["b"])(s.uri),e)}this._icon.className="codicon "+T["a"].className(m["c"].toSeverity(this._severity)),this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=e+"px"}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};K.TitleMenu=new D["b"]("gotoErrorTitleMenu"),K=H([U(1,W["b"]),U(2,j["a"]),U(3,D["a"]),U(4,_["a"]),U(5,O["b"]),U(6,A["a"])],K);let B=Object(F["nc"])(F["u"],F["t"]),G=Object(F["nc"])(F["bb"],F["ab"]),$=Object(F["nc"])(F["M"],F["L"]);const q=Object(F["Cc"])("editorMarkerNavigationError.background",{dark:B,light:B,hc:F["h"]},M["a"]("editorMarkerNavigationError","Editor marker navigation widget error color.")),z=Object(F["Cc"])("editorMarkerNavigationError.headerBackground",{dark:Object(F["Rc"])(q,.1),light:Object(F["Rc"])(q,.1),hc:null},M["a"]("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),X=Object(F["Cc"])("editorMarkerNavigationWarning.background",{dark:G,light:G,hc:F["h"]},M["a"]("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),Z=Object(F["Cc"])("editorMarkerNavigationWarning.headerBackground",{dark:Object(F["Rc"])(X,.1),light:Object(F["Rc"])(X,.1),hc:"#0C141F"},M["a"]("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),J=Object(F["Cc"])("editorMarkerNavigationInfo.background",{dark:$,light:$,hc:F["h"]},M["a"]("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),Q=Object(F["Cc"])("editorMarkerNavigationInfo.headerBackground",{dark:Object(F["Rc"])(J,.1),light:Object(F["Rc"])(J,.1),hc:null},M["a"]("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),Y=Object(F["Cc"])("editorMarkerNavigation.background",{dark:F["r"],light:F["r"],hc:F["r"]},M["a"]("editorMarkerNavigationBackground","Editor marker navigation widget background."));Object(W["f"])((e,t)=>{const i=e.getColor(F["Pc"]);i&&t.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${i}; }`);const n=e.getColor(F["Oc"]);n&&t.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${n}; }`)});var ee=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},te=function(e,t){return function(i,n){t(i,n,e)}},ie=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n["throw"](e))}catch(t){r(t)}}function d(e){e.done?i(e.value):o(e.value).then(s,a)}d((n=n.apply(e,t||[])).next())}))};let ne=class e{constructor(e,t,i,n,r){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=n,this._instantiationService=r,this._sessionDispoables=new o["b"],this._editor=e,this._widgetVisible=le.bindTo(this._contextKeyService)}static get(t){return t.getContribution(e.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(K,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e=>{var t,i,n;(null===(t=this._model)||void 0===t?void 0:t.selected)&&d["a"].containsPosition(null===(i=this._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(n=this._model)||void 0===n||n.resetIndex()})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:d["a"].lift(e).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new a["a"](e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(t,i){return ie(this,void 0,void 0,(function*(){if(this._editor.hasModel()){const n=this._getOrCreateModel(i?void 0:this._editor.getModel().uri);if(n.move(t,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const o=yield this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);o&&(e.get(o).close(),e.get(o).nagivate(t,i))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}}))}};ne.ID="editor.contrib.markerController",ne=ee([te(1,w),te(2,O["b"]),te(3,s["a"]),te(4,_["a"])],ne);class oe extends r["b"]{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}run(e,t){return ie(this,void 0,void 0,(function*(){t.hasModel()&&ne.get(t).nagivate(this._next,this._multiFile)}))}}class re extends oe{constructor(){super(!0,!1,{id:re.ID,label:re.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:578,weight:100},menuOpts:{menuId:K.TitleMenu,title:re.LABEL,icon:Object(R["b"])("marker-navigation-next",n["b"].arrowDown,M["a"]("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}re.ID="editor.action.marker.next",re.LABEL=M["a"]("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class se extends oe{constructor(){super(!1,!1,{id:se.ID,label:se.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:1602,weight:100},menuOpts:{menuId:K.TitleMenu,title:re.LABEL,icon:Object(R["b"])("marker-navigation-previous",n["b"].arrowUp,M["a"]("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}se.ID="editor.action.marker.prev",se.LABEL=M["a"]("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class ae extends oe{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:M["a"]("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:66,weight:100},menuOpts:{menuId:D["b"].MenubarGoMenu,title:M["a"]({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class de extends oe{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:M["a"]("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:1090,weight:100},menuOpts:{menuId:D["b"].MenubarGoMenu,title:M["a"]({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}Object(r["l"])(ne.ID,ne),Object(r["j"])(re),Object(r["j"])(se),Object(r["j"])(ae),Object(r["j"])(de);const le=new O["c"]("markersNavigationVisible",!1),ce=r["c"].bindToContribution(ne.get);Object(r["k"])(new ce({id:"closeMarkersNavigation",precondition:le,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:l["a"].focus,primary:9,secondary:[1033]}}))},aee8:function(e,t,i){"use strict";i.d(t,"a",(function(){return Me}));var n=i("fe45"),o=i("a666"),r=i("b2cc"),s=i("6a89"),a=i("c101"),d=i("5818"),l=i("1f84"),c=i("11f7"),h=i("c01d"),u=i("1b7d"),g=i("e8e3"),f=i("7061"),p=i("b57f"),_=i("b707"),m=i("2504"),b=i("ceb8"),v=i("6483"),C=i("92a6"),y=i("aed7"),w=i("58db"),k=i("b7d0"),M=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},D=function(e,t){return function(i,n){t(i,n,e)}},O=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n["throw"](e))}catch(t){r(t)}}function d(e){e.done?i(e.value):o(e.value).then(s,a)}d((n=n.apply(e,t||[])).next())}))};class R{constructor(e,t,i,n){this.owner=e,this.range=t,this.model=i,this.provider=n,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let x=class{constructor(e,t,i){this._editor=e,this._hover=t,this._themeService=i}computeSync(e,t){return[]}computeAsync(e,t,i){return O(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return[];const e=C["a"].get(this._editor);for(const i of t){if("color-detector-color"!==i.options.description)continue;const t=e.getColorData(i.range.getStartPosition());if(t){const e=yield this._createColorHover(this._editor.getModel(),t.colorInfo,t.provider);return[e]}}return[]}))}_createColorHover(e,t,i){return O(this,void 0,void 0,(function*(){const n=e.getValueInRange(t.range),{red:o,green:r,blue:a,alpha:d}=t.color,l=new b["c"](Math.round(255*o),Math.round(255*r),Math.round(255*a),d),c=new b["a"](l),h=yield Object(v["a"])(e,t,i,m["a"].None),u=new y["a"](c,[],0);return u.colorPresentations=h||[],u.guessColorPresentation(c,n),new R(this,s["a"].lift(t.range),u,i)}))}renderHoverParts(e,t,i){if(0===e.length||!this._editor.hasModel())return o["a"].None;const n=new o["b"],r=e[0],a=this._editor.getModel(),d=r.model,l=n.add(new w["a"](t,d,this._editor.getOption(127),this._themeService));let c=new s["a"](r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);const h=()=>{let e,t;if(d.presentation.textEdit){e=[d.presentation.textEdit],t=new s["a"](d.presentation.textEdit.range.startLineNumber,d.presentation.textEdit.range.startColumn,d.presentation.textEdit.range.endLineNumber,d.presentation.textEdit.range.endColumn);const i=this._editor.getModel()._setTrackedRange(null,t,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e),t=this._editor.getModel()._getTrackedRange(i)||t}else e=[{identifier:null,range:c,text:d.presentation.label,forceMoveMarkers:!1}],t=c.setEndPosition(c.endLineNumber,c.startColumn+d.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e);d.presentation.additionalTextEdits&&(e=[...d.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",e),this._hover.hide()),this._editor.pushUndoStop(),c=t},u=e=>Object(v["a"])(a,{range:c,color:{red:e.rgba.r/255,green:e.rgba.g/255,blue:e.rgba.b/255,alpha:e.rgba.a}},r.provider,m["a"].None).then(e=>{d.colorPresentations=e||[]});return n.add(d.onColorFlushed(e=>{u(e).then(h)})),n.add(d.onDidChangeColor(u)),this._hover.setColorPicker(l),n}};x=M([D(2,k["b"])],x);var S=i("5fe7"),L=i("fdcc");class I{constructor(e,t,i,n,o){this._computer=e,this._state=0,this._hoverTime=o,this._firstWaitScheduler=new S["e"](()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new S["e"](()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new S["e"](()=>this._showLoadingMessage(),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=i,this._progressCallback=n}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=Object(S["h"])(e=>this._computer.computeAsync(e)),this._asyncComputationPromise.then(e=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(e)},e=>this._onError(e))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){3===this._state&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(e){e&&this._computer.onResult(e,!1),3===this._state&&(this._state=0,this._onComplete(this._computer.getResult()))}_onComplete(e){this._completeCallback(e)}_onError(e){this._errorCallback?this._errorCallback(e):Object(L["f"])(e)}_onProgress(e){this._progressCallback(e)}start(e){if(0===e)0===this._state&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._loadingMessageScheduler.cancel(),1===this._state&&this._firstWaitScheduler.cancel(),2===this._state&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),3===this._state&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}}var N=i("9343"),P=i("78bc"),E=i("bfa1");function A(e,t,i){const n=_["p"].ordered(e),o=n.map(n=>Promise.resolve(n.provideHover(e,t,i)).then(e=>e&&j(e)?e:void 0,e=>{Object(L["g"])(e)}));return Promise.all(o).then(g["e"])}function j(e){const t="undefined"!==typeof e.range,i="undefined"!==typeof e.contents&&e.contents&&e.contents.length>0;return t&&i}Object(r["n"])("_executeHoverProvider",(e,t)=>A(e,t,m["a"].None));var T=i("dff7"),F=i("fbba"),W=i("5bd7"),H=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},U=function(e,t){return function(i,n){t(i,n,e)}},V=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n["throw"](e))}catch(t){r(t)}}function d(e){e.done?i(e.value):o(e.value).then(s,a)}d((n=n.apply(e,t||[])).next())}))};const K=c["a"];class B{constructor(e,t,i){this.owner=e,this.range=t,this.contents=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let G=class{constructor(e,t,i,n,o){this._editor=e,this._hover=t,this._modeService=i,this._openerService=n,this._configurationService=o}createLoadingMessage(e){return new B(this,e.range,[(new P["a"]).appendText(T["a"]("modesContentHover.loading","Loading..."))])}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),r=[];for(const c of t){const t=c.range.startLineNumber===n?c.range.startColumn:1,i=c.range.endLineNumber===n?c.range.endColumn:o,a=c.options.hoverMessage;if(!a||Object(P["b"])(a))continue;const d=new s["a"](e.range.startLineNumber,t,e.range.startLineNumber,i);r.push(new B(this,d,Object(g["c"])(a)))}const a=i.getLineLength(n),d=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),l=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:d});return"number"===typeof l&&a>=l&&r.push(new B(this,e.range,[{value:T["a"]("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),r}computeAsync(e,t,i){return V(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||1!==e.type)return Promise.resolve([]);const t=this._editor.getModel();if(!_["p"].has(t))return Promise.resolve([]);const n=yield A(t,new f["a"](e.range.startLineNumber,e.range.startColumn),i),o=[];for(const i of n){if(Object(P["b"])(i.contents))continue;const t=i.range?s["a"].lift(i.range):e.range;o.push(new B(this,t,i.contents))}return o}))}renderHoverParts(e,t,i){const n=new o["b"];for(const o of e)for(const e of o.contents){if(Object(P["b"])(e))continue;const i=K("div.hover-row.markdown-hover"),o=c["q"](i,K("div.hover-contents")),r=n.add(new E["a"]({editor:this._editor},this._modeService,this._openerService));n.add(r.onDidRenderAsync(()=>{o.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const s=n.add(r.render(e));o.appendChild(s.element),t.appendChild(i)}return n}};G=H([U(2,d["a"]),U(3,W["a"]),U(4,F["a"])],G);var $=i("82c9"),q=i("efdb"),z=i("8495"),X=i("0b54"),Z=i("9e56"),J=i("958f"),Q=i("b400"),Y=i("b539"),ee=i("303e"),te=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ie=function(e,t){return function(i,n){t(i,n,e)}};const ne=c["a"];class oe{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const re={type:1,filter:{include:Z["b"].QuickFix}};let se=class{constructor(e,t,i,n){this._editor=e,this._hover=t,this._markerDecorationsService=i,this._openerService=n,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),r=[];for(const a of t){const t=a.range.startLineNumber===n?a.range.startColumn:1,d=a.range.endLineNumber===n?a.range.endColumn:o,l=this._markerDecorationsService.getMarker(i.uri,a);if(!l)continue;const c=new s["a"](e.range.startLineNumber,t,e.range.startLineNumber,d);r.push(new oe(this,c,l))}return r}renderHoverParts(e,t,i){if(!e.length)return o["a"].None;const n=new o["b"];e.forEach(e=>t.appendChild(this.renderMarkerHover(e,n)));const r=1===e.length?e[0]:e.sort((e,t)=>Q["c"].compare(e.marker.severity,t.marker.severity))[0];return this.renderMarkerStatusbar(r,i,n),n}renderMarkerHover(e,t){const i=ne("div.hover-row"),n=c["q"](i,ne("div.marker.hover-contents")),{source:o,message:r,code:s,relatedInformation:a}=e.marker;this._editor.applyFontInfo(n);const d=c["q"](n,ne("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=r,o||s)if(s&&"string"!==typeof s){const e=ne("span");if(o){const t=c["q"](e,ne("span"));t.innerText=o}const i=c["q"](e,ne("a.code-link"));i.setAttribute("href",s.target.toString()),t.add(c["i"](i,"click",e=>{this._openerService.open(s.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()}));const r=c["q"](i,ne("span"));r.innerText=s.value;const a=c["q"](n,e);a.style.opacity="0.6",a.style.paddingLeft="6px"}else{const e=c["q"](n,ne("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=o&&s?`${o}(${s})`:o||`(${s})`}if(Object(g["n"])(a))for(const{message:l,resource:h,startLineNumber:u,startColumn:g}of a){const e=c["q"](n,ne("div"));e.style.marginTop="8px";const i=c["q"](e,ne("a"));i.innerText=`${Object($["b"])(h)}(${u}, ${g}): `,i.style.cursor="pointer",t.add(c["i"](i,"click",e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(h,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:u,startColumn:g}}}).catch(L["f"])}));const o=c["q"](e,ne("span"));o.innerText=l,this._editor.applyFontInfo(o)}return i}renderMarkerStatusbar(e,t,i){if(e.marker.severity!==Q["c"].Error&&e.marker.severity!==Q["c"].Warning&&e.marker.severity!==Q["c"].Info||t.addAction({label:T["a"]("view problem","View Problem"),commandId:J["b"].ID,run:()=>{this._hover.hide(),J["a"].get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const n=t.append(ne("div"));this.recentMarkerCodeActionsInfo&&(Q["a"].makeKey(this.recentMarkerCodeActionsInfo.marker)===Q["a"].makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=T["a"]("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const r=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?o["a"].None:i.add(Object(S["i"])(()=>n.textContent=T["a"]("checkingForQuickFixes","Checking for quick fixes..."),200));n.textContent||(n.textContent=String.fromCharCode(160));const s=this.getCodeActions(e.marker);i.add(Object(o["i"])(()=>s.cancel())),s.then(s=>{if(r.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:s.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return s.dispose(),void(n.textContent=T["a"]("noQuickFixes","No quick fixes available"));n.style.display="none";let a=!1;i.add(Object(o["i"])(()=>{a||s.dispose()})),t.addAction({label:T["a"]("quick fixes","Quick Fix..."),commandId:X["e"].Id,run:e=>{a=!0;const t=X["f"].get(this._editor),i=c["D"](e);this._hover.hide(),t.showCodeActions(re,s,{x:i.left+6,y:i.top+i.height+6})}})},L["f"])}}getCodeActions(e){return Object(S["h"])(t=>Object(z["d"])(this._editor.getModel(),new s["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),re,Y["b"].None,t))}};se=te([ie(2,q["a"]),ie(3,W["a"])],se),Object(k["f"])((e,t)=>{const i=e.getColor(ee["Pc"]);i&&t.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${i}; }`);const n=e.getColor(ee["Oc"]);n&&t.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});var ae=i("1ec7"),de=i("4fc3"),le=i("0a0f"),ce=i("6dec"),he=i("4153"),ue=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ge=function(e,t){return function(i,n){t(i,n,e)}},fe=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n["throw"](e))}catch(t){r(t)}}function d(e){e.done?i(e.value):o(e.value).then(s,a)}d((n=n.apply(e,t||[])).next())}))};const pe=c["a"];let _e=class extends o["a"]{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=pe("div.hover-row.status-bar"),this.actionsElement=c["q"](this.hoverElement,pe("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(h["a"].render(this.actionsElement,e,i))}append(e){const t=c["q"](this.actionsElement,e);return this._hasContent=!0,t}};_e=ue([ge(0,ce["a"])],_e);class me{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(1!==t.type)return[];const i=e.getModel(),n=t.range.startLineNumber,o=i.getLineMaxColumn(n);return e.getLineDecorations(n).filter(e=>{if(e.options.isWholeLine)return!0;const i=e.range.startLineNumber===n?e.range.startColumn:1,r=e.range.endLineNumber===n?e.range.endColumn:o;return!(i>t.range.startColumn||t.range.endColumn>r)})}computeAsync(e){return fe(this,void 0,void 0,(function*(){const t=this._anchor;if(!this._editor.hasModel()||!t)return Promise.resolve([]);const i=me._getLineDecorations(this._editor,t),n=yield Promise.all(this._participants.map(n=>this._computeAsync(n,i,t,e)));return Object(g["k"])(n)}))}_computeAsync(e,t,i,n){return fe(this,void 0,void 0,(function*(){return e.computeAsync?e.computeAsync(i,t,n):[]}))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=me._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return Object(g["e"])(t)}onResult(e,t){this._result=t?e.concat(this._result):this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor)for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}return this._result.slice(0)}}let be=class e extends u["a"]{constructor(e,t,i,n,o){super(),this._hoverVisibleKey=t,this._keybindingService=n,this._contextKeyService=o,this.allowEditorOverflow=!0,this._participants=[i.createInstance(x,e,this),i.createInstance(G,e,this),i.createInstance(ae["a"],e,this),i.createInstance(se,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new h["b"]),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,e=>{e.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new me(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new I(this._computer,e=>this._withResult(e,!0),null,e=>this._withResult(e,!1),this._editor.getOption(52).delay),this._register(c["o"](this.getDomNode(),c["d"].FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(c["o"](this.getDomNode(),c["d"].BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(_["F"].onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return e.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(6===t)return!0;if(7===t){const t=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,i=e.target.detail;if(i&&!i.isAfterLines&&"number"===typeof i.horizontalDistanceToText&&i.horizontalDistanceToText<t)return!0}return!1}maybeShowAt(e){var t;const i=[];for(const n of this._participants)if("function"===typeof n.suggestHoverAnchor){const t=n.suggestHoverAnchor(e);t&&i.push(t)}if(this._shouldShowAt(e)&&e.target.range){const n=[...(null===(t=e.target.element)||void 0===t?void 0:t.classList.values())||[]].find(e=>e.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1,o=n?new s["a"](e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;i.push(new N["b"](0,o))}return 0!==i.length&&(i.sort((e,t)=>t.priority-e.priority),this._startShowingAt(i[0],0,!1),!0)}_showAt(e,t,i){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=i,i&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue(he["b"].Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){const e=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));e.forEach(e=>this._editor.applyFontInfo(e))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:i}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=t+"px",this._hover.contentsDomNode.style.lineHeight=""+i/t,this._hover.contentsDomNode.style.maxHeight=e+"px",this._hover.contentsDomNode.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px"}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,i){this._startShowingAt(new N["b"](0,e),t,i)}_startShowingAt(e,t,i){if(!this._lastAnchor||!this._lastAnchor.equals(e)){if(this._hoverOperation.cancel(),this._isVisible)if(this._showAtPosition&&this._lastAnchor&&e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition)){const t=this._messages.filter(t=>t.isValidForHoverAnchor(e));if(0===t.length)this.hide();else{if(t.length===this._messages.length)return;this._renderMessages(e,t)}}else this.hide();this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=i,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(t,i){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let n=1073741824,r=i[0].range,a=null,d=document.createDocumentFragment();const l=new o["b"],c=new Map;for(const e of i){n=Math.min(n,e.range.startColumn),r=s["a"].plusRange(r,e.range),e.forceShowAtRange&&(a=e.range),c.has(e.owner)||c.set(e.owner,[]);const t=c.get(e.owner);t.push(e)}const h=l.add(new _e(this._keybindingService));for(const[e,o]of c)l.add(e.renderHoverParts(o,d,h));h.hasContent&&d.appendChild(h.hoverElement),this._renderDisposable=l,d.hasChildNodes()&&(a?this._showAt(a.getStartPosition(),a,this._shouldFocus):this._showAt(new f["a"](t.range.startLineNumber,n),r,this._shouldFocus),this._updateContents(d)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,r?[{range:r,options:e._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};be.ID="editor.contrib.modesContentHoverWidget",be._DECORATION_OPTIONS=p["b"].register({description:"content-hover-highlight",className:"hoverHighlight"}),be=ue([ge(2,le["a"]),ge(3,ce["a"]),ge(4,de["b"])],be);const ve=c["a"];class Ce{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=e=>({value:e}),t=this._editor.getLineDecorations(this._lineNumber),i=[];if(!t)return i;for(const n of t){if(!n.options.glyphMarginClassName)continue;const t=n.options.glyphMarginHoverMessage;t&&!Object(P["b"])(t)&&i.push(...Object(g["c"])(t).map(e))}return i}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class ye extends u["a"]{constructor(e,t,i=W["b"]){super(),this._renderDisposeables=this._register(new o["b"]),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new h["b"]),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new E["a"]({editor:this._editor},t,i)),this._computer=new Ce(this._editor),this._hoverOperation=new I(this._computer,e=>this._withResult(e),void 0,e=>this._withResult(e),300),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return ye.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),n=this._editor.getScrollTop(),o=this._editor.getOption(58),r=this._hover.containerDomNode.clientHeight,s=i-n-(r-o)/2;this._hover.containerDomNode.style.left=t.glyphMarginLeft+t.glyphMarginWidth+"px",this._hover.containerDomNode.style.top=Math.max(Math.round(s),0)+"px"}_updateFont(){const e=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));e.forEach(e=>this._editor.applyFontInfo(e))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const n of t){const e=ve("div.hover-row.markdown-hover"),t=c["q"](e,ve("div.hover-contents")),o=this._renderDisposeables.add(this._markdownRenderer.render(n.value));t.appendChild(o.element),i.appendChild(e)}this._updateContents(i),this._showAt(e)}}ye.ID="editor.contrib.modesGlyphHoverWidget";var we=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ke=function(e,t){return function(i,n){t(i,n,e)}};let Me=class e{constructor(e,t,i,n,r){this._editor=e,this._instantiationService=t,this._openerService=i,this._modeService=n,this._toUnhook=new o["b"],this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(e=>{e.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=a["a"].hoverVisible.bindTo(r)}static get(t){return t.getContribution(e.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._toUnhook.add(this._editor.onMouseUp(e=>this._onEditorMouseUp(e))),this._toUnhook.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._toUnhook.add(this._editor.onKeyDown(e=>this._onKeyDown(e))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._toUnhook.add(this._editor.onKeyDown(e=>this._onKeyDown(e)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(e=>this._onEditorScrollChanged(e)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;null===(e=this._contentWidget)||void 0===e||e.onModelDecorationsChanged(),null===(t=this._glyphWidget)||void 0===t||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;9!==t||e.target.detail!==be.ID?12===t&&e.target.detail===ye.ID||(12!==t&&e.target.detail!==ye.ID&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,i,n,o,r;let s=e.target.type;if(this._isMouseDown&&this._hoverClicked)return;if(this._isHoverSticky&&9===s&&e.target.detail===be.ID)return;if(this._isHoverSticky&&!(null===(i=null===(t=e.event.browserEvent.view)||void 0===t?void 0:t.getSelection())||void 0===i?void 0:i.isCollapsed))return;if(!this._isHoverSticky&&9===s&&e.target.detail===be.ID&&(null===(n=this._contentWidget)||void 0===n?void 0:n.isColorPickerVisible()))return;if(this._isHoverSticky&&12===s&&e.target.detail===ye.ID)return;if(!this._isHoverEnabled)return void this._hideWidgets();const a=this._getOrCreateContentWidget();if(!a.maybeShowAt(e))return 2===s&&e.target.position?(null===(r=this._contentWidget)||void 0===r||r.hide(),this._glyphWidget||(this._glyphWidget=new ye(this._editor,this._modeService,this._openerService)),void this._glyphWidget.startShowingAt(e.target.position.lineNumber)):void this._hideWidgets();null===(o=this._glyphWidget)||void 0===o||o.hide()}_onKeyDown(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}_hideWidgets(){var e,t,i;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(i=this._contentWidget)||void 0===i||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(be,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,i){this._getOrCreateContentWidget().startShowingAtRange(e,t,i)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}};Me.ID="editor.contrib.hover",Me=we([ke(1,le["a"]),ke(2,W["a"]),ke(3,d["a"]),ke(4,de["b"])],Me);class De extends r["b"]{constructor(){super({id:"editor.action.showHover",label:T["a"]({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:a["a"].editorTextFocus,primary:Object(n["c"])(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let i=Me.get(t);if(!i)return;const n=t.getPosition(),o=new s["a"](n.lineNumber,n.column,n.lineNumber,n.column),r=2===t.getOption(2);i.showContentHover(o,1,r)}}class Oe extends r["b"]{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:T["a"]({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let i=Me.get(t);if(!i)return;const n=t.getPosition();if(!n)return;const o=new s["a"](n.lineNumber,n.column,n.lineNumber,n.column),r=l["a"].get(t),a=r.startFindDefinitionFromCursor(n);a.then(()=>{i.showContentHover(o,1,!0)})}}Object(r["l"])(Me.ID,Me),Object(r["j"])(De),Object(r["j"])(Oe),Object(k["f"])((e,t)=>{const i=e.getColor(ee["H"]);i&&t.addRule(`.monaco-editor .hoverHighlight { background-color: ${i}; }`);const n=e.getColor(ee["E"]);n&&t.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const o=e.getColor(ee["F"]);o&&(t.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${o}; }`),t.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${o.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${o.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${o.transparent(.5)}; }`));const r=e.getColor(ee["Pc"]);r&&t.addRule(`.monaco-editor .monaco-hover a { color: ${r}; }`);const s=e.getColor(ee["Oc"]);s&&t.addRule(`.monaco-editor .monaco-hover a:hover { color: ${s}; }`);const a=e.getColor(ee["G"]);a&&t.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const d=e.getColor(ee["I"]);d&&t.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${d}; }`);const l=e.getColor(ee["Nc"]);l&&t.addRule(`.monaco-editor .monaco-hover code { background-color: ${l}; }`)})},bd13:function(e,t,i){"use strict";i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return h})),i.d(t,"c",(function(){return u})),i.d(t,"e",(function(){return g})),i.d(t,"d",(function(){return f}));var n=i("2504"),o=i("fdcc"),r=i("b2cc"),s=i("b707"),a=i("f68e"),d=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n["throw"](e))}catch(t){r(t)}}function d(e){e.done?i(e.value):o(e.value).then(s,a)}d((n=n.apply(e,t||[])).next())}))};function l(e,t,i,n){const r=i.ordered(e),s=r.map(i=>Promise.resolve(n(i,e,t)).then(void 0,e=>{Object(o["g"])(e)}));return Promise.all(s).then(e=>{const t=[];for(let i of e)Array.isArray(i)?t.push(...i):i&&t.push(i);return t})}function c(e,t,i){return l(e,t,s["f"],(e,t,n)=>e.provideDefinition(t,n,i))}function h(e,t,i){return l(e,t,s["e"],(e,t,n)=>e.provideDeclaration(t,n,i))}function u(e,t,i){return l(e,t,s["q"],(e,t,n)=>e.provideImplementation(t,n,i))}function g(e,t,i){return l(e,t,s["G"],(e,t,n)=>e.provideTypeDefinition(t,n,i))}function f(e,t,i,n){return l(e,t,s["y"],(e,t,o)=>d(this,void 0,void 0,(function*(){const r=yield e.provideReferences(t,o,{includeDeclaration:!0},n);if(!i||!r||2!==r.length)return r;const s=yield e.provideReferences(t,o,{includeDeclaration:!1},n);return s&&1===s.length?s:r})))}function p(e){return d(this,void 0,void 0,(function*(){const t=yield e(),i=new a["c"](t,""),n=i.references.map(e=>e.link);return i.dispose(),n}))}Object(r["n"])("_executeDefinitionProvider",(e,t)=>p(()=>c(e,t,n["a"].None))),Object(r["n"])("_executeDeclarationProvider",(e,t)=>p(()=>h(e,t,n["a"].None))),Object(r["n"])("_executeImplementationProvider",(e,t)=>p(()=>u(e,t,n["a"].None))),Object(r["n"])("_executeTypeDefinitionProvider",(e,t)=>p(()=>g(e,t,n["a"].None))),Object(r["n"])("_executeReferenceProvider",(e,t)=>p(()=>f(e,t,!1,n["a"].None)))},eb687:function(e,t,i){},f187:function(e,t,i){"use strict";i.d(t,"a",(function(){return te}));var n=i("0f70"),o=i("3813"),r=i("5fe7"),s=i("fe45"),a=i("30db"),d=i("ef8e"),l=i("6d8e"),c=i("bc04"),h=i("b055"),u=i("b2cc"),g=i("5717"),f=i("d379"),p=i("7061"),_=i("6a89"),m=i("c101"),b=i("b707"),v=i("418f"),C=i("f68e"),y=i("308f"),w=i("a666"),k=i("82c9"),M=i("dff7"),D=i("4fc3"),O=i("f5f3"),R=i("0a0f"),x=i("6dec"),S=i("9eb8"),L=i("b0cd"),I=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},N=function(e,t){return function(i,n){t(i,n,e)}};const P=new D["c"]("hasSymbols",!1,Object(M["a"])("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),E=Object(R["c"])("ISymbolNavigationService");let A=class{constructor(e,t,i,n){this._editorService=t,this._notificationService=i,this._keybindingService=n,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=P.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1)return void this.reset();this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new j(this._editorService),n=i.onDidChange(e=>{if(this._ignoreEditorChange)return;const i=this._editorService.getActiveCodeEditor();if(!i)return;const n=i.getModel(),o=i.getPosition();if(!n||!o)return;let r=!1,s=!1;for(const a of t.references)if(Object(k["f"])(a.uri,n.uri))r=!0,s=s||_["a"].containsPosition(a.range,o);else if(r)break;r&&s||this.reset()});this._currentState=Object(w["e"])(i,n)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:_["a"].collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?Object(M["a"])("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):Object(M["a"])("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};A=I([N(0,D["b"]),N(1,g["a"]),N(2,L["a"]),N(3,x["a"])],A),Object(O["b"])(E,A,!0),Object(u["k"])(new class extends u["c"]{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:P,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,t){return e.get(E).revealNext(t)}}),S["a"].registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:P,primary:9,handler(e){e.get(E).reset()}});let j=class{constructor(e){this._listener=new Map,this._disposables=new w["b"],this._onDidChange=new y["b"],this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),Object(w["f"])(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Object(w["e"])(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}};j=I([N(0,g["a"])],j);var T,F,W,H,U,V,K,B,G=i("351f"),$=i("88d4"),q=i("7e32"),z=i("9e74"),X=i("b539"),Z=i("bd13"),J=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n["throw"](e))}catch(t){r(t)}}function d(e){e.done?i(e.value):o(e.value).then(s,a)}d((n=n.apply(e,t||[])).next())}))};q["d"].appendMenuItem(q["b"].EditorContext,{submenu:q["b"].EditorContextPeek,title:M["a"]("peek.submenu","Peek"),group:"navigation",order:100});const Q=new Set;function Y(e){const t=new e;return Object(u["m"])(t),Q.add(t.id),t}class ee extends u["b"]{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const i=e.get(L["a"]),n=e.get(g["a"]),s=e.get(X["a"]),a=e.get(E),d=t.getModel(),l=t.getPosition(),h=new c["b"](t,5),u=Object(r["l"])(this._getLocationModel(d,l,h.token),h.token).then(e=>J(this,void 0,void 0,(function*(){if(!e||h.token.isCancellationRequested)return;let i;if(Object(o["a"])(e.ariaMessage),e.referenceAt(d.uri,l)){const e=this._getAlternativeCommand(t);e!==this.id&&Q.has(e)&&(i=t.getAction(e))}const r=e.references.length;if(0===r){if(!this._configuration.muteMessage){const e=d.getWordAtPosition(l);G["a"].get(t).showMessage(this._getNoResultFoundMessage(e),l)}}else{if(1!==r||!i)return this._onResult(n,a,t,e);i.run()}})),e=>{i.error(e)}).finally(()=>{h.dispose()});return s.showWhile(u,250),u}_onResult(e,t,i,n){return J(this,void 0,void 0,(function*(){const o=this._getGoToPreference(i);if(i instanceof f["a"]||!(this._configuration.openInPeek||"peek"===o&&n.references.length>1)){const r=n.firstReference(),s=n.references.length>1&&"gotoAndPeek"===o,a=yield this._openReference(i,e,r,this._configuration.openToSide,!s);s&&a?this._openInPeek(a,n):n.dispose(),"goto"===o&&t.put(r)}else this._openInPeek(i,n)}))}_openReference(e,t,i,n,o){return J(this,void 0,void 0,(function*(){let r=void 0;if(Object(b["J"])(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;const s=yield t.openCodeEditor({resource:i.uri,options:{selection:_["a"].collapseToStart(r),selectionRevealType:3}},e,n);if(s){if(o){const e=s.getModel(),t=s.deltaDecorations([],[{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{s.getModel()===e&&s.deltaDecorations(t,[])},350)}return s}}))}_openInPeek(e,t){let i=v["a"].get(e);i&&e.hasModel()?i.toggleWidget(e.getSelection(),Object(r["h"])(e=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class te extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new C["c"](yield Object(Z["b"])(e,t,i),M["a"]("def.title","Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?M["a"]("noResultWord","No definition found for '{0}'",e.word):M["a"]("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const ie=a["h"]&&!n["i"]?2118:70;Y((T=class e extends te{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:M["a"]("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:D["a"].and(m["a"].hasDefinitionProvider,m["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:m["a"].editorTextFocus,primary:ie,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),z["a"].registerCommandAlias("editor.action.goToDeclaration",e.id)}},T.id="editor.action.revealDefinition",T)),Y((F=class e extends te{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:e.id,label:M["a"]("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:D["a"].and(m["a"].hasDefinitionProvider,m["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:m["a"].editorTextFocus,primary:Object(s["c"])(2089,ie),weight:100}}),z["a"].registerCommandAlias("editor.action.openDeclarationToTheSide",e.id)}},F.id="editor.action.revealDefinitionAside",F)),Y((W=class e extends te{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.id,label:M["a"]("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:D["a"].and(m["a"].hasDefinitionProvider,$["b"].notInPeekEditor,m["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:m["a"].editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:q["b"].EditorContextPeek,group:"peek",order:2}}),z["a"].registerCommandAlias("editor.action.previewDeclaration",e.id)}},W.id="editor.action.peekDefinition",W));class ne extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new C["c"](yield Object(Z["a"])(e,t,i),M["a"]("decl.title","Declarations"))}))}_getNoResultFoundMessage(e){return e&&e.word?M["a"]("decl.noResultWord","No declaration found for '{0}'",e.word):M["a"]("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}Y((H=class e extends ne{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:M["a"]("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:D["a"].and(m["a"].hasDeclarationProvider,m["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?M["a"]("decl.noResultWord","No declaration found for '{0}'",e.word):M["a"]("decl.generic.noResults","No declaration found")}},H.id="editor.action.revealDeclaration",H)),Y(class extends ne{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:M["a"]("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:D["a"].and(m["a"].hasDeclarationProvider,$["b"].notInPeekEditor,m["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:q["b"].EditorContextPeek,group:"peek",order:3}})}});class oe extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new C["c"](yield Object(Z["e"])(e,t,i),M["a"]("typedef.title","Type Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?M["a"]("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):M["a"]("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}Y((U=class e extends oe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:M["a"]("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:D["a"].and(m["a"].hasTypeDefinitionProvider,m["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:m["a"].editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},U.ID="editor.action.goToTypeDefinition",U)),Y((V=class e extends oe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:M["a"]("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:D["a"].and(m["a"].hasTypeDefinitionProvider,$["b"].notInPeekEditor,m["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:q["b"].EditorContextPeek,group:"peek",order:4}})}},V.ID="editor.action.peekTypeDefinition",V));class re extends ee{_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new C["c"](yield Object(Z["c"])(e,t,i),M["a"]("impl.title","Implementations"))}))}_getNoResultFoundMessage(e){return e&&e.word?M["a"]("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):M["a"]("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}Y((K=class e extends re{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:M["a"]("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:D["a"].and(m["a"].hasImplementationProvider,m["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:m["a"].editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},K.ID="editor.action.goToImplementation",K)),Y((B=class e extends re{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:M["a"]("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:D["a"].and(m["a"].hasImplementationProvider,$["b"].notInPeekEditor,m["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:m["a"].editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:q["b"].EditorContextPeek,group:"peek",order:5}})}},B.ID="editor.action.peekImplementation",B));class se extends ee{_getNoResultFoundMessage(e){return e?M["a"]("references.no","No references found for '{0}'",e.word):M["a"]("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}Y(class extends se{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:M["a"]("goToReferences.label","Go to References"),alias:"Go to References",precondition:D["a"].and(m["a"].hasReferenceProvider,$["b"].notInPeekEditor,m["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:m["a"].editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new C["c"](yield Object(Z["d"])(e,t,!0,i),M["a"]("ref.title","References"))}))}}),Y(class extends se{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:M["a"]("references.action.label","Peek References"),alias:"Peek References",precondition:D["a"].and(m["a"].hasReferenceProvider,$["b"].notInPeekEditor,m["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:q["b"].EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new C["c"](yield Object(Z["d"])(e,t,!1,i),M["a"]("ref.title","References"))}))}});class ae extends ee{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",label:M["a"]("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:D["a"].and($["b"].notInPeekEditor,m["a"].isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}_getLocationModel(e,t,i){return J(this,void 0,void 0,(function*(){return new C["c"](this._references,M["a"]("generic.title","Locations"))}))}_getNoResultFoundMessage(e){return e&&M["a"]("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}z["a"].registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:l["a"]},{name:"position",description:"The position at which to start",constraint:p["a"].isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(e,t,i,n,o,r,s)=>J(void 0,void 0,void 0,(function*(){Object(d["c"])(l["a"].isUri(t)),Object(d["c"])(p["a"].isIPosition(i)),Object(d["c"])(Array.isArray(n)),Object(d["c"])("undefined"===typeof o||"string"===typeof o),Object(d["c"])("undefined"===typeof s||"boolean"===typeof s);const a=e.get(g["a"]),c=yield a.openCodeEditor({resource:t},a.getFocusedCodeEditor());if(Object(h["b"])(c))return c.setPosition(i),c.revealPositionInCenterIfOutsideViewport(i,0),c.invokeWithinContext(e=>{const t=new class extends ae{_getNoResultFoundMessage(e){return r||super._getNoResultFoundMessage(e)}}({muteMessage:!Boolean(r),openInPeek:Boolean(s),openToSide:!1},n,o);e.get(R["a"]).invokeFunction(t.run.bind(t),c)})}))}),z["a"].registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:l["a"]},{name:"position",description:"The position at which to start",constraint:p["a"].isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(e,t,i,n,o)=>J(void 0,void 0,void 0,(function*(){e.get(z["b"]).executeCommand("editor.action.goToLocations",t,i,n,o,void 0,!0)}))}),z["a"].registerCommand({id:"editor.action.findReferences",handler:(e,t,i)=>{Object(d["c"])(l["a"].isUri(t)),Object(d["c"])(p["a"].isIPosition(i));const n=e.get(g["a"]);return n.openCodeEditor({resource:t},n.getFocusedCodeEditor()).then(e=>{if(!Object(h["b"])(e)||!e.hasModel())return;const t=v["a"].get(e);if(!t)return;const n=Object(r["h"])(t=>Object(Z["d"])(e.getModel(),p["a"].lift(i),!1,t).then(e=>new C["c"](e,M["a"]("ref.title","References")))),o=new _["a"](i.lineNumber,i.column,i.lineNumber,i.column);return Promise.resolve(t.toggleWidget(o,n,!1))})}}),z["a"].registerCommandAlias("editor.action.showReferences","editor.action.peekLocations"),q["d"].appendMenuItems([{id:q["b"].MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:M["a"]({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:q["b"].MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:M["a"]({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:q["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:M["a"]({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:q["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:M["a"]({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:q["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:M["a"]({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}])},f68e:function(e,t,i){"use strict";i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return p})),i.d(t,"c",(function(){return _}));var n=i("fdcc"),o=i("308f"),r=i("9c3e"),s=i("a666"),a=i("4035"),d=i("82c9"),l=i("3742"),c=i("6a89"),h=i("dff7"),u=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{d(n.next(e))}catch(t){r(t)}}function a(e){try{d(n["throw"](e))}catch(t){r(t)}}function d(e){e.done?i(e.value):o(e.value).then(s,a)}d((n=n.apply(e,t||[])).next())}))};class g{constructor(e,t,i,n){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=n,this.id=r["b"].nextId()}get uri(){return this.link.uri}get range(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?Object(h["a"])({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",Object(d["b"])(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):Object(h["a"])("aria.oneReference","symbol in {0} on line {1} at column {2}",Object(d["b"])(this.uri),this.range.startLineNumber,this.range.startColumn)}}class f{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:n,startColumn:o,endLineNumber:r,endColumn:s}=e,a=i.getWordUntilPosition({lineNumber:n,column:o-t}),d=new c["a"](n,a.startColumn,n,o),l=new c["a"](r,s,r,1073741824),h=i.getValueInRange(d).replace(/^\s+/,""),u=i.getValueInRange(e),g=i.getValueInRange(l).replace(/\s+$/,"");return{value:h+u+g,highlight:{start:h.length,end:h.length+u.length}}}}class p{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new a["b"]}dispose(){Object(s["f"])(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return 1===e?Object(h["a"])("aria.fileReferences.1","1 symbol in {0}, full path {1}",Object(d["b"])(this.uri),this.uri.fsPath):Object(h["a"])("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Object(d["b"])(this.uri),this.uri.fsPath)}resolve(e){return u(this,void 0,void 0,(function*(){if(0!==this._previews.size)return this;for(let i of this.children)if(!this._previews.has(i.uri))try{const t=yield e.createModelReference(i.uri);this._previews.set(i.uri,new f(t))}catch(t){Object(n["f"])(t)}return this}))}}class _{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new o["b"],this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;let n;e.sort(_._compareReferences);for(let o of e)if(n&&d["e"].isEqual(n.uri,o.uri,!0)||(n=new p(this,o.uri),this.groups.push(n)),0===n.children.length||0!==_._compareReferences(o,n.children[n.children.length-1])){const e=new g(i===o,n,o,e=>this._onDidChangeReferenceRange.fire(e));this.references.push(e),n.children.push(e)}}dispose(){Object(s["f"])(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new _(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?Object(h["a"])("aria.result.0","No results found"):1===this.references.length?Object(h["a"])("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?Object(h["a"])("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):Object(h["a"])("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:i}=e,n=i.children.indexOf(e),o=i.children.length,r=i.parent.groups.length;return 1===r||t&&n+1<o||!t&&n>0?(n=t?(n+1)%o:(n+o-1)%o,i.children[n]):(n=i.parent.groups.indexOf(i),t?(n=(n+1)%r,i.parent.groups[n].children[0]):(n=(n+r-1)%r,i.parent.groups[n].children[i.parent.groups[n].children.length-1]))}nearestReference(e,t){const i=this.references.map((i,n)=>({idx:n,prefixLen:l["d"](i.uri.toString(),e.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-t.lineNumber)+Math.abs(i.range.startColumn-t.column)})).sort((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&c["a"].containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return d["e"].compare(e.uri,t.uri)||c["a"].compareRangesUsingStarts(e.range,t.range)}}},fe86:function(e,t,i){}}]);