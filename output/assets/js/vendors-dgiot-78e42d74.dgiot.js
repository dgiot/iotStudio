/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2022年09月22日12时23分27秒
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors-dgiot-78e42d74"],{"0a89":function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return l}));var o=i("3742"),n=i("7061"),s=i("6a89");const r=!1;class a{constructor(e,t,i,o,n){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selectionStartPosition=o,this.selectionEndPosition=n}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new a(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new a(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,i){r&&console.log("writeToTextArea "+e+": "+this.toString()),t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const t=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,t,-1)}if(e>=this.selectionEnd){const t=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,t,1)}const t=this.value.substring(this.selectionStart,e);if(-1===t.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,-1)}_finishDeduceEditorPosition(e,t,i){let o=0,n=-1;while(-1!==(n=t.indexOf("\n",n+1)))o++;return[e,i*t.length,o]}static selectedText(e){return new a(e,0,e.length,null,null)}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};r&&(console.log("------------------------deduceInput"),console.log("PREVIOUS STATE: "+e.toString()),console.log("CURRENT STATE: "+t.toString()));let n=e.value,s=e.selectionStart,a=e.selectionEnd,l=t.value,c=t.selectionStart,u=t.selectionEnd;const d=n.substring(a),h=l.substring(u),p=o["e"](d,h);l=l.substring(0,l.length-p),n=n.substring(0,n.length-p);const m=n.substring(0,s),g=l.substring(0,c),f=o["d"](m,g);if(l=l.substring(f),n=n.substring(f),c-=f,s-=f,u-=f,a-=f,r&&(console.log("AFTER DIFFING PREVIOUS STATE: <"+n+">, selectionStart: "+s+", selectionEnd: "+a),console.log("AFTER DIFFING CURRENT STATE: <"+l+">, selectionStart: "+c+", selectionEnd: "+u)),i&&c===u&&n.length>0){let e=null;if(c===l.length?l.startsWith(n)&&(e=l.substring(n.length)):l.endsWith(n)&&(e=l.substring(0,l.length-n.length)),null!==e&&e.length>0&&(/\uFE0F/.test(e)||o["k"](e)))return{text:e,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(c===u){if(n===l&&0===s&&a===n.length&&c===l.length&&-1===l.indexOf("\n")&&o["l"](l))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const e=m.length-f;return r&&console.log("REMOVE PREVIOUS: "+(m.length-f)+" chars"),{text:l,replacePrevCharCnt:e,replaceNextCharCnt:0,positionDelta:0}}const _=a-s;return{text:l,replacePrevCharCnt:_,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(r&&(console.log("------------------------deduceAndroidCompositionInput"),console.log("PREVIOUS STATE: "+e.toString()),console.log("CURRENT STATE: "+t.toString())),e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(o["d"](e.value,t.value),e.selectionEnd),n=Math.min(o["e"](e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(i,e.value.length-n),a=t.value.substring(i,t.value.length-n),l=e.selectionStart-i,c=e.selectionEnd-i,u=t.selectionStart-i,d=t.selectionEnd-i;return r&&(console.log("AFTER DIFFING PREVIOUS STATE: <"+s+">, selectionStart: "+l+", selectionEnd: "+c),console.log("AFTER DIFFING CURRENT STATE: <"+a+">, selectionStart: "+u+", selectionEnd: "+d)),{text:a,replacePrevCharCnt:c,replaceNextCharCnt:s.length-c,positionDelta:d-a.length}}}a.EMPTY=new a("",0,0,null,null);class l{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,o=i+1,n=i+t;return new s["a"](o,1,n+1,1)}static fromEditorSelection(e,t,i,o,r){const c=l._getPageOfLine(i.startLineNumber,o),u=l._getRangeForPage(c,o),d=l._getPageOfLine(i.endLineNumber,o),h=l._getRangeForPage(d,o),p=u.intersectRanges(new s["a"](1,1,i.startLineNumber,i.startColumn));let m=t.getValueInRange(p,1);const g=t.getLineCount(),f=t.getLineMaxColumn(g),_=h.intersectRanges(new s["a"](i.endLineNumber,i.endColumn,g,f));let C,S=t.getValueInRange(_,1);if(c===d||c+1===d)C=t.getValueInRange(i,1);else{const e=u.intersectRanges(i),o=h.intersectRanges(i);C=t.getValueInRange(e,1)+String.fromCharCode(8230)+t.getValueInRange(o,1)}if(r){const e=500;m.length>e&&(m=m.substring(m.length-e,m.length)),S.length>e&&(S=S.substring(0,e)),C.length>2*e&&(C=C.substring(0,e)+String.fromCharCode(8230)+C.substring(C.length-e,C.length))}return new a(m+C+S,m.length,m.length+C.length,new n["a"](i.startLineNumber,i.startColumn),new n["a"](i.endLineNumber,i.endColumn))}}},"1ddc":function(e,t,i){"use strict";i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return _}));var o=i("0f70"),n=i("308f"),s=i("a666"),r=i("30db"),a=i("fd49");class l{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class c{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=this._bareFontInfo.getMassagedFontFamily(o["h"]?a["c"].fontFamily:null),t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const i=document.createElement("div");i.style.fontFamily=e,i.style.fontWeight=this._bareFontInfo.fontWeight,i.style.fontSize=this._bareFontInfo.fontSize+"px",i.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,i.style.lineHeight=this._bareFontInfo.lineHeight+"px",i.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(i);const n=document.createElement("div");n.style.fontFamily=e,n.style.fontWeight="bold",n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(n);const s=document.createElement("div");s.style.fontFamily=e,s.style.fontWeight=this._bareFontInfo.fontWeight,s.style.fontSize=this._bareFontInfo.fontSize+"px",s.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,s.style.lineHeight=this._bareFontInfo.lineHeight+"px",s.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",s.style.fontStyle="italic",t.appendChild(s);const r=[];for(const o of this._requests){let e;0===o.type&&(e=i),2===o.type&&(e=n),1===o.type&&(e=s),e.appendChild(document.createElement("br"));const t=document.createElement("span");c._render(t,o),e.appendChild(t),r.push(t)}this._container=t,this._testElements=r}static _render(e,t){if(" "===t.chr){let t=" ";for(let e=0;e<8;e++)t+=t;e.innerText=t}else{let i=t.chr;for(let e=0;e<8;e++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const t=this._requests[e],i=this._testElements[e];t.fulfill(i.offsetWidth/256)}}}function u(e,t){const i=new c(e,t);i.read()}var d=i("a37f"),h=i("8830"),p=i("fb71");class m{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}function g(){f.INSTANCE.clearCache()}class f extends s["a"]{constructor(){super(),this._onDidChange=this._register(new n["b"]),this.onDidChange=this._onDidChange.event,this._cache=new m,this._evictUntrustedReadingsTimeout=-1}dispose(){-1!==this._evictUntrustedReadingsTimeout&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new m,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),t.isTrusted||-1!==this._evictUntrustedReadingsTimeout||(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const i of e)i.isTrusted||(t=!0,this._cache.remove(i));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=f._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new p["b"]({zoomLevel:o["d"](),pixelRatio:o["a"](),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,i,o){const n=new l(e,t);return i.push(n),o&&o.push(n),n}static _actualReadConfiguration(e){const t=[],i=[],n=this.createRequest("n",0,t,i),s=this.createRequest("ｍ",0,t,null),r=this.createRequest(" ",0,t,i),l=this.createRequest("0",0,t,i),c=this.createRequest("1",0,t,i),d=this.createRequest("2",0,t,i),h=this.createRequest("3",0,t,i),m=this.createRequest("4",0,t,i),g=this.createRequest("5",0,t,i),f=this.createRequest("6",0,t,i),_=this.createRequest("7",0,t,i),C=this.createRequest("8",0,t,i),S=this.createRequest("9",0,t,i),b=this.createRequest("→",0,t,i),v=this.createRequest("￫",0,t,null),w=this.createRequest("·",0,t,i),y=this.createRequest(String.fromCharCode(11825),0,t,null),x="|/-_ilm%";for(let o=0,a=x.length;o<a;o++)this.createRequest(x.charAt(o),0,t,i),this.createRequest(x.charAt(o),1,t,i),this.createRequest(x.charAt(o),2,t,i);u(e,t);const E=Math.max(l.width,c.width,d.width,h.width,m.width,g.width,f.width,_.width,C.width,S.width);let T=e.fontFeatureSettings===a["e"].OFF;const O=i[0].width;for(let o=1,a=i.length;T&&o<a;o++){const e=O-i[o].width;if(e<-.001||e>.001){T=!1;break}}let M=!0;T&&v.width!==O&&(M=!1),v.width>b.width&&(M=!1);const A=o["b"]()>2e3;return new p["b"]({zoomLevel:o["d"](),pixelRatio:o["a"](),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:T,typicalHalfwidthCharacterWidth:n.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:M,spaceWidth:r.width,middotWidth:w.width,wsmiddotWidth:y.width,maxDigitWidth:E},A)}}f.INSTANCE=new f;class _ extends h["a"]{constructor(e,t,i=null,n){super(e,t),this.accessibilityService=n,this._elementSizeObserver=this._register(new d["a"](i,t.dimension,()=>this._recomputeOptions())),this._register(f.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(o["l"](e=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(o["h"]?a["c"].fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily(o["h"]?a["c"].fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return o["h"]||o["k"]||(e+="no-user-select "),o["h"]&&(e+="no-minimap-shadow "),r["f"]&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:_._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:o["j"]||o["g"],pixelRatio:o["a"](),zoomLevel:o["d"](),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return f.INSTANCE.readConfiguration(e)}}},3695:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var o=i("11f7"),n=i("2504"),s=i("db88"),r=i("4035"),a=i("438a"),l=i("b589"),c=i("82c9"),u=i("6d8e"),d=i("5717"),h=i("9e74"),p=i("7c09"),m=i("5bd7"),g=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},f=function(e,t){return function(i,o){t(i,o,e)}},_=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(o.next(e))}catch(t){s(t)}}function a(e){try{l(o["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):n(e.value).then(r,a)}l((o=o.apply(e,t||[])).next())}))};let C=class{constructor(e){this._commandService=e}open(e,t){return _(this,void 0,void 0,(function*(){if(!Object(m["c"])(e,l["c"].command))return!1;if(!(null===t||void 0===t?void 0:t.allowCommands))return!0;"string"===typeof e&&(e=u["a"].parse(e));let i=[];try{i=Object(a["a"])(decodeURIComponent(e.query))}catch(o){try{i=Object(a["a"])(e.query)}catch(n){}}return Array.isArray(i)||(i=[i]),yield this._commandService.executeCommand(e.path,...i),!0}))}};C=g([f(0,h["b"])],C);let S=class{constructor(e){this._editorService=e}open(e,t){return _(this,void 0,void 0,(function*(){"string"===typeof e&&(e=u["a"].parse(e));let i=void 0;const o=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return o&&(i={startLineNumber:parseInt(o[1]),startColumn:o[2]?parseInt(o[2]):1},e=e.with({fragment:""})),e.scheme===l["c"].file&&(e=Object(c["h"])(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:i,context:(null===t||void 0===t?void 0:t.fromUserGesture)?p["a"].USER:p["a"].API},null===t||void 0===t?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),null===t||void 0===t?void 0:t.openToSide),!0}))}};S=g([f(0,d["a"])],S);let b=class{constructor(e,t){this._openers=new s["a"],this._validators=new s["a"],this._resolvers=new s["a"],this._resolvedUriTargets=new r["b"](e=>e.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new s["a"],this._defaultExternalOpener={openExternal:e=>_(this,void 0,void 0,(function*(){return Object(m["c"])(e,l["c"].http)||Object(m["c"])(e,l["c"].https)?o["Z"](e):window.location.href=e,!0}))},this._openers.push({open:(e,t)=>_(this,void 0,void 0,(function*(){return!!((null===t||void 0===t?void 0:t.openExternal)||Object(m["c"])(e,l["c"].mailto)||Object(m["c"])(e,l["c"].http)||Object(m["c"])(e,l["c"].https))&&(yield this._doOpenExternal(e,t),!0)}))}),this._openers.push(new C(t)),this._openers.push(new S(e))}registerOpener(e){const t=this._openers.unshift(e);return{dispose:t}}registerValidator(e){const t=this._validators.push(e);return{dispose:t}}registerExternalUriResolver(e){const t=this._resolvers.push(e);return{dispose:t}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){const t=this._externalOpeners.push(e);return{dispose:t}}open(e,t){var i;return _(this,void 0,void 0,(function*(){const o="string"===typeof e?u["a"].parse(e):e,n=null!==(i=this._resolvedUriTargets.get(o))&&void 0!==i?i:e;for(const e of this._validators)if(!(yield e.shouldOpen(n)))return!1;for(const i of this._openers){const o=yield i.open(e,t);if(o)return!0}return!1}))}resolveExternalUri(e,t){return _(this,void 0,void 0,(function*(){for(const o of this._resolvers)try{const i=yield o.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch(i){}throw new Error("Could not resolve external URI: "+e.toString())}))}_doOpenExternal(e,t){return _(this,void 0,void 0,(function*(){const i="string"===typeof e?u["a"].parse(e):e;let o,s;try{o=(yield this.resolveExternalUri(i,t)).resolved}catch(r){o=i}if(s="string"===typeof e&&i.toString()===o.toString()?e:encodeURI(o.toString(!0)),null===t||void 0===t?void 0:t.allowContributedOpeners){const e="string"===typeof(null===t||void 0===t?void 0:t.allowContributedOpeners)?null===t||void 0===t?void 0:t.allowContributedOpeners:void 0;for(const t of this._externalOpeners){const o=yield t.openExternal(s,{sourceUri:i,preferredOpenerId:e},n["a"].None);if(o)return!0}}return this._defaultExternalOpener.openExternal(s,{sourceUri:i},n["a"].None)}))}dispose(){this._validators.clear()}};b=g([f(0,d["a"]),f(1,h["b"])],b)},"411b":function(e,t,i){"use strict";i.d(t,"f",(function(){return a})),i.d(t,"a",(function(){return l})),i.d(t,"g",(function(){return u})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return h})),i.d(t,"d",(function(){return p})),i.d(t,"e",(function(){return m}));var o=i("11f7"),n=i("00a3"),s=i("5d28"),r=i("a666");class a{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new l(this.x-o["f"].scrollX,this.y-o["f"].scrollY)}}class l{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new a(this.clientX+o["f"].scrollX,this.clientY+o["f"].scrollY)}}class c{constructor(e,t,i,o){this.x=e,this.y=t,this.width=i,this.height=o,this._editorPagePositionBrand=void 0}}function u(e){const t=o["D"](e);return new c(t.left,t.top,t.width,t.height)}class d extends s["a"]{constructor(e,t){super(e),this._editorMouseEventBrand=void 0,this.pos=new a(this.posx,this.posy),this.editorPos=u(t)}}class h{constructor(e){this._editorViewDomNode=e}_create(e){return new d(e,this._editorViewDomNode)}onContextMenu(e,t){return o["i"](e,"contextmenu",e=>{t(this._create(e))})}onMouseUp(e,t){return o["i"](e,"mouseup",e=>{t(this._create(e))})}onMouseDown(e,t){return o["i"](e,"mousedown",e=>{t(this._create(e))})}onMouseLeave(e,t){return o["j"](e,e=>{t(this._create(e))})}onMouseMoveThrottled(e,t,i,n){const s=(e,t)=>i(e,this._create(t));return o["l"](e,"mousemove",t,s,n)}}class p{constructor(e){this._editorViewDomNode=e}_create(e){return new d(e,this._editorViewDomNode)}onPointerUp(e,t){return o["i"](e,"pointerup",e=>{t(this._create(e))})}onPointerDown(e,t){return o["i"](e,"pointerdown",e=>{t(this._create(e))})}onPointerLeave(e,t){return o["k"](e,e=>{t(this._create(e))})}onPointerMoveThrottled(e,t,i,n){const s=(e,t)=>i(e,this._create(t));return o["l"](e,"pointermove",t,s,n)}}class m extends r["a"]{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new n["a"]),this._keydownListener=null}startMonitoring(e,t,i,n,s){this._keydownListener=o["o"](document,"keydown",e=>{const t=e.toKeybinding();t.isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,e.browserEvent)},!0);const r=(e,t)=>i(e,new d(t,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,r,n,e=>{this._keydownListener.dispose(),s(e)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}},"56f3":function(e,t,i){},5717:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var o=i("0a0f");const n=Object(o["c"])("codeEditorService")},"5fb3":function(e,t,i){"use strict";var o=i("efdb"),n=i("b2cc"),s=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},r=function(e,t){return function(i,o){t(i,o,e)}};let a=class{constructor(e,t){}dispose(){}};a.ID="editor.contrib.markerDecorations",a=s([r(1,o["a"])],a),Object(n["l"])(a.ID,a)},9904:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var o=i("11f7"),n=i("30db"),s=i("a60f"),r=i("a666"),a=i("5d28"),l=i("5fe7"),c=i("bae1"),u=i("411b"),d=i("62bd"),h=i("7061"),p=i("8025"),m=i("e2dc");function g(e){return function(t,i){let o=!1;return e&&(o=e.mouseTargetIsWidget(i)),o||i.preventDefault(),i}}class f extends m["a"]{constructor(e,t,i){super(),this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new c["c"](this._context,i),this._mouseDownOperation=this._register(new _(this._context,this.viewController,this.viewHelper,(e,t)=>this._createMouseTarget(e,t),e=>this._getMouseColumn(e))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(129).height;const s=new u["c"](this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,e=>this._onContextMenu(e,!0))),this._register(s.onMouseMoveThrottled(this.viewHelper.viewDomNode,e=>this._onMouseMove(e),g(this.mouseTargetFactory),f.MOUSE_MOVE_MINIMUM_TIME)),this._register(s.onMouseUp(this.viewHelper.viewDomNode,e=>this._onMouseUp(e))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,e=>this._onMouseLeave(e))),this._register(s.onMouseDown(this.viewHelper.viewDomNode,e=>this._onMouseDown(e)));const r=e=>{if(this.viewController.emitMouseWheel(e),!this._context.configuration.options.get(67))return;const t=new a["b"](e),i=n["f"]?(e.metaKey||e.ctrlKey)&&!e.shiftKey&&!e.altKey:e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey;if(i){const e=d["a"].getZoomLevel(),i=t.deltaY>0?1:-1;d["a"].setZoomLevel(e+i),t.preventDefault(),t.stopPropagation()}};this._register(o["i"](this.viewHelper.viewDomNode,o["d"].MOUSE_WHEEL,r,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(129)){const e=this._context.configuration.options.get(129).height;this._height!==e&&(this._height=e,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const i=new u["a"](e,t),o=i.toPageCoordinates(),n=Object(u["g"])(this.viewHelper.viewDomNode);return o.y<n.y||o.y>n.y+n.height||o.x<n.x||o.x>n.x+n.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),n,o,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const t=o["F"](this.viewHelper.viewDomNode);t&&(i=t.elementsFromPoint(e.posx,e.posy).find(e=>this.viewHelper.viewDomNode.contains(e)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){if(this._mouseDownOperation.isActive())return;const t=e.timestamp;t<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=(new Date).getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),i=6===t.type||7===t.type,o=2===t.type||3===t.type||4===t.type,s=3===t.type,r=this._context.configuration.options.get(97),a=8===t.type||5===t.type,l=9===t.type;let c=e.leftButton||e.middleButton;n["f"]&&e.leftButton&&e.ctrlKey&&(c=!1);const u=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(c&&(i||s&&r))u(),this._mouseDownOperation.start(t.type,e);else if(o)e.preventDefault();else if(a){const i=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(i.viewZoneId)&&(u(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(u(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}f.MOUSE_MOVE_MINIMUM_TIME=100;class _ extends r["a"]{constructor(e,t,i,o,n){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._createMouseTarget=o,this._getMouseColumn=n,this._mouseMoveMonitor=this._register(new u["e"](this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new l["g"]),this._mouseState=new C,this._currentSelection=new p["a"](1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(3===e),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const i=this._findMousePosition(t,!0);if(!i||!i.position)return;this._mouseState.trySetCount(t.detail,i.position),t.detail=this._mouseState.count;const o=this._context.configuration.options;if(!o.get(80)&&o.get(31)&&!o.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&6===i.type&&i.position&&this._currentSelection.containsPosition(i.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,g(null),e=>this._onMouseDownThenMove(e),e=>{const t=this._findMousePosition(this._lastMouseEvent,!0);e&&e instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:t?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});this._mouseState.isDragAndDrop=!1,this._dispatchMouse(i,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,g(null),e=>this._onMouseDownThenMove(e),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.model,o=this._context.viewLayout,n=this._getMouseColumn(e);if(e.posy<t.y){const i=Math.max(o.getCurrentScrollTop()-(t.y-e.posy),0),s=c["a"].getZoneAtCoord(this._context,i);if(s){const e=this._helpPositionJumpOverViewZone(s);if(e)return new c["b"](null,13,n,e)}const r=o.getLineNumberAtVerticalOffset(i);return new c["b"](null,13,n,new h["a"](r,1))}if(e.posy>t.y+t.height){const s=o.getCurrentScrollTop()+(e.posy-t.y),r=c["a"].getZoneAtCoord(this._context,s);if(r){const e=this._helpPositionJumpOverViewZone(r);if(e)return new c["b"](null,13,n,e)}const a=o.getLineNumberAtVerticalOffset(s);return new c["b"](null,13,n,new h["a"](a,i.getLineMaxColumn(a)))}const s=o.getLineNumberAtVerticalOffset(o.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new c["b"](null,13,n,new h["a"](s,1)):e.posx>t.x+t.width?new c["b"](null,13,n,new h["a"](s,i.getLineMaxColumn(s))):null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const o=this._createMouseTarget(e,t),n=o.position;if(!n)return null;if(8===o.type||5===o.type){const e=this._helpPositionJumpOverViewZone(o.detail);if(e)return new c["b"](o.element,o.type,o.mouseColumn,e,null,o.detail)}return o}_helpPositionJumpOverViewZone(e){const t=new h["a"](this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,o=e.positionAfter;return i&&o?i.isBefore(t)?i:o:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class C{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=(new Date).getTime();i-this._lastSetMouseDownCountTime>C.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}C.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var S=i("0a31"),b=i("e53c");class v extends f{constructor(e,t,i){super(e,t,i),this._register(s["b"].addTarget(this.viewHelper.linesContentDomNode)),this._register(o["i"](this.viewHelper.linesContentDomNode,s["a"].Tap,e=>this.onTap(e))),this._register(o["i"](this.viewHelper.linesContentDomNode,s["a"].Change,e=>this.onChange(e))),this._register(o["i"](this.viewHelper.linesContentDomNode,s["a"].Contextmenu,e=>this._onContextMenu(new u["b"](e,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(o["i"](this.viewHelper.linesContentDomNode,"pointerdown",e=>{const t=e.pointerType;this._lastPointerType="mouse"!==t?"touch"===t?"touch":"pen":"mouse"}));const n=new u["d"](this.viewHelper.viewDomNode);this._register(n.onPointerMoveThrottled(this.viewHelper.viewDomNode,e=>this._onMouseMove(e),g(this.mouseTargetFactory),f.MOUSE_MOVE_MINIMUM_TIME)),this._register(n.onPointerUp(this.viewHelper.viewDomNode,e=>this._onMouseUp(e))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,e=>this._onMouseLeave(e))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,e=>this._onMouseDown(e)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new u["b"](e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){"touch"===this._lastPointerType&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){"touch"!==e.browserEvent.pointerType&&super._onMouseDown(e)}}class w extends f{constructor(e,t,i){super(e,t,i),this._register(s["b"].addTarget(this.viewHelper.linesContentDomNode)),this._register(o["i"](this.viewHelper.linesContentDomNode,s["a"].Tap,e=>this.onTap(e))),this._register(o["i"](this.viewHelper.linesContentDomNode,s["a"].Change,e=>this.onChange(e))),this._register(o["i"](this.viewHelper.linesContentDomNode,s["a"].Contextmenu,e=>this._onContextMenu(new u["b"](e,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new u["b"](e,this.viewHelper.viewDomNode),!1);if(t.position){const e=document.createEvent("CustomEvent");e.initEvent(b["d"].Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(e),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class y extends r["a"]{constructor(e,t,i){super(),n["c"]&&S["a"].pointerEvents?this.handler=this._register(new v(e,t,i)):window.TouchEvent?this.handler=this._register(new w(e,t,i)):this.handler=this._register(new f(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}},"9e6f":function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var o=i("11f7"),n=i("a666"),s=i("3742"),r=i("6d8e"),a=i("308f");class l extends n["a"]{constructor(){super(),this._onCodeEditorAdd=this._register(new a["b"]),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new a["b"]),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new a["b"]),this._onDiffEditorRemove=this._register(new a["b"]),this._onDecorationTypeRegistered=this._register(new a["b"]),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}setModelProperty(e,t,i){const o=e.toString();let n;this._modelProperties.has(o)?n=this._modelProperties.get(o):(n=new Map,this._modelProperties.set(o,n)),n.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i)){const e=this._modelProperties.get(i);return e.get(t)}}}var c=i("8ae8"),u=i("3352"),d=i("b7d0"),h=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},p=function(e,t){return function(i,o){t(i,o,e)}};class m{constructor(e,t,i){this._parent=e,this._editorId=t,this._styleSheet=i,this._refCount=0}ref(){this._refCount++}unref(){var e;this._refCount--,0===this._refCount&&(null===(e=this._styleSheet.parentNode)||void 0===e||e.removeChild(this._styleSheet),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){const i=this._styleSheet.sheet;i.insertRule(e,t)}removeRulesContainingSelector(e){o["Q"](e,this._styleSheet)}}class g{constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){const i=this._styleSheet.sheet;i.insertRule(e,t)}removeRulesContainingSelector(e){o["Q"](e,this._styleSheet)}}let f=class extends l{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._globalStyleSheet=e||null,this._themeService=t}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||(this._globalStyleSheet=new g(o["w"]())),this._globalStyleSheet}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();const t=e.getContainerDomNode();if(!o["O"](t))return this._getOrCreateGlobalStyleSheet();const i=e.getId();if(!this._editorStyleSheets.has(i)){const e=new m(this,i,o["w"](t));this._editorStyleSheets.set(i,e)}return this._editorStyleSheets.get(i)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,i,o,n){let s=this._decorationOptionProviders.get(t);if(!s){const r=this._getOrCreateStyleSheet(n),a={styleSheet:r,key:t,parentTypeKey:o,options:i||Object.create(null)};s=o?new _(this._themeService,r,a):new C(e,this._themeService,r,a),this._decorationOptionProviders.set(t,s),this._onDecorationTypeRegistered.fire(t)}s.refCount++}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(t=>t.removeDecorations(e))))}resolveDecorationOptions(e,t){const i=this._decorationOptionProviders.get(e);if(!i)throw new Error("Unknown decoration type key: "+e);return i.getOptions(this,t)}};f=h([p(1,d["b"])],f);class _{constructor(e,t,i){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=i.parentTypeKey,this.refCount=0,this._beforeContentRules=new b(3,i,e),this._afterContentRules=new b(4,i,e)}getOptions(e,t){const i=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(i.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(i.afterContentClassName=this._afterContentRules.className),i}dispose(){this._beforeContentRules&&(this._beforeContentRules.dispose(),this._beforeContentRules=null),this._afterContentRules&&(this._afterContentRules.dispose(),this._afterContentRules=null),this._styleSheet.unref()}}class C{constructor(e,t,i,o){this._disposables=new n["b"],this.description=e,this._styleSheet=i,this._styleSheet.ref(),this.refCount=0;const s=e=>{const i=new b(e,o,t);if(this._disposables.add(i),i.hasContent)return i.className},r=e=>{const i=new b(e,o,t);return this._disposables.add(i),i.hasContent?{className:i.className,hasLetterSpacing:i.hasLetterSpacing}:null};this.className=s(0);const a=r(1);if(a&&(this.inlineClassName=a.className,this.inlineClassNameAffectsLetterSpacing=a.hasLetterSpacing),this.beforeContentClassName=s(3),this.afterContentClassName=s(4),o.options.beforeInjectedText&&o.options.beforeInjectedText.contentText){const e=r(5);this.beforeInjectedText={content:o.options.beforeInjectedText.contentText,inlineClassName:null===e||void 0===e?void 0:e.className,inlineClassNameAffectsLetterSpacing:(null===e||void 0===e?void 0:e.hasLetterSpacing)||o.options.beforeInjectedText.affectsLetterSpacing}}if(o.options.afterInjectedText&&o.options.afterInjectedText.contentText){const e=r(6);this.afterInjectedText={content:o.options.afterInjectedText.contentText,inlineClassName:null===e||void 0===e?void 0:e.className,inlineClassNameAffectsLetterSpacing:(null===e||void 0===e?void 0:e.hasLetterSpacing)||o.options.afterInjectedText.affectsLetterSpacing}}this.glyphMarginClassName=s(2);const l=o.options;this.isWholeLine=Boolean(l.isWholeLine),this.stickiness=l.rangeBehavior;const c=l.light&&l.light.overviewRulerColor||l.overviewRulerColor,d=l.dark&&l.dark.overviewRulerColor||l.overviewRulerColor;"undefined"===typeof c&&"undefined"===typeof d||(this.overviewRuler={color:c||d,darkColor:d||c,position:l.overviewRulerLane||u["g"].Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,overviewRuler:this.overviewRuler,stickiness:this.stickiness,before:this.beforeInjectedText,after:this.afterInjectedText}:this}dispose(){this._disposables.dispose(),this._styleSheet.unref()}}const S={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",fontSize:"font-size:{0};",fontFamily:"font-family:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",padding:"padding:{0};",width:"width:{0};",height:"height:{0};",verticalAlign:"vertical-align:{0};"};class b{constructor(e,t,i){this._theme=i.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let o=v.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(o=o+" "+v.getClassName(this._providerArgs.parentTypeKey,e)),this._className=o,this._unThemedSelector=v.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=i.onDidColorThemeChange(e=>{this._theme=i.getColorTheme(),this._removeCSS(),this._buildCSS()}):this._themeListener=null}dispose(){this._hasContent&&(this._removeCSS(),this._hasContent=!1),this._themeListener&&(this._themeListener.dispose(),this._themeListener=null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){const e=this._providerArgs.options;let t,i,o;switch(this._ruleType){case 0:t=this.getCSSTextForModelDecorationClassName(e),i=this.getCSSTextForModelDecorationClassName(e.light),o=this.getCSSTextForModelDecorationClassName(e.dark);break;case 1:t=this.getCSSTextForModelDecorationInlineClassName(e),i=this.getCSSTextForModelDecorationInlineClassName(e.light),o=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case 2:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),i=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),o=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case 3:t=this.getCSSTextForModelDecorationContentClassName(e.before),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),o=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case 4:t=this.getCSSTextForModelDecorationContentClassName(e.after),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),o=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;case 5:t=this.getCSSTextForModelDecorationContentClassName(e.beforeInjectedText),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.beforeInjectedText),o=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.beforeInjectedText);break;case 6:t=this.getCSSTextForModelDecorationContentClassName(e.afterInjectedText),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.afterInjectedText),o=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.afterInjectedText);break;default:throw new Error("Unknown rule type: "+this._ruleType)}const n=this._providerArgs.styleSheet;let s=!1;t.length>0&&(n.insertRule(`${this._unThemedSelector} {${t}}`,0),s=!0),i.length>0&&(n.insertRule(`.vs${this._unThemedSelector} {${i}}`,0),s=!0),o.length>0&&(n.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector} {${o}}`,0),s=!0),this._hasContent=s}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")}getCSSTextForModelDecorationInlineClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")}getCSSTextForModelDecorationContentClassName(e){if(!e)return"";const t=[];if("undefined"!==typeof e){if(this.collectBorderSettingsCSSText(e,t),"undefined"!==typeof e.contentIconPath&&t.push(s["v"](S.contentIconPath,o["s"](r["a"].revive(e.contentIconPath)))),"string"===typeof e.contentText){const i=e.contentText.match(/^.*$/m)[0],o=i.replace(/['\\]/g,"\\$&");t.push(s["v"](S.contentText,o))}this.collectCSSText(e,["verticalAlign","fontStyle","fontWeight","fontSize","fontFamily","textDecoration","color","opacity","backgroundColor","margin","padding"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return"";const t=[];return"undefined"!==typeof e.gutterIconPath&&(t.push(s["v"](S.gutterIconPath,o["s"](r["a"].revive(e.gutterIconPath)))),"undefined"!==typeof e.gutterIconSize&&t.push(s["v"](S.gutterIconSize,e.gutterIconSize))),t.join("")}collectBorderSettingsCSSText(e,t){return!!this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)&&(t.push(s["v"]("box-sizing: border-box;")),!0)}collectCSSText(e,t,i){const o=i.length;for(let n of t){const t=this.resolveValue(e[n]);"string"===typeof t&&i.push(s["v"](S[n],t))}return i.length!==o}resolveValue(e){if(Object(c["b"])(e)){this._usesThemeColors=!0;const t=this._theme.getColor(e.id);return t?t.toString():"transparent"}return e}}class v{static getClassName(e,t){return"ced-"+e+"-"+t}static getSelector(e,t,i){let o=".monaco-editor ."+this.getClassName(e,i);return t&&(o=o+"."+this.getClassName(t,i)),3===i?o+="::before":4===i&&(o+="::after"),o}}},a37f:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var o=i("a666");class n extends o["a"]{constructor(e,t,i){super(),this.referenceDomElement=e,this.changeCallback=i,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){"undefined"!==typeof ResizeObserver?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):-1===this.measureReferenceDomElementToken&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),-1!==this.measureReferenceDomElementToken&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,o=0;t?(i=t.width,o=t.height):this.referenceDomElement&&(i=this.referenceDomElement.clientWidth,o=this.referenceDomElement.clientHeight),i=Math.max(5,i),o=Math.max(5,o),this.width===i&&this.height===o||(this.width=i,this.height=o,e&&this.changeCallback())}}},b055:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return r}));var o=i("8ae8");function n(e){return!(!e||"function"!==typeof e.getEditorType)&&e.getEditorType()===o["a"].ICodeEditor}function s(e){return!(!e||"function"!==typeof e.getEditorType)&&e.getEditorType()===o["a"].IDiffEditor}function r(e){return n(e)?e:s(e)?e.getModifiedEditor():null}},b2cc:function(e,t,i){"use strict";i.d(t,"a",(function(){return C})),i.d(t,"e",(function(){return S})),i.d(t,"c",(function(){return v})),i.d(t,"b",(function(){return w})),i.d(t,"f",(function(){return y})),i.d(t,"n",(function(){return x})),i.d(t,"o",(function(){return E})),i.d(t,"k",(function(){return T})),i.d(t,"j",(function(){return O})),i.d(t,"p",(function(){return M})),i.d(t,"m",(function(){return A})),i.d(t,"l",(function(){return N})),i.d(t,"d",(function(){return o})),i.d(t,"i",(function(){return L})),i.d(t,"g",(function(){return I})),i.d(t,"h",(function(){return R}));var o,n=i("dff7"),s=i("6d8e"),r=i("5717"),a=i("7061"),l=i("1b69"),c=i("b78f"),u=i("7e32"),d=i("9e74"),h=i("4fc3"),p=i("9eb8"),m=i("89cd"),g=i("5d75"),f=i("ef8e"),_=i("d3d7");class C{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let e=t.kbExpr;this.precondition&&(e=e?h["a"].and(e,this.precondition):this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:e,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};p["a"].registerKeybindingRule(i)}}d["a"].registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){u["d"].appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class S extends C{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i){return this._implementations.push({priority:e,name:t,implementation:i}),this._implementations.sort((e,t)=>t.priority-e.priority),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===i)return void this._implementations.splice(e,1)}}}runCommand(e,t){const i=e.get(_["b"]);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const o of this._implementations){const n=o.implementation(e,t);if(n){if(i.trace(`Command '${this.id}' was handled by '${o.name}'.`),"boolean"===typeof n)return;return n}}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class b extends C{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class v extends C{static bindToContribution(e){return class extends v{constructor(e){super(e),this._callback=e.handler}runEditorCommand(t,i,o){const n=e(i);n&&this._callback(e(i),o)}}}runCommand(e,t){const i=e.get(r["a"]),o=i.getFocusedCodeEditor()||i.getActiveCodeEditor();if(o)return o.invokeWithinContext(e=>{const i=e.get(h["b"]);if(i.contextMatchesRules(Object(f["p"])(this.precondition)))return this.runEditorCommand(e,o,t)})}}class w extends v{constructor(e){super(w.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;function i(t){return t.menuId||(t.menuId=u["b"].EditorContext),t.title||(t.title=e.label),t.when=h["a"].and(e.precondition,t.when),t}return t=Array.isArray(e.menuOpts)?e.menuOpts:e.menuOpts?[e.menuOpts]:[],Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(g["a"]).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class y extends w{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((e,t)=>t[0]-e[0]),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e][1]===t)return void this._implementations.splice(e,1)}}}run(e,t,i){for(const o of this._implementations){const n=o[1](e,t,i);if(n){if("boolean"===typeof n)return;return n}}}}function x(e,t){d["a"].registerCommand(e,(function(e,...i){const[o,n]=i;Object(f["c"])(s["a"].isUri(o)),Object(f["c"])(a["a"].isIPosition(n));const r=e.get(l["a"]).getModel(o);if(r){const e=a["a"].lift(n);return t(r,e,...i.slice(2))}return e.get(c["a"]).createModelReference(o).then(e=>new Promise((o,s)=>{try{const s=t(e.object.textEditorModel,a["a"].lift(n),i.slice(2));o(s)}catch(r){s(r)}}).finally(()=>{e.dispose()}))}))}function E(e,t){d["a"].registerCommand(e,(function(e,...i){const[o]=i;Object(f["c"])(s["a"].isUri(o));const n=e.get(l["a"]).getModel(o);return n?t(n,...i.slice(1)):e.get(c["a"]).createModelReference(o).then(e=>new Promise((o,n)=>{try{const n=t(e.object.textEditorModel,i.slice(1));o(n)}catch(s){n(s)}}).finally(()=>{e.dispose()}))}))}function T(e){return P.INSTANCE.registerEditorCommand(e),e}function O(e){const t=new e;return P.INSTANCE.registerEditorAction(t),t}function M(e){return P.INSTANCE.registerEditorAction(e),e}function A(e){P.INSTANCE.registerEditorAction(e)}function N(e,t){P.INSTANCE.registerEditorContribution(e,t)}(function(e){function t(e){return P.INSTANCE.getEditorCommand(e)}function i(){return P.INSTANCE.getEditorActions()}function o(){return P.INSTANCE.getEditorContributions()}function n(e){return P.INSTANCE.getEditorContributions().filter(t=>e.indexOf(t.id)>=0)}function s(){return P.INSTANCE.getDiffEditorContributions()}e.getEditorCommand=t,e.getEditorActions=i,e.getEditorContributions=o,e.getSomeEditorContributions=n,e.getDiffEditorContributions=s})(o||(o={}));const D={EditorCommonContributions:"editor.contributions"};class P{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}function k(e){return e.register(),e}P.INSTANCE=new P,m["a"].add(D.EditorCommonContributions,P.INSTANCE);const L=k(new S({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:u["b"].MenubarEditMenu,group:"1_do",title:n["a"]({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:u["b"].CommandPalette,group:"",title:n["a"]("undo","Undo"),order:1}]}));k(new b(L,{id:"default:undo",precondition:void 0}));const I=k(new S({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:u["b"].MenubarEditMenu,group:"1_do",title:n["a"]({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:u["b"].CommandPalette,group:"",title:n["a"]("redo","Redo"),order:1}]}));k(new b(I,{id:"default:redo",precondition:void 0}));const R=k(new S({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:u["b"].MenubarSelectionMenu,group:"1_basic",title:n["a"]({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:u["b"].CommandPalette,group:"",title:n["a"]("selectAll","Select All"),order:1}]}))},bae1:function(e,t,i){"use strict";i.d(t,"d",(function(){return m})),i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return _})),i.d(t,"c",(function(){return w}));var o,n=i("411b"),s=i("4247"),r=i("6ec9"),a=i("7061"),l=i("6a89"),c=i("2e5d"),u=i("11f7"),d=i("708a");class h{constructor(e=null){this.hitTarget=e,this.type=0}}class p{constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}(function(e){function t(e,t,i){const o=e.getPositionFromDOMInfo(t,i);return o?new p(o,t,null):new h(t)}e.createFromDOMInfo=t})(o||(o={}));class m{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class g{constructor(e,t,i=0,o=null,n=null,s=null){this.element=e,this.type=t,this.mouseColumn=i,this.position=o,!n&&o&&(n=new l["a"](o.lineNumber,o.column,o.lineNumber,o.column)),this.range=n,this.detail=s}static _typeToString(e){return 1===e?"TEXTAREA":2===e?"GUTTER_GLYPH_MARGIN":3===e?"GUTTER_LINE_NUMBERS":4===e?"GUTTER_LINE_DECORATIONS":5===e?"GUTTER_VIEW_ZONE":6===e?"CONTENT_TEXT":7===e?"CONTENT_EMPTY":8===e?"CONTENT_VIEW_ZONE":9===e?"CONTENT_WIDGET":10===e?"OVERVIEW_RULER":11===e?"SCROLLBAR":12===e?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return g.toString(this)}}class f{static isTextArea(e){return 2===e.length&&3===e[0]&&6===e[1]}static isChildOfViewLines(e){return e.length>=4&&3===e[0]&&7===e[3]}static isStrictChildOfViewLines(e){return e.length>4&&3===e[0]&&7===e[3]}static isChildOfScrollableElement(e){return e.length>=2&&3===e[0]&&5===e[1]}static isChildOfMinimap(e){return e.length>=2&&3===e[0]&&8===e[1]}static isChildOfContentWidgets(e){return e.length>=4&&3===e[0]&&1===e[3]}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&2===e[0]}static isChildOfOverlayWidgets(e){return e.length>=2&&3===e[0]&&4===e[1]}}class _{constructor(e,t,i){this.model=e.model;const o=e.configuration.options;this.layoutInfo=o.get(129),this.viewDomNode=t.viewDomNode,this.lineHeight=o.get(58),this.stickyTabStops=o.get(103),this.typicalHalfwidthCharacterWidth=o.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return _.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const o=i.verticalOffset+i.height/2,n=e.model.getLineCount();let s,r=null,l=null;return i.afterLineNumber!==n&&(l=new a["a"](i.afterLineNumber+1,1)),i.afterLineNumber>0&&(r=new a["a"](i.afterLineNumber,e.model.getLineMaxColumn(i.afterLineNumber))),s=null===l?r:null===r?l:t<o?r:l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:r,positionAfter:l,position:s}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const e=this._context.model.getLineCount(),t=this._context.model.getLineMaxColumn(e);return{range:new l["a"](e,t,e,t),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.model.getLineMaxColumn(t);return{range:new l["a"](t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return _._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){while(e&&e!==document.body){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class C{constructor(e,t,i){this.editorPos=t,this.pos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+i.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+i.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=i.x-t.x<e.layoutInfo.contentLeft&&i.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,w._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class S extends C{constructor(e,t,i,o){super(e,t,i),this._ctx=e,o?(this.target=o,this.targetPath=s["a"].collect(o,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}\n\ttarget: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,i=null,o=null){let n=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(n=c["a"].visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new g(this.target,e,n,t,i,o)}withTarget(e){return new S(this._ctx,this.editorPos,this.pos,e)}}const b={isAfterLines:!0};function v(e){return{isAfterLines:!1,horizontalDistanceToText:e}}class w{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=s["a"].collect(t,this._viewHelper.viewDomNode);return!(!f.isChildOfContentWidgets(i)&&!f.isChildOfOverflowingContentWidgets(i))||!!f.isChildOfOverlayWidgets(i)}createMouseTarget(e,t,i,o){const n=new _(this._context,this._viewHelper,e),s=new S(n,t,i,o);try{const e=w._createMouseTarget(n,s,!1);return e}catch(r){return s.fulfill(0)}}static _createMouseTarget(e,t,i){if(null===t.target){if(i)return t.fulfill(0);const o=w._doHitTest(e,t);return 1===o.type?w.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}const o=t;let n=null;return n=n||w._hitTestContentWidget(e,o),n=n||w._hitTestOverlayWidget(e,o),n=n||w._hitTestMinimap(e,o),n=n||w._hitTestScrollbarSlider(e,o),n=n||w._hitTestViewZone(e,o),n=n||w._hitTestMargin(e,o),n=n||w._hitTestViewCursor(e,o),n=n||w._hitTestTextArea(e,o),n=n||w._hitTestViewLines(e,o,i),n=n||w._hitTestScrollbar(e,o),n||t.fulfill(0)}static _hitTestContentWidget(e,t){if(f.isChildOfContentWidgets(t.targetPath)||f.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfill(9,null,null,i):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(f.isChildOfOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfill(12,null,null,i):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const e of i)if(t.target===e.domNode)return t.fulfill(6,e.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,o=t.mouseContentHorizontalOffset,n=t.mouseVerticalOffset;for(const s of i){if(o<s.contentLeft)continue;if(o>s.contentLeft+s.width)continue;const i=e.getVerticalOffsetForLineNumber(s.position.lineNumber);if(i<=n&&n<=i+s.height)return t.fulfill(6,s.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const e=t.isInContentArea?8:5;return t.fulfill(e,i.position,null,i)}return null}static _hitTestTextArea(e,t){return f.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),o=i.range.getStartPosition();let n=Math.abs(t.pos.x-t.editorPos.x);const s={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:n};return n-=e.layoutInfo.glyphMarginLeft,n<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,o,i.range,s):(n-=e.layoutInfo.glyphMarginWidth,n<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,o,i.range,s):(n-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,o,i.range,s)))}return null}static _hitTestViewLines(e,t,i){if(!f.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new a["a"](1,1),null,b);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const i=e.model.getLineCount(),o=e.model.getLineMaxColumn(i);return t.fulfill(7,new a["a"](i,o),null,b)}if(i){if(f.isStrictChildOfViewLines(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(0===e.model.getLineLength(i)){const o=e.getLineWidth(i),n=v(t.mouseContentHorizontalOffset-o);return t.fulfill(7,new a["a"](i,1),null,n)}const o=e.getLineWidth(i);if(t.mouseContentHorizontalOffset>=o){const n=v(t.mouseContentHorizontalOffset-o),s=new a["a"](i,e.model.getLineMaxColumn(i));return t.fulfill(7,s,null,n)}}return t.fulfill(0)}const o=w._doHitTest(e,t);return 1===o.type?w.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}static _hitTestMinimap(e,t){if(f.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.model.getLineMaxColumn(i);return t.fulfill(11,new a["a"](i,o))}return null}static _hitTestScrollbarSlider(e,t){if(f.isChildOfScrollableElement(t.targetPath)&&t.target&&1===t.target.nodeType){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.model.getLineMaxColumn(i);return t.fulfill(11,new a["a"](i,o))}}return null}static _hitTestScrollbar(e,t){if(f.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.model.getLineMaxColumn(i);return t.fulfill(11,new a["a"](i,o))}return null}getMouseColumn(e,t){const i=this._context.configuration.options,o=i.get(129),n=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-o.contentLeft;return w._getMouseColumn(n,i.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){if(e<0)return 1;const i=Math.round(e/t);return i+1}static createMouseTargetFromHitTestPosition(e,t,i,o,n){const s=o.lineNumber,r=o.column,a=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>a){const e=v(t.mouseContentHorizontalOffset-a);return t.fulfill(7,o,null,e)}const c=e.visibleRangeForPosition(s,r);if(!c)return t.fulfill(0,o);const u=c.left;if(t.mouseContentHorizontalOffset===u)return t.fulfill(6,o,null,{mightBeForeignElement:!!n});const d=[];if(d.push({offset:c.left,column:r}),r>1){const t=e.visibleRangeForPosition(s,r-1);t&&d.push({offset:t.left,column:r-1})}const h=e.model.getLineMaxColumn(s);if(r<h){const t=e.visibleRangeForPosition(s,r+1);t&&d.push({offset:t.left,column:r+1})}d.sort((e,t)=>e.offset-t.offset);const p=t.pos.toClientCoordinates(),m=i.getBoundingClientRect(),g=m.left<=p.clientX&&p.clientX<=m.right;for(let f=1;f<d.length;f++){const e=d[f-1],i=d[f];if(e.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=i.offset){const r=new l["a"](s,e.column,s,i.column);return t.fulfill(6,o,r,{mightBeForeignElement:!g||!!n})}}return t.fulfill(6,o,null,{mightBeForeignElement:!g||!!n})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.getVerticalOffsetForLineNumber(i),s=o+Math.floor(e.lineHeight/2);let r=t.pos.y+(s-t.mouseVerticalOffset);r<=t.editorPos.y&&(r=t.editorPos.y+1),r>=t.editorPos.y+e.layoutInfo.height&&(r=t.editorPos.y+e.layoutInfo.height-1);const a=new n["f"](t.pos.x,r),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return 1===l.type?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=u["F"](e.viewDomNode);let n;if(n=i?"undefined"===typeof i.caretRangeFromPoint?y(i,t.clientX,t.clientY):i.caretRangeFromPoint(t.clientX,t.clientY):document.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new h;const s=n.startContainer;if(s.nodeType===s.TEXT_NODE){const t=s.parentNode,i=t?t.parentNode:null,a=i?i.parentNode:null,l=a&&a.nodeType===a.ELEMENT_NODE?a.className:null;return l===r["b"].CLASS_NAME?o.createFromDOMInfo(e,t,n.startOffset):new h(s.parentNode)}if(s.nodeType===s.ELEMENT_NODE){const t=s.parentNode,i=t?t.parentNode:null,n=i&&i.nodeType===i.ELEMENT_NODE?i.className:null;return n===r["b"].CLASS_NAME?o.createFromDOMInfo(e,s,s.textContent.length):new h(s)}return new h}static _doHitTestWithCaretPositionFromPoint(e,t){const i=document.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const t=i.offsetNode.parentNode,n=t?t.parentNode:null,s=n?n.parentNode:null,a=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;return a===r["b"].CLASS_NAME?o.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new h(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const t=i.offsetNode.parentNode,n=t&&t.nodeType===t.ELEMENT_NODE?t.className:null,s=t?t.parentNode:null,a=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(n===r["b"].CLASS_NAME){const t=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(t)return o.createFromDOMInfo(e,t,0)}else if(a===r["b"].CLASS_NAME)return o.createFromDOMInfo(e,i.offsetNode,0)}return new h(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:o}=t.getTextModelOptions(),n=d["a"].atomicPosition(i,e.column-1,o,2);return-1!==n?new a["a"](e.lineNumber,n+1):e}static _doHitTest(e,t){let i=new h;if("function"===typeof document.caretRangeFromPoint?i=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),1===i.type){const t=e.model.getInjectedTextAt(i.position),o=e.model.normalizePosition(i.position,2);!t&&o.equals(i.position)||(i=new p(o,i.spanNode,t))}return 1===i.type&&e.stickyTabStops&&(i=new p(this._snapToSoftTabBoundary(i.position,e.model),i.spanNode,i.injectedText)),i}}function y(e,t,i){const o=document.createRange();let n=e.elementFromPoint(t,i);if(null!==n){while(n&&n.firstChild&&n.firstChild.nodeType!==n.firstChild.TEXT_NODE&&n.lastChild&&n.lastChild.firstChild)n=n.lastChild;const e=n.getBoundingClientRect(),i=window.getComputedStyle(n,null).getPropertyValue("font"),s=n.innerText;let r,a=e.left,l=0;if(t>e.left+e.width)l=s.length;else{const e=x.getInstance();for(let o=0;o<s.length+1;o++){if(r=e.getCharWidth(s.charAt(o),i)/2,a+=r,t<a){l=o;break}a+=r}}o.setStart(n.firstChild,l),o.setEnd(n.firstChild,l)}return o}class x{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return x._INSTANCE||(x._INSTANCE=new x),x._INSTANCE}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const o=this._canvas.getContext("2d");o.font=t;const n=o.measureText(e),s=n.width;return this._cache[i]=s,s}}x._INSTANCE=null},bc04:function(e,t,i){"use strict";i.d(t,"a",(function(){return f})),i.d(t,"b",(function(){return _})),i.d(t,"d",(function(){return C})),i.d(t,"c",(function(){return S}));var o=i("3742"),n=i("6a89"),s=i("2504"),r=i("a666"),a=i("b2cc"),l=i("4fc3"),c=i("db88"),u=i("0a0f"),d=i("f5f3"),h=i("dff7");const p=Object(u["c"])("IEditorCancelService"),m=new l["c"]("cancellableOperation",!1,Object(h["a"])("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));Object(d["b"])(p,class{constructor(){this._tokens=new WeakMap}add(e,t){let i,o=this._tokens.get(e);return o||(o=e.invokeWithinContext(e=>{const t=m.bindTo(e.get(l["b"])),i=new c["a"];return{key:t,tokens:i}}),this._tokens.set(e,o)),o.key.set(!0),i=o.tokens.push(t),()=>{i&&(i(),o.key.set(!o.tokens.isEmpty()),i=void 0)}}cancel(e){const t=this._tokens.get(e);if(!t)return;const i=t.tokens.pop();i&&(i.cancel(),t.key.set(!t.tokens.isEmpty()))}},!0);class g extends s["b"]{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(t=>t.get(p).add(e,this))}dispose(){this._unregister(),super.dispose()}}Object(a["k"])(new class extends a["c"]{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:m})}runEditorCommand(e,t){e.get(p).cancel(t)}});class f{constructor(e,t){if(this.flags=t,0!==(1&this.flags)){const t=e.getModel();this.modelVersionId=t?o["v"]("{0}#{1}",t.uri.toString(),t.getVersionId()):null}else this.modelVersionId=null;0!==(4&this.flags)?this.position=e.getPosition():this.position=null,0!==(2&this.flags)?this.selection=e.getSelection():this.selection=null,0!==(8&this.flags)?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof f))return!1;const t=e;return this.modelVersionId===t.modelVersionId&&(this.scrollLeft===t.scrollLeft&&this.scrollTop===t.scrollTop&&(!(!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position))&&!(!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))))}validate(e){return this._equals(new f(e,this.flags))}}class _ extends g{constructor(e,t,i,o){super(e,o),this._listener=new r["b"],4&t&&this._listener.add(e.onDidChangeCursorPosition(e=>{i&&n["a"].containsPosition(i,e.position)||this.cancel()})),2&t&&this._listener.add(e.onDidChangeCursorSelection(e=>{i&&n["a"].containsRange(i,e.selection)||this.cancel()})),8&t&&this._listener.add(e.onDidScrollChange(e=>this.cancel())),1&t&&(this._listener.add(e.onDidChangeModel(e=>this.cancel())),this._listener.add(e.onDidChangeModelContent(e=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class C extends s["b"]{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}class S{constructor(e,t,i){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=i}static capture(e){let t=null,i=0;if(0!==e.getScrollTop()){const o=e.getVisibleRanges();if(o.length>0){t=o[0].getStartPosition();const n=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-n}}return new S(t,i,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i)}}},bfa1:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var o,n=i("c39c"),s=i("5bd7"),r=i("5818"),a=i("fdcc"),l=i("4d05"),c=i("308f"),u=i("a666"),d=i("b707"),h=i("1ddc"),p=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},m=function(e,t){return function(i,o){t(i,o,e)}},g=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(o.next(e))}catch(t){s(t)}}function a(e){try{l(o["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):n(e.value).then(r,a)}l((o=o.apply(e,t||[])).next())}))};let f=class e{constructor(e,t,i){this._options=e,this._modeService=t,this._openerService=i,this._onDidRenderAsync=new c["b"],this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e){const e=document.createElement("span");return{element:e,dispose:()=>{}}}const o=new u["b"],s=o.add(Object(n["a"])(e,Object.assign(Object.assign({},this._getRenderOptions(e,o)),t),i));return{element:s.element,dispose:()=>o.dispose()}}_getRenderOptions(t,i){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(t,i)=>g(this,void 0,void 0,(function*(){var o,n,s,r;let a;t?a=this._modeService.getModeIdForLanguageName(t):this._options.editor&&(a=null===(o=this._options.editor.getModel())||void 0===o?void 0:o.getLanguageId()),a||(a="plaintext"),this._modeService.triggerMode(a);const c=null!==(n=yield d["F"].getPromise(a))&&void 0!==n?n:void 0,u=document.createElement("span");if(u.innerHTML=null!==(r=null===(s=e._ttpTokenizer)||void 0===s?void 0:s.createHTML(i,this._modeService.languageIdCodec,c))&&void 0!==r?r:Object(l["b"])(i,this._modeService.languageIdCodec,c),this._options.editor){const e=this._options.editor.getOption(43);h["a"].applyFontInfoSlow(u,e)}else this._options.codeBlockFontFamily&&(u.style.fontFamily=this._options.codeBlockFontFamily);return u})),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:e=>this._openerService.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:t.isTrusted}).catch(a["f"]),disposables:i}}}};f._ttpTokenizer=null===(o=window.trustedTypes)||void 0===o?void 0:o.createPolicy("tokenizeToString",{createHTML(e,t,i){return Object(l["b"])(e,t,i)}}),f=p([m(1,r["a"]),m(2,s["a"])],f)},c7f5:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return u}));var o=i("0a0f"),n=i("6d8e"),s=i("ef8e");const r=Object(o["c"])("IWorkspaceEditService");function a(e){return Object(s["k"])(e)&&(Boolean(e.newUri)||Boolean(e.oldUri))}function l(e){return Object(s["k"])(e)&&n["a"].isUri(e.resource)&&Object(s["k"])(e.edit)}class c{constructor(e){this.metadata=e}static convert(e){return e.edits.map(e=>{if(l(e))return new u(e.resource,e.edit,e.modelVersionId,e.metadata);if(a(e))return new d(e.oldUri,e.newUri,e.options,e.metadata);throw new Error("Unsupported edit")})}}class u extends c{constructor(e,t,i,o){super(o),this.resource=e,this.textEdit=t,this.versionId=i}}class d extends c{constructor(e,t,i,o){super(o),this.oldResource=e,this.newResource=t,this.options=i}}},d585:function(e,t,i){"use strict";i.d(t,"b",(function(){return y})),i.d(t,"a",(function(){return M}));var o=i("dff7"),n=i("0f70"),s=i("ef8e"),r=i("3813"),a=i("b2cc"),l=i("5717"),c=i("fd91"),u=i("2e5d"),d=i("b272"),h=i("a007"),p=i("191f"),m=i("7061"),g=i("6a89"),f=i("c101"),_=i("4fc3"),C=i("9eb8");const S=0;class b extends a["c"]{runEditorCommand(e,t,i){const o=t._getViewModel();o&&this.runCoreEditorCommand(o,i||{})}}var v,w,y;(function(e){const t=function(e){if(!s["k"](e))return!1;const t=e;return!!s["l"](t.to)&&(!(!s["m"](t.by)&&!s["l"](t.by))&&(!(!s["m"](t.value)&&!s["j"](t.value))&&!(!s["m"](t.revealCursor)&&!s["g"](t.revealCursor))))};function i(t){let i,o;switch(t.to){case e.RawDirection.Up:i=1;break;case e.RawDirection.Down:i=2;break;default:return null}switch(t.by){case e.RawUnit.Line:o=1;break;case e.RawUnit.WrappedLine:o=2;break;case e.RawUnit.Page:o=3;break;case e.RawUnit.HalfPage:o=4;break;default:o=2}const n=Math.floor(t.value||1),s=!!t.revealCursor;return{direction:i,unit:o,value:n,revealCursor:s,select:!!t.select}}e.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:t,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},e.RawDirection={Up:"up",Down:"down"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"},e.parse=i})(v||(v={})),function(e){const t=function(e){if(!s["k"](e))return!1;const t=e;return!(!s["j"](t.lineNumber)&&!s["l"](t.lineNumber))&&!(!s["m"](t.at)&&!s["l"](t.at))};e.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:t,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},e.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(w||(w={}));class x{constructor(e){e.addImplementation(1e4,"code-editor",(e,t)=>{const i=e.get(l["a"]).getFocusedCodeEditor();return!(!i||!i.hasTextFocus())&&this._runEditorCommand(e,i,t)}),e.addImplementation(1e3,"generic-dom-input-textarea",(e,t)=>{const i=document.activeElement;return!!(i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0)&&(this.runDOMCommand(),!0)}),e.addImplementation(0,"generic-dom",(e,t)=>{const i=e.get(l["a"]).getActiveCodeEditor();return!!i&&(i.focus(),this._runEditorCommand(e,i,t))})}_runEditorCommand(e,t,i){const o=this.runEditorCommand(e,t,i);return o||!0}}(function(e){class t extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[h["b"].moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),e.revealPrimaryCursor(t.source,!0)}}e.MoveTo=Object(a["k"])(new t({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=Object(a["k"])(new t({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class i extends b{runCoreEditorCommand(e,t){e.model.pushStackElement();const i=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),t);e.setCursorStates(t.source,3,i.viewStates.map(e=>u["d"].fromViewState(e))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:i.fromLineNumber,fromViewVisualColumn:i.fromVisualColumn,toViewLineNumber:i.toLineNumber,toViewVisualColumn:i.toVisualColumn}),i.reversed?e.revealTopMostCursor(t.source):e.revealBottomMostCursor(t.source)}}e.ColumnSelect=Object(a["k"])(new class extends i{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(e,t,i,o){const n=e.model.validatePosition(o.position),s=e.coordinatesConverter.validateViewPosition(new m["a"](o.viewPosition.lineNumber,o.viewPosition.column),n);let r=o.doColumnSelect?i.fromViewLineNumber:s.lineNumber,a=o.doColumnSelect?i.fromViewVisualColumn:o.mouseColumn-1;return c["a"].columnSelect(e.cursorConfig,e,r,a,s.lineNumber,o.mouseColumn-1)}}),e.CursorColumnSelectLeft=Object(a["k"])(new class extends i{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,o){return c["a"].columnSelectLeft(e.cursorConfig,e,i)}}),e.CursorColumnSelectRight=Object(a["k"])(new class extends i{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,o){return c["a"].columnSelectRight(e.cursorConfig,e,i)}});class s extends i{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,o){return c["a"].columnSelectUp(e.cursorConfig,e,i,this._isPaged)}}e.CursorColumnSelectUp=Object(a["k"])(new s({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=Object(a["k"])(new s({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:3595,linux:{primary:0}}}));class l extends i{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,o){return c["a"].columnSelectDown(e.cursorConfig,e,i,this._isPaged)}}e.CursorColumnSelectDown=Object(a["k"])(new l({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=Object(a["k"])(new l({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:3596,linux:{primary:0}}}));class d extends b{constructor(){super({id:"cursorMove",precondition:void 0,description:h["a"].description})}runCoreEditorCommand(e,t){const i=h["a"].parse(t);i&&this._runCursorMove(e,t.source,i)}_runCursorMove(e,t,i){e.model.pushStackElement(),e.setCursorStates(t,3,d._move(e,e.getCursorStates(),i)),e.revealPrimaryCursor(t,!0)}static _move(e,t,i){const o=i.select,n=i.value;switch(i.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return h["b"].simpleMove(e,t,i.direction,o,n,i.unit);case 11:case 13:case 12:case 14:return h["b"].viewportMove(e,t,i.direction,o,n);default:return null}}}e.CursorMoveImpl=d,e.CursorMove=Object(a["k"])(new d);class p extends b{constructor(e){super(e),this._staticArgs=e.args}runCoreEditorCommand(e,t){let i=this._staticArgs;-1===this._staticArgs.value&&(i={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(t.source,3,h["b"].simpleMove(e,e.getCursorStates(),i.direction,i.select,i.value,i.unit)),e.revealPrimaryCursor(t.source,!0)}}e.CursorLeft=Object(a["k"])(new p({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=Object(a["k"])(new p({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:1039}})),e.CursorRight=Object(a["k"])(new p({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=Object(a["k"])(new p({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:1041}})),e.CursorUp=Object(a["k"])(new p({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=Object(a["k"])(new p({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=Object(a["k"])(new p({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:11}})),e.CursorPageUpSelect=Object(a["k"])(new p({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:1035}})),e.CursorDown=Object(a["k"])(new p({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=Object(a["k"])(new p({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=Object(a["k"])(new p({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:12}})),e.CursorPageDownSelect=Object(a["k"])(new p({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:1036}})),e.CreateCursor=Object(a["k"])(new class extends b{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(e,t){let i;i=t.wholeLine?h["b"].line(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition):h["b"].moveTo(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition);const o=e.getCursorStates();if(o.length>1){const n=i.modelState?i.modelState.position:null,s=i.viewState?i.viewState.position:null;for(let i=0,r=o.length;i<r;i++){const r=o[i];if((!n||r.modelState.selection.containsPosition(n))&&(!s||r.viewState.selection.containsPosition(s)))return o.splice(i,1),e.model.pushStackElement(),void e.setCursorStates(t.source,3,o)}}o.push(i),e.model.pushStackElement(),e.setCursorStates(t.source,3,o)}}),e.LastCursorMoveToSelect=Object(a["k"])(new class extends b{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(e,t){const i=e.getLastAddedCursorIndex(),o=e.getCursorStates(),n=o.slice(0);n[i]=h["b"].moveTo(e,o[i],!0,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,n)}});class _ extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,h["b"].moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorHome=Object(a["k"])(new _({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=Object(a["k"])(new _({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class C extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e){const t=[];for(let i=0,o=e.length;i<o;i++){const o=e[i],n=o.modelState.position.lineNumber;t[i]=u["d"].fromModelState(o.modelState.move(this._inSelectionMode,n,1,0))}return t}}e.CursorLineStart=Object(a["k"])(new C({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=Object(a["k"])(new C({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:0,mac:{primary:1311}}}));class y extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,h["b"].moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,t.sticky||!1)),e.revealPrimaryCursor(t.source,!0)}}e.CursorEnd=Object(a["k"])(new y({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:S,kbExpr:f["a"].textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:o["a"]("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),e.CursorEndSelect=Object(a["k"])(new y({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:S,kbExpr:f["a"].textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:o["a"]("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class E extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e,e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e,t){const i=[];for(let o=0,n=t.length;o<n;o++){const n=t[o],s=n.modelState.position.lineNumber,r=e.model.getLineMaxColumn(s);i[o]=u["d"].fromModelState(n.modelState.move(this._inSelectionMode,s,r,0))}return i}}e.CursorLineEnd=Object(a["k"])(new E({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=Object(a["k"])(new E({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:0,mac:{primary:1315}}}));class T extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,h["b"].moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorTop=Object(a["k"])(new T({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=Object(a["k"])(new T({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:3086,mac:{primary:3088}}}));class O extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,h["b"].moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorBottom=Object(a["k"])(new O({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=Object(a["k"])(new O({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:3085,mac:{primary:3090}}}));class M extends b{constructor(){super({id:"editorScroll",precondition:void 0,description:v.description})}runCoreEditorCommand(e,t){const i=v.parse(t);i&&this._runEditorScroll(e,t.source,i)}_runEditorScroll(e,t,i){const o=this._computeDesiredScrollTop(e,i);if(i.revealCursor){const n=e.getCompletelyVisibleViewRangeAtScrollTop(o);e.setCursorStates(t,3,[h["b"].findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),n,i.select)])}e.setScrollTop(o,0)}_computeDesiredScrollTop(e,t){if(1===t.unit){const i=e.getCompletelyVisibleViewRange(),o=e.coordinatesConverter.convertViewRangeToModelRange(i);let n;n=1===t.direction?Math.max(1,o.startLineNumber-t.value):Math.min(e.model.getLineCount(),o.startLineNumber+t.value);const s=e.coordinatesConverter.convertModelPositionToViewPosition(new m["a"](n,1));return e.getVerticalOffsetForLineNumber(s.lineNumber)}let i;i=3===t.unit?e.cursorConfig.pageSize*t.value:4===t.unit?Math.round(e.cursorConfig.pageSize/2)*t.value:t.value;const o=(1===t.direction?-1:1)*i;return e.getScrollTop()+o*e.cursorConfig.lineHeight}}e.EditorScrollImpl=M,e.EditorScroll=Object(a["k"])(new M),e.ScrollLineUp=Object(a["k"])(new class extends b{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(t,i){e.EditorScroll._runEditorScroll(t,i.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),e.ScrollPageUp=Object(a["k"])(new class extends b{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(t,i){e.EditorScroll._runEditorScroll(t,i.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),e.ScrollLineDown=Object(a["k"])(new class extends b{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(t,i){e.EditorScroll._runEditorScroll(t,i.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),e.ScrollPageDown=Object(a["k"])(new class extends b{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(t,i){e.EditorScroll._runEditorScroll(t,i.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class A extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[h["b"].word(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position)]),e.revealPrimaryCursor(t.source,!0)}}e.WordSelect=Object(a["k"])(new A({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),e.WordSelectDrag=Object(a["k"])(new A({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),e.LastCursorWordSelect=Object(a["k"])(new class extends b{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(e,t){const i=e.getLastAddedCursorIndex(),o=e.getCursorStates(),n=o.slice(0),s=o[i];n[i]=h["b"].word(e,s,s.modelState.hasSelection(),t.position),e.model.pushStackElement(),e.setCursorStates(t.source,3,n)}});class N extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[h["b"].line(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),e.revealPrimaryCursor(t.source,!1)}}e.LineSelect=Object(a["k"])(new N({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),e.LineSelectDrag=Object(a["k"])(new N({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class D extends b{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){const i=e.getLastAddedCursorIndex(),o=e.getCursorStates(),n=o.slice(0);n[i]=h["b"].line(e,o[i],this._inSelectionMode,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,n)}}e.LastCursorLineSelect=Object(a["k"])(new D({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),e.LastCursorLineSelectDrag=Object(a["k"])(new D({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),e.ExpandLineSelection=Object(a["k"])(new class extends b{constructor(){super({id:"expandLineSelection",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:2090}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,h["b"].expandLineSelection(e,e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}}),e.CancelSelection=Object(a["k"])(new class extends b{constructor(){super({id:"cancelSelection",precondition:f["a"].hasNonEmptySelection,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[h["b"].cancelSelection(e,e.getPrimaryCursorState())]),e.revealPrimaryCursor(t.source,!0)}}),e.RemoveSecondaryCursors=Object(a["k"])(new class extends b{constructor(){super({id:"removeSecondaryCursors",precondition:f["a"].hasMultipleSelections,kbOpts:{weight:S+1,kbExpr:f["a"].textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[e.getPrimaryCursorState()]),e.revealPrimaryCursor(t.source,!0),Object(r["c"])(o["a"]("removedCursor","Removed secondary cursors"))}}),e.RevealLine=Object(a["k"])(new class extends b{constructor(){super({id:"revealLine",precondition:void 0,description:w.description})}runCoreEditorCommand(e,t){const i=t,o=i.lineNumber||0;let n="number"===typeof o?o+1:parseInt(o)+1;n<1&&(n=1);const s=e.model.getLineCount();n>s&&(n=s);const r=new g["a"](n,1,n,e.model.getLineMaxColumn(n));let a=0;if(i.at)switch(i.at){case w.RawAtArgument.Top:a=3;break;case w.RawAtArgument.Center:a=1;break;case w.RawAtArgument.Bottom:a=4;break;default:break}const l=e.coordinatesConverter.convertModelRangeToViewRange(r);e.revealRange(t.source,!1,l,a,0)}}),e.SelectAll=new class extends x{constructor(){super(a["h"])}runDOMCommand(){n["g"]&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(e,t,i){const o=t._getViewModel();o&&this.runCoreEditorCommand(o,i)}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates("keyboard",3,[h["b"].selectAll(e,e.getPrimaryCursorState())])}},e.SetSelection=Object(a["k"])(new class extends b{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[u["d"].fromModelSelection(t.selection)])}})})(y||(y={}));const E=_["a"].and(f["a"].textInputFocus,f["a"].columnSelection);function T(e,t){C["a"].registerKeybindingRule({id:e,primary:t,when:E,weight:S+1})}function O(e){return e.register(),e}var M;T(y.CursorColumnSelectLeft.id,1039),T(y.CursorColumnSelectRight.id,1041),T(y.CursorColumnSelectUp.id,1040),T(y.CursorColumnSelectPageUp.id,1035),T(y.CursorColumnSelectDown.id,1042),T(y.CursorColumnSelectPageDown.id,1036),function(e){class t extends a["c"]{runEditorCommand(e,t,i){const o=t._getViewModel();o&&this.runCoreEditingCommand(t,o,i||{})}}e.CoreEditingCommand=t,e.LineBreakInsert=Object(a["k"])(new class extends t{constructor(){super({id:"lineBreakInsert",precondition:f["a"].writable,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,p["a"].lineBreakInsert(t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection)))}}),e.Outdent=Object(a["k"])(new class extends t{constructor(){super({id:"outdent",precondition:f["a"].writable,kbOpts:{weight:S,kbExpr:_["a"].and(f["a"].editorTextFocus,f["a"].tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,p["a"].outdent(t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection))),e.pushUndoStop()}}),e.Tab=Object(a["k"])(new class extends t{constructor(){super({id:"tab",precondition:f["a"].writable,kbOpts:{weight:S,kbExpr:_["a"].and(f["a"].editorTextFocus,f["a"].tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,p["a"].tab(t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection))),e.pushUndoStop()}}),e.DeleteLeft=Object(a["k"])(new class extends t{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(e,t,i){const[o,n]=d["a"].deleteLeft(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection),t.getCursorAutoClosedCharacters());o&&e.pushUndoStop(),e.executeCommands(this.id,n),t.setPrevEditOperationType(2)}}),e.DeleteRight=Object(a["k"])(new class extends t{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:S,kbExpr:f["a"].textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(e,t,i){const[o,n]=d["a"].deleteRight(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection));o&&e.pushUndoStop(),e.executeCommands(this.id,n),t.setPrevEditOperationType(3)}}),e.Undo=new class extends x{constructor(){super(a["i"])}runDOMCommand(){document.execCommand("undo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(80))return t.getModel().undo()}},e.Redo=new class extends x{constructor(){super(a["g"])}runDOMCommand(){document.execCommand("redo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(80))return t.getModel().redo()}}}(M||(M={}));class A extends a["a"]{constructor(e,t,i){super({id:e,precondition:void 0,description:i}),this._handlerId=t}runCommand(e,t){const i=e.get(l["a"]).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function N(e,t){O(new A("default:"+e,e)),O(new A(e,e,t))}N("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),N("replacePreviousChar"),N("compositionType"),N("compositionStart"),N("compositionEnd"),N("paste"),N("cut")},e393:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));i("56f3");var o=i("dff7"),n=i("0f70"),s=i("6653"),r=i("30db"),a=i("3742"),l=i("1ddc"),c=i("e53c"),u=i("0a89"),d=i("4247"),h=i("b160"),p=i("3d43"),m=i("fd49"),g=i("e6ff"),f=i("7061"),_=i("6a89"),C=i("8025"),S=i("e75b");class b{constructor(e,t,i){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=i}setWidth(e){return new b(this.top,this.left,e)}}const v=n["g"];class w extends d["b"]{constructor(e,t,i){super(e),this._primaryCursorPosition=new f["a"](1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=i,this._scrollLeft=0,this._scrollTop=0;const a=this._context.configuration.options,l=a.get(129);this._setAccessibilityOptions(a),this._contentLeft=l.contentLeft,this._contentWidth=l.contentWidth,this._contentHeight=l.height,this._fontInfo=a.get(43),this._lineHeight=a.get(58),this._emptySelectionClipboard=a.get(32),this._copyWithSyntaxHighlighting=a.get(21),this._visibleTextArea=null,this._selections=[new C["a"](1,1,1,1)],this._modelSelections=[new C["a"](1,1,1,1)],this._lastRenderPosition=null,this.textArea=Object(s["b"])(document.createElement("textarea")),d["a"].write(this.textArea,6),this.textArea.setClassName("inputarea "+S["a"]),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(a)),this.textArea.setAttribute("tabindex",String(a.get(111))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",o["a"]("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),a.get(30)&&a.get(80)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=Object(s["b"])(document.createElement("div")),this.textAreaCover.setPosition("absolute");const h={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:e=>this._context.model.getLineMaxColumn(e),getValueInRange:(e,t)=>this._context.model.getValueInRange(e,t)},p={getDataToCopy:e=>{const t=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,r["i"]),i=this._context.model.getEOL(),o=this._emptySelectionClipboard&&1===this._modelSelections.length&&this._modelSelections[0].isEmpty(),n=Array.isArray(t)?t:null,s=Array.isArray(t)?t.join(i):t;let a=void 0,l=null;if(e&&(c["a"].forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&s.length<65536)){const e=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);e&&(a=e.html,l=e.mode)}return{isFromEmptySelection:o,multicursorText:n,text:s,html:a,mode:l}},getScreenReaderContent:e=>{if(1===this._accessibilitySupport){if(r["f"]){const e=this._selections[0];if(e.isEmpty()){const t=e.getStartPosition();let i=this._getWordBeforePosition(t);if(0===i.length&&(i=this._getCharacterBeforePosition(t)),i.length>0)return new u["b"](i,i.length,i.length,t,t)}}return u["b"].EMPTY}if(n["e"]){const e=this._selections[0];if(e.isEmpty()){const t=e.getStartPosition(),[i,o]=this._getAndroidWordAtPosition(t);if(i.length>0)return new u["b"](i,o,o,t,t)}return u["b"].EMPTY}return u["a"].fromEditorSelection(e,h,this._selections[0],this._accessibilityPageSize,0===this._accessibilitySupport)},deduceModelPosition:(e,t,i)=>this._context.model.deduceModelPositionRelativeToViewPosition(e,t,i)};this._textAreaInput=this._register(new c["c"](p,this.textArea)),this._register(this._textAreaInput.onKeyDown(e=>{this._viewController.emitKeyDown(e)})),this._register(this._textAreaInput.onKeyUp(e=>{this._viewController.emitKeyUp(e)})),this._register(this._textAreaInput.onPaste(e=>{let t=!1,i=null,o=null;e.metadata&&(t=this._emptySelectionClipboard&&!!e.metadata.isFromEmptySelection,i="undefined"!==typeof e.metadata.multicursorText?e.metadata.multicursorText:null,o=e.metadata.mode),this._viewController.paste(e.text,t,i,o)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(e=>{e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?(u["c"]&&console.log(` => compositionType: <<${e.text}>>, ${e.replacePrevCharCnt}, ${e.replaceNextCharCnt}, ${e.positionDelta}`),this._viewController.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta)):(u["c"]&&console.log(` => type: <<${e.text}>>`),this._viewController.type(e.text))})),this._register(this._textAreaInput.onSelectionChangeRequest(e=>{this._viewController.setSelection(e)})),this._register(this._textAreaInput.onCompositionStart(e=>{const t=this._selections[0].startLineNumber,i=this._selections[0].startColumn+e.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new _["a"](t,i,t,i),0,1);const o=this._viewHelper.visibleRangeForPositionRelativeToEditor(t,i);o&&(this._visibleTextArea=new b(this._context.viewLayout.getVerticalOffsetForLineNumber(t),o.left,v?0:1),this._render()),this.textArea.setClassName(`inputarea ${S["a"]} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(e=>{this._visibleTextArea&&(this._visibleTextArea=this._visibleTextArea.setWidth(y(e.data,this._fontInfo)),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName("inputarea "+S["a"]),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.model.getLineContent(e.lineNumber),o=Object(g["a"])(t);let n=!0,s=e.column,r=!0,a=e.column,l=0;while(l<50&&(n||r)){if(n&&s<=1&&(n=!1),n){const e=i.charCodeAt(s-2),t=o.get(e);0!==t?n=!1:s--}if(r&&a>i.length&&(r=!1),r){const e=i.charCodeAt(a-1),t=o.get(e);0!==t?r=!1:a++}l++}return[i.substring(s-1,a-1),e.column-s]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),i=Object(g["a"])(this._context.configuration.options.get(115));let o=e.column,n=0;while(o>1){const s=t.charCodeAt(o-2),r=i.get(s);if(0!==r||n>50)return t.substring(o-1,e.column-1);n++,o--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const t=this._context.model.getLineContent(e.lineNumber),i=t.charAt(e.column-2);if(!a["E"](i.charCodeAt(0)))return i}return""}_getAriaLabel(e){const t=e.get(2);return 1===t?o["a"]("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",r["d"]?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);2===this._accessibilitySupport&&t===m["g"].accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(129);return this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new f["a"](this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea)return void this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);if(!this._primaryCursorVisibleRange)return void this._renderAtTopLeft();const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth)return void this._renderAtTopLeft();const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;t<0||t>this._contentHeight?this._renderAtTopLeft():r["f"]?this._renderInsideEditor(this._primaryCursorPosition,t,e,v?0:1,this._lineHeight):this._renderInsideEditor(this._primaryCursorPosition,t,e,v?0:1,v?0:1)}_renderInsideEditor(e,t,i,o,n){this._lastRenderPosition=e;const s=this.textArea,r=this.textAreaCover;l["a"].applyFontInfo(s,this._fontInfo),s.setTop(t),s.setLeft(i),s.setWidth(o),s.setHeight(n),r.setTop(0),r.setLeft(0),r.setWidth(0),r.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if(l["a"].applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),v)return e.setWidth(0),e.setHeight(0),t.setWidth(0),void t.setHeight(0);e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const i=this._context.configuration.options;i.get(49)?t.setClassName("monaco-editor-background textAreaCover "+p["a"].OUTER_CLASS_NAME):0!==i.get(59).renderType?t.setClassName("monaco-editor-background textAreaCover "+h["a"].CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}function y(e,t){const i=document.createElement("canvas"),o=i.getContext("2d");o.font=x(t);const s=o.measureText(e);return n["g"]?s.width+2:s.width}function x(e){return E("normal",e.fontWeight,e.fontSize,e.lineHeight,e.fontFamily)}function E(e,t,i,o,n){return`${e} normal ${t} ${i}px / ${o}px ${n}`}},e53c:function(e,t,i){"use strict";i.d(t,"d",(function(){return o})),i.d(t,"a",(function(){return g})),i.d(t,"b",(function(){return f})),i.d(t,"c",(function(){return _}));var o,n=i("0f70"),s=i("11f7"),r=i("5fe7"),a=i("308f"),l=i("a666"),c=i("b9b4"),u=i("30db"),d=i("3742"),h=i("0a89"),p=i("7061"),m=i("8025");(function(e){e.Tap="-monaco-textarea-synthetic-tap"})(o||(o={}));const g={forceCopyWithSyntaxHighlighting:!1};class f{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}f.INSTANCE=new f;class _ extends l["a"]{constructor(e,t){super(),this.textArea=t,this._onFocus=this._register(new a["b"]),this.onFocus=this._onFocus.event,this._onBlur=this._register(new a["b"]),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new a["b"]),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new a["b"]),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new a["b"]),this.onCut=this._onCut.event,this._onPaste=this._register(new a["b"]),this.onPaste=this._onPaste.event,this._onType=this._register(new a["b"]),this.onType=this._onType.event,this._onCompositionStart=this._register(new a["b"]),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new a["b"]),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new a["b"]),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new a["b"]),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._host=e,this._textArea=this._register(new S(t)),this._asyncTriggerCut=this._register(new r["e"](()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new r["e"](()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=h["b"].EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._isDoingComposition=!1,this._nextCommand=0;let i=null;this._register(s["o"](t.domNode,"keydown",e=>{(109===e.keyCode||this._isDoingComposition&&1===e.keyCode)&&e.stopPropagation(),e.equals(9)&&e.preventDefault(),i=e,this._onKeyDown.fire(e)})),this._register(s["o"](t.domNode,"keyup",e=>{this._onKeyUp.fire(e)})),this._register(s["i"](t.domNode,"compositionstart",e=>{if(h["c"]&&console.log("[compositionstart]",e),!this._isDoingComposition){if(this._isDoingComposition=!0,u["f"]&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===e.data){const t=i&&i.equals(109)&&("ArrowRight"===i.code||"ArrowLeft"===i.code);if(t||n["g"])return h["c"]&&console.log("[compositionstart] Handling long press case on macOS + arrow key or Firefox",e),this._textAreaState=new h["b"](this._textAreaState.value,this._textAreaState.selectionStart-1,this._textAreaState.selectionEnd,this._textAreaState.selectionStartPosition?new p["a"](this._textAreaState.selectionStartPosition.lineNumber,this._textAreaState.selectionStartPosition.column-1):null,this._textAreaState.selectionEndPosition),void this._onCompositionStart.fire({revealDeltaColumns:-1})}n["e"]?this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart}):(this._setAndWriteTextAreaState("compositionstart",h["b"].EMPTY),this._onCompositionStart.fire({revealDeltaColumns:0}))}}));const l=e=>{const t=this._textAreaState,i=h["b"].readFromTextArea(this._textArea);return[i,h["b"].deduceInput(t,i,e)]},c=()=>{const e=this._textAreaState,t=h["b"].readFromTextArea(this._textArea);return[t,h["b"].deduceAndroidCompositionInput(e,t)]},m=e=>{const t=this._textAreaState,i=h["b"].selectedText(e),o={text:i.value,replacePrevCharCnt:t.selectionEnd-t.selectionStart,replaceNextCharCnt:0,positionDelta:0};return[i,o]};this._register(s["i"](t.domNode,"compositionupdate",e=>{if(h["c"]&&console.log("[compositionupdate]",e),n["e"]){const[t,i]=c();return this._textAreaState=t,this._onType.fire(i),void this._onCompositionUpdate.fire(e)}const[t,i]=m(e.data||"");this._textAreaState=t,this._onType.fire(i),this._onCompositionUpdate.fire(e)})),this._register(s["i"](t.domNode,"compositionend",e=>{if(h["c"]&&console.log("[compositionend]",e),!this._isDoingComposition)return;if(this._isDoingComposition=!1,n["e"]){const[e,t]=c();return this._textAreaState=e,this._onType.fire(t),void this._onCompositionEnd.fire()}const[t,i]=m(e.data||"");this._textAreaState=t,this._onType.fire(i),(n["f"]||n["g"])&&(this._textAreaState=h["b"].readFromTextArea(this._textArea)),this._onCompositionEnd.fire()})),this._register(s["i"](t.domNode,"input",()=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._isDoingComposition)return;const[e,t]=l(u["f"]);0===t.replacePrevCharCnt&&1===t.text.length&&d["E"](t.text.charCodeAt(0))||(this._textAreaState=e,0===this._nextCommand?""===t.text&&0===t.replacePrevCharCnt||this._onType.fire(t):(""===t.text&&0===t.replacePrevCharCnt||this._firePaste(t.text,null),this._nextCommand=0))})),this._register(s["i"](t.domNode,"cut",e=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(e),this._asyncTriggerCut.schedule()})),this._register(s["i"](t.domNode,"copy",e=>{this._ensureClipboardGetsEditorSelection(e)})),this._register(s["i"](t.domNode,"paste",e=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),C.canUseTextData(e)){const[t,i]=C.getTextData(e);""!==t&&this._firePaste(t,i)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",h["b"].EMPTY),this._nextCommand=1})),this._register(s["i"](t.domNode,"focus",()=>{const e=this._hasFocus;this._setHasFocus(!0),n["h"]&&!e&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(s["i"](t.domNode,"blur",()=>{this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(s["i"](t.domNode,o.Tap,()=>{n["e"]&&this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return s["i"](document,"selectionchange",t=>{if(!this._hasFocus)return;if(this._isDoingComposition)return;if(!n["f"])return;const i=Date.now(),o=i-e;if(e=i,o<5)return;const s=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100)return;if(!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),u=this._host.deduceModelPosition(c[0],c[1],c[2]),d=this._textAreaState.deduceEditorPosition(l),h=this._host.deduceModelPosition(d[0],d[1],d[2]),p=new m["a"](u.lineNumber,u.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(p)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){const e=s["F"](this.textArea.domNode);e?this._setHasFocus(e.activeElement===this.textArea.domNode):s["N"](this.textArea.domNode)?this._setHasFocus(document.activeElement===this.textArea.domNode):this._setHasFocus(!1)}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._isDoingComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(C.canUseTextData(e)),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};f.INSTANCE.set(n["g"]?t.text.replace(/\r\n/g,"\n"):t.text,i),C.canUseTextData(e)?C.setTextData(e,t.text,t.html,i):this._setAndWriteTextAreaState("copy or cut",h["b"].selectedText(t.text))}_firePaste(e,t){t||(t=f.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class C{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();const i=e.clipboardData.getData(c["a"].text);let o=null;const n=e.clipboardData.getData("vscode-editor-data");if("string"===typeof n)try{o=JSON.parse(n),1!==o.version&&(o=null)}catch(t){}return[i,o]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,i,o){if(e.clipboardData)return e.clipboardData.setData(c["a"].text,t),"string"===typeof i&&e.clipboardData.setData("text/html",i),e.clipboardData.setData("vscode-editor-data",JSON.stringify(o)),void e.preventDefault();throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class S extends l["a"]{constructor(e){super(),this._actual=e,this._ignoreSelectionChangeTime=0}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.domNode.value}setValue(e,t){const i=this._actual.domNode;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return"backward"===this._actual.domNode.selectionDirection?this._actual.domNode.selectionEnd:this._actual.domNode.selectionStart}getSelectionEnd(){return"backward"===this._actual.domNode.selectionDirection?this._actual.domNode.selectionStart:this._actual.domNode.selectionEnd}setSelectionRange(e,t,i){const o=this._actual.domNode;let r=null;const a=s["F"](o);r=a?a.activeElement:document.activeElement;const l=r===o,c=o.selectionStart,u=o.selectionEnd;if(l&&c===t&&u===i)n["g"]&&window.parent!==window&&o.focus();else{if(l)return this.setIgnoreSelectionChangeTime("setSelectionRange"),o.setSelectionRange(t,i),void(n["g"]&&window.parent!==window&&o.focus());try{const e=s["U"](o);this.setIgnoreSelectionChangeTime("setSelectionRange"),o.focus(),o.setSelectionRange(t,i),s["S"](o,e)}catch(d){}}}}}}]);