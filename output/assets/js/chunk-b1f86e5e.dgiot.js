/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2022年08月10日20时15分41秒
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b1f86e5e"],{"0238":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-drawer",{staticClass:"parserTable",attrs:{"append-to-body":!0,direction:"rtl",visible:e.dialogFormVisible,width:"500"},on:{close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:e.close}},[e._v(" "+e._s(e.$translateTitle("category.cancel"))+" ")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.save(e.form.mark)}}},[e._v(" "+e._s(e.$translateTitle("category.submit"))+" ")])]},proxy:!0}])},[t("dgiot-query-form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t("dgiot-query-form-top-panel",[t("el-form",{ref:"form",attrs:{inline:!0,"label-width":"80px",model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:e.$translateTitle("alert.productname")}},[t("el-select",{attrs:{clearable:"",placeholder:e.$translateTitle("alert.please enter")+e.$translateTitle("alert.product name")},on:{clear:e.Industry},model:{value:e.queryForm.productId,callback:function(t){e.$set(e.queryForm,"productId",t)},expression:"queryForm.productId"}},e._l(e.productData,(function(a){return t("el-option",{key:a.objectId,attrs:{label:a.name,value:a.objectId},nativeOn:{click:function(t){return e.Industry(a)}}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{icon:"el-icon-search","native-type":"submit",type:"primary"},on:{click:e.Industry}},[e._v(" 查询 ")])],1)],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{border:"","cell-style":{"text-align":"center"},data:e.tableData,"header-cell-style":{"text-align":"center"},height:e.$baseTableHeight(0)+180,size:"mini"}},[t("el-table-column",{attrs:{label:"objectId",prop:"objectId",width:"140"}}),t("el-table-column",{attrs:{label:e.$translateTitle("developer.Templatename"),prop:"name",width:"180"}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.toDeleteATemplate(a.objectId)}}},[e._v(" "+e._s(e.$translateTitle("product.Delete template"))+" ")])]}}])})],1),t("dgiot-Pagination",{directives:[{name:"show",rawName:"v-show",value:e.queryForm.total>0,expression:"queryForm.total > 0"}],attrs:{limit:e.queryForm.pageSize,page:e.queryForm.pageNo,total:e.queryForm.total},on:{"update:limit":function(t){return e.$set(e.queryForm,"pageSize",t)},"update:page":function(t){return e.$set(e.queryForm,"pageNo",t)},pagination:e.Industry}})],1)},o=[],l=a("ef68"),i=a("7212"),s=a("5880"),n=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,b=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,h=(e,t)=>{for(var a in t||(t={}))u.call(t,a)&&b(e,a,t[a]);if(p)for(var a of p(t))m.call(t,a)&&b(e,a,t[a]);return e},f=(e,t)=>c(e,d(t)),g=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())}),y={name:"ProductTemplet",data(){return{form:{},dialogFormVisible:!1,tableData:[],productData:[],queryForm:{productId:"",productFlag:!1,pageNo:1,pageSize:20,searchDate:[],limt:10,skip:0,total:0,order:"-createdAt",keys:"count(*)"}}},computed:f(h({},Object(s["mapGetters"])({role:"acl/role",username:"user/username"})),{aclObj(){let e={};return this.role.map(t=>{dgiotlog.log(t.name,""),e[""+("role:"+t.name)]={read:!0,write:!0}}),e}}),created(){},mounted(){},methods:{selectType(e){this.form.data=e,dgiotlog.log(e)},categoryChange(e){},Industry(){return g(this,arguments,(function*(e={}){e.limit||(e=this.queryForm);let t={limit:e.limit,order:e.order,skip:e.skip,keys:"objectId"};try{const e=this.$baseColorfullLoading(),{results:a,count:r=0}=yield Object(l["queryProductTemplet"])(t);e.close(),this.tableData=a,this.queryForm.total=r}catch(a){dgiotlog.log(a),this.$baseMessage(a,"error","dgiot-hey-message-error")}}))},queryProduct(){return g(this,null,(function*(){try{const e=this.$baseColorfullLoading(),{results:t}=yield Object(i["queryProduct"])({keys:"name",where:{}});e.close(),this.productData=t}catch(e){dgiotlog.log(e)}}))},updateTemplate(e){return g(this,null,(function*(){try{const t=yield api(e);dgiotlog.log(t)}catch(t){dgiotlog.log(t)}}))},toDeleteATemplate(e){return g(this,null,(function*(){try{const t=this.$baseColorfullLoading(),a=yield Object(l["delProductTemplet"])(e);t.close(),dgiotlog.log(a),this.$message({showClose:!0,duration:2e3,message:this.$translateTitle("user.successfully deleted"),type:"success"}),this.Industry()}catch(t){dgiotlog.log(t),this.$baseMessage(this.$translateTitle("user.error deleted")+""+t,"error","dgiot-hey-message-error")}}))},showEdit(e){this.queryProduct(),e&&(this.queryForm.productId=e),this.queryForm.productFlag=!0,this.Industry(),this.dialogFormVisible=!0},close(){this.dialogFormVisible=!1},save(e){dgiotlog.log(e);const t={"*":{read:!0}};t[this.objectid]={read:!0,write:!0};var a={name:this.form.name,type:this.form.type,data:this.form.data,order:this.form.order};const r="top"==e?_.merge(a,{ACL:_.merge(t,this.aclObj),parent:{objectId:"0",__type:"Pointer",className:"Category"}}):"child"==e?_.merge(a,{ACL:_.merge(t,this.aclObj),parent:{objectId:this.form.objectId,__type:"Pointer",className:"Category"}}):a;this.$refs["form"].validate(t=>g(this,null,(function*(){if(dgiotlog.log("setparams",r),t){const{msg:t}="edit"==e?yield putCategory(this.form.objectId,r):yield postCategory(r);this.$baseMessage(t,"success","dgiot-hey-message-success"),this.$emit("fetch-data"),this.close()}})))}}},v=y,$=a("2877"),w=Object($["a"])(v,r,o,!1,null,null,null);t["default"]=w.exports},"06bc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this;e._self._c;return e._m(0)},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"children-container"},[t("div",{staticClass:"children"},[e._v("children")])])}],l={name:"Children",components:{},props:{},data(){return{}},computed:{},watch:{},created(){},mounted(){},destroyed(){},methods:{}},i=l,s=(a("dbcd"),a("2877")),n=Object(s["a"])(i,r,o,!1,null,"a678f2e0",null);t["default"]=n.exports},"0e34":function(e,t,a){},1238:function(e,t,a){},"1267e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{class:e.className,style:{height:e.height,width:e.width}})},o=[],l=a("ed08"),i={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"370px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0,default:()=>({expectedData:[],actualData:[],title:"1",max:0})}},data(){return{chart:null,sidebarElm:null}},watch:{chartData:{deep:!0,handler(e){this.setOptions(e)}}},mounted(){const e=document.getElementsByClassName("chart")[0];e.style.width=.4*window.innerWidth-120+"px",this.initChart(),this.autoResize&&(this.__resizeHandler=Object(l["debounce"])(()=>{this.chart&&(e.style.width=.4*window.innerWidth-120+"px",this.chart.resize())},100),window.addEventListener("resize",this.__resizeHandler))},beforeDestroy(){this.chart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHandler),this.sidebarElm&&this.sidebarElm.removeEventListener("transitionend",this.sidebarResizeHandler),this.chart.dispose(),this.chart=null)},methods:{sidebarResizeHandler(e){"width"===e.propertyName&&this.__resizeHandler()},setOptions({expectedData:e,actualData:t,title:a,max:r}={}){this.chart.setOption({xAxis:{data:t,boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},title:{text:a,textStyle:{color:"black"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:["数据"]},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:[{type:"slider",show:!0,start:0,end:50,handleSize:8},{type:"inside",start:0,end:50}],visualMap:{show:!1,dimension:1,pieces:[{gte:0,lte:r,color:"green"}],outOfRange:{color:"red"}},series:[{name:"数据",itemStyle:{normal:{color:"#FF005A",lineStyle:{color:"#FF005A",width:2},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#7CF5A2"},{offset:.6,color:"#7EF57C"},{offset:1,color:"#fff"}])}}}},markLine:{silent:!1,data:[{name:"告警线",yAxis:r,label:{show:"true",position:"middle",formatter:`${a}最大${r}`}}]},smooth:!0,type:"line",data:e,animationDuration:2800,animationEasing:"cubicInOut"}]})},initChart(){setTimeout(()=>{this.chart=echarts.init(this.$el,"macarons"),this.setOptions(this.chartData)},1e3)}}},s=i,n=a("2877"),c=Object(n["a"])(s,r,o,!1,null,null,null);t["default"]=c.exports},"1d16":function(e,t,a){},3248:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":!0,title:e.title,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:e.close}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.save.apply(null,arguments)}}},[e._v("确 定")])]},proxy:!0}])},[t("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title","string"===typeof t?t.trim():t)},expression:"form.title"}})],1),t("el-form-item",{attrs:{label:"作者",prop:"author"}},[t("el-input",{model:{value:e.form.author,callback:function(t){e.$set(e.form,"author","string"===typeof t?t.trim():t)},expression:"form.author"}})],1)],1)],1)},o=[],l=a("8456"),i=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())}),s={name:"TableEdit",data(){return{form:{title:"",author:""},rules:{title:[{required:!0,trigger:"blur",message:"请输入标题"}],author:[{required:!0,trigger:"blur",message:"请输入作者"}]},title:"",dialogFormVisible:!1}},created(){},methods:{showEdit(e){e?(this.title="编辑",this.form=Object.assign({},e)):this.title="添加",this.dialogFormVisible=!0},close(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save(){this.$refs["form"].validate(e=>i(this,null,(function*(){if(e){const{msg:e}=yield Object(l["doEdit"])(this.form);this.$baseMessage(e,"success","dgiot-hey-message-success"),this.$emit("fetch-data"),this.close()}})))}}},n=s,c=a("2877"),d=Object(c["a"])(n,r,o,!1,null,null,null);t["default"]=d.exports},3524:function(e,t,a){"use strict";a("8225")},38182:function(e){e.exports=JSON.parse('{"item":{"name":"tags1","devicetype":"tags1","dataForm":{"round":"all","data":"null","address":"0X10","rate":1,"offset":0,"order":0,"protocol":"","operatetype":"readCoils","originaltype":"short16_AB","slaveid":"0X10","collection":"%s","control":"%d","strategy":"20","iscount":"0","countstrategy":20,"countround":"all","countcollection":"%s"},"required":true,"accessMode":"r","isshow":true,"identifier":"tags1","dataType":{"type":"int","specs":{"max":"","min":"","step":"","precision":3,"unit":""},"das":[]},"dataSource":{},"moduleType":"tags","updateAt":"1647053943057"},"productid":"dd12968e37","events":{"outputParams":[],"name":"功能名称","identifier":"标识符","types":"warning","output":[{"name":"参数名称","unit":"ml/min","isread":"rw","dataType":"int32","identifier":"标识符","min":"1","max":"3","step":"2"}],"describe":"描述","dataForm":{"order":"1647054511934"},"dataType":{"type":"events"},"moduleType":"events","updateAt":"1647054511934"}}')},3953:function(e,t,a){"use strict";a("e2ea")},"40d1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"thing-form"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-width":"80px",model:e.ruleForm,rules:e.rules,size:"mini"}},[t("el-form-item",{attrs:{label:"参数名称",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"标识符",prop:"identifier"}},[t("el-input",{model:{value:e.ruleForm.identifier,callback:function(t){e.$set(e.ruleForm,"identifier",t)},expression:"ruleForm.identifier"}})],1),t("el-form-item",{attrs:{label:"数据类型",prop:"dataType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据类型"},model:{value:e.ruleForm.dataType,callback:function(t){e.$set(e.ruleForm,"dataType",t)},expression:"ruleForm.dataType"}},e._l(e.dataTypes,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),-1!=["int32","float","double"].indexOf(e.ruleForm.dataType)?t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"取值范围（最小值)",prop:"min"}},[t("el-input",{attrs:{placeholder:"取值范围（最小值)"},model:{value:e.ruleForm.min,callback:function(t){e.$set(e.ruleForm,"min",t)},expression:"ruleForm.min"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"取值范围（最大值)",prop:"max"}},[t("el-input",{attrs:{placeholder:"取值范围（最大值)"},model:{value:e.ruleForm.max,callback:function(t){e.$set(e.ruleForm,"max",t)},expression:"ruleForm.max"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"步长",prop:"step"}},[t("el-input",{attrs:{placeholder:"步长"},model:{value:e.ruleForm.step,callback:function(t){e.$set(e.ruleForm,"step",t)},expression:"ruleForm.step"}})],1)],1)],1):e._e(),t("el-form-item",{attrs:{label:"单位",prop:"unit"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择单位"},model:{value:e.ruleForm.unit,callback:function(t){e.$set(e.ruleForm,"unit",t)},expression:"ruleForm.unit"}},e._l(e.dlinkUnit,(function(a){return t("el-option",{key:a.Symbol,attrs:{label:a.Name,value:a.Symbol}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.Name))]),t("span",{staticStyle:{float:"right","font-size":"13px",color:"#8492a6"}},[e._v(" "+e._s(a.Symbol)+" ")])])})),1)],1),t("el-form-item",{attrs:{label:"读写类型",prop:"isread"}},[t("el-radio-group",{attrs:{size:"medium"},model:{value:e.ruleForm.isread,callback:function(t){e.$set(e.ruleForm,"isread",t)},expression:"ruleForm.isread"}},[t("el-radio",{attrs:{border:"",label:"rw"}},[e._v("读写")]),t("el-radio",{attrs:{border:"",label:"r"}},[e._v("只读")])],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm",e.eventType)}}},[e._v(" "+e._s("add"==e.eventType?"立即创建":"修改")+" ")])],1)],1)],1)},o=[],l={name:"ThingForm",props:{eventType:{type:String,require:!0,default(){return"add"}},formType:{type:String,require:!0,default(){return"input"}},thingType:{type:String,require:!0,default(){return"events"}},ruleForm:{type:Object,require:!0,default(){return{name:"",unit:"/",isread:"rw",dataType:"int32",identifier:"",min:"",max:"",step:""}}},dlinkUnit:{type:Array,require:!0,default(){return[{Symbol:"ml/min",Name:"滴速"}]}},dataTypes:{type:Array,require:!1,default(){return["int32","float","double","enum","bool","text","date","struct","array"]}}},data(){const e=(e,t,a)=>{if(console.log(/^[+-]?([0-9]*\.?[0-9]+|[0-9]+\.?[0-9]*)([eE][+-]?[0-9]+)?$/.test(parseFloat(t)),parseFloat(t),t,this.ruleForm.max),""===t)return a(new Error("最小值不能为空"));/^[+-]?([0-9]*\.?[0-9]+|[0-9]+\.?[0-9]*)([eE][+-]?[0-9]+)?$/.test(parseFloat(t))?parseFloat(t)<-2147483648||parseFloat(t)>2147483647?a(new Error("取值范围：-2147483648 ~ 2147483647")):parseFloat(t)>=this.ruleForm.max?a(new Error("最大值不能小于最小值")):a():a(new Error("请填写正确的取值范围"))},t=(e,t,a)=>{if(""===t)return a(new Error("最大值不能为空"));/^[+-]?([0-9]*\.?[0-9]+|[0-9]+\.?[0-9]*)([eE][+-]?[0-9]+)?$/.test(parseFloat(t))?parseFloat(t)<-2147483648||parseFloat(t)>2147483647?a(new Error("取值范围：-2147483648 ~ 2147483647")):a():a(new Error("请填写正确的取值范围"))},a=(e,t,a)=>{if(""===t)return a(new Error("步长不能为空"));parseFloat(t)<=0?a(new Error("步长应大于0")):/^(0|[1-9][0-9]*)$/.test(parseFloat(t))?parseFloat(t)>2147483647?a(new Error("步长不能大于 2147483647")):a():a(new Error("请填写正确的步长"))};return{rules:{name:[{min:1,max:30,required:!0,message:"请输入参数名称（1-30个字符）",trigger:"blur"},{message:"支持中文、字母、数字、短划线，必须以中文、英文或数字开头\n",trigger:"blur",pattern:/[0-9a-zA-Z\xa0-\xff_]*$/}],identifier:[{min:1,max:50,required:!0,message:"请输入标识符（1-50个字符）",trigger:"blur"},{message:"支持大小写字母、数字和下划线、不超过 50 个字符。\n",trigger:"blur",pattern:/^[\u4e00-\u9fa5-a-zA-Z0-9][\u4e00-\u9fa5-a-zA-Z0-9\\-_.\\]*$/}],dataType:[{required:!0,message:"请选择数据类型",trigger:"change"}],isread:[{required:!0,message:"请选择读写类型",trigger:"change"}],unit:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}],min:[{required:!0,trigger:"blur",validator:e}],max:[{required:!0,trigger:"blur",validator:t}],step:[{required:!0,trigger:"blur",validator:a}]},checkMin:e}},methods:{submitForm(e,t){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;"add"==t?this.$emit("OutputParameters",this.ruleForm,this.thingType):this.$emit("editParameters",this.ruleForm,this.thingType)})},resetForm(e){this.$refs[e].resetFields()}}},i=l,s=a("2877"),n=Object(s["a"])(i,r,o,!1,null,null,null);t["default"]=n.exports},"42d2":function(e,t,a){"use strict";a("d3f5")},"43b8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{ref:"custom-table",staticClass:"custom-table-container",class:{"dgiot-fullscreen":e.isFullscreen}},[t("dgiot-query-form",[t("dgiot-query-form-left-panel",[t("el-form",{ref:"form",attrs:{inline:!0,"label-width":"0",model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"标题"},model:{value:e.queryForm.title,callback:function(t){e.$set(e.queryForm,"title",t)},expression:"queryForm.title"}})],1),t("el-form-item",[t("el-button",{attrs:{icon:"el-icon-search","native-type":"submit",type:"primary"},on:{click:e.handleQuery}},[e._v(" 查询 ")]),t("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},nativeOn:{click:function(t){return e.handleAdd.apply(null,arguments)}}},[e._v(" 添加 ")]),t("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:e.handleDelete}},[e._v(" 删除 ")])],1)],1)],1),t("dgiot-query-form-right-panel",[t("div",{staticClass:"stripe-panel"},[t("el-checkbox",{model:{value:e.stripe,callback:function(t){e.stripe=t},expression:"stripe"}},[e._v("斑马纹")])],1),t("div",{staticClass:"border-panel"},[t("el-checkbox",{model:{value:e.border,callback:function(t){e.border=t},expression:"border"}},[e._v("边框（可拉伸列）")])],1),t("el-button",{staticStyle:{margin:"0 10px 10px 0 !important"},attrs:{type:"primary"},on:{click:e.clickFullScreen}},[t("dgiot-icon",{attrs:{icon:e.isFullscreen?"fullscreen-exit-fill":"fullscreen-fill"}}),e._v(" 表格全屏 ")],1),t("el-popover",{ref:"popover",attrs:{"popper-class":"custom-table-checkbox",trigger:"hover"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{staticStyle:{margin:"0 10px 10px 0 !important"},attrs:{type:"primary"}},[t("dgiot-icon",{attrs:{icon:"line-height"}}),e._v(" 表格尺寸 ")],1)]},proxy:!0}])},[t("el-radio-group",{model:{value:e.lineHeight,callback:function(t){e.lineHeight=t},expression:"lineHeight"}},[t("el-radio",{attrs:{label:"medium"}},[e._v("大")]),t("el-radio",{attrs:{label:"small"}},[e._v("中")]),t("el-radio",{attrs:{label:"mini"}},[e._v("小")])],1)],1),t("el-popover",{attrs:{"popper-class":"custom-table-checkbox",trigger:"hover"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{staticStyle:{margin:"0 0 10px 0 !important"},attrs:{icon:"el-icon-setting",type:"primary"}},[e._v(" 可拖拽列设置 ")])]},proxy:!0}])},[t("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[t("dgiot-draggable",{attrs:{list:e.columns}})],1)],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{border:e.border,data:e.list,height:e.height,size:e.lineHeight,stripe:e.stripe},on:{"selection-change":e.setSelectRows},scopedSlots:e._u([{key:"empty",fn:function(){return[t("el-image",{staticClass:"dgiot-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[t("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),t("el-table-column",{attrs:{align:"center",label:"序号","show-overflow-tooltip":"",sortable:"",width:"95"},scopedSlots:e._u([{key:"default",fn:function({$index:t}){return[e._v(" "+e._s(t+1)+" ")]}}])}),e._l(e.finallyColumns,(function(a,r){return t("el-table-column",{key:r,attrs:{align:"center",label:a.label,sortable:"",width:a.width},scopedSlots:e._u([{key:"default",fn:function({row:r}){return["评级"===a.label?t("span",[t("el-rate",{attrs:{disabled:""},model:{value:r.rate,callback:function(t){e.$set(r,"rate",t)},expression:"row.rate"}})],1):t("span",[e._v(e._s(r[a.prop]))])]}}],null,!0)})})),t("el-table-column",{attrs:{align:"center",label:"操作","show-overflow-tooltip":"",sortable:"",width:"85"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a)}}},[e._v("删除")])]}}])})],2),t("el-pagination",{attrs:{background:"","current-page":e.queryForm.pageNo,layout:e.layout,"page-size":e.queryForm.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),t("table-edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},o=[],l=a("8456"),i=a("3248"),s=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())}),n={name:"Empty",components:{TableEdit:i["default"]},data(){return{infoData:"Empty",isFullscreen:!1,border:!0,height:this.$baseTableHeight(1),stripe:!1,lineHeight:"medium",checkList:["标题","作者","评级","点击量","时间"],columns:[{label:"标题",width:"auto",prop:"title",sortable:!0,disableCheck:!0},{label:"作者",width:"auto",prop:"author",sortable:!0},{label:"评级",width:"200",prop:"rate",sortable:!0},{label:"点击量",width:"auto",prop:"pageViews",sortable:!0},{label:"时间",width:"auto",prop:"datetime",sortable:!0}],list:[],imageList:[],listLoading:!0,layout:"total, sizes, prev, pager, next, jumper",total:0,selectRows:"",queryForm:{pageNo:1,pageSize:20,title:""}}},computed:{dragOptions(){return{animation:600,group:"description"}},finallyColumns(){return this.columns.filter(e=>this.checkList.includes(e.label))}},mounted(){},created(){this.fetchData()},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:{clickFullScreen(){this.isFullscreen=!this.isFullscreen,this.handleHeight()},handleHeight(){this.isFullscreen?this.height=this.$baseTableHeight(1)+210:this.height=this.$baseTableHeight(1)},setSelectRows(e){this.selectRows=e},handleAdd(){this.$refs["edit"].showEdit()},handleEdit(e){this.$refs["edit"].showEdit(e)},handleDelete(e){if(e.id)this.$baseConfirm("你确定要删除当前项吗",null,()=>s(this,null,(function*(){const{msg:t}=yield Object(l["doDelete"])({ids:e.id});this.$baseMessage(t,"success","dgiot-hey-message-success"),yield this.fetchData()})));else if(this.selectRows.length>0){const e=this.selectRows.map(e=>e.id).join();this.$baseConfirm("你确定要删除选中项吗",null,()=>s(this,null,(function*(){const{msg:t}=yield Object(l["doDelete"])({ids:e});this.$baseMessage(t,"success","dgiot-hey-message-success"),yield this.fetchData()})))}else this.$baseMessage("未选中任何行","error","dgiot-hey-message-error")},handleSizeChange(e){this.queryForm.pageSize=e,this.fetchData()},handleCurrentChange(e){this.queryForm.pageNo=e,this.fetchData()},handleQuery(){this.queryForm.pageNo=1,this.fetchData()},fetchData(){return s(this,null,(function*(){this.listLoading=!0;const{data:{list:e,total:t}}=yield Object(l["getList"])(this.queryForm);this.list=e;const a=[];e.forEach(e=>{a.push(e.img)}),this.imageList=a,this.total=t,this.listLoading=!1}))}}},c=n,d=(a("dbf4"),a("2877")),p=Object(d["a"])(c,r,o,!1,null,"7c917f6c",null);t["default"]=p.exports},"4c00":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{key:e.productId},[t("a-tabs",{attrs:{"default-active-key":"物模型",type:"card"},on:{change:e.handletabs}},[t("a-tab-pane",{key:"物模型",attrs:{disabled:!e.productId,tab:"物模型"}},[t("dgiot-query-form-left-panel",[t("el-button",{attrs:{disabled:!e.productId,size:"small",type:"primary"},nativeOn:{click:function(t){return e.checkschema.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.viewobjectmodel"))+" ")]),t("el-button",{attrs:{disabled:!e.productId,size:"small",type:"primary"},nativeOn:{click:function(t){return e.createProperty.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.newobjectmodel"))+" ")])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],key:e.tableType,staticStyle:{width:"100%"},attrs:{border:"","cell-style":{"text-align":"center"},data:"things"==e.tableType?e.things:"profile"==e.tableType||"parser"==e.tableType?e.parserTableList:"basedate.params"==e.tableType?e.dictTableList:[],"header-cell-style":{"text-align":"center"},"highlight-current-row":"","row-key":"objectId",size:"medium"}},["things"==e.tableType?t("div",{key:e.tableType+e.thingKey},[t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.order"),prop:"dataForm.order","show-overflow-tooltip":"",sortable:"",width:"auto"}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Rounds"),prop:"dataForm.round","show-overflow-tooltip":"",sortable:"",width:"auto"}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Strategy"),prop:"dataForm.strategy","show-overflow-tooltip":"",sortable:"",width:"auto"}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocol"),prop:"dataForm.protocol","show-overflow-tooltip":"",sortable:"",width:"auto"}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier"),prop:"identifier","show-overflow-tooltip":"",sortable:"",width:"auto"}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionname"),prop:"name","show-overflow-tooltip":"",sortable:"",width:"auto"}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datatype"),prop:"dataType.type","show-overflow-tooltip":"",sortable:"",width:"auto"}}),t("el-table-column",{attrs:{align:"center",fixed:"right",label:e.$translateTitle("product.datadefinition"),prop:"dataType.type","show-overflow-tooltip":"",sortable:"",width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[!a.dataType.specs||"double"!=a.dataType.type&&"float"!=a.dataType.type&&"int"!=a.dataType.type?"string"==a.dataType.type?t("span",[e._v(" "+e._s(e.$translateTitle("product.datalength")+":"+a.dataType.size+e.$translateTitle("product.byte"))+" ")]):"struct"!=a.dataType.type?t("span",[e._v(" "+e._s(a.dataType.specs)+" ")]):e._e():t("span",[e._v(" "+e._s(e.$translateTitle("product.rangeofvalues")+a.dataType.specs.min+"~"+a.dataType.specs.max)+" ")])]}}],null,!1,2022078325)}),t("el-table-column",{attrs:{align:"center",fixed:"right",label:e.$translateTitle("developer.operation"),"min-width":"240",width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:a,$index:r}){return[t("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(t){return e.deletewmx(r)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")]),t("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.wmxDataFill(a,r)}}},[e._v(" "+e._s(e.$translateTitle("task.Edit"))+" ")])]}}],null,!1,832725005)})],1):"profile"==e.tableType||"parser"==e.tableType?t("div",[t("el-table-column",{attrs:{align:"center",label:"uid",prop:"uid","show-overflow-tooltip":"",sortable:""}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.chinesetitle"),prop:"name","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-popover",{attrs:{placement:"top",trigger:"hover"}},[t("p",[e._v(" "+e._s(e.$translateTitle("product.englishtitle"))+": "+e._s(a.enname)+" ")]),t("p",[e._v(" "+e._s(e.$translateTitle("developer.describe"))+": "+e._s(a.description)+" ")]),t("p",[e._v(" "+e._s(e.$translateTitle("product.identifier"))+": "+e._s(a.identifier)+" ")]),t("p",[e._v(" "+e._s(e.$translateTitle("developer.describe"))+": "+e._s(a.description)+" ")]),t("p",[e._v(" "+e._s(e.$translateTitle("product.Table Name"))+": "+e._s(a.table)+" ")]),t("p",[e._v(" "+e._s(e.$translateTitle("product.class"))+": "+e._s(a.field)+" ")]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("el-tag",{attrs:{size:"medium"}},[e._v(" "+e._s(a.name)+" ")])],1)])]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionaltypes"),prop:"type","show-overflow-tooltip":"",sortable:""}})],1):t("div",[t("el-empty",{attrs:{"image-size":200}})],1)])],1),t("a-tab-pane",{key:"解码器",attrs:{disabled:!e.productId,tab:"解码器"}},[t("div",{style:{height:e.$baseTableHeight(0)+"px",overflow:"auto"}},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.decoderInfo,size:"mini"}},[t("el-form-item",{attrs:{label:"解码器标题"}},[t("el-input",{attrs:{placeholder:"解码器标题"},model:{value:e.decoderInfo.title,callback:function(t){e.$set(e.decoderInfo,"title",t)},expression:"decoderInfo.title"}})],1),t("el-form-item",[t("el-button",{attrs:{effect:"dark",type:"post"==e.decodeType?"success":"info"},nativeOn:{click:function(t){return e.savecodes.apply(null,arguments)}}},[e._v(" "+e._s("post"==e.decodeType?e.$translateTitle("button.add"):e.$translateTitle("button.edit"))+" ")])],1)],1),t("dgiot-monaco-plus",{ref:"dgiotCodes",attrs:{codes:e.ace_editor,lang:"proto","read-only":!0,theme:"vs-dark"}})],1)]),t("a-tab-pane",{key:"低代码",attrs:{disabled:!e.productId,tab:"低代码"}},[t("dgiot-views",{attrs:{"view-form":e.viewForm}})],1),t("a-tab-pane",{key:"组态",attrs:{disabled:!e.productId,tab:"组态"}},[t("el-empty",{attrs:{"image-size":200}})],1),t("a-tab-pane",{key:"规则",attrs:{disabled:!e.productId,tab:"规则"}},[t("el-empty",{attrs:{"image-size":200}})],1),t("a-tab-pane",{key:"字典",attrs:{disabled:!e.productId,tab:"字典"}},[t("dgiot-dict",{attrs:{"dict-form":e.dictForm}})],1)],1)],1)},o=[],l=a("e0e9"),i=a("5880"),s=a("c32d"),n=a.n(s),c=a("ef68"),d=a("0c3c"),p=a("c3b1"),u=Object.defineProperty,m=Object.defineProperties,b=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,a)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,v=(e,t)=>{for(var a in t||(t={}))f.call(t,a)&&y(e,a,t[a]);if(h)for(var a of h(t))g.call(t,a)&&y(e,a,t[a]);return e},$=(e,t)=>m(e,b(t)),w=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())}),F={name:"ProfileDescriptions",components:{dgiotViews:d["default"],dgiotDict:p["default"]},props:{thingKey:{required:!0,type:String,default:""},productId:{required:!0,type:String,default:""},tableLoading:{required:!1,type:Boolean,default:!1},dictTableList:{required:!1,type:Array,default:()=>[]},decoderTableList:{required:!1,type:Object,default:()=>{}},parserTableList:{required:!1,type:Array,default:()=>[]},things:{required:!1,type:Array,default:()=>[]},tableType:{required:!0,type:String,default:""}},data(){return{dialogTopoVisible:!1,lowcodeLen:0,dictLen:0,viewForm:{},dictForm:{},amisconfig:[],amisForm:{},dialogTableVisible:!1,dialogDictVisible:!1,key:n()(new Date).valueOf(),editType:0,amisJsonPlus:"",ace_editor:"",decoderInfo:{},decodeType:"put",codeFlag:!1,amisFlag:!1,activeName:"first",productDetail:{decoder:{code:""},thing:{properties:[]},config:{parser:[],profile:[],amis:[],basedate:{params:[]}}}}},computed:v({},Object(i["mapGetters"])({amisJson:"amis/amisJson"})),watch:{amisJson:{deep:!0,handler(e){this.amisJsonPlus=JSON.stringify(e)}}},mounted(){this.$dgiotBus.$off("monaco-save"),this.$dgiotBus.$off("lowcodeLen"),this.$dgiotBus.$on("lowcodeLen",e=>{this.lowcodeLen=e}),this.$dgiotBus.$off("dictLen"),this.$dgiotBus.$on("dictLen",e=>{this.dictLen=e})},destroyed:function(){this.$dgiotBus.$off("monaco-save")},methods:$(v({handletabs(e){return w(this,null,(function*(){switch(console.log("handletabs",e),this.viewForm={class:"ProductTemplet",type:"amis",key:this.productId,title:"",disabled:!0,data:{type:"page",initApi:{url:"iotapi/classes/Device/parse_objectid",method:"get",adaptor:'return {\r\n  "status":0,\r\n  "msg":"",\r\n  "data":response.data.basedata\r\n  }',headers:{store:"localStorage",dgiotReplace:"parse_objectid"},dataType:"json"},body:[{type:"form",api:{method:"put",url:"iotapi/classes/Device/parse_objectid",headers:{store:"localStorage",dgiotReplace:"parse_objectid"},dataType:"json",requestAdaptor:"return {\r\n    ...api,\r\n    data: {\r\n        basedata:{ ...api.data}\r\n    }\r\n}"},body:[{type:"input-text",label:"设备名称",name:"name"}]}]},hiddenRow:["class","key","createdAt"]},this.dictForm={class:"ProductTemplet",type:"",key:this.productId,title:"",disabled:!0,data:{params:[]},hiddenRow:["class","key","createdAt"]},e){case"物模型":yield this.featProperties(this.productDetail.thing.properties);break;case"解码器":yield this.$dgiotBus.$off("monaco-save"),yield this.queryDecoder(this.productId);break;case"低代码":break;case"组态":yield this.topoView();break;case"规则":this.openRule();break;case"字典":this.openDict();break}}))},queryDecoder(e){return w(this,null,(function*(){const{results:t}=yield Object(l["queryDict"])({limit:1,where:{key:e,type:"decoder"}});this.decodeType=0==t.length?"post":"put",this.ace_editor="put"==this.decodeType?Base64.decode(t[0].data.decoder):Base64.decode("Ly8gY29weSBmcm9tOiBodHRwczovL2dycGMuaW8vZG9jcy93aGF0LWlzLWdycGMvaW50cm9kdWN0aW9uLwoKCnN5bnRheCA9ICJwcm90bzMiOwoKb3B0aW9uIGphdmFfbXVsdGlwbGVfZmlsZXMgPSB0cnVlOwpvcHRpb24gamF2YV9wYWNrYWdlID0gImlvLmdycGMuZXhhbXBsZXMuZGxpbmsiOwpvcHRpb24gamF2YV9vdXRlcl9jbGFzc25hbWUgPSAiRGxpbmtQcm90byI7Cm9wdGlvbiBvYmpjX2NsYXNzX3ByZWZpeCA9ICJkbGluayI7CgpwYWNrYWdlIGRnaW90OwoKLy8gVGhlIGRsaW5rIHNlcnZpY2UgZGVmaW5pdGlvbi4Kc2VydmljZSBEbGluayB7CiAgLy8gU2VuZHMgYSBncmVldGluZwogIHJwYyBTYXlIZWxsbyAoSGVsbG9SZXF1ZXN0KSByZXR1cm5zIChIZWxsb1JlcGx5KSB7fQoKICAvLyBJZiB0aGUgcmVxdWVzdGVkIHNlcnZpY2UgaXMgdW5rbm93biwgdGhlIGNhbGwgd2lsbCBmYWlsIHdpdGggc3RhdHVzCiAgLy8gTk9UX0ZPVU5ELgogIHJwYyBDaGVjayhIZWFsdGhDaGVja1JlcXVlc3QpIHJldHVybnMgKEhlYWx0aENoZWNrUmVzcG9uc2UpOwoKICAvLyBQZXJmb3JtcyBhIHdhdGNoIGZvciB0aGUgc2VydmluZyBzdGF0dXMgb2YgdGhlIHJlcXVlc3RlZCBzZXJ2aWNlLgogIC8vIFRoZSBzZXJ2ZXIgd2lsbCBpbW1lZGlhdGVseSBzZW5kIGJhY2sgYSBtZXNzYWdlIGluZGljYXRpbmcgdGhlIGN1cnJlbnQKICAvLyBzZXJ2aW5nIHN0YXR1cy4gIEl0IHdpbGwgdGhlbiBzdWJzZXF1ZW50bHkgc2VuZCBhIG5ldyBtZXNzYWdlIHdoZW5ldmVyCiAgLy8gdGhlIHNlcnZpY2UncyBzZXJ2aW5nIHN0YXR1cyBjaGFuZ2VzLgogIC8vCiAgLy8gSWYgdGhlIHJlcXVlc3RlZCBzZXJ2aWNlIGlzIHVua25vd24gd2hlbiB0aGUgY2FsbCBpcyByZWNlaXZlZCwgdGhlCiAgLy8gc2VydmVyIHdpbGwgc2VuZCBhIG1lc3NhZ2Ugc2V0dGluZyB0aGUgc2VydmluZyBzdGF0dXMgdG8KICAvLyBTRVJWSUNFX1VOS05PV04gYnV0IHdpbGwgKm5vdCogdGVybWluYXRlIHRoZSBjYWxsLiAgSWYgYXQgc29tZQogIC8vIGZ1dHVyZSBwb2ludCwgdGhlIHNlcnZpbmcgc3RhdHVzIG9mIHRoZSBzZXJ2aWNlIGJlY29tZXMga25vd24sIHRoZQogIC8vIHNlcnZlciB3aWxsIHNlbmQgYSBuZXcgbWVzc2FnZSB3aXRoIHRoZSBzZXJ2aWNlJ3Mgc2VydmluZyBzdGF0dXMuCiAgLy8KICAvLyBJZiB0aGUgY2FsbCB0ZXJtaW5hdGVzIHdpdGggc3RhdHVzIFVOSU1QTEVNRU5URUQsIHRoZW4gY2xpZW50cwogIC8vIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgbm90IHN1cHBvcnRlZCBhbmQgc2hvdWxkIG5vdCByZXRyeSB0aGUKICAvLyBjYWxsLiAgSWYgdGhlIGNhbGwgdGVybWluYXRlcyB3aXRoIGFueSBvdGhlciBzdGF0dXMgKGluY2x1ZGluZyBPSyksCiAgLy8gY2xpZW50cyBzaG91bGQgcmV0cnkgdGhlIGNhbGwgd2l0aCBhcHByb3ByaWF0ZSBleHBvbmVudGlhbCBiYWNrb2ZmLgogIHJwYyBXYXRjaChIZWFsdGhDaGVja1JlcXVlc3QpIHJldHVybnMgKHN0cmVhbSBIZWFsdGhDaGVja1Jlc3BvbnNlKTsKCn0KCi8vIFRoZSByZXF1ZXN0IG1lc3NhZ2UgY29udGFpbmluZyB0aGUgdXNlcidzIG5hbWUuCm1lc3NhZ2UgSGVsbG9SZXF1ZXN0IHsKICBzdHJpbmcgbmFtZSA9IDE7Cn0KCi8vIFRoZSByZXNwb25zZSBtZXNzYWdlIGNvbnRhaW5pbmcgdGhlIGdyZWV0aW5ncwptZXNzYWdlIEhlbGxvUmVwbHkgewogIHN0cmluZyBtZXNzYWdlID0gMTsKfQoKCm1lc3NhZ2UgSGVhbHRoQ2hlY2tSZXF1ZXN0IHsKICBzdHJpbmcgc2VydmljZSA9IDE7Cn0KCm1lc3NhZ2UgSGVhbHRoQ2hlY2tSZXNwb25zZSB7CiAgZW51bSBTZXJ2aW5nU3RhdHVzIHsKICAgIFVOS05PV04gPSAwOwogICAgU0VSVklORyA9IDE7CiAgICBOT1RfU0VSVklORyA9IDI7CiAgICBTRVJWSUNFX1VOS05PV04gPSAzOyAgLy8gVXNlZCBvbmx5IGJ5IHRoZSBXYXRjaCBtZXRob2QuCiAgfQogIFNlcnZpbmdTdGF0dXMgc3RhdHVzID0gMTsKfQ"),this.decoderInfo=t.length>0?t[0]:{title:e+"的解码器"},this.$nextTick(()=>{this.$dgiotBus.$on("monaco-save",e=>w(this,null,(function*(){console.log(e,"data");const t={data:{decoder:Base64.encode(e)},class:"Product",title:this.decoderInfo.title,type:"decoder",key:this.productId};if("post"==this.decodeType){yield Object(l["postDict"])(t);this.$message({showClose:!0,duration:2e3,message:""+this.$translateTitle("user.Save the template successfully"),type:"success"})}else{const{msg:e}=yield Object(l["putDict"])(this.decoderInfo.objectId,t)}})))})}))},openView(){this.dialogTableVisible=!0},topoView(){this.dialogTopoVisible=!0},openRule(){},openDict(){this.dialogDictVisible=!0},savecodes(){if(!this.productId)return!1;this.$refs.dgiotCodes.save(this.$refs.dgiotCodes.$refs.monacoEditor.editor.getValue()),this.decodeType="put"},saveAmis(e,t,a){return w(this,null,(function*(){const r=_.merge(this.productDetail,{config:{amis:t}});dgiotlog.log(e,t,a,r);yield Object(c["putProductTemplet"])(e,{config:this.productDetail.config});this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),this.amisFlag=!1}))},addAmis(){},handleEdit(e,t){this.amisForm=t,this.editType=e,dgiotlog.log(e,t),this.set_amisJson(t.json),this.amisFlag=!0},handleDelete(e,t){dgiotlog.log(e,t),this.amisconfig.splice(e,1)},cancelForm(){this.amisconfig[this.editType].json=this.amisJson,"add"==this.amisconfig[this.editType].type&&(this.amisconfig[this.editType].type="edit"),this.amisFlag=!1}},Object(i["mapMutations"])({set_amisJson:"amis/set_amisJson"})),{seeDecoder(e){console.log(ace,"ace",this.ace_editor);const{decoder:t={}}=e;this.dialogTableVisible=!1,this.dialogDictVisible=!1,this.codeFlag=!this.codeFlag,this.ace_editor=Base64.decode(t.code)},featProperties(e){dgiotlog.log(e),this.codeFlag=!1,this.dialogTableVisible=!1,this.dialogDictVisible=!1,this.$parent.$parent.$parent.properties(e)},feateditorParser(e,t,a){this.codeFlag=!1,this.dialogTableVisible=!1,this.dialogDictVisible=!1,this.$parent.$parent.$parent.editorParser(e,t,a)},createProperty(){this.$parent.$parent.$parent.createProperty()},deletewmx(e){this.$parent.$parent.$parent.deletewmx(e)},wmxDataFill(e,t){this.$parent.$parent.$parent.wmxDataFill(e,t)},goKonva(e){this.$parent.$parent.$parent.goKonva(e)},checkschema(){this.$parent.$parent.$parent.checkschema()}})},T=F,k=(a("3953"),a("2877")),x=Object(k["a"])(T,r,o,!1,null,"b68e6024",null);t["default"]=x.exports},"4fb0":function(e,t,a){},"53a9":function(e,t,a){"use strict";a("b2e8")},"590f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"application dgiot-container"}},[t("dgiot-query-form-top-panel",[t("el-form",{ref:"form",attrs:{inline:!0,"label-width":"0"}},[t("el-form-item",[t("el-input",{attrs:{placeholder:e.$translateTitle("application.applicationname"),size:"mini"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.getAppMange(0)}}},[e._v(" "+e._s(e.$translateTitle("application.search"))+" ")])],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.tableData,"header-cell-style":{"text-align":"center"},height:e.tableHeight}},[t("el-table-column",{attrs:{label:e.$translateTitle("application.applicationidentification"),prop:"productIdentifier"}}),t("el-table-column",{attrs:{label:e.$translateTitle("application.applicationname"),prop:"title"}}),t("el-table-column",{attrs:{label:e.$translateTitle("developer.Applicationunit"),prop:"userUnit"}}),t("el-table-column",{attrs:{label:e.$translateTitle("application.scaleofservice"),prop:"scale",sortable:""}}),t("el-table-column",{attrs:{label:e.$translateTitle("application.industrytype"),prop:"category"}}),t("el-table-column",{attrs:{label:e.$translateTitle("application.createtime"),prop:"creation_time"}}),t("el-table-column",{attrs:{flex:"right",label:e.$translateTitle("developer.operation"),prop:"operation",width:"350"},scopedSlots:e._u([{key:"default",fn:function({row:a,$index:r}){return[t("el-popover",{ref:"popover-"+r,attrs:{placement:"top",width:"300"}},[t("p",[e._v(" "+e._s(e.$translateTitle("product.qdsczg"))+e._s(a.name)+e._s(e.$translateTitle("equipment.yym"))+" ")]),t("div",{staticStyle:{margin:"0","text-align":"right"}},[t("el-button",{attrs:{size:"mini"},on:{click:function(e){a._self.$refs["popover-"+r].doClose()}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.makeSure(e.scope,r)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1),t("el-link",{attrs:{slot:"reference",icon:"el-icon-delete",type:"danger",underline:!1},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1),t("el-button",{attrs:{icon:"el-icon-edit",size:"small",type:"text"},on:{click:function(t){return e.handleClickUpdate(e.scope)}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.Gotoproduct(e.scope)}}},[t("i",{staticClass:"el-icon-s-management"}),e._v(" "+e._s(e.$translateTitle("leftbar.management"))+" ")]),t("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){return e.applicationDeployment(a)}}},[e._v(" "+e._s(e.$translateTitle("developer.deploy"))+" ")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page.currentPage,layout:"total, sizes, prev, pager, next, jumper","page-size":e.page.pageSize,"page-sizes":e.page.pageSizes,total:e.page.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)},o=[],l=a("1285"),i=a("7212"),s=a("ed08"),n=a("1c4e"),c={data(){return{tableHeight:this.$baseTableHeight(0),label:"我的应用",activeName:"app",dialogVisible:!1,name:"",page:{currentPage:0,pageSizes:[10,20,30],pageSize:10,total:0},description:"暂无数据",tableData:[],isShow:!1,arr:[]}},created(){this.getAppMange()},methods:{handleClickVisit(e,t){const a=t,r=this.tableData[a].productIdentifier,o=window.location.origin+"/iot/"+r+"#/login";window.open(o,"__blank")},getAppMange(e){0==e&&(this.page.currentPage=0),this.tableData=[];const t={};this.name&&(t.title=this.name),Object(n["getProject"])({limit:this.page.pageSize,skip:this.page.currentPage,count:"objectId",where:t}).then(e=>{const t=e.results;this.label=`我的应用(${e.count})`,this.description=`获取${t.length}条数据`,this.page.total=e.count;for(let a=0;a<t.length;a++){const e={};e.name=t[a].title,e.objectId=t[a].objectId,e.productIdentifier=t[a].productIdentifier,e.scale=Object(n["handleZero"])(t[a].scale),e.creation_time=Object(s["utc2beijing"])(t[a].createdAt),e.end_time=Object(s["utc2beijing"])(t[a].updatedAt),e.category=t[a].category,e.secret=t[a].secret,e.logo=t[a].logo,e.title=t[a].title,e.userUnit=t[a].userUnit,e.dashboard=t[a].dashboard,e.background=t[a].background,e.acl=t[a].ACL,e.desc=t[a].desc,e.copyright=t[a].copyright,this.tableData.push(e)}})},handleSizeChange(e){this.page.pageSize=e,this.getAppMange()},handleCurrentChange(e){this.page.currentPage=(e-1)*this.page.pageSize,this.getAppMange()},handleClickLook(e,t){dgiotlog.log(e);const a=`\n            <table\n                class="mailtable"\n                style="width:100%;"\n                border="0"\n                cellspacing="0"\n                cellpadding="0"\n              >\n                <tr>\n                    <td style="text-align:left;\n                    color: #74777a;\n                    font-weight: 400;\n                    background: #fafafc;\n                    width:200px;\n                    font-weight:bold;">App Id:</td>\n                    <td>${row.objectId}</td>\n                </tr>\n                <tr ">\n                     <td style="color: #74777a;\n                    font-weight: 400;\n                    background: #fafafc;\n                    width:200px;\n                    padding-top:20px;\n                    font-weight:bold;">App Secret:\n                    </td>\n                    <td style="padding-top:20px;">${row.secret}</td>\n                </tr>\n                </table>\n            `;this.$alert(a,"应用详情",{dangerouslyUseHTMLString:!0})},handleClickUpdate(e){const t=e;dgiotlog.log("$row",t),this.$router.push({path:"/applicationManagement/addApp",query:{actionType:"update",title:"修改应用",name:t.name,scale:t.scale,creation_time:t.creation_time,end_time:t.end_time,category:t.category,productIdentifier:t.productIdentifier,secret:t.secret,objectId:t.objectId,logo:t.logo,userUnit:t.userUnit,dashboard:t.dashboard,background:t.background,desc:t.desc,copyright:t.copyright}})},makeSure(e,t){const a={count:"objectId",skip:0,limit:1,where:{product:row.objectId}};Object(l["queryDevice"])(a).then(a=>{a.count>0?this.$message("请先删除该产品下设备"):Object(i["getProduct"])(row.objectId).then(a=>{dgiotlog.log(a),Object(i["delProduct"])(row.objectId).then(a=>{a&&(this.$message({showClose:!0,duration:2e3,type:"success",message:"删除成功"}),e._self.$refs["popover-"+t].doClose(),this.getAppMange())}).catch(e=>{dgiotlog.log("delProduct ",e.error)})}).catch(e=>{dgiotlog.log("getProduct ",e.error)})}).catch(e=>{dgiotlog.log("queryDevice ",e.error)})},Gotoproduct(e){var t=[];for(var a in row.acl)dgiotlog.log(a.substring(5)),t.push(a.substring(5));this.$store.dispatch("setProjectRole",t),this.$router.push({path:"/roles/product",query:{project:row.objectId}})},serverlictool(e){dgiotlog.log(e),this.$router.push({path:"/roles/server_control",query:{appid:e.objectId,appsecret:e.secret}})},applicationDeployment(e){e.name?Object(n["setUpLictool"])(e.name).then(e=>{e&&this.$message("正在部署中")}).catch(e=>{this.$message(e)}):this.$message("没有应用名")}}},d=c,p=(a("7f5e"),a("2877")),u=Object(p["a"])(d,r,o,!1,null,"78ca6350",null);t["default"]=u.exports},"59ef":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"logs logs-container",class:{"dgiot-fullscreen":e.isFullscreen}},[t("dgiot-query-form",[t("dgiot-query-form-top-panel",[e.$lodash.isEmpty(e.queryForm)?e._e():t("el-form",{ref:"form",attrs:{inline:!0,"label-width":"80px",model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:e.$translateTitle("device.tracetype")}},[t("span",{staticStyle:{"font-size":"18px"}},[e._v(e._s("clientid"))])]),t("el-form-item",{attrs:{label:e.$translateTitle("device.action")}},[t("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","active-text":e.$translateTitle("device.start"),"active-value":"start","inactive-color":"#ff4949","inactive-text":e.$translateTitle("device.stop"),"inactive-value":"stop"},on:{change:e.starttrace},model:{value:e.queryForm.action,callback:function(t){e.$set(e.queryForm,"action",t)},expression:"queryForm.action"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("device.topic"),prop:"product"}},[t("el-select",{model:{value:e.instructtopic,callback:function(t){e.instructtopic=t},expression:"instructtopic"}},e._l(e.producttopic,(function(a,r){return t("el-option",{key:r,attrs:{label:a.category+"-"+a.desc,value:a.topic}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.topic))]),t("span",{staticStyle:{float:"right","font-size":"13px",color:"#8492a6"}},[e._v(" "+e._s(a.category+"-"+a.desc)+" ")])])})),1)],1),t("el-form-item",{attrs:{label:e.$translateTitle("device.instruct"),prop:"product"}},[t("el-input",{model:{value:e.instruct,callback:function(t){e.instruct=t},expression:"instruct"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sendinstruct()}}},[e._v(" "+e._s(e.$translateTitle("device.sendinstruct"))+" ")])],1)],1)],1)],1),t("a-tabs",{attrs:{"default-active-key":"editor"}},[t("a-tab-pane",{key:"editor"},[t("span",{attrs:{slot:"tab"},slot:"tab"},[t("dgiot-icon",{attrs:{icon:"aspect-ratio-fill"}}),e._v(" "+e._s(e.$translateTitle("Logs.console"))+" ")],1),t("dgiot-editor",{key:e.logMqtt.key,attrs:{height:e.isFullscreen?1080:1040,lang:"json","max-lines":(e.isFullscreen,1e3/12),"min-lines":(e.isFullscreen,1e3/12),theme:"gob"},model:{value:e.clickItem,callback:function(t){e.clickItem=t},expression:"clickItem"}})],1),t("a-tab-pane",{key:"table"},[t("span",{attrs:{slot:"tab"},slot:"tab"},[t("dgiot-icon",{attrs:{icon:"table-2"}}),e._v(" "+e._s(e.$translateTitle("Logs.table"))+" ")],1),t("el-table",{key:e.finallyColumns.length+e.momentKey,ref:"dragTable",staticClass:"logs-table",attrs:{border:"",data:e.scroketMsg,"default-expand-all":"",height:e.height,"highlight-current-row":"",resizable:"","row-class-name":e.tableRowClassName,stripe:""},scopedSlots:e._u([{key:"empty",fn:function(){return[t("dgiot-empty")]},proxy:!0}])},[e._l(e.finallyColumns,(function(a,r){return t("el-table-column",{key:r,attrs:{align:"center",label:a,prop:a,"show-overflow-tooltip":"",sortable:"",width:e.w80.includes(a)?80:e.Wh120.includes(a)?120:"auto"}})})),t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-descriptions",{staticClass:"margin-top",attrs:{border:"",column:2}},[t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{directives:[{name:"copy",rawName:"v-copy",value:a.row.msg,expression:"props.row.msg"}],staticClass:"el-icon-copy-document"})]),e._v(" "+e._s(a.row.msg)+" ")],2)],1)]}}])})],2),t("dgiot-Pagination",{directives:[{name:"show",rawName:"v-show",value:e.queryForm.total>0,expression:"queryForm.total > 0"}],attrs:{limit:e.queryForm.pageSize,page:e.queryForm.pageNo,total:e.queryForm.total},on:{"update:limit":function(t){return e.$set(e.queryForm,"pageSize",t)},"update:page":function(t){return e.$set(e.queryForm,"pageNo",t)},pagination:e.queryTable}})],1)],1)],1)},o=[],l=a("bb22"),i=a("22f9"),s=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())}),n={name:"SceneLog",props:{name:{type:String,required:!0,default:"name"},deviceInfo:{type:Object,required:!0,default(){return{}}}},data(){return{instruct:"",instructtopic:"",producttopic:[],productId:"",ttl:108e5,topicKey:"",topic:"",logMqtt:{channeltopic:"",key:moment(new Date).valueOf()},subtopic:"",router:"",scroketMsg:[],clickItem:"",isFullscreen:!1,height:this.$baseTableHeight(0),logdata:[],momentKey:moment(new Date).valueOf(),checkList:["time","topic","pid","peername"],logcolumns:["topic","time","pid","peername","msg","level","gl","clientid","mfa"],fold:!0,w80:["line","level"],Wh120:["pid","domain","gl"],Wh200:["time","clientid","peername"],leverData:["debug","info","notice","warning","error","crtical","alert","emergency"],actionData:["start","stop"],traceData:["clientid","topic"],queryForm:{total:0,count:"objectId",limit:20,pageNo:1,pageSize:20,skip:0,level:"info",logfile:"test.txt",order:1,action:"start",tracetype:"clientid"}}},computed:{dragOptions(){return{animation:600,group:"description"}},finallyColumns(){return this.logcolumns.filter(e=>this.checkList.includes(e))}},watch:{"deviceInfo.product.objectId":{handler:function(e){e&&(this.productId=e)},deep:!0,limit:!0},name:{handler:function(e){"task"==e&&this.queryTable()},deep:!0,limit:!0}},mounted(){this.router=this.$dgiotBus.router(location.href+this.$route.fullPath),this.get_topic()},created(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:{get_topic(){return s(this,null,(function*(){const{basic:e=[]}=yield Object(i["getDlinkJson"])("Topic");e.forEach(e=>{e.topic=e.topic.replace("${deviceid}",this.deviceInfo.objectId)}),this.producttopic=e}))},sendinstruct(){const e=this.instructtopic;this.$dgiotBus.$emit("MqttPublish",e,this.instruct,0,!1)},handleHeight(){this.isFullscreen=!this.isFullscreen,this.isFullscreen?this.height=this.$baseTableHeight(0)+120:this.height=this.$baseTableHeight(0),this.momentKey=moment(new Date).valueOf()},tableRowClassName({row:e}){return e.disabled?"disabled":""},rowDrop(){const e=this.$refs.dragTable.$el.querySelector(".el-table__body-wrapper tbody"),t=this;Sortable.create(e,{draggable:".el-table__row",onEnd({newIndex:e,oldIndex:a}){const r=t.logdata.splice(a,1)[0];t.logdata.splice(e,0,r)}})},columnDrop(){const e=this,t=this.$refs.dragTable.$el.querySelector(".el-table__header-wrapper tr");e.sortable=Sortable.create(t,{animation:180,delay:0,onEnd:t=>{const a=e.finallyColumns[t.oldIndex];e.finallyColumns.splice(t.oldIndex,1),e.finallyColumns.splice(t.newIndex,0,a),e.momentKey=moment(new Date).valueOf(),setTimeout(()=>{e.rowDrop(),e.columnDrop()},1500)}})},starttrace(e){dgiotlog.log("aaa",e),this.queryForm.action=e,this.queryTable()},queryTable(){this.scroketMsg=[],this.clickItem="",this.queryForm.deviceid=this.deviceInfo.objectId,"start"==this.queryForm.action&&(this.subtopic="$dg/user/trace/"+this.deviceInfo.objectId+"/#"),this.$dgiotBus.$off(this.subtopic),console.log(this.$mqttInfo),console.warn("订阅mqtt",this.subtopic),this.$dgiotBus.$on(""+this.subtopic,e=>{e.payloadString&&(this.scroketMsg.unshift(JSON.parse(e.payloadString)),this.logMqtt.key=this.topicKey,this.clickItem=JSON.stringify(this.scroketMsg,null,2))}),"stop"==this.queryForm.action&&this.MqttUnbscribe();const e=this.$baseColorfullLoading(),{level:t,action:a,order:r,deviceid:o,tracetype:i}=this.queryForm,s="clientid"==this.queryForm.tracetype?this.queryForm.deviceid:this.queryForm.topic;try{e.close();const n={level:t,action:a,order:r,handle:s,tracetype:i,deviceid:o};Object(l["postTrace"])(n).then(e=>{dgiotlog.log(e);const{code:t=0,error:a="",msg:r=""}=e;200==t?this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"):this.$baseMessage(this.$translateTitle("alert.Data request error")+""+a,"error","dgiot-hey-message-error")}).catch(e=>{dgiotlog.error(e),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+e,"error","dgiot-hey-message-error")}),e.close()}catch(n){e.close(),dgiotlog.log(n),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+n,"error","dgiot-hey-message-error")}this.momentKey=moment(new Date).valueOf()},MqttUnbscribe(){this.$dgiotBus.$emit("MqttUnbscribe",this.topicKey,this.subtopic)}}},c=n,d=(a("ebd7"),a("864d"),a("2877")),p=Object(d["a"])(c,r,o,!1,null,"6f9f803e",null);t["default"]=p.exports},6016:function(e,t,a){"use strict";a("8fbd")},"60e6":function(e,t,a){"use strict";a("beb1")},"662c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"runningState-container"},[t("div",{staticClass:"runningState"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"80vh",overflow:"scroll"}},e._l(e.machinelist,(function(a,r,o){return t("div",{key:o,staticStyle:{height:"auto",overflow:"scroll"}},[t("h2",[e._v(e._s(r))]),t("el-row",{attrs:{type:"flex"}},e._l(a,(function(a,r){return t("el-col",{key:r,attrs:{lg:6,md:6,sm:8,xl:4,xs:12}},[t("a-card",{staticStyle:{margin:"10px"},attrs:{hoverable:"",title:a.name},scopedSlots:e._u([{key:"extra",fn:function(){return[t("dgiot-icon",{staticStyle:{"font-size":"24px",cursor:"pointer"},attrs:{icon:"exchange-line"},nativeOn:{click:function(e){a.module="card"==a.module?"table":"card"}}})]},proxy:!0}],null,!0)},["table"==a.module?t("div",[t("List",{attrs:{border:"",header:a.name}},e._l(Object.keys(a),(function(r){return t("ListItem",{key:r},[e._v(" "+e._s(r+":"+a[r])+" ")])})),1)],1):e._e(),"card"==a.module?t("div",{staticClass:"fixdescription"},[t("a-card-meta",{attrs:{description:e._f("filterVal")(a.number+a.unit)},scopedSlots:e._u([{key:"avatar",fn:function(){return[t("a-avatar",{attrs:{src:a.imgurl}})]},proxy:!0}],null,!0)}),t("el-link",{staticStyle:{"margin-top":"10px"},attrs:{underline:!1}},[e._v(" "+e._s(e.$translateTitle("equipment.updatetime")+":")+" "+e._s(a.time)+" ")])],1):e._e()])],1)})),1)],1)})),0)])])},o=[],l={name:"RunningState",components:{},filters:{filterVal(e){return e||0==e?e:"--"}},props:{loading:{required:!1,type:Boolean,default:()=>!1},thirdtbKey:{required:!1,type:Number,default:()=>moment(new Date).valueOf()},machinelist:{required:!1,type:Object,default(){return{}}}},data(){return{module:"card"}},computed:{},watch:{},created(){},mounted(){},destroyed(){},methods:{}},i=l,s=(a("d069"),a("dbd1"),a("2877")),n=Object(s["a"])(i,r,o,!1,null,"9bb62ad8",null);t["default"]=n.exports},6818:function(e,t,a){var r={"./ProductTemplet.vue":"0238","./ProfileDescriptions.vue":"4c00","./ProfileDict.vue":"d815","./ProfileDrawer.vue":"df9c"};function o(e){var t=l(e);return a(t)}function l(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=l,e.exports=o,o.id="6818"},"6e60":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("el-tab-pane",{attrs:{label:"物解析",name:"fourth"}},[t("div",{staticClass:"protolheader"},[t("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.addRules}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.protocolname"),prop:"name"}},[t("el-input",{attrs:{placeholder:e.$translateTitle("product.protocolname")},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("plugins.version")}},[t("el-input",{attrs:{placeholder:e.$translateTitle("plugins.version")},model:{value:e.formInline.version,callback:function(t){e.$set(e.formInline,"version",t)},expression:"formInline.version"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[t("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:e.formInline.desc,callback:function(t){e.$set(e.formInline,"desc",t)},expression:"formInline.desc"}})],1),t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.subAce("formInline",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.subAce1("formInline")}}},[e._v(" 设为公共 ")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.chaxun}},[e._v(" "+e._s(e.$translateTitle("product.publicagreementlibrary"))+" ")])],1),t("el-form-item",{staticStyle:{display:"block"}},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.protol}},[e._v(" "+e._s(e.$translateTitle("product.compile"))+" ")]),t("el-button",{attrs:{size:"small",type:"success"},on:{click:e.updatesubdialog}},[e._v(" 热加载 ")])],1)],1)],1),t("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:"通道热加载",visible:e.protoldialog,width:"50%"},on:{"update:visible":function(t){e.protoldialog=t}}},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.protolchannel,"row-class-name":e.getChannelEnable},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",[e._v(e._s(a.objectId))])]}}])}),t("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",[e._v(e._s(a.name))])]}}])}),t("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",[e._v(e._s("channel/"+a.objectId))])]}}])}),t("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[1==a.type?t("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):t("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),t("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",[e._v(e._s(a.cType))])]}}])})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.updateAllChannel.apply(null,arguments)}}},[e._v(" 确定 ")])],1)],1),t("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.publicagreementlibrary"),visible:e.dialogTableVisible,width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[t("el-table",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.gridData}},[t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocolname")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",[e._v(e._s(a.data.name))])]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("plugins.version")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",[e._v(e._s(a.data.version))])]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.describe")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",[e._v(e._s(a.data.desc))])]}}])}),t("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",[e._v(e._s(e.utc2beijing(a.createdAt)))])]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.editordata(a)}}},[e._v(" "+e._s(e.$translateTitle("product.clone"))+" ")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deletedata(a.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),t("div",{staticClass:"elpagination",staticStyle:{padding:"20px 0"}},[t("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.decoderlength,"page-sizes":[10,20,30,50],total:e.decodertotal},on:{"current-change":e.devicerCurrentChange,"size-change":e.decoderSizeChange}})],1)],1),t("div",[t("div",{staticStyle:{background:"#ffffff"}},[t("label",{attrs:{id:"plug-name"}})]),t("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px","margin-bottom":"0"},attrs:{id:"editor"}},[t("textarea",{staticClass:"ace_text-input"})]),t("div",{staticStyle:{background:"#ffffff"}},[t("label",{attrs:{id:"plug-name"}})]),t("div",{staticStyle:{padding:"5px",color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd"}},[t("span",[e._v(e._s(e.$translateTitle("product.controloutput")))])]),t("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:"editor2"}},[t("textarea",{staticClass:"ace_text-input"})])])],1)],1)},o=[],l={components:{},data(){return{formInline:{name:"",version:"",desc:"",resource:!1}}},computed:{},methods:{}},i=l,s=(a("f7ee"),a("2877")),n=Object(s["a"])(i,r,o,!1,null,"ed9dc2b2",null);t["default"]=n.exports},"700d":function(e,t,a){},"77f9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{class:e.className,style:{height:e.height,width:e.width}})},o=[],l=a("ed08"),i={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0}},data(){return{chart:null,sidebarElm:null}},mounted(){this.initChart(),this.autoResize&&(this.__resizeHandler=Object(l["debounce"])(()=>{this.chart&&this.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler)),this.sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.sidebarElm&&this.sidebarElm.addEventListener("transitionend",this.sidebarResizeHandler)},beforeDestroy(){this.chart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHandler),this.sidebarElm&&this.sidebarElm.removeEventListener("transitionend",this.sidebarResizeHandler),this.chart.dispose(),this.chart=null)},methods:{sidebarResizeHandler(e){"width"===e.propertyName&&this.__resizeHandler()},setOptions(){var e=[100,80,60,40],t=["拱墅区","余杭区","西湖区","江干区"],a=[683,523,240,234];this.chart.setOption({xAxis:{show:!1},yAxis:[{show:!0,data:t,inverse:!0,axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"black",formatter:function(e,t){return[e].join("\n")},show:!0,margin:-10,align:"left",verticalAlign:"bottom",padding:[0,0,15,0],fontSize:16,rich:{lg:{backgroundColor:"#339911",color:"green",borderRadius:10,align:"center",width:15,height:15}}}},{show:!0,inverse:!0,data:a,axisLabel:{textStyle:{fontSize:20,color:"#339911"}},axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1}}],series:[{name:"条",type:"bar",yAxisIndex:0,data:e,barWidth:30,itemStyle:{normal:{barBorderRadius:30,color:function(e){return"#"+("00000"+(16777215*Math.random()+.5>>0).toString(16)).slice(-6)}}},label:{normal:{show:!1,position:"inside",formatter:"{c}%"}}},{name:"框",type:"bar",yAxisIndex:1,barGap:"-100%",data:[100,100,100,100],barWidth:30,itemStyle:{normal:{color:"none",borderColor:"#cccccc",margin:[10,0],borderWidth:2,barBorderRadius:15}}}]})},initChart(){this.chart=echarts.init(this.$el,"macarons"),this.setOptions()}}},s=i,n=a("2877"),c=Object(n["a"])(s,r,o,!1,null,null,null);t["default"]=c.exports},"7dd9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"instruct"},[t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[t("el-form-item",[t("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入指令名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.Instruct(0)}}},[e._v("查询")])],1)],1)],1),t("div",{staticClass:"instruct_button"},[t("div",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.dialogBtn_em("form","3",e.form)}}},[e._v(" 新增指令 ")]),t("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.deleteAll}},[e._v(" 删 除 ")])],1),t("div",[t("el-button",{attrs:{size:"small",type:"success"}},[e._v("启 用")]),t("el-button",{attrs:{size:"small",type:"warning"}},[e._v("禁 用")])],1)]),t("div",{staticClass:"instruct_table"},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.instructData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{align:"center",label:"指令名称",sortable:"",width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v(" "+e._s(t.name)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"指令类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return["Read"==a.op?t("el-tag",{attrs:{type:"primary"}},[e._v("读")]):t("el-tag",{attrs:{type:"success"}},[e._v("写")])]}}])}),t("el-table-column",{attrs:{align:"center",label:"指令标识"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v(" "+e._s(t.di)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"指令序号",prop:"order"}}),t("el-table-column",{attrs:{align:"center",label:"超时时长"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v(" "+e._s(t.duration+"秒")+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"子网编号",width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v(" "+e._s(t.pn)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"生效轮次"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v(" "+e._s(t.rotation)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"是否启用",width:"100"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[a.enable?t("el-tag",{attrs:{type:"success"}},[e._v("是")]):t("el-tag",{attrs:{type:"danger"}},[e._v("否")])]}}])}),t("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.dialogBtn_em("","2",a)}}},[e._v(" 编 辑 ")]),t("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.deleteInstruct(a.objectId)}}},[e._v(" 删 除 ")])]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":e.pagesize,"page-sizes":[10,20,30,40],total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),t("el-dialog",{attrs:{"append-to-body":!0,title:e.dialogTitle+"指令",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},open:e.openDialog}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.formrule,size:"small"}},[t("h4",[e._v("  指令信息")]),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"指令名称","label-width":e.formLabelWidth,prop:"name"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入指令名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"操作类型","label-width":e.formLabelWidth,prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择操作类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[t("el-option",{attrs:{label:"读",value:"r"}}),t("el-option",{attrs:{label:"写",value:"w"}})],1)],1),t("el-form-item",{attrs:{label:"是否启用","label-width":e.formLabelWidth,prop:"enable"}},[t("el-radio-group",{model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}},[t("el-radio",{attrs:{label:!0}},[e._v("是")]),t("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"指令指标","label-width":e.formLabelWidth,prop:"pointer"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入指令指标"},model:{value:e.form.pointer,callback:function(t){e.$set(e.form,"pointer",t)},expression:"form.pointer"}})],1),t("el-form-item",{attrs:{label:"指令序号","label-width":e.formLabelWidth,prop:"order"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入指令序号"},model:{value:e.form.order,callback:function(t){e.$set(e.form,"order",t)},expression:"form.order"}})],1),t("p",{staticStyle:{"padding-left":"125px","font-size":"12px","line-height":"20px"}},[e._v(" 1. 指令序号相同,会作为同一组消息发送 "),t("br"),e._v(" 2. 消息的发送顺序按照指令序号排序 ")])],1)],1),t("h4",[e._v("  指令下发策略")]),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"超时时长","label-width":e.formLabelWidth,prop:"duration"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入超时时长"},model:{value:e.form.duration,callback:function(t){e.$set(e.form,"duration",e._n(t))},expression:"form.duration"}},[t("template",{slot:"append"},[e._v("秒")])],2)],1),t("el-form-item",{attrs:{label:"生效轮次","label-width":e.formLabelWidth,prop:"rotation"}},[t("el-select",{attrs:{"allow-create":"",clearable:"","default-first-option":"",filterable:"",placeholder:"请选择生效轮次"},model:{value:e.form.rotation,callback:function(t){e.$set(e.form,"rotation",t)},expression:"form.rotation"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("p",{staticStyle:{position:"absolute",top:"40px",margin:"0","font-size":"12px",color:"black"}},[e._v(" 例如:1,3,5,8;(可选可自主填写)(注意:逗号为英文逗号) ")])],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"子网编号","label-width":e.formLabelWidth,prop:"subnet"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入子网编号"},model:{value:e.form.subnet,callback:function(t){e.$set(e.form,"subnet",t)},expression:"form.subnet"}})],1),t("el-form-item",{attrs:{label:"发送间隔","label-width":e.formLabelWidth,prop:"interval"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入发送间隔"},model:{value:e.form.interval,callback:function(t){e.$set(e.form,"interval",e._n(t))},expression:"form.interval"}},[t("template",{slot:"append"},[e._v("秒")])],2)],1)],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.check("form")}}},[e._v(" 确 定 ")])],1)],1)],1)},o=[],l=a("e0e9"),i=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())}),s={name:"Instruct",props:{productId:{type:String,default:""},devicesId:{type:String,default:""}},data(){return{formInline:{name:""},options:[{value:"first",label:"第一轮"},{value:"last",label:"最后一轮"},{value:"all",label:"全部"}],instructData:[],multipleTable:[],pagesize:10,start:0,total:0,dialogFormVisible:!1,formLabelWidth:"120px",form:{name:"",pointer:"",type:"",enable:"",duration:"",order:"",interval:"",rotation:"",subnet:""},formrule:{duration:[{required:!0,message:"请输入",trigger:"blur"}],interval:[{required:!0,message:"请输入",trigger:"blur"}],name:[{required:!0,message:"指标名称不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择操作类型",trigger:"blur"}],enable:[{required:!0,message:"指标是否启用不能为空",trigger:"change"}],order:[{required:!0,message:"指标序号不能为空",trigger:"blur"}],rotation:[{required:!0,message:"生效轮次不能为空",trigger:"change"}],subnet:[{required:!0,message:"子网编号不能为空",trigger:"blur"}],pointer:[{required:!0,message:"指令指标不能为空",trigger:"blur"}]},instructid:"",dialogTitle:"新增"}},watch:{dialogFormVisible:{handler(e){e||(this.$refs.form.resetFields(),dgiotlog.log(e))},deep:!0},devicesId:{handler(e){dgiotlog.log(e)},deep:!0}},mounted(){this.Instruct()},updated(){},methods:{dialogClosed(){this.dialogFormVisible=!1},openDialog(e,t,a){this.$nextTick(()=>{switch(this.$refs[e]&&this.$refs[e].resetFields(),t){case"2":this.dialogTitle="编辑",this.form=a;break;case"3":this.dialogTitle="添加";break;default:break}})},Instruct(e=9){return i(this,null,(function*(){0==e&&(this.start=0);let t={where:{device:this.devicesId},skip:this.start,limit:this.pagesize,order:"-createdAt",count:"objectId"};this.formInline.name&&(t.where.name=this.formInline.name);const{count:a=0,results:r=[]}=yield Object(l["queryIndustry"])(t);this.total=a,this.instructData=r}))},addInstruct(){this.dialogFormVisible=!0,this.$refs.form.resetFields()},check(e){this.$refs[e].validate(e=>i(this,null,(function*(){let t={className:"Product",objectId:this.productId,__type:"Pointer"},a={className:"Device",objectId:this.devicesId,__type:"Pointer"};if(!e)return this.$message("有必填项未填写"),!1;{let e,r={device:a,product:t,name:this.form.name,enable:this.form.enable,op:this.form.type,rotation:this.form.rotation,duration:this.form.duration,order:this.form.order,interval:this.form.interval,di:this.form.pointer,pn:this.form.subnet,devaddr:this.form.lowerhair};""!=this.instructid?e=yield Object(l["updateIndustry"])(this.instructid,r):(r.ACL=this.$aclObj,e=yield Object(l["postIndustry"])(r)),e.objectId&&(this.$message({showClose:!0,duration:2e3,type:"success",message:this.dialogTitle+"成功"}),this.$refs.form.resetFields(),this.dialogClosed(),this.instructid="",this.Instruct())}})))},handleSizeChange(e){this.pagesize=e,this.Instruct()},handleCurrentChange(e){this.start=(e-1)*this.pagesize,this.Instruct()},dialogBtn_em(e,t,a){this.dialogFormVisible=!0;let r,o={};2==t?(r={name:a.name,pointer:a.di,type:a.op,enable:a.enable,duration:a.duration,order:a.order,interval:a.interval,lowerhair:a.devaddr,rotation:a.rotation,subnet:a.pn},o=Object.assign({},r),this.instructid=a.objectId):(dgiotlog.log(a),o=Object.assign({},a)),this.openDialog(e,t,o)},deleteInstruct(e){this.$confirm("此操作将永久删除该指令, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>i(this,null,(function*(){const t=yield Object(l["delIndustry"])(e);t&&(this.$message({showClose:!0,duration:2e3,type:"success",message:"删除成功!"}),this.Instruct())}))).catch(()=>{})},handleSelectionChange(e){this.multipleTable=e},deleteAll(e){return i(this,null,(function*(){if(0!=this.multipleTable.length){let e=[];this.multipleTable.map(t=>i(this,null,(function*(){e.push({body:{},method:"DELETE",path:"/classes/Instruct/"+t.objectId})})));const t={requests:e},a=yield this.$shuwa_batch(t);a.error?this.$message({showClose:!0,duration:2e3,message:"删除失败"+a.error,type:"error"}):(this.$message({showClose:!0,duration:2e3,message:"删除成功",type:"success"}),this.Instruct())}else this.$message({showClose:!0,duration:2e3,message:"请挑选要删除的指令",type:"warning"})}))}}},n=s,c=(a("3524"),a("2877")),d=Object(c["a"])(n,r,o,!1,null,"c9b3dd86",null);t["default"]=d.exports},"7f5e":function(e,t,a){"use strict";a("acf2")},8216:function(e,t,a){},8225:function(e,t,a){},"864d":function(e,t,a){"use strict";a("4fb0")},"870b":function(e,t,a){"use strict";a("1d16")},8735:function(e,t,a){},"8fbd":function(e,t,a){},9705:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":!0,title:e.title,visible:e.dialogFormVisible,width:"300px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:e.close}},[e._v(" "+e._s(e.$translateTitle("category.cancel"))+" ")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.save(e.form.mark)}}},[e._v(" "+e._s(e.$translateTitle("category.submit"))+" ")])]},proxy:!0}])},[t("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{label:e.$translateTitle("category.name"),prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"child"==e.flagType,expression:"flagType == 'child'"}],attrs:{label:e.$translateTitle("category.sort"),prop:"order"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:e.form.order,callback:function(t){e.$set(e.form,"order",t)},expression:"form.order"}})],1)],1)],1)},o=[],l=a("03b1"),i=a("5880"),s=Object.defineProperty,n=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,b=(e,t)=>{for(var a in t||(t={}))p.call(t,a)&&m(e,a,t[a]);if(d)for(var a of d(t))u.call(t,a)&&m(e,a,t[a]);return e},h=(e,t)=>n(e,c(t)),f=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())}),g={name:"TableEdit",data(){return{flagType:"father",form:{data:{},name:"",order:0,level:0},rules:{},title:"",dialogFormVisible:!1}},computed:h(b({},Object(i["mapGetters"])({role:"acl/role",username:"user/username"})),{aclObj(){let e={};return this.role.map(t=>{e[""+("role:"+t.name)]={read:!0,write:!0}}),e}}),created(){},mounted(){this.rules={name:[{required:!0,trigger:"blur",message:this.$translateTitle("category.Please enter the category name")}],order:[{required:!0,trigger:"blur",message:this.$translateTitle("category.Please enter the sort")}]}},methods:{showEdit(e,t){dgiotlog.log("row",e),dgiotlog.log("type",t),this.flagType=t,this.title="top"==this.flagType?this.$translateTitle("category.New top category"):"child"==t?this.$translateTitle("category.Add subcategory"):this.$translateTitle("category.Modify category"),this.form="child"!=this.flagType?_.merge({mark:t},e):"top"==this.flagType?_.merge(this.$options.data().form,{mark:t,objectId:e.objectId,level:e.level,order:Number(moment(new Date).valueOf())}):{objectId:e.objectId,mark:t,data:{},name:"",order:0,level:0},dgiotlog.log("this.form",this.form),this.dialogFormVisible=!0},close(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save(e){dgiotlog.log(e);const t={"*":{read:!0}};var a={name:this.form.name,data:this.form.data,order:this.form.order};const r="top"==e?_.merge(a,{ACL:_.merge(t,this.aclObj),parent:{objectId:"a60a85475a",__type:"Pointer",className:"Category"},level:1}):"child"==e?_.merge(a,{ACL:_.merge(t,this.aclObj),parent:{objectId:this.form.objectId,__type:"Pointer",className:"Category"},level:2}):a;this.$refs["form"].validate(t=>f(this,null,(function*(){if(dgiotlog.log("setparams",r),t){const{msg:t}="edit"==e?yield Object(l["putCategory"])(this.form.objectId,r):yield Object(l["postCategory"])(r);this.$baseMessage(t,"success","dgiot-hey-message-success"),this.$emit("fetch-data"),this.close()}})))}}},y=g,v=a("2877"),$=Object(v["a"])(y,r,o,!1,null,null,null);t["default"]=$.exports},"9ad4":function(e,t,a){"use strict";a("8216")},a360:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},a80c:function(e){e.exports=JSON.parse('{"RegionId":"cn-shanghai","ProductKey":"a1lcmeFVu97","ThingModelJson":{"productKey":"a1lcmeFVu97","events":[{"productKey":"a1lcmeFVu97","abilityType":3,"name":"自定义事件名称","identifier":"zidingyishijianbiaoshifu","description":"描述","eventName":"自定义事件名称","eventType":"INFO_EVENT_TYPE","outputData":[{"paraOrder":0,"direction":"PARAM_OUTPUT","custom":true,"index":0,"name":"11","identifier":"11","dataSpecs":{"unit":"var","step":"11","dataType":"INT","max":"111111","min":"11","unitName":"乏"},"dataType":"INT"},{"paraOrder":1,"direction":"PARAM_OUTPUT","custom":true,"index":1,"name":"参数名称","identifier":"biaoshifu","dataSpecs":{"unit":"W/㎡","step":"1","dataType":"INT","max":"2","min":"1","unitName":"太阳总辐射"},"dataType":"INT"}],"outputParams":[{"index":0,"identifier":"11"},{"index":1,"identifier":"biaoshifu"}],"required":false,"custom":true}]}}')},acf2:function(e,t,a){},aed5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wmxheader"},[t("dgiot-input",{ref:"uploadFinish",attrs:{params:e.inputParams},on:{fileInfo:e.fileInfo,files:e.files}}),t("el-dialog",{attrs:{"append-to-body":"",visible:e.createModal.dialog,width:"30%"},on:{"update:visible":function(t){return e.$set(e.createModal,"dialog",t)}}},[t("el-input",{attrs:{rows:6,type:"textarea"},model:{value:e.createModal.data,callback:function(t){e.$set(e.createModal,"data",t)},expression:"createModal.data"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){e.createModal.dialog=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.createModal.dialog=!1}}},[e._v(" 确 定 ")])],1)],1),t("el-form",{key:e.upKey,ref:"sizeForm",attrs:{"label-position":"left","label-width":"150px",model:e.sizeForm,rules:e.sizerule,size:"medium"}},[t("div",[t("el-collapse",{model:{value:e.collapseName,callback:function(t){e.collapseName=t},expression:"collapseName"}},[t("el-collapse-item",{attrs:{name:"1"}},[t("template",{slot:"title"},[e._v(" "+e._s(e.$translateTitle("task.datastorage"))+" ")]),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"图标",prop:"precision"}},[t("el-avatar",{key:e.sizeForm.ico,attrs:{size:50,src:e.$FileServe+e.sizeForm.ico},nativeOn:{click:function(t){return e.uploadCkick("userinfo.avatar")}}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.devicetype"),prop:"devicetype"}},[t("el-input",{model:{value:e.sizeForm.devicetype,callback:function(t){e.$set(e.sizeForm,"devicetype",t)},expression:"sizeForm.devicetype"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.functionname"),prop:"name"}},[e.sizeForm.nobound&&e.sizeForm.nobound.length>0?t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"","default-first-option":"",filterable:"",placeholder:"请选择","value-key":"name"},on:{change:e.changeThing},model:{value:e.sizeForm.name,callback:function(t){e.$set(e.sizeForm,"name",t)},expression:"sizeForm.name"}},e._l(e.sizeForm.nobound,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e}})})),1):t("el-input",{model:{value:e.sizeForm.name,callback:function(t){e.$set(e.sizeForm,"name",t)},expression:"sizeForm.name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.identifier"),prop:"identifier"}},[t("el-input",{attrs:{disabled:e.sizeForm.editdatatype},model:{value:e.sizeForm.identifier,callback:function(t){e.$set(e.sizeForm,"identifier",t)},expression:"sizeForm.identifier"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.datatype"),prop:"type"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"",disabled:e.sizeForm.editdatatype,filterable:""},on:{change:e.changeGroup},model:{value:e.sizeForm.type,callback:function(t){e.$set(e.sizeForm,"type",t)},expression:"sizeForm.type"}},e._l(e.dataType,(function(a){return t("el-option-group",{key:a.label,attrs:{label:a.label}},e._l(a.options,(function(a){return t("el-option",{key:a.value,attrs:{label:a.value,value:a.value}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.label))]),t("span",{staticStyle:{float:"right",color:"#8492a6"}},[e._v(" "+e._s(a.value)+" ")])])})),1)})),1)],1)],1),"rw"==e.sizeForm.isread?t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"关联控制指令"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"",filterable:""},model:{value:e.sizeForm.profile,callback:function(t){e.$set(e.sizeForm,"profile",t)},expression:"sizeForm.profile"}},e._l(Object.keys(e.viewData),(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1):e._e()],1),t("el-row",{attrs:{gutter:24}},["float"==e.sizeForm.type||"double"==e.sizeForm.type?t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"小数位数",prop:"precision"}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.sizeForm.precision,callback:function(t){e.$set(e.sizeForm,"precision",t)},expression:"sizeForm.precision"}},[t("el-option",{attrs:{label:1,value:"1"}}),t("el-option",{attrs:{label:2,value:"2"}}),t("el-option",{attrs:{label:3,value:"3"}}),t("el-option",{attrs:{label:4,value:"4"}}),t("el-option",{attrs:{label:5,value:"5"}}),t("el-option",{attrs:{label:6,value:"6"}})],1)],1)],1):e._e(),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.readandwritetype"),prop:"isread"}},[t("el-radio-group",{staticStyle:{width:"100%"},attrs:{size:"medium"},model:{value:e.sizeForm.isread,callback:function(t){e.$set(e.sizeForm,"isread",t)},expression:"sizeForm.isread"}},[t("el-radio",{attrs:{label:"r"}},[e._v(" "+e._s(e.$translateTitle("product.read"))+" ")]),t("el-radio",{attrs:{label:"rw"}},[e._v(" "+e._s(e.$translateTitle("product.write"))+" ")])],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.isstorage"),prop:"isshow"}},[t("el-radio-group",{staticStyle:{width:"100%"},attrs:{size:"medium"},model:{value:e.sizeForm.isstorage,callback:function(t){e.$set(e.sizeForm,"isstorage",t)},expression:"sizeForm.isstorage"}},[t("el-radio",{attrs:{label:!0}},[e._v(" "+e._s(e.$translateTitle("product.storage"))+" ")]),t("el-radio",{attrs:{label:!1}},[e._v(" "+e._s(e.$translateTitle("product.notstorage"))+" ")])],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"是否展示"}},[t("el-radio-group",{staticStyle:{width:"100%"},attrs:{size:"medium"},model:{value:e.sizeForm.isshow,callback:function(t){e.$set(e.sizeForm,"isshow",t)},expression:"sizeForm.isshow"}},[t("el-radio",{attrs:{label:!0}},[e._v("展示")]),t("el-radio",{attrs:{label:!1}},[e._v("不展示")])],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.isaccumulate"),prop:"isshow"}},[t("el-radio-group",{staticStyle:{width:"100%"},attrs:{size:"medium"},model:{value:e.sizeForm.isaccumulate,callback:function(t){e.$set(e.sizeForm,"isaccumulate",t)},expression:"sizeForm.isaccumulate"}},[t("el-radio",{attrs:{label:!0}},[e._v("累积")]),t("el-radio",{attrs:{label:!1}},[e._v("不累积")])],1)],1)],1),"properties"==e.moduletype&&"enum"!==e.sizeForm.type&&"text"!==e.sizeForm.type&&"bool"!==e.sizeForm.type?t("el-col",{attrs:{span:8}},["properties"==e.moduletype||"int"==e.sizeForm.type||"long"==e.sizeForm.type||"float"==e.sizeForm.type||"double"==e.sizeForm.type?t("el-form-item",{attrs:{label:e.$translateTitle("product.valuerangemin"),prop:"startnumber"}},[t("el-input",{attrs:{placeholder:e.$translateTitle("product.minimumvalue"),type:"number"},model:{value:e.sizeForm.startnumber,callback:function(t){e.$set(e.sizeForm,"startnumber",e._n(t))},expression:"sizeForm.startnumber"}})],1):e._e()],1):e._e()],1),"int"==e.sizeForm.type||"long"==e.sizeForm.type||"float"==e.sizeForm.type||"double"==e.sizeForm.type?t("el-row",{attrs:{gutter:24}},["properties"==e.moduletype?t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.valuerangemax"),prop:"endnumber"}},[t("el-input",{attrs:{placeholder:e.$translateTitle("product.maximumvalue"),type:"number"},on:{input:function(t){return e.changeValue("sizeForm")}},model:{value:e.sizeForm.endnumber,callback:function(t){e.$set(e.sizeForm,"endnumber",e._n(t))},expression:"sizeForm.endnumber"}})],1)],1):e._e(),"properties"==e.moduletype?t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"步长",prop:"step"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:0,precision:2,step:.01},model:{value:e.sizeForm.step,callback:function(t){e.$set(e.sizeForm,"step",t)},expression:"sizeForm.step"}})],1)],1):e._e(),"properties"==e.moduletype?t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.unit")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"",filterable:"",placeholder:e.$translateTitle("product.unit")},model:{value:e.sizeForm.unit,callback:function(t){e.$set(e.sizeForm,"unit",t)},expression:"sizeForm.unit"}},e._l(e.allunit,(function(a){return t("el-option-group",{key:a.label,attrs:{label:a.label}},e._l(a.options,(function(a){return t("el-option",{key:a.id,attrs:{label:a.symbol,value:a.symbol}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.name))]),t("span",{staticStyle:{float:"right",color:"#8492a6"}},[e._v(" "+e._s(a.symbol)+" ")])])})),1)})),1)],1)],1):e._e()],1):e._e(),"bool"==e.sizeForm.type?t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.attribute"),prop:"truevalue",required:""}},[t("el-input",{attrs:{placeholder:e.$translateTitle("product.attribute"),readonly:"",type:"number"},model:{value:e.sizeForm.truevalue,callback:function(t){e.$set(e.sizeForm,"truevalue",t)},expression:"sizeForm.truevalue"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"-"}},[t("el-input",{attrs:{placeholder:e.$translateTitle("product.egopen")},model:{value:e.sizeForm.true,callback:function(t){e.$set(e.sizeForm,"true",t)},expression:"sizeForm.true"}})],1)],1)],1):e._e(),"bool"==e.sizeForm.type?t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:4}},[t("el-form-item",[t("el-input",{attrs:{placeholder:e.$translateTitle("product.attribute"),readonly:"",type:"number"},model:{value:e.sizeForm.falsevalue,callback:function(t){e.$set(e.sizeForm,"falsevalue",t)},expression:"sizeForm.falsevalue"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{label:"-"}},[t("el-input",{attrs:{placeholder:e.$translateTitle("product.egclose")},model:{value:e.sizeForm.false,callback:function(t){e.$set(e.sizeForm,"false",t)},expression:"sizeForm.false"}})],1)],1)],1):e._e(),"enum"==e.sizeForm.type?t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"枚举项"}},[t("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},on:{click:e.addDomain}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")]),t("el-alert",{attrs:{closable:!1,description:"存库值必须是int类型，界面值是字符串类型,设备值与存库值转化请使用采集公式",title:"参数提示",type:"success"}}),t("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.sizeForm.struct}},[t("el-table-column",{attrs:{align:"center",label:"存库值"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-input",{model:{value:a.attribute,callback:function(t){e.$set(a,"attribute",t)},expression:"row.attribute"}})]}}],null,!1,145805847)}),t("el-table-column",{attrs:{align:"center",label:"界面值"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-input",{model:{value:a.attributevalue,callback:function(t){e.$set(a,"attributevalue",t)},expression:"row.attributevalue"}})]}}],null,!1,2139517436)}),t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{plain:"",size:"mini",title:"删除",type:"danger"},nativeOn:{click:function(t){return e.removeDomain(a)}}},[e._v(" 删除 ")])]}}],null,!1,1667144408)})],1)],1)],1)],1):e._e(),"struct"==e.sizeForm.type?t("div",[t("el-form-item",{attrs:{label:"JSON对象",required:""}},[t("ul",{staticStyle:{"padding-left":"20px",margin:"0"}},e._l(e.sizeForm.struct,(function(a,r){return t("li",{key:r,staticStyle:{display:"flex","list-style":"none"},attrs:{value:"item"}},[t("div",[t("span",[e._v(" "+e._s(e.$translateTitle("product.parametername")+":")+"} ")]),t("span",[e._v(e._s(a.name))])]),t("div",[t("el-link",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",underline:!1},on:{click:function(t){return e.editStruct(a,r)}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),t("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){return e.deleteStruct(r)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)])})),0),t("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},on:{click:function(t){return e.addStruct("structform")}}},[e._v(" "+e._s(e.$translateTitle("product.addparameter"))+" ")])],1)],1):e._e(),"text"==e.sizeForm.type?t("div",[t("el-form-item",{attrs:{label:e.$translateTitle("product.datalength"),prop:"string"}},[t("el-input",{attrs:{type:"number"},model:{value:e.sizeForm.string,callback:function(t){e.$set(e.sizeForm,"string",e._n(t))},expression:"sizeForm.string"}},[t("template",{slot:"append"},[e._v(" "+e._s(e.$translateTitle("product.byte"))+" ")])],2)],1)],1):e._e(),"date"==e.sizeForm.type?t("div",[t("el-form-item",{attrs:{label:e.$translateTitle("product.timeformat")}},[t("el-input",{attrs:{readonly:""},model:{value:e.sizeForm.date,callback:function(t){e.$set(e.sizeForm,"date",t)},expression:"sizeForm.date"}})],1)],1):e._e(),"geopoint"==e.sizeForm.type?t("div",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"is-required",attrs:{label:e.$translateTitle("product.gps type")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.sizeForm.gpstype,callback:function(t){e.$set(e.sizeForm,"gpstype",t)},expression:"sizeForm.gpstype"}},e._l(["NMEA0183"],(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1)],1)],1)],1):e._e(),"file"==e.sizeForm.type?t("div",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"is-required",attrs:{label:e.$translateTitle("product.image type")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.options.value,callback:function(t){e.$set(e.options,"value",t)},expression:"options.value"}},e._l(["二进制","Base64"],(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.File parameters")}},[t("el-input",{model:{value:e.sizeForm.file,callback:function(t){e.$set(e.sizeForm,"file",t)},expression:"sizeForm.file"}})],1)],1)],1)],1):e._e(),"image"==e.sizeForm.type?t("div",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"is-required",attrs:{label:e.$translateTitle("product.image type")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.sizeForm.imagevalue,callback:function(t){e.$set(e.sizeForm,"imagevalue",t)},expression:"sizeForm.imagevalue"}},e._l(["jpg","png","ico"],(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1)],1):e._e()],2),"properties"==e.moduletype?t("el-collapse-item",{attrs:{name:"2"}},[t("template",{slot:"title"},[e._v(" "+e._s(e.$translateTitle("task.dataacquisition"))+" "),t("el-row",{staticStyle:{margin:"0 auto"}},[t("el-col",{attrs:{span:2}},[t("el-popover",{attrs:{placement:"right",trigger:"click",width:"400"}},[t("el-table",{attrs:{data:e.wmxData.slice((e.wmxstart-1)*e.wmxPageSize,e.wmxstart*e.wmxPageSize)}},[t("el-table-column",{attrs:{label:e.$translateTitle("product.identifier")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(a.identifier)+" ")])]}}],null,!1,945501893)}),t("el-table-column",{attrs:{label:e.$translateTitle("product.functionname")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(a.name)+" ")])]}}],null,!1,3608931969)}),t("el-table-column",{attrs:{label:e.$translateTitle("product.datatype")},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(a.dataType.type)+" ")])]}}],null,!1,404777272)})],1),t("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.wmxPageSize,"page-sizes":[10,20,30,50],total:e.wmxData.length},on:{"current-change":e.wmxCurrentChange,"size-change":e.wmxSizeChange}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:8}},[t("el-tooltip",{staticStyle:{float:"left"},attrs:{effect:"dark",placement:"right-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 采集策略表达式 。 "),t("br"),e._v(" 如： "),t("br"),e._v(" 5分钟 = 5 * 60 "),t("br"),e._v(" 1小时 = 60 * 60 "),t("br"),e._v(" 5小时 = 5 * 60 * 60 "),t("br"),e._v(" 1天 = 24 * 60 * 60 "),t("br")]),t("i",{staticClass:"el-icon-question"})]),t("el-form-item",{attrs:{label:"采集策略(单位：秒)"}},[t("el-select",{staticStyle:{width:"95%"},attrs:{"allow-create":"","default-first-option":"",filterable:"",placeholder:"请选择",size:"mini"},model:{value:e.sizeForm.strategy,callback:function(t){e.$set(e.sizeForm,"strategy",t)},expression:"sizeForm.strategy"}},e._l(e.sizeOption,(function(e){return t("el-option",{key:e.val,attrs:{label:e.label,size:"mini",value:e.val}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"采集轮次"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"","default-first-option":"",filterable:"",placeholder:"请选择生效轮次,例如:1,3,5,8;(可选可自主填写)(注意:逗号为英文逗号)",size:"mini"},model:{value:e.sizeForm.round,callback:function(t){e.$set(e.sizeForm,"round",t)},expression:"sizeForm.round"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"采集顺序"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{label:"采集顺序",min:0},model:{value:e.sizeForm.order,callback:function(t){e.$set(e.sizeForm,"order",t)},expression:"sizeForm.order"}})],1)],1)],1),t("el-col",{attrs:{gutter:24}},[t("el-col",{attrs:{span:8}},[t("el-tooltip",{staticStyle:{float:"left"},attrs:{effect:"dark",placement:"right-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 1. 采集值 设备上行数据经采集公式计算后显示 。 "),t("br"),e._v(" 公式中的%s为占位符，是固定字段。 "),t("br"),e._v(" 如： "),t("br"),e._v(" 加：%s+10 "),t("br"),e._v(" 减：%s-10 "),t("br"),e._v(" 乘：%s*10 "),t("br"),e._v(" 除：%s/10 "),t("br"),e._v(" 余数：%s%10 "),t("br"),e._v(" 2. 计算值 添加变量按钮, "),t("br"),e._v(" 复制对应的标识符 "),t("br"),e._v(" 例：pressure_out "),t("br"),e._v(" 加：pressure_out+10 "),t("br"),e._v(" 减：pressure_out-10 "),t("br"),e._v(" 乘：pressure_out*10 "),t("br"),e._v(" 除：pressure_out/10 "),t("br"),e._v(" 余数：pressure_out%10 "),t("br"),e._v(" 3. 复杂值 ：关闭本弹窗后使用物解析处理 "),t("br")]),t("i",{staticClass:"el-icon-question"})]),t("el-form-item",{attrs:{label:"采集公式"}},[t("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"%s",rows:1,type:"textarea"},model:{value:e.sizeForm.collection,callback:function(t){e.$set(e.sizeForm,"collection",t)},expression:"sizeForm.collection"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-tooltip",{attrs:{effect:"dark",placement:"right-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 1. 采集值: 主动向设备写数据经控制公式计算后下发 。 "),t("br"),e._v(" 公式中的%s为占位符，是固定字段。 "),t("br"),e._v(" 如： "),t("br"),e._v(" 加：%s+10 "),t("br"),e._v(" 减：%s-10 "),t("br"),e._v(" 乘：%s*10 "),t("br"),e._v(" 除：%s/10 "),t("br"),e._v(" 余数：%s%10 "),t("br"),e._v(" 2. 计算值: 点击添加变量按钮, "),t("br"),e._v(" 复制对应的标识符 "),t("br"),e._v(" 例：pressure_out "),t("br"),e._v(" 加：pressure_out+10 "),t("br"),e._v(" 减：pressure_out-10 "),t("br"),e._v(" 乘：pressure_out*10 "),t("br"),e._v(" 除：pressure_out/10 "),t("br"),e._v(" 余数：pressure_out%10 "),t("br"),e._v(" 3. 复杂值 ：关闭本弹窗后使用物解析处理 "),t("br")]),t("i",{staticClass:"el-icon-question",staticStyle:{float:"left"}})]),t("el-form-item",{attrs:{label:"控制公式"}},[t("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"%s",rows:1,type:"textarea"},model:{value:e.sizeForm.control,callback:function(t){e.$set(e.sizeForm,"control",t)},expression:"sizeForm.control"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"协议类型"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.resource.disabled,placeholder:"请选择"},on:{change:e.changeResource},model:{value:e.resource.value,callback:function(t){e.$set(e.resource,"value",t)},expression:"resource.value"}},e._l(e.resource.data,(function(a){return t("el-option",{key:a.cType,attrs:{label:a.cType,value:a.cType}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.title.zh))]),t("el-link",{staticStyle:{float:"right","font-size":"13px",color:"#8492a6"}},[e._v(" 协议:"+e._s(a.app)+" ")])],1)})),1)],1)],1)],1)],2):e._e(),e.resource.value?t("el-collapse-item",{key:e.upKey,attrs:{name:"4"}},[t("template",{slot:"title"},[e._v("数据来源")]),e._l(e.resource.data,(function(a,r){return t("el-row",{key:r,attrs:{gutter:24}},e._l(e.resource.data[r].arr,(function(r,o){return t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.resource.value==a.cType,expression:"resource.value == k.cType"}],key:e.resource.value+o+e.upKey,attrs:{lg:r.allowCreate?24:12,md:r.allowCreate?24:12,sm:r.allowCreate?24:12,xl:r.allowCreate?24:6,xs:r.allowCreate?24:12}},["ico"!=r.showname?t("el-form-item",{key:r.title.zh+e.upKey,attrs:{id:"allowCreate",label:r.title.zh,"label-width":(r.allowCreate,"100px"),prop:r.showname}},[t("el-tooltip",{attrs:{effect:"dark",placement:"right-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(r.description.zh)+" ")]),t("i",{staticClass:"el-icon-question",staticStyle:{float:"left"}})]),"enum"==r.type||"enum"==r._types?t("el-select",{staticStyle:{width:"98%"},model:{value:e.resource.addchannel[r.showname],callback:function(t){e.$set(e.resource.addchannel,r.showname,t)},expression:"resource.addchannel[item.showname]"}},e._l(r.enum,(function(e,a){return t("el-option",{key:r.enum[a].value,attrs:{label:r.enum[a].label,value:r.enum[a].value}})})),1):r.allowCreate?t("div",[t("el-button",{on:{click:function(t){return e.createColumn(r)}}},[e._v("新增")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dybaneucForms}},[e._l(e.colCum.prop,(function(a,o){return t("el-table-column",{key:o,attrs:{align:"center",label:e.colCum.prop[o],prop:e.colCum.label[o],"show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:"input"==e.getFromType(r,a),expression:"getFromType(item, j) == 'input'"}],attrs:{placeholder:"placeholder"},model:{value:o.row[a],callback:function(t){e.$set(o.row,a,t)},expression:"scope.row[j]"}}),t("el-select",{directives:[{name:"show",rawName:"v-show",value:"select"==e.getFromType(r,a),expression:"getFromType(item, j) == 'select'"}],attrs:{placeholder:"placeholder"},model:{value:o.row[a],callback:function(t){e.$set(o.row,a,t)},expression:"scope.row[j]"}},e._l(e.getFromType(r,a,"select"),(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}],null,!0)})})),t("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"220px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(t){return e.dybaneucDleform(a.$index,e.dybaneucForms)}}},[e._v(" 删除 ")])]}}],null,!0)})],2)],1):"string"!=r.type||"enum"===r._types||r.dis?"integer"==r.type?t("el-input",{key:r.title.zh+e.upKey,staticStyle:{width:"98%"},model:{value:e.resource.addchannel[r.showname],callback:function(t){e.$set(e.resource.addchannel,r.showname,e._n(t))},expression:"resource.addchannel[item.showname]"}}):"boolean"==r.type?t("el-select",{key:r.title.zh+e.upKey,staticClass:"notauto",staticStyle:{width:"98%"},attrs:{readonly:""},model:{value:e.resource.addchannel[r.showname],callback:function(t){e.$set(e.resource.addchannel,r.showname,t)},expression:"resource.addchannel[item.showname]"}},[t("el-option",{attrs:{label:"是",value:!0}}),t("el-option",{attrs:{label:"否",value:!1}})],1):e._e():t("el-input",{key:r.title.zh+e.upKey,staticStyle:{width:"98%"},model:{value:e.resource.addchannel[r.showname],callback:function(t){e.$set(e.resource.addchannel,r.showname,t)},expression:"resource.addchannel[item.showname]"}})],1):e._e()],1)})),1)}))],2):e._e()],1)],1)]),t("div",{staticStyle:{"margin-top":"26px","text-align":"center"}},[t("el-button",{on:{click:e.wmxhandleClose}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitForm("sizeForm")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1)},o=[],l=a("22f9"),i=a("5880"),s=a("62b6"),n=a("7212"),c=Object.defineProperty,d=Object.defineProperties,p=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,h=(e,t,a)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,f=(e,t)=>{for(var a in t||(t={}))m.call(t,a)&&h(e,a,t[a]);if(u)for(var a of u(t))b.call(t,a)&&h(e,a,t[a]);return e},g=(e,t)=>d(e,p(t)),y=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())}),v={name:"Wmxdetail",components:{},props:{moduletype:{type:String,required:!1,default:"properties"}},data(){let e=/^[a-z][a-z0-9_]*$/,t=(t,a,r)=>{if(!e.test(a))return r(new Error("请以小写字母开头，只能输入小写字母,数字,_"));r()};var a=(e,t,a)=>{""===t?a(new Error("最小值不能为空")):""!==this.sizeForm.endnumber&&(t>=this.sizeForm.endnumber?a(new Error("最小值小于最大值")):a())},r=(e,t,a)=>{""===t?a(new Error("最大值不能为空")):""!==this.sizeForm.startnumber&&(t<=this.sizeForm.startnumber?a(new Error("最大值必须大于最小值")):a())},o=(e,t,a)=>{t<0?a(new Error("步长大于0")):t>=this.sizeForm.endnumber-this.sizeForm.startnumber?a(new Error("步长必须小于最大值和最小值的差值")):a()};return{viewData:[],colCum:{},dybaneucForms:[],tableName:"",tableTitle:{},upKey:moment.now(),createModal:{dialog:!1,data:""},resource:{value:"",data:[],arrlist:[],addchannel:{},disabled:!1,changeData:{}},value:"",inputParams:{},Type:"addThing",dataList:[{}],dataType:[],options:[{value:"all",label:"全部"},{value:"first",label:"第一轮"},{value:"last",label:"最后一轮"}],wmxData:[],allunit:[],sizerule:{step:[{required:!0,trigger:"blur",validator:o}],string:[{required:!0,trigger:"blur",message:"请输入数据长度"},{type:"number",message:"数据长度必须为数字"}],startnumber:[{validator:a,required:!0,trigger:"blur"}],endnumber:[{validator:r,required:!0,trigger:"blur"}],resource:[{required:!0,message:"请选择功能类型",trigger:"change"}],true:[{required:!0,message:"请输入属性值",trigger:"blur"}],false:[{required:!0,message:"请输入属性值",trigger:"blur"}],name:[{required:!0,message:"请输入属性名称",trigger:"blur"}],identifier:[{required:!0,message:"请输入标识符",trigger:"blur"},{validator:t}],dis:[{required:!0,message:"请输入数据标识",trigger:"blur"}],type:[{required:!0,message:"请选择数据类型",trigger:"change"}],attribute:[{required:!0,message:"请输入属性",trigger:"blur"}],attributevalue:[{required:!0,message:"请输入属性值",trigger:"blur"}],isread:[{required:!0,message:"请选择读写类型",trigger:"change"}],isstorage:[{required:!0,message:"请选择是否存储",trigger:"change"}],isshow:[{required:!0,message:"请选择是否展示",trigger:"change"}]},collapseName:["1","2","3","4"],wmxstart:1,wmxPageSize:10,sizeOption:[{label:"20",val:"20"},{label:"不采集(计算值)",val:"计算值"},{label:"不采集(主动上报)",val:"主动上报"}],countsizeOption:[{label:"10",val:"10"},{label:"20",val:"20"},{label:"30",val:"30"}]}},computed:g(f({},Object(i["mapGetters"])({sizeForm:"konva/sizeForm",protocol:"product/protocol"})),{showNewItem(){return!(!this.sizeForm||"modbus"!=this.sizeForm.protocol)}}),watch:{"resource.arrlist":{deep:!0,immediate:!0,handler(e){this.upKey++}}},created(){return y(this,null,(function*(){yield this.queryProtocol(),yield this.queryResource(),this.$route.query.id&&(yield this.queryViewInfo())}))},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){this.Type="addThing"},activated(){},methods:g(f({queryProtocol(){return y(this,null,(function*(){const e=yield Object(s["getProtocol"])();this.setProtocol(e)}))},handleClick(e){console.log(e)},createColumn(e){this.dybaneucForms.unshift({}),console.log(e)},getFromType(e,t,a){var r,o="input";for(var l in e.table)if(e.table[l].title.zh==t)return o=(null==(r=e.table[l].enum)?void 0:r.length)?"select":"input","select"===a?e.table[l].enum:o},dybaneucDleform(e,t){this.$baseConfirm(this.$translateTitle("Maintenance.Are you sure you want to delete the current item"),null,()=>y(this,null,(function*(){t.splice(e,1),this.$baseMessage(this.$translateTitle("user.successfully deleted"),"success","dgiot-hey-message-success")}))),console.log(e,t)},dynamicTable(e,t,a){console.log(t,"dynamicTabledynamicTabledynamicTabledynamicTabledynamicTabledynamicTabledynamicTabledynamicTabledynamicTabledynamicTable"),this.tableName=e.showname;var r=[];this.colCum={label:[],prop:[]},dgiotlogger.error(1291,e,a);const{table:o}=e;var l={},i={};for(let s in o)l[o[s].title.zh]=o[s].default.label||o[s].default,this.colCum.prop.push(o[s].title.zh),this.colCum.label.push(o[s].key),i[o[s].title.zh]=o[s].key,i[o[s].key]=o[s].zh,l[o[s].key]=o[s].default.label||o[s].default,this.tableTitle=i,console.error(1298,o[s],s,l),console.error(1304,s,o[s],this.tableTitle);return"回显"===t?(console.error(1307,"回显",i),r=[],a.forEach((e,t)=>{for(var a in l={},i){var o=i[a];l[a]=e[o],console.error(e[o],a,e,1312)}r.push(l)})):r.push(l),dgiotlogger.error("1320",r,this.colCum,this.tableTitle),this.dybaneucForms=r,this.dybaneucForms},showCreate(e){return y(this,null,(function*(){this.createModal={dialog:!0,data:e}}))},dictParse(e,t){const a=[];return e.map(e=>{var r={};for(let a in e)console.log(a,e[a],t[a]),r[t[a]]=e[a];a.push(r)}),dgiotlogger.error(1328,a),a},changeResource(e){return y(this,null,(function*(){console.error("changeResource",e),this.resource.changeData={},yield this.resource.data.forEach(t=>{if(t.cType==e){for(let e in t.params)console.log(t.params[e]);this.resource.changeData=t,this.resource.addchannel=t.obj,this.resource.arrlist=_.sortBy(t.arr,(function(e){return e.order})),console.log(this.resource.arrlist,"arrlist"),this.resource.data=_.sortBy(this.protocol,(function(e){return e.order})),this.resource.arrlist.forEach(e=>{console.error(e),this.resource.arrlist=_.sortBy(t.arr,(function(e){return e.order})),console.log(this.resource.arrlist,"arrlist"),this.resource.data=_.sortBy(this.protocol,(function(e){return e.order})),e.allowCreate&&this.dynamicTable(e)})}})}))},queryViewInfo(){return y(this,null,(function*(){const{profile:e={}}=yield Object(n["getProduct"])(this.$route.query.id);this.viewData=e}))},queryResource(){return y(this,null,(function*(){const{dataType:e=[],dataNnit:t=[]}=yield Object(l["getDlinkJson"])("ThingUnit");this.allunit=t,this.dataType=e,this.resource.data=_.sortBy(this.protocol,(function(e){return e.order})),console.error(this.resource.data,"data"),this.resource.data.forEach((e,t)=>{for(var a in this.resource.data[t].arr=[],this.resource.data[t].obj={},this.resource.data[t].params){for(var r in this.resource.data[t].params[a].showname=a,this.resource.data[t].params[a])"enum"===r&&(this.resource.data[t].params[a]._types="enum",dgiotlogger.info("设置类型为下拉",r,this.resource.data[t].params[a]));this.resource.data[t].arr.push(e.params[a]),console.log(this.resource.data[t].arr)}this.resource.data[t].arr=_.sortBy(this.resource.data[t].arr,(function(e){return e.order})),console.info(this.resource.data[t].arr,"result order"),this.resource.data[t].arr.map(e=>{var a;console.log(e),this.resource.data[t].obj[e.showname]=(null==(a=null==e?void 0:e.default)?void 0:a.value)?e.default.value:e.default?e.default:"",e.enum&&dgiotlogger.info(e.type,e.enum,e,"set select")}),console.log(this.resource.data[t].arr),console.info("this.resource.data",this.resource.data)}),console.info("this.resource.data",this.resource.data)}))},changeGroup(e){console.log(e,this.sizeForm.type)},fileInfo(e){dgiotlog.log("========================",e),this.sizeForm.ico=e.path,console.log("========================path",this.sizeForm.ico)},uploadCkick(e){this.upNodeType=e,this.$refs["uploadFinish"].$refs.uploader.dispatchEvent(new MouseEvent("click")),this.inputParams={file:"",scene:"app",path:"devicething/ico/",filename:""}},files(e,t){this.inputParams.filename=`${this.$route.query.id}.${this.sizeForm.identifier?this.sizeForm.identifier:moment().format("x")}.${t}`,this.inputParams.file=e}},Object(i["mapMutations"])({setSizeForm:"konva/setSizeForm",setProtocol:"product/setProtocol"})),{changeThing(e){this.Type="showThing",console.error(e);let t=this;dgiotlog.log("this.sizeFormaaa",t.$refs.sizeForm.model.name),dgiotlog.log("item",e);var a={},r=[];if(e.dataType.das.forEach(e=>{r.push({addr:e})}),-1!=["float","double","int","long"].indexOf(e.dataType.type))a={name:e.name,devicetype:e.devicetype,ico:e.ico,type:e.dataType.type,daslist:r,endnumber:t.$objGet(e,"dataType.specs.max"),startnumber:t.$objGet(e,"dataType.specs.min"),step:t.$objGet(e,"dataType.specs.step"),unit:t.$objGet(e,"dataType.specs.unit"),precision:this.$objGet(e,"dataType.specs.precision"),round:t.$objGet(e,"dataForm.round"),dinumber:t.$objGet(e,"dataForm.data"),rate:t.$objGet(e,"dataForm.rate"),offset:t.$objGet(e,"dataForm.offset"),order:t.$objGet(e,"dataForm.order"),protocol:t.$objGet(e,"dataForm.protocol"),operatetype:t.$objGet(e,"dataForm.operatetype"),originaltype:t.$objGet(e,"dataForm.originaltype"),slaveid:t.$objGet(e,"dataForm.slaveid"),afn:t.$objGet(e,"dataForm.afn"),da:t.$objGet(e,"dataForm.da"),dt:t.$objGet(e,"dataForm.dt"),bytelen:t.$objGet(e,"dataForm.bytelen"),byteType:t.$objGet(e,"dataForm.byteType"),iscount:t.$objGet(e,"dataForm.iscount"),countstrategy:t.$objGet(e,"dataForm.countstrategy"),countround:t.$objGet(e,"dataForm.countround"),countcollection:t.$objGet(e,"dataForm.countcollection"),collection:"",control:"",strategy:"",required:!0,isread:e.accessMode,isshow:e.isshow,isaccumulate:e.isaccumulate,isstorage:e.isstorage,identifier:e.identifier},e.dataForm&&(a.collection=e.dataForm.collection,a.control=e.dataForm.control,a.strategy=e.dataForm.strategy);else if("image"==e.dataType.type)a={isstorage:e.isstorage,name:e.name,devicetype:e.devicetype,ico:e.ico,type:e.dataType.type,daslist:r,imagevalue:e.dataType.imagevalue,true:e.dataType.specs[1],false:e.dataType.specs[0],startnumber:t.$objGet(e,"dataType.specs.min"),step:t.$objGet(e,"dataType.specs.step"),unit:t.$objGet(e,"dataType.specs.unit"),round:t.$objGet(e,"dataForm.round"),dinumber:t.$objGet(e,"dataForm.data"),rate:t.$objGet(e,"dataForm.rate"),offset:t.$objGet(e,"dataForm.offset"),order:t.$objGet(e,"dataForm.order"),protocol:t.$objGet(e,"dataForm.protocol"),operatetype:t.$objGet(e,"dataForm.operatetype"),originaltype:t.$objGet(e,"dataForm.originaltype"),slaveid:t.$objGet(e,"dataForm.slaveid"),afn:t.$objGet(e,"dataForm.afn"),da:t.$objGet(e,"dataForm.da"),dt:t.$objGet(e,"dataForm.dt"),bytelen:t.$objGet(e,"dataForm.bytelen"),byteType:t.$objGet(e,"dataForm.byteType"),iscount:t.$objGet(e,"dataForm.iscount"),countstrategy:t.$objGet(e,"dataForm.countstrategy"),countround:t.$objGet(e,"dataForm.countround"),countcollection:t.$objGet(e,"dataForm.countcollection"),required:!1,isread:e.accessMode,isshow:e.isshow,isaccumulate:e.isaccumulate,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy};else if("bool"==e.dataType.type)a={isstorage:e.isstorage,name:e.name,devicetype:e.devicetype,ico:e.ico,type:e.dataType.type,daslist:r,true:e.dataType.specs[1],false:e.dataType.specs[0],startnumber:t.$objGet(e,"dataType.specs.min"),step:t.$objGet(e,"dataType.specs.step"),unit:t.$objGet(e,"dataType.specs.unit"),round:t.$objGet(e,"dataForm.round"),dinumber:t.$objGet(e,"dataForm.data"),rate:t.$objGet(e,"dataForm.rate"),offset:t.$objGet(e,"dataForm.offset"),order:t.$objGet(e,"dataForm.order"),protocol:t.$objGet(e,"dataForm.protocol"),operatetype:t.$objGet(e,"dataForm.operatetype"),originaltype:t.$objGet(e,"dataForm.originaltype"),slaveid:t.$objGet(e,"dataForm.slaveid"),afn:t.$objGet(e,"dataForm.afn"),da:t.$objGet(e,"dataForm.da"),dt:t.$objGet(e,"dataForm.dt"),bytelen:t.$objGet(e,"dataForm.bytelen"),byteType:t.$objGet(e,"dataForm.byteType"),iscount:t.$objGet(e,"dataForm.iscount"),countstrategy:t.$objGet(e,"dataForm.countstrategy"),countround:t.$objGet(e,"dataForm.countround"),countcollection:t.$objGet(e,"dataForm.countcollection"),required:!1,isread:e.accessMode,isshow:e.isshow,isaccumulate:e.isaccumulate,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy};else if("enum"==e.dataType.type){var o=[];for(const t in e.dataType.specs)o.push({attribute:t,attributevalue:e.dataType.specs[t]});a={isstorage:e.isstorage,name:e.name,devicetype:e.devicetype,ico:e.ico,type:e.dataType.type,daslist:r,specs:e.dataType.specs,struct:o,startnumber:t.$objGet(e,"dataType.specs.min"),step:t.$objGet(e,"dataType.specs.step"),unit:t.$objGet(e,"dataType.specs.unit"),round:t.$objGet(e,"dataForm.round"),dinumber:t.$objGet(e,"dataForm.data"),rate:t.$objGet(e,"dataForm.rate"),offset:t.$objGet(e,"dataForm.offset"),order:t.$objGet(e,"dataForm.order"),protocol:t.$objGet(e,"dataForm.protocol"),operatetype:t.$objGet(e,"dataForm.operatetype"),originaltype:t.$objGet(e,"dataForm.originaltype"),slaveid:t.$objGet(e,"dataForm.slaveid"),afn:t.$objGet(e,"dataForm.afn"),da:t.$objGet(e,"dataForm.da"),dt:t.$objGet(e,"dataForm.dt"),bytelen:t.$objGet(e,"dataForm.bytelen"),byteType:t.$objGet(e,"dataForm.byteType"),iscount:t.$objGet(e,"dataForm.iscount"),countstrategy:t.$objGet(e,"dataForm.countstrategy"),countround:t.$objGet(e,"dataForm.countround"),countcollection:t.$objGet(e,"dataForm.countcollection"),required:!0,isread:e.accessMode,isshow:e.isshow,isaccumulate:e.isaccumulate,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy}}else"struct"==e.dataType.type?a={isstorage:e.isstorage,name:e.name,devicetype:e.devicetype,ico:e.ico,type:e.dataType.type,daslist:r,struct:e.dataType.specs,startnumber:t.$objGet(e,"dataType.specs.min"),step:t.$objGet(e,"dataType.specs.step"),unit:t.$objGet(e,"dataType.specs.unit"),round:t.$objGet(e,"dataForm.round"),dinumber:t.$objGet(e,"dataForm.data"),rate:t.$objGet(e,"dataForm.rate"),offset:t.$objGet(e,"dataForm.offset"),order:t.$objGet(e,"dataForm.order"),protocol:t.$objGet(e,"dataForm.protocol"),operatetype:t.$objGet(e,"dataForm.operatetype"),originaltype:t.$objGet(e,"dataForm.originaltype"),slaveid:t.$objGet(e,"dataForm.slaveid"),afn:t.$objGet(e,"dataForm.afn"),da:t.$objGet(e,"dataForm.da"),dt:t.$objGet(e,"dataForm.dt"),bytelen:t.$objGet(e,"dataForm.bytelen"),byteType:t.$objGet(e,"dataForm.byteType"),iscount:t.$objGet(e,"dataForm.iscount"),countstrategy:t.$objGet(e,"dataForm.countstrategy"),countround:t.$objGet(e,"dataForm.countround"),countcollection:t.$objGet(e,"dataForm.countcollection"),required:!0,isread:e.accessMode,isshow:e.isshow,isaccumulate:e.isaccumulate,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,identifier:void 0==e.dataForm?"":e.identifier,strategy:void 0==e.dataForm?"":e.dataForm.strategy}:"text"==e.dataType.type?a={isstorage:e.isstorage,name:e.name,devicetype:e.devicetype,ico:e.ico,type:e.dataType.type,daslist:r,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,string:e.dataType.size,startnumber:this.$objGet(e,"dataType.specs.min"),step:t.$objGet(e,"dataType.specs.step"),unit:t.$objGet(e,"dataType.specs.unit"),round:t.$objGet(e,"dataForm.round"),dinumber:t.$objGet(e,"dataForm.data"),rate:t.$objGet(e,"dataForm.rate"),offset:t.$objGet(e,"dataForm.offset"),order:t.$objGet(e,"dataForm.order"),protocol:t.$objGet(e,"dataForm.protocol"),operatetype:t.$objGet(e,"dataForm.operatetype"),originaltype:t.$objGet(e,"dataForm.originaltype"),slaveid:t.$objGet(e,"dataForm.slaveid"),afn:t.$objGet(e,"dataForm.afn"),da:t.$objGet(e,"dataForm.da"),dt:t.$objGet(e,"dataForm.dt"),bytelen:t.$objGet(e,"dataForm.bytelen"),byteType:t.$objGet(e,"dataForm.byteType"),iscount:t.$objGet(e,"dataForm.iscount"),countstrategy:t.$objGet(e,"dataForm.countstrategy"),countround:t.$objGet(e,"dataForm.countround"),countcollection:t.$objGet(e,"dataForm.countcollection"),required:!0,isread:e.accessMode,isshow:e.isshow,isaccumulate:e.isaccumulate,identifier:e.identifier,strategy:void 0==e.dataForm?"":e.dataForm.strategy}:"date"==e.dataType.type?a={isstorage:e.isstorage,name:e.name,devicetype:e.devicetype,ico:e.ico,type:e.dataType.type,daslist:r,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,startnumber:t.$objGet(e,"dataType.specs.min"),step:t.$objGet(e,"dataType.specs.step"),unit:t.$objGet(e,"dataType.specs.unit"),round:t.$objGet(e,"dataForm.round"),dinumber:t.$objGet(e,"dataForm.data"),rate:t.$objGet(e,"dataForm.rate"),offset:t.$objGet(e,"dataForm.offset"),order:t.$objGet(e,"dataForm.order"),protocol:t.$objGet(e,"dataForm.protocol"),operatetype:t.$objGet(e,"dataForm.operatetype"),originaltype:t.$objGet(e,"dataForm.originaltype"),slaveid:t.$objGet(e,"dataForm.slaveid"),afn:t.$objGet(e,"dataForm.afn"),da:t.$objGet(e,"dataForm.da"),dt:t.$objGet(e,"dataForm.dt"),bytelen:t.$objGet(e,"dataForm.bytelen"),byteType:t.$objGet(e,"dataForm.byteType"),iscount:t.$objGet(e,"dataForm.iscount"),countstrategy:t.$objGet(e,"dataForm.countstrategy"),countround:t.$objGet(e,"dataForm.countround"),countcollection:t.$objGet(e,"dataForm.countcollection"),required:!0,isread:e.accessMode,isshow:e.isshow,isaccumulate:e.isaccumulate,identifier:e.identifier}:"file"==e.dataType.type?a={isstorage:e.isstorage,name:e.name,devicetype:e.devicetype,ico:e.ico,type:e.dataType.type,daslist:r,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,startnumber:t.$objGet(e,"dataType.specs.min"),step:t.$objGet(e,"dataType.specs.step"),unit:t.$objGet(e,"dataType.specs.unit"),round:t.$objGet(e,"dataForm.round"),dinumber:t.$objGet(e,"dataForm.data"),rate:t.$objGet(e,"dataForm.rate"),offset:t.$objGet(e,"dataForm.offset"),order:t.$objGet(e,"dataForm.order"),protocol:t.$objGet(e,"dataForm.protocol"),operatetype:t.$objGet(e,"dataForm.operatetype"),originaltype:t.$objGet(e,"dataForm.originaltype"),slaveid:t.$objGet(e,"dataForm.slaveid"),afn:this.$objGet(e,"dataForm.afn"),da:this.$objGet(e,"dataForm.da"),dt:this.$objGet(e,"dataForm.dt"),bytelen:t.$objGet(e,"dataForm.bytelen"),byteType:t.$objGet(e,"dataForm.byteType"),iscount:t.$objGet(e,"dataForm.iscount"),countstrategy:t.$objGet(e,"dataForm.countstrategy"),countround:t.$objGet(e,"dataForm.countround"),countcollection:t.$objGet(e,"dataForm.countcollection"),required:!0,isread:e.accessMode,isshow:e.isshow,isaccumulate:e.isaccumulate,identifier:e.identifier}:"url"==e.dataType.type?a={isstorage:e.isstorage,name:e.name,devicetype:e.devicetype,ico:e.ico,type:e.dataType.type,daslist:r,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,startnumber:t.$objGet(e,"dataType.specs.min"),step:t.$objGet(e,"dataType.specs.step"),unit:t.$objGet(e,"dataType.specs.unit"),round:t.$objGet(e,"dataForm.round"),dinumber:t.$objGet(e,"dataForm.data"),rate:t.$objGet(e,"dataForm.rate"),offset:t.$objGet(e,"dataForm.offset"),order:t.$objGet(e,"dataForm.order"),protocol:t.$objGet(e,"dataForm.protocol"),operatetype:t.$objGet(e,"dataForm.operatetype"),originaltype:t.$objGet(e,"dataForm.originaltype"),slaveid:t.$objGet(e,"dataForm.slaveid"),afn:t.$objGet(e,"dataForm.afn"),da:t.$objGet(e,"dataForm.da"),dt:t.$objGet(e,"dataForm.dt"),bytelen:t.$objGet(e,"dataForm.bytelen"),byteType:t.$objGet(e,"dataForm.byteType"),iscount:t.$objGet(e,"dataForm.iscount"),countstrategy:t.$objGet(e,"dataForm.countstrategy"),countround:t.$objGet(e,"dataForm.countround"),countcollection:t.$objGet(e,"dataForm.countcollection"),required:!0,isread:e.accessMode,isaccumulate:e.isaccumulate,isshow:e.isshow,identifier:e.identifier}:"geopoint"==e.dataType.type&&(a={isstorage:e.isstorage,name:e.name,devicetype:e.devicetype,ico:e.ico,type:e.dataType.type,daslist:r,gpstype:e.dataType.gpstype,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,startnumber:t.$objGet(e,"dataType.specs.min"),step:t.$objGet(e,"dataType.specs.step"),unit:t.$objGet(e,"dataType.specs.unit"),round:t.$objGet(e,"dataForm.round"),dinumber:t.$objGet(e,"dataForm.data"),rate:t.$objGet(e,"dataForm.rate"),offset:t.$objGet(e,"dataForm.offset"),order:t.$objGet(e,"dataForm.order"),protocol:t.$objGet(e,"dataForm.protocol"),operatetype:t.$objGet(e,"dataForm.operatetype"),originaltype:t.$objGet(e,"dataForm.originaltype"),slaveid:t.$objGet(e,"dataForm.slaveid"),afn:t.$objGet(e,"dataForm.afn"),da:t.$objGet(e,"dataForm.da"),dt:t.$objGet(e,"dataForm.dt"),bytelen:t.$objGet(e,"dataForm.bytelen"),byteType:t.$objGet(e,"dataForm.byteType"),iscount:t.$objGet(e,"dataForm.iscount"),countstrategy:t.$objGet(e,"dataForm.countstrategy"),countround:t.$objGet(e,"dataForm.countround"),countcollection:t.$objGet(e,"dataForm.countcollection"),required:!0,isread:e.accessMode,isaccumulate:e.isaccumulate,isshow:e.isshow,identifier:e.identifier});a.editdatatype=!0,a.profile=t.sizeForm.profile,a.nobound=t.sizeForm.nobound,a.dis=e.dataForm.address,a.isdis=t.sizeForm.isdis,console.log("obj 1944",a),t.setSizeForm(a),this.$nextTick(()=>y(this,null,(function*(){yield this.queryResource(),this.resource.value=e.dataForm.protocol,this.resource.disabled=!!e.dataForm.protocol.length,console.log(e.dataSource,"item.dataSource"),this.resource.arrlist="showThing"==this.Type?e.dataSource:_.sortBy(e.dataSource,(function(e){return e.order})),console.log(this.resource.arrlist,"arrlist"),this.$nextTick(()=>{this.resource.data.forEach((t,a)=>{if(this.resource.value===t.cType){for(var r in console.info(t,"success cType"),t.arr.forEach(t=>{t.allowCreate&&this.dynamicTable(t,"回显",e.dataSource[t.showname])}),console.info(e.dataSource,"item.dataSource"),e.dataSource)for(var o in t.obj)r===o&&(t.obj[r]=e.dataSource[o]);console.info(t.obj,"set resource.obj"),this.resource.addchannel=t.obj}this.resource.changeData=e.dataSource,t.cType==e.dataForm.protocol&&console.log(t,"success")})}),console.log("refs sizeForm",this)})))},wmxCurrentChange(e){console.log(this.wmxData),this.wmxstart=e},wmxSizeChange(e){console.log(this.wmxData),this.wmxstart=1,this.wmxPageSize=e},removeDomain(e){this.$emit("removeDomain",e)},addDomain(){this.$emit("addDomain")},addDas(){this.$emit("addDas")},removeDas(e){this.$emit("removeDas",e)},wmxhandleClose(){this.$emit("wmxhandleClose")},changeValue(e){this.$refs[e].validateField("startnumber",e=>{if(e)return!1})},submitForm(e){console.log(this.$refs.sizeForm,this.sizeForm);const t=this.dictParse(this.dybaneucForms,this.tableTitle);console.log(t),this.$refs[e].validate(e=>{if(!e)return dgiotlog.log(e,"error submit!!"),!1;var a=this.sizeForm,r=[];a.daslist.map(e=>{var t=e["addr"];r.push(t)});var o={name:a.name,devicetype:a.devicetype,dataForm:{round:a.round,data:a.dinumber,address:a.dis,rate:a.rate,offset:a.offset,order:a.order,protocol:a.protocol,afn:a.afn,da:a.da,dt:a.dt,bytelen:a.bytelen,byteType:a.byteType,operatetype:a.operatetype,originaltype:a.originaltype,slaveid:a.slaveid,collection:a.collection,control:a.control,strategy:a.strategy,iscount:a.iscount,countstrategy:a.countstrategy,countround:a.countround,countcollection:a.countcollection},ico:a.ico,required:!0,accessMode:a.isread,isshow:a.isshow,isstorage:a.isstorage,isaccumulate:a.isaccumulate,identifier:a.identifier};if("float"==a.type||"double"==a.type||"int"==a.type||"long"==a.type){var l={dataType:{type:a.type.toLowerCase(),specs:{max:a.endnumber,min:a.startnumber,step:a.step,precision:Number(a.precision),unit:""==a.unit?"":a.unit},das:r}};Object.assign(o,l)}else if("image"==a.type){l={dataType:{type:a.type.toLowerCase(),imagevalue:a.imagevalue,specs:{},das:r}};Object.assign(o,l)}else if("bool"==a.type){l={dataType:{type:a.type.toLowerCase(),specs:{0:a.false,1:a.true},das:r}};Object.assign(o,l)}else if("enum"==a.type){var i={};a.struct.map(e=>{var t=e["attribute"];i[t]=e["attributevalue"]});l={dataType:{type:a.type.toLowerCase(),specs:i,das:r}};Object.assign(o,l)}else if("struct"==a.type){l={dataType:{type:a.type.toLowerCase(),specs:a.struct,das:r}};Object.assign(o,l)}else if("string"==a.type){l={dataType:{type:a.type.toLowerCase(),size:a.string,das:r}};Object.assign(o,l)}else if("text"==a.type){l={dataType:{type:a.type.toLowerCase(),size:a.string,specs:{},das:r}};Object.assign(o,l)}else if("date"==a.type){l={dataType:{type:a.type.toLowerCase(),das:r}};Object.assign(o,l)}else if("geopoint"==a.type){l={dataType:{type:a.type.toLowerCase(),gpstype:a.gpstype,specs:{},das:r}};Object.assign(o,l)}delete o.index,dgiotlog.log(this.resource.changeData,"changeData"),dgiotlog.log("dynamicData",this.resource.addchannel),o.isstorage=a.isstorage,o.dataForm.protocol=this.resource.value,console.log(this.resource);var s=f({},this.resource.addchannel);s[this.tableName]=t,Object.assign(o,{dataSource:s}),o.moduleType=this.moduletype,o.updateAt=moment(new Date).format("x"),o.profile=this.sizeForm.profile,delete o.dataForm.ico,console.log("submitForm obj",o),this.$emit("submitForm",o)})}})},$=v,w=a("2877"),F=Object(w["a"])($,r,o,!1,null,null,null);t["default"]=F.exports},b217:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"task-con-container"},[e._v(e._s(e.productid))])},o=[],l=a("7212"),i=a("1285"),s=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())}),n={name:"Task",props:{productid:{type:String,required:!0},deviceid:{type:String,required:!0}},data(){return{task:{device:{},product:{}}}},mounted(){},methods:{featchData(){return s(this,null,(function*(){this.task.device=yield Object(i["getDevice"])(this.deviceid),this.task.product=yield Object(l["getProduct"])(this.productid)}))}}},c=n,d=a("2877"),p=Object(d["a"])(c,r,o,!1,null,null,null);t["default"]=p.exports},b2e8:function(e,t,a){},b810:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"application dgiot-container"},[t("div",{staticClass:"addApplication"}),t("div",{staticClass:"appcontent",staticStyle:{position:"relative",display:"flex","flex-direction":"column","align-items":"center"}},[e._l(e.appdata,(function(a,r){return t("el-card",{key:r,staticClass:"box-card",staticStyle:{width:"80%","margin-bottom":"10px",border:"1px solid #cccccc"}},[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:4}},[t("div",{staticClass:"grid-content bg-purple"},[t("i",{staticClass:"iconfont icon-yingyong",staticStyle:{color:"#666666"}}),t("p",[e._v(e._s(a.name))])])]),t("el-col",{attrs:{span:16}},[t("div",{staticClass:"grid-content bg-purple"},[t("dl",[t("dt",[e._v(" "+e._s(e.$translateTitle("product.appid"))+" "),t("el-tooltip",{attrs:{content:e.$translateTitle("product.TheonlyapplicationIDintheSDKcallingprocess"),placement:"bottom"}},[t("i",{staticClass:"el-icon-question"})])],1),t("dd",[e._v(e._s(a.objectId))]),t("dt",[e._v(" "+e._s(e.$translateTitle("product.appsecret"))+" "),t("el-tooltip",{attrs:{content:e.$translateTitle("product.aaab"),placement:"bottom"}},[t("i",{staticClass:"el-icon-question"})])],1),a.isshow?t("dd",[e._v(" "+e._s(a.tag.appconfig.secret)+" ")]):e._e(),a.isshow?e._e():t("dd",[a.tag.appconfig.secret?t("i",[e._v(" "+e._s(a.tag.appconfig.secret.substr(0,4)+"********************"+a.tag.appconfig.secret.substr(24))+" "),t("el-button",{staticStyle:{position:"absolute",top:"30px","margin-left":"10px"},attrs:{round:"",size:"samll"},on:{click:function(t){return e.xianshi(a.objectId)}}},[e._v(" "+e._s(e.$translateTitle("product.fullkey"))+" ")])],1):e._e()]),t("dt",[e._v(" "+e._s(e.$translateTitle("task.Applicationname"))+" "),t("i",{staticClass:"el-icon-s-promotion"})]),a.name?t("dd",[e._v(" "+e._s(a.name)+" ")]):t("dd",[e._v("-")])])])]),t("el-col",{attrs:{span:4}},[t("div",{staticClass:"grid-content bg-purple"},[t("p",{staticClass:"editor"},[t("strong",[e._v(" "+e._s(e.$translateTitle("task.Operation")+":")+" ")])]),t("p",{staticClass:"editor"},[t("el-link",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.updateapp(a)}}},[e._v(" "+e._s(e.$translateTitle("developer.Modifyapplication"))+" ")])],1),t("p",{staticClass:"editor"},[t("el-link",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.nodeDeployment(a)}}},[e._v(" "+e._s(e.$translateTitle("developer.Nodedeployment"))+" ")])],1),t("p",{staticClass:"editor"},[t("el-link",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.applicationDeployment(a)}}},[e._v(" "+e._s(e.$translateTitle("developer.Applicationdeployment"))+" ")])],1)])])],1)],1)})),t("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.pagesize,"page-sizes":[1,5,10],total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],2),t("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("developer.addapp"),visible:e.dialogVisible,width:"55%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"block",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":e.$translateTitle("developer.Waitingtoreturn")}},[t("el-form",{ref:"form",attrs:{"label-width":"120px",model:e.form,rules:e.Rule}},[t("el-form-item",{attrs:{label:e.$translateTitle("application.applicationname"),prop:"desc"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:e.$translateTitle("product.enter1")+e.$translateTitle("application.applicationname")},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.tokeneffectivetime")}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:e.$translateTitle("product.enterapptime"),type:"number"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}}),t("span",{staticStyle:{"margin-left":"5px"}},[e._v(" "+e._s(e.$translateTitle("application.seconds"))+" ")])],1),t("el-form-item",{attrs:{label:e.$translateTitle("product.Wordpreviewserver")}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:e.$translateTitle("product.enter1")+e.$translateTitle("product.Wordpreviewserver")},model:{value:e.form.wordpreview,callback:function(t){e.$set(e.form,"wordpreview",t)},expression:"form.wordpreview"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("product.Wordproductionserver")}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:e.$translateTitle("product.enter1")+e.$translateTitle("product.Wordproductionserver")},model:{value:e.form.wordproduct,callback:function(t){e.$set(e.form,"wordproduct",t)},expression:"form.wordproduct"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.fileresources"),prop:"file"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:e.$translateTitle("product.enter1")+e.url},model:{value:e.form.file,callback:function(t){e.$set(e.form,"file",t)},expression:"form.file"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.Configurationresources"),prop:"topo"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"$translateTitle('product.enter1') + url"},model:{value:e.form.topo,callback:function(t){e.$set(e.form,"topo",t)},expression:"form.topo"}})],1),t("el-form-item",{attrs:{label:"Graphql API",prop:"graphql"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"$translateTitle('product.enter1') + url"},model:{value:e.form.graphql,callback:function(t){e.$set(e.form,"graphql",t)},expression:"form.graphql"}})],1),t("el-form-item",{attrs:{label:"Restful API",prop:"rest"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"$translateTitle('product.enter1') + url"},model:{value:e.form.rest,callback:function(t){e.$set(e.form,"rest",t)},expression:"form.rest"}})],1),t("el-form-item",{attrs:{label:"home"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:e.$translateTitle("product.enter1")+e.$translateTitle("developer.path")},model:{value:e.form.home,callback:function(t){e.$set(e.form,"home",t)},expression:"form.home"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.Define("form")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),t("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.modify")+e.$translateTitle("product.Applicationinformation"),visible:e.update,width:"55%"},on:{"update:visible":function(t){e.update=t}}},[t("div",{staticClass:"block"},[t("el-form",{ref:"form1",attrs:{"label-width":"170px",model:e.form1,rules:e.Rule}},[t("el-form-item",{attrs:{label:e.$translateTitle("application.Accesskey")}},[t("el-input",{staticStyle:{width:"80%"},attrs:{readonly:""},model:{value:e.form1.secret,callback:function(t){e.$set(e.form1,"secret",t)},expression:"form1.secret"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-refresh-right"},on:{click:e.handleClickRefresh},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.tokeneffectivetime")}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:e.$translateTitle("product.enterapptime"),type:"number"},model:{value:e.form1.time,callback:function(t){e.$set(e.form1,"time",t)},expression:"form1.time"}}),t("span",{staticStyle:{"margin-left":"5px"}},[e._v(" "+e._s(e.$translateTitle("task.Seconds"))+" ")])],1),t("el-form-item",{attrs:{label:e.$translateTitle("product.Wordpreviewserver")}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:e.$translateTitle("product.enter1")+e.$translateTitle("product.Wordpreviewserver")},model:{value:e.form1.wordpreview,callback:function(t){e.$set(e.form1,"wordpreview",t)},expression:"form1.wordpreview"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("product.Wordproductionserver")}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:e.$translateTitle("product.enter1")+e.$translateTitle("product.Wordproductionserver")},model:{value:e.form1.wordproduct,callback:function(t){e.$set(e.form1,"wordproduct",t)},expression:"form1.wordproduct"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.fileresources"),prop:"file"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"$translateTitle('product.enter1') + url"},model:{value:e.form1.file,callback:function(t){e.$set(e.form1,"file",t)},expression:"form1.file"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.Configurationresources"),prop:"topo"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"$translateTitle('product.enter1') + url"},model:{value:e.form1.topo,callback:function(t){e.$set(e.form1,"topo",t)},expression:"form1.topo"}})],1),t("el-form-item",{attrs:{label:"Graphql API",prop:"graphql"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"$translateTitle('product.enter1') + url"},model:{value:e.form1.graphql,callback:function(t){e.$set(e.form1,"graphql",t)},expression:"form1.graphql"}})],1),t("el-form-item",{attrs:{label:"Restful API",prop:"rest"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"$translateTitle('product.enter1') + url"},model:{value:e.form1.rest,callback:function(t){e.$set(e.form1,"rest",t)},expression:"form1.rest"}})],1),t("el-form-item",{attrs:{label:"home"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:e.$translateTitle("product.enter1")+e.$translateTitle("developer.path")},model:{value:e.form1.home,callback:function(t){e.$set(e.form1,"home",t)},expression:"form1.home"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.update=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.updatedDefine("form1")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1)},o=[],l=a("5da9"),i=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())});const s=a("f43e").Base64;var n={data(){const e=(e,t,a)=>{var r=/^(((ht|f)tps?):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&:/~+#-]*[\w@?^=%&/~+#-])?$/;""===t||null===t?a(new Error("请输入url地址")):r.test(t)?a():a(new Error("请输入正确的url地址"))};return{url:"",total:0,pagesize:10,start:0,update:!1,form1:{name:"",product:"",time:"",file:"",graphql:"",rest:"",topo:"",secret:"",desc:"",home:"",wordpreview:"http://pump.iotn2n.com:8012",wordproduct:"http://pump.iotn2n.com"},dialogVisible:!1,form:{name:"",product:"",time:"18000",file:"http://file.iotn2n.com/shapes/upload",graphql:"http://cad.iotn2n.com:5080/graphql",rest:"http://cad.iotn2n.com:5080/iotapi",topo:"http://shapes.iotn2n.com/",secret:"",home:"D:/shuwa/shuwa_data_center",wordpreview:"http://pump.iotn2n.com:8012",wordproduct:"http://pump.iotn2n.com/"},Rule:{desc:[{required:!0,message:"请输入应用名称",trigger:"blur"},{validator:(e,t,a)=>{0===t.length?a(new Error("应用名称不能为空")):a()}}],file:[{trigger:"blur",validator:e}],topo:[{trigger:"blur",validator:e}],graphql:[{trigger:"blur",validator:e}],rest:[{trigger:"blur",validator:e}]},appdata:[],objectid:"",selectapp:[],arr:[],loading:!1}},created(){},mounted(){this.getAppdetail(this.pagesize,this.start),dgiotlog.log("this.$route.query",this.$route.query),this.$route.query&&this.$route.query.projectName&&(this.dialogVisible=!0,this.form.desc=this.$route.query.projectName)},methods:{Define(e){this.$refs[e].validate(e=>{if(!e)return dgiotlog.log("error submit!!"),!1;this.submit()})},submit(){this.loading=!0;var e=Math.ceil(25*Math.random());s.encode(String.fromCharCode(65+e)+Math.ceil(1e7*Math.random())+Number(new Date));this.form.file,this.form.graphql,this.form.rest,this.form.topo,this.form.home},getAppdetail(e,t){return i(this,null,(function*(){dgiotlog.log(e,t);const a={skip:t,limit:e,keys:"tag,name,desc,count(*)",order:"updatedAt"},{results:r}=yield Object(l["queryRole"])(a);this.appdata=r,this.appdata.map(e=>{var t,a;_.merge(e.tag,{appconfig:{secret:""}}),(null==(a=null==(t=null==e?void 0:e.tag)?void 0:t.appconfig)?void 0:a.secret)?e.isshow=!1:(e.tag.appconfig.secret="暂未配置",e.isshow=!0)}),this.total=r.length,console.log(this.appdata,"appdata")}))},handleClickRefresh(){this.randomSecret()},randomSecret(){const e=Math.ceil(25*Math.random());this.form1.secret=s.encode(String.fromCharCode(65+e)+Math.ceil(1e7*Math.random())+Number(new Date))},handleSizeChange(e){this.pagesize=e,this.getAppdetail(this.pagesize,this.start)},handleCurrentChange(e){this.start=Number(e-1)*Number(this.pagesize),this.getAppdetail(this.pagesize,this.start)},updateapp(e){this.update=!0,this.form1.objectId=e.objectId,this.form1.time=e.tag.appconfig.expires,this.form1.file=e.tag.appconfig.file,this.form1.rest=e.tag.appconfig.rest,this.form1.topo=e.tag.appconfig.topo,this.form1.graphql=e.tag.appconfig.graphql,this.form1.home=e.tag.appconfig.home,this.form1.secret=e.tag.appconfig.secret,this.form1.desc=e.tag.appconfig.desc},updatedDefine(e){this.$refs[e].validate(e=>{if(!e)return dgiotlog.log("error submit!!"),!1;this.updateObj(this.form1.objectId)})},updateObj(e){return i(this,null,(function*(){const t={expires:this.form1.time,file:this.form1.file,graphql:this.form1.graphql,rest:this.form1.rest,topo:this.form1.topo,home:this.form1.home,secret:this.form1.secret,wordpreview:this.form1.home,wordproduct:this.form1.secret};var a={appconfig:{}};a.appconfig=t,yield Object(l["putRole"])(e,a).then(e=>{this.$message({showClose:!0,duration:2e3,type:"success",message:"应用修改成功"}),this.getAppdetail(10,0),this.update=!1}).catch(e=>{this.$message({showClose:!0,duration:2e3,type:"error",message:"应用修改失败"+e.error}),dgiotlog.log(e)})}))},nodeDeployment(e){this.$router.push({path:"/roles/server_control",query:{appid:e.objectId,appsecret:e.tag.appconfig.secret}})},applicationDeployment(e){this.$router.push({path:"/applicationManagement/addApp",query:{actionType:"add",title:"新增应用",appObjectId:e.objectId,desc:e.desc,name:e.name}})},xianshi(e){for(var t,a=0;a<this.appdata.length;a++)this.appdata[a].objectId==e&&(t=this.appdata[a],this.appdata[a].isshow=!0,this.$set(this.appdata,a,t))}}},c=n,d=(a("870b"),a("42d2"),a("2877")),p=Object(d["a"])(c,r,o,!1,null,"579c5f4d",null);t["default"]=p.exports},beb1:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},c937:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard-container"},[t("div",{staticClass:"main"},[t("a-tabs",{staticClass:"tabs",attrs:{"default-active-key":"iframe"}},[t("a-tab-pane",{key:"iframe",attrs:{tab:e.$translateTitle("leftbar.monitor")}},[t("iframe",{directives:[{name:"show",rawName:"v-show",value:""!=e.dashboardrul&&e.dashboardrul,expression:"dashboardrul != '' && dashboardrul"}],staticClass:"iframe",attrs:{id:"iframe",frameborder:"0",height:"700",width:"100%"}})]),t("a-tab-pane",{key:"chart",attrs:{"force-render":"",tab:e.$translateTitle("equipment.chart")}},[t("empty")],1)],1)],1)])},o=[],l=a("43b8"),i={name:"Dashboard",components:{empty:l["default"]},data(){return{currentRole:"admindashboard",isshow:0,childshow:0,form:{date1:"",date2:""},refresh:"",dashboardrul:"http://47.105.106.54:3000/",timerefesh:{val1:"15s",val2:"30s",val3:"60s"},categoryIndex:0}},computed:{},mounted(){this.getdashboard()},methods:{getdashboard(){this.dashboardrul=location.protocol+"//"+location.hostname+":3000";var e=document.getElementById("iframe");e.setAttribute("src",this.dashboardrul)},selectval(e,t){var a=/(refresh=[^&]+)/;this.dashboardrul=this.dashboardrul.replace(a,"refresh="+e),this.categoryIndex=t}}},s=i,n=(a("60e6"),a("2877")),c=Object(n["a"])(s,r,o,!1,null,null,null);t["default"]=c.exports},d069:function(e,t,a){"use strict";a("8735")},d3f5:function(e,t,a){},d815:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ProfileDict"},[e.dictVisible?t("a-drawer",{staticStyle:{"z-index":"999"},attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.titleTempDialog,visible:e.dictVisible,width:"60%"},on:{close:function(t){e.$parent.dictVisible=!e.dictVisible}}},[t("el-form",{ref:"dictTempForm",attrs:{model:e.dictTempForm,rules:e.rules,size:"mini"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"字典模板名称","label-width":e.formLabelWidth,prop:"name"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.dictTempForm.name,callback:function(t){e.$set(e.dictTempForm,"name",t)},expression:"dictTempForm.name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"字典模板类型","label-width":e.formLabelWidth,prop:"cType"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.dictTempForm.cType,callback:function(t){e.$set(e.dictTempForm,"cType",t)},expression:"dictTempForm.cType"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"字典模板状态","label-width":e.formLabelWidth,prop:"enable"}},[t("el-radio",{attrs:{border:"",label:"1"},model:{value:e.dictTempForm.enable,callback:function(t){e.$set(e.dictTempForm,"enable",t)},expression:"dictTempForm.enable"}},[e._v(" 启用 ")]),t("el-radio",{attrs:{border:"",label:"0"},model:{value:e.dictTempForm.enable,callback:function(t){e.$set(e.dictTempForm,"enable",t)},expression:"dictTempForm.enable"}},[e._v(" 禁用 ")])],1)],1)],1),t("el-form-item",{attrs:{label:"字典模板数据","label-width":e.formLabelWidth}},[t("el-tabs",{model:{value:e.elactiveName,callback:function(t){e.elactiveName=t},expression:"elactiveName"}},[t("el-tab-pane",{attrs:{label:"Table",name:"Table"}},[t("el-button",{staticClass:"mt-3",attrs:{icon:"el-icon-plus",size:"small",type:"primary"},nativeOn:{click:function(t){return e.$parent.addRow(e.dictTempForm.params)}}},[e._v(" 新 增 ")]),t("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.dictTempForm.params,height:"300"}},[t("el-table-column",{attrs:{label:"序号",prop:"order"}}),t("el-table-column",{attrs:{label:"标识符",prop:"identifier"}}),t("el-table-column",{attrs:{label:"功能名称",prop:"name"}}),t("el-table-column",{attrs:{label:"数据类型",prop:"type"}}),t("el-table-column",{attrs:{label:"数据地址",prop:"address"}}),t("el-table-column",{attrs:{label:"数据长度",prop:"bytes"}}),t("el-table-column",{attrs:{label:"是否必填",prop:"required"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[a.required?t("span",[e._v("是")]):t("span",[e._v("否")])]}}],null,!1,2053984958)}),t("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function({row:a,$index:r}){return[t("el-button",{attrs:{plain:"",size:"mini",title:"删除",type:"danger"},nativeOn:{click:function(t){return e.$parent.delRow(r,e.dictTempForm.params)}}},[e._v(" 删除 ")]),t("el-button",{attrs:{plain:"",size:"mini",title:"编辑",type:"info"},nativeOn:{click:function(t){return e.$parent.editRow(r,e.dictTempForm.params)}}},[e._v(" 编辑 ")])]}}],null,!1,3276126272)})],1)],1),t("el-tab-pane",{attrs:{label:"Json",name:"Json"}},[t("dgiot-json-editor",{attrs:{lang:"zh",mode:"code"},on:{"has-error":e.$parent.onError},model:{value:e.dictTempForm.params,callback:function(t){e.$set(e.dictTempForm,"params",t)},expression:"dictTempForm.params"}})],1)],1)],1),t("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autosize:{minRows:2,maxRows:4},placeholder:"请输入描述",type:"textarea"},model:{value:e.dictTempForm.description,callback:function(t){e.$set(e.dictTempForm,"description",t)},expression:"dictTempForm.description"}})],1),t("el-form-item",{staticStyle:{"text-align":"center"},attrs:{size:"mini"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$parent.onJsonSave("dictTempForm",e.dictTempForm)}}},[e._v(" 提交 ")]),t("el-button",{on:{click:function(t){e.$parent.dictVisible=!1}}},[e._v("取消")])],1)],1)],1):e._e(),t("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.$parent.closeDict,"close-on-click-modal":!1,title:e.titleDict,top:"5vh",visible:e.editFlag,width:"60%"},on:{"update:visible":function(t){e.editFlag=t},open:function(t){return e.$parent.opendialog("tempparams")}}},[t("el-form",{ref:"tempparams",attrs:{"label-position":"left","label-width":"100px",model:e.tempparams,size:"mini"}},[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"序号",prop:"order"}},[t("el-input",{model:{value:e.tempparams.order,callback:function(t){e.$set(e.tempparams,"order",e._n(t))},expression:"tempparams.order"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.identifier"),prop:"identifier"}},[t("el-input",{model:{value:e.tempparams.identifier,callback:function(t){e.$set(e.tempparams,"identifier",t)},expression:"tempparams.identifier"}})],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.functionname"),prop:"name"}},[t("el-input",{model:{value:e.tempparams.name,callback:function(t){e.$set(e.tempparams,"name",t)},expression:"tempparams.name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.datatype"),prop:"type"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.$parent.tempTypeChange},model:{value:e.tempparams.type,callback:function(t){e.$set(e.tempparams,"type",t)},expression:"tempparams.type"}},[t("el-option",{attrs:{label:e.$translateTitle("product.init"),value:"int"}}),t("el-option",{attrs:{label:e.$translateTitle("product.float"),value:"float"}}),t("el-option",{attrs:{label:e.$translateTitle("product.double"),value:"double"}}),t("el-option",{attrs:{label:e.$translateTitle("product.bool"),value:"bool"}}),t("el-option",{attrs:{label:e.$translateTitle("product.enum"),value:"enum"}}),t("el-option",{attrs:{label:e.$translateTitle("product.string"),value:"string"}}),t("el-option",{attrs:{label:"switch",value:"switch"}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.unit")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$translateTitle("product.unit")},model:{value:e.tempparams.unit,callback:function(t){e.$set(e.tempparams,"unit",t)},expression:"tempparams.unit"}},e._l(e.allunit,(function(e,a){return t("el-option",{key:a,attrs:{label:e.data.Name+"/"+e.data.Symbol,value:e.data.Symbol}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"协议类型"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.tempparams.protocol,callback:function(t){e.$set(e.tempparams,"protocol",t)},expression:"tempparams.protocol"}},e._l(["normal","modbus","mingcheng","xinchuangwei","hex"],(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1)],1)],1),t("el-row",{directives:[{name:"show",rawName:"v-show",value:"modbus"==e.tempparams.protocol,expression:"tempparams.protocol == 'modbus'"}],attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"数据格式"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.tempparams.originaltype,callback:function(t){e.$set(e.tempparams,"originaltype",t)},expression:"tempparams.originaltype"}},e._l([{value:"bit",label:"位"},{value:"short16_AB",label:"16位 有符号(AB)"},{value:"short16_BA",label:"16位 有符号(BA)"},{value:"ushort16_AB",label:"16位 无符号(AB)"},{value:"ushort16_BA",label:"16位 无符号(BA)"},{value:"long32_ABCD",label:"32位 有符号(ABCD)"},{value:"long32_CDAB",label:"32位 有符号(CDAB)"},{value:"ulong32_ABCD",label:"32位 无符号(ABCD)"},{value:"ulong32_CDAB",label:"32位 无符号(CDAB)"},{value:"float32_ABCD",label:"32位 浮点数(ABCD)"},{value:"float32_CDAB",label:"32位 浮点数(CDAB)"}],(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-table",{directives:[{name:"show",rawName:"v-show",value:"modbus"==e.tempparams.protocol,expression:"tempparams.protocol == 'modbus'"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.dataList,size:"small"}},[t("el-table-column",{attrs:{align:"center",label:"从机地址(16进制加0X,例:0X10,否则是十进制)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-input",{model:{value:e.tempparams.slaveid,callback:function(t){e.$set(e.tempparams,"slaveid",t)},expression:"tempparams.slaveid"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(a))])]}}])}),t("el-table-column",{attrs:{align:"center",label:"寄存器状态","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.tempparams.operatetype,callback:function(t){e.$set(e.tempparams,"operatetype",t)},expression:"tempparams.operatetype"}},e._l([{value:"readCoils",label:"0X01:读线圈寄存器"},{value:"readInputs",label:"0X02:读离散输入寄存器"},{value:"readHregs",label:"0X03:读保持寄存器"},{value:"readIregs",label:"0X04:读输入寄存器"},{value:"writeCoil",label:"0X05:写单个线圈寄存器"},{value:"writeHreg",label:"0X06:写单个保持寄存器"},{value:"writeCoils",label:"0X0f:写多个线圈寄存器"},{value:"writeHregs",label:"0X10:写多个保持寄存器"}],(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(a.slaveid))])]}}])}),t("el-table-column",{attrs:{align:"center",label:"数据地址(16进制加0X,例:0X10,否则是十进制)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-input",{model:{value:e.tempparams.address,callback:function(t){e.$set(e.tempparams,"address",t)},expression:"tempparams.address"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(a.slaveid))])]}}])}),t("el-table-column",{attrs:{align:"center",label:"数据长度(字节)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-input",{model:{value:e.tempparams.bytes,callback:function(t){e.$set(e.tempparams,"bytes",t)},expression:"tempparams.bytes"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(a.slaveid))])]}}])})],1),t("el-row",{directives:[{name:"show",rawName:"v-show",value:"modbus"!=e.tempparams.protocol,expression:"tempparams.protocol != 'modbus'"}],attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"数据地址"}},[t("el-input",{attrs:{placeholder:"数据地址"},model:{value:e.tempparams.address,callback:function(t){e.$set(e.tempparams,"address",t)},expression:"tempparams.address"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"数据长度"}},[t("el-input",{attrs:{placeholder:"数据长度（字节）"},model:{value:e.tempparams.bytes,callback:function(t){e.$set(e.tempparams,"bytes",e._n(t))},expression:"tempparams.bytes"}})],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-tooltip",{staticStyle:{float:"left"},attrs:{effect:"dark",placement:"right-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 1. 采集值 设备上行数据经采集公式计算后显示 。 "),t("br"),e._v(" 公式中的%s为占位符，是固定字段。 "),t("br"),e._v(" 如： "),t("br"),e._v(" 加：%s+10 "),t("br"),e._v(" 减：%s-10 "),t("br"),e._v(" 乘：%s*10 "),t("br"),e._v(" 除：%s/10 "),t("br"),e._v(" 余数：%s%10 "),t("br")]),t("i",{staticClass:"el-icon-question"})]),t("el-form-item",{attrs:{label:"采集公式"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{rows:1,type:"textarea"},model:{value:e.tempparams.collection,callback:function(t){e.$set(e.tempparams,"collection",t)},expression:"tempparams.collection"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-tooltip",{staticStyle:{float:"left"},attrs:{effect:"dark",placement:"right-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 1. 设置值 平台下行数据经设置公式计算后设置 。 "),t("br"),e._v(" 公式中的%s为占位符，是固定字段。 "),t("br"),e._v(" 如： "),t("br"),e._v(" 加：%s+10 "),t("br"),e._v(" 减：%s-10 "),t("br"),e._v(" 乘：%s*10 "),t("br"),e._v(" 除：%s/10 "),t("br"),e._v(" 余数：%s%10 "),t("br")]),t("i",{staticClass:"el-icon-question"})]),t("el-form-item",{attrs:{label:"设置公式"}},[t("el-input",{attrs:{rows:1,type:"textarea"},model:{value:e.tempparams.setting,callback:function(t){e.$set(e.tempparams,"setting",t)},expression:"tempparams.setting"}})],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"必填"}},[t("el-radio",{attrs:{border:"",label:!0},model:{value:e.tempparams.required,callback:function(t){e.$set(e.tempparams,"required",t)},expression:"tempparams.required"}},[e._v(" 是 ")]),t("el-radio",{attrs:{border:"",label:!1},model:{value:e.tempparams.required,callback:function(t){e.$set(e.tempparams,"required",t)},expression:"tempparams.required"}},[e._v(" 否 ")])],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"只读"}},[t("el-radio",{attrs:{border:"",label:!0},model:{value:e.tempparams.readonly,callback:function(t){e.$set(e.tempparams,"readonly",t)},expression:"tempparams.readonly"}},[e._v(" 是 ")]),t("el-radio",{attrs:{border:"",label:!1},model:{value:e.tempparams.readonly,callback:function(t){e.$set(e.tempparams,"readonly",t)},expression:"tempparams.readonly"}},[e._v(" 否 ")])],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"列表显示"}},[t("el-radio",{attrs:{border:"",label:!0},model:{value:e.tempparams.isshow,callback:function(t){e.$set(e.tempparams,"isshow",t)},expression:"tempparams.isshow"}},[e._v(" 是 ")]),t("el-radio",{attrs:{border:"",label:!1},model:{value:e.tempparams.isshow,callback:function(t){e.$set(e.tempparams,"isshow",t)},expression:"tempparams.isshow"}},[e._v(" 否 ")])],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},["switch"==e.tempparams.type?t("el-form-item",{attrs:{label:"开"}},[t("el-input",{model:{value:e.tempparams.activevalue,callback:function(t){e.$set(e.tempparams,"activevalue",t)},expression:"tempparams.activevalue"}})],1):e._e()],1),t("el-col",{attrs:{span:12}},["switch"==e.tempparams.type?t("el-form-item",{attrs:{label:"关"}},[t("el-input",{model:{value:e.tempparams.inactivevalue,callback:function(t){e.$set(e.tempparams,"inactivevalue",t)},expression:"tempparams.inactivevalue"}})],1):e._e()],1)],1),"enum"!=e.tempparams.type&&"switch"!=e.tempparams.type?t("el-form-item",{attrs:{label:"默认值",prop:"default"}},["bool"==e.tempparams.type?t("el-select",{staticClass:"notauto",attrs:{readonly:""},model:{value:e.tempparams.default,callback:function(t){e.$set(e.tempparams,"default",t)},expression:"tempparams.default"}},[t("el-option",{attrs:{label:"是",value:!0}}),t("el-option",{attrs:{label:"否",value:!1}})],1):"int"==e.tempparams.type?t("el-input",{model:{value:e.tempparams.default,callback:function(t){e.$set(e.tempparams,"default",e._n(t))},expression:"tempparams.default"}}):t("el-input",{model:{value:e.tempparams.default,callback:function(t){e.$set(e.tempparams,"default",t)},expression:"tempparams.default"}})],1):e._e(),"enum"==e.tempparams.type?t("el-form-item",{attrs:{label:"Enum数据"}},[t("el-tabs",{model:{value:e.elactiveName1,callback:function(t){e.elactiveName1=t},expression:"elactiveName1"}},[t("el-tab-pane",{attrs:{label:"Table",name:"Table1"}},[t("el-button",{staticClass:"mt-3",attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},nativeOn:{click:function(t){return e.$parent.addDomain.apply(null,arguments)}}},[e._v(" 新 增 ")]),t("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tempparams.specs}},[t("el-table-column",{attrs:{align:"center",label:"属性"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-input",{model:{value:a.attribute,callback:function(t){e.$set(a,"attribute",t)},expression:"row.attribute"}})]}}],null,!1,145805847)}),t("el-table-column",{attrs:{align:"center",label:"属性值"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-input",{model:{value:a.attributevalue,callback:function(t){e.$set(a,"attributevalue",t)},expression:"row.attributevalue"}})]}}],null,!1,2139517436)}),t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{plain:"",size:"mini",title:"删除",type:"danger"},nativeOn:{click:function(t){return e.$parent.removeDomain(a)}}},[e._v(" 删除 ")])]}}],null,!1,3615450766)})],1)],1)],1)],1):e._e(),t("el-form-item",[t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.$parent.submitFormTempDict()}}},[e._v(" 提交 ")])],1)],1)],1)],1)},o=[],l={name:"ProfileDict",props:{titleDict:{required:!1,type:String,default:""},formLabelWidth:{required:!1,type:String,default:"120px"},rules:{required:!1,type:Object,default:()=>{}},editFlag:{required:!1,type:Boolean,default:!1},dictVisible:{required:!1,type:Boolean,default:!1},titleTempDialog:{required:!1,type:String,default:""},parserTables:{required:!1,type:Array,default:()=>[]},tempparam:{required:!1,type:Object,default:()=>{}},allunit:{required:!1,type:Array,default:()=>[]},dataList:{required:!1,type:Array,default:()=>[{}]}},data(){return{elactiveName:"Table",elactiveName1:"Table1",tempparams:{}}},created(){this.tempparams=this.tempparam},mounted(){},methods:{addParse(e){this.$parent.addParse(e)}}},i=l,s=a("2877"),n=Object(s["a"])(i,r,o,!1,null,null,null);t["default"]=n.exports},daad:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"addApp"}},[t("div",{staticClass:"head"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/roles/applicationManagement"}}},[e._v(" "+e._s(e.$translateTitle("application.applicationmanagement"))+" ")]),t("el-breadcrumb-item",[e._v(" "+e._s("update"==e.actionType?"编辑应用":"新增应用")+" ")])],1),t("el-button",{attrs:{plain:"",size:"small",type:"primary"},on:{click:e.handleClickBack}},[e._v(" "+e._s(e.$translateTitle("application.return"))+" ")])],1),t("div",{staticClass:"form"},[t("div",{staticClass:"title"},[t("p",{staticStyle:{color:"#f00"}},[e._v(" "+e._s("*"+e.$translateTitle("application.mustfillin"))+" ")])]),t("el-form",{ref:"form",attrs:{"label-width":"180px",model:e.form}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content bg-purple"},[t("el-form-item",{attrs:{label:"工程单位",prop:"department",rules:[{required:!0,message:"工程单位不能为空"}]}},[t("el-input",{attrs:{placeholder:"工程单位"},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.applicationname"),prop:"name",rules:[{required:!0,message:"工程名称不能为空"}]}},[t("el-input",{attrs:{placeholder:e.$translateTitle("application.applicationname"),readonly:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.applicationlink"),prop:"productIdentifier",rules:[{required:!0,message:"工程链接不能为空"}]}},[t("el-select",{attrs:{disabled:"",placeholder:"请选择"},model:{value:e.form.productIdentifier,callback:function(t){e.$set(e.form,"productIdentifier",t)},expression:"form.productIdentifier"}},e._l(e.applicationList,(function(a){return t("el-option",{key:a.id,attrs:{label:e.host+a.desc,value:a.desc}})})),1)],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.industrytype"),prop:"category",rules:[{required:!0,message:"请选择所属行业",trigger:"blur"}]}},[t("el-cascader",{ref:"category",attrs:{clearable:"",options:e.treeData,placeholder:e.$translateTitle("application.industrytype")},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1),t("el-form-item",{attrs:{label:"所属应用",rules:[{required:!0,message:"请选择所属应用",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请选择所属应用"},model:{value:e.form.relationApp,callback:function(t){e.$set(e.form,"relationApp",t)},expression:"form.relationApp"}},[t("template",{slot:"append"},[t("i",{class:[e.showTree?"el-icon-arrow-up":"el-icon-arrow-down"],staticStyle:{cursor:"pointer"},on:{click:function(t){e.showTree=!e.showTree}}})])],2),e.showTree?t("div",[t("el-tree",{attrs:{data:e.allApps,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1):e._e()],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.applicationdescription")}},[t("el-input",{attrs:{maxlength:"300",placeholder:e.$translateTitle("application.applicationdescription"),rows:4,"show-word-limit":"",type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)]),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content bg-purple-light"},[t("el-form-item",{attrs:{label:e.$translateTitle("application.applicationpictures")}},[t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/upload","auto-upload":!1,"file-list":e.form.fileList,limit:1,"list-type":"picture","on-success":e.handleSuccess}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v(" "+e._s(e.$translateTitle("application.selectfile"))+" ")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v(" "+e._s(e.$translateTitle("application.uploadtoserver"))+" ")]),t("span",{directives:[{name:"show",rawName:"v-show",value:""!=e.form.img,expression:"form.img != ''"}]},[e._v(" "+e._s(e.$translateTitle("developer.path"))+":"+e._s(e.form.img)+" ")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" "+e._s(e.$translateTitle("application.onlyJPG/PNGfilescanbeuploadedandnomorethan500kb"))+" ")])],1)],1),t("el-form-item",{attrs:{label:"背景图片"}},[t("el-upload",{ref:"upload1",staticClass:"upload-demo",attrs:{action:"/upload","auto-upload":!1,"file-list":e.form.fileList1,limit:1,"list-type":"picture","on-success":e.handleSuccess1}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v(" "+e._s(e.$translateTitle("application.selectfile"))+" ")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload1}},[e._v(" "+e._s(e.$translateTitle("application.uploadtoserver"))+" ")]),t("span",{directives:[{name:"show",rawName:"v-show",value:""!=e.form.img1,expression:"form.img1 != ''"}]},[e._v(" "+e._s(e.$translateTitle("developer.path"))+":"+e._s(e.form.img1)+" ")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" "+e._s(e.$translateTitle("application.onlyJPG/PNGfilescanbeuploadedandnomorethan500kb"))+" ")])],1)],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.copyrightinformation")}},[t("el-input",{attrs:{maxlength:"300",placeholder:e.$translateTitle("application.copyrightinformation"),rows:3,"show-word-limit":"",type:"textarea"},model:{value:e.form.copyright,callback:function(t){e.$set(e.form,"copyright",t)},expression:"form.copyright"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("application.monitoringpanel")}},[t("el-input",{attrs:{placeholder:e.$translateTitle("application.monitoringpanel")},model:{value:e.form.dashboard,callback:function(t){e.$set(e.form,"dashboard",t)},expression:"form.dashboard"}},[t("template",{slot:"prepend"},[e._v("http://")]),t("el-button",{staticStyle:{color:"#ffffff",background:"#409eff","border-radius":"1px 1px 1px 0"},attrs:{slot:"append",type:"primary"},on:{click:e.open12},slot:"append"},[e._v(" "+e._s(e.$translateTitle("application.preview"))+" ")])],2)],1)],1)])],1),t("el-divider",[t("b",[e._v(e._s(e.$translateTitle("application.applicationconfiguration")))])]),t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content bg-purple"},[t("el-form-item",{attrs:{label:e.$translateTitle("application.applicationaccessscale"),prop:"scale",rules:[{required:!0,message:"请选择工程接入规模",trigger:"change"}]}},[t("el-select",{attrs:{clearable:""},model:{value:e.form.scale,callback:function(t){e.$set(e.form,"scale",e._n(t))},expression:"form.scale"}},e._l(e.form.scaleDate,(function(e){return t("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1)],1)])],1)],1),t("div",{staticClass:"btns"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:"add"==e.actionType,expression:"actionType == 'add'"}],attrs:{type:"primary"},on:{click:e.handleClickSubmit}},[e._v(" "+e._s(e.$translateTitle("application.submission"))+" ")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:"update"==e.actionType,expression:"actionType == 'update'"}],attrs:{type:"primary"},on:{click:e.handleClickUpdate}},[e._v(" 更新 ")])],1)],1)])},o=[],l=a("5880"),i=a("e0e9"),s=a("ed08"),n=a("58dd"),c=a("7212"),d=a("5dca"),p=Object.defineProperty,u=Object.defineProperties,m=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,g=(e,t,a)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,y=(e,t)=>{for(var a in t||(t={}))h.call(t,a)&&g(e,a,t[a]);if(b)for(var a of b(t))f.call(t,a)&&g(e,a,t[a]);return e},v=(e,t)=>u(e,m(t)),$=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())}),w={data(){return{imageUrl:!1,host:window.location.origin+"/lot/",applicationList:[],form:{name:"",options:[],category:[],relationApp:"",number:"",code:"",scale:"",dashboard:"",product:[],department:"",scaleDate:[{id:0,value:100,label:"100"},{id:1,value:1e3,label:"1000"},{id:2,value:1e4,label:"1万"},{id:3,value:1e5,label:"10万"},{id:4,value:1e6,label:"100万"},{id:5,value:1e7,label:"1000万"},{id:6,value:1e8,label:"1亿"}],productIdentifier:"",fileList:[],fileList1:[],img:"",img1:"",copyright:"",desc:"",time:7200,secret:""},sessionToken:"",file:"",actionType:"",relationAppObjectId:"",content:{title:"",objectId:""},argu:{},Notification:"",showTree:!1,allApps:[],defaultProps:{children:"children",label:"label"},productlist:[]}},computed:v(y({},Object(l["mapGetters"])({roleTree:"user/roleTree"})),{treeData(){const e=JSON.parse(JSON.stringify(this.form.options));return e.filter(t=>{const a=e.filter(e=>t.id==e.parentid);return a.length>0&&(t.children=a),0==t.parentid})},applicationData(){return[]}}),created(){this.Industry(),this.randomSecret(),this.getProductList()},mounted(){this.initData()},beforeDestroy(){this.Notification&&this.Notification.close()},methods:{handleClickRefresh(){this.randomSecret()},onApplicationchange(e){},getProductList(e){this.$query_object("Product",{}).then(e=>{e.results&&(this.productlist=e.results)})},randomSecret(){const e=Math.ceil(25*Math.random());this.form.secret=Base64.encode(String.fromCharCode(65+e)+Math.ceil(1e7*Math.random())+Number(new Date))},initData(){return $(this,null,(function*(){this.argu=this.$route.query,this.content.title=this.argu.title,this.actionType=this.argu.actionType;const{results:e}=yield Object(n["app_count"])({limit:100,where:{}});e&&(this.applicationList=e,"update"==this.actionType?(this.form.name=this.argu.name,this.form.scale=Number(Object(s["handleZero"])(this.argu.scale)),this.form.secret=this.argu.secret,this.form.productIdentifier=this.argu.productIdentifier,this.content.objectId=this.argu.objectId,this.form.department=this.argu.userUnit,this.form.desc=this.argu.desc,this.form.copyright=this.argu.copyright,this.argu.category&&(this.form.category=this.argu.category.split("/")),this.argu.dashboard?this.form.dashboard=this.argu.dashboard.substr(7):this.form.dashboard="",""!=this.argu.logo&&(this.form.img=this.argu.logo,this.form.fileList.push({name:"logo.png",url:this.argu.logo})),""!=this.argu.background&&(this.form.img1=this.argu.background,this.form.fileList1.push({name:"background.png",url:this.argu.background})),this.form.relationApp=this.argu.name):(this.relationAppObjectId=this.$route.query.appObjectId,this.form.relationApp=this.$route.query.name,this.form.productIdentifier=this.$route.query.desc,this.form.name=this.$route.query.desc))}))},handleClickBack(){this.$router.push({path:"/roles/applicationManagement"})},submitUpload(){this.$refs.upload.submit()},handleChangeFile(e){const t=e.target.files[0],a=t.name.substr(-3);t.size/1024>500?this.$message("上传图片大小不能超过500KB!"):"png"!=a&&"jpg"!=a?this.$message("上传图片格式不正确，必须是png或jpg格式！"):this.file=t},handleSuccess(e,t,a){this.form.img=e.path,this.$message({showClose:!0,duration:2e3,message:"上传成功！",type:"success"}),document.getElementsByClassName("el-icon-close")[0].setAttribute("display","none")},handleError(e,t,a){this.$message({showClose:!0,duration:2e3,message:"上传失败！",type:"error"})},isSubmit(){return""!=this.form.name&&""!=this.form.scale&&""!=this.form.productIdentifier||(this.$message("有必填项没有填写，无法提交！"),!1)},handleSuccess1(e,t,a){this.form.img1=e.path,this.$message({showClose:!0,duration:2e3,message:"上传成功！",type:"success"}),document.getElementsByClassName("el-icon-close")[0].setAttribute("display","none")},submitUpload1(){this.$refs.upload1.submit()},handleClickSubmit(){return $(this,null,(function*(){if(!this.isSubmit())return;const e="role:"+this.form.relationApp;var t={};t[e]={read:!0,write:!0};var a={ACL:t,title:this.form.name,category:this.form.category.join("/"),scale:this.form.scale,productIdentifier:this.form.productIdentifier,copyright:this.form.copyright,desc:this.form.desc,logo:this.form.img,background:this.form.img1,userUnit:this.form.department,dashboard:""};""!=this.form.dashboard?a.dashboard="http://"+this.form.dashboard:a.dashboard="";const{objectId:r}=yield Object(c["postProduct"])(a);r&&this.addRelation(res.objectId,this.relationAppObjectId)}))},addRelation(e,t){return $(this,null,(function*(){const a=yield Object(d["postRelation"])({destClass:"Project",destId:e,destField:"app",srcClass:"App",srcId:t});a?(this.$message({showClose:!0,duration:2e3,message:"添加部署成功！",type:"success"}),this.$router.push({path:"/roles/projectManagement"})):this.$message("部署失敗")}))},handleClickUpdate(){return $(this,null,(function*(){if(!this.isSubmit())return;const e="role:"+this.form.relationApp;var t={};t[e]={read:!0,write:!0};var a={ACL:t,title:this.form.name,category:this.form.category.join("/"),scale:this.form.scale,productIdentifier:this.form.productIdentifier,copyright:this.form.copyright,desc:this.form.desc,logo:this.form.img,background:this.form.img1,userUnit:this.form.department,dashboard:""};""!=this.form.dashboard?a.dashboard="http://"+this.form.dashboard:a.dashboard="";const r=yield Object(c["putProduct"])(this.argu.objectId,a);r&&(this.$message({showClose:!0,duration:2e3,message:"修改成功！",type:"success"}),this.$router.push({path:"/roles/projectManagement"}))}))},handleNodeClick(e){this.showTree=!this.showTree,this.addchannel.applicationtText=e.name},Industry(){return $(this,null,(function*(){this.allApps=this.roleTree,this.form.options=[];const e=yield Object(i["queryDict"])({limit:1e3,where:{"data.key":"category"}});if(e){const t=e.results;t.map(e=>{var t={};t.value=e.data.CategoryName,t.label=e.data.CategoryName,t.id=e.data.Id,t.parentid=e.data.SuperId,this.form.options.push(t)})}}))},open12(){this.Notification=this.$notify({title:"面板预览",dangerouslyUseHTMLString:!0,duration:0,type:"success",message:`<div><iframe\n                src="http://${this.form.dashboard}"\n                width="1000"\n                height="400"\n                frameborder="0"\n      ></iframe></div>`})}}},_=w,F=(a("53a9"),a("fc06"),a("2877")),T=Object(F["a"])(_,r,o,!1,null,"61080db8",null);t["default"]=T.exports},dbcd:function(e,t,a){"use strict";a("e22c")},dbd1:function(e,t,a){"use strict";a("a360")},dbf4:function(e,t,a){"use strict";a("fe26")},df9c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"parserTable",attrs:{"append-to-body":!0,direction:"rtl",visible:e.parserTable,width:"60%"},on:{"update:visible":function(t){e.parserTable=t},close:function(t){e.$parent.parserTable=!e.parserTable}}},[t("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.addParse(e.parserTables)}}},[e._v(" "+e._s(e.$translateTitle("product.newlyadded"))+" ")]),t("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return t.preventDefault(),e.saveParse(e.parserTables)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")])],1),t("el-table",{attrs:{data:e.parserTables,size:"mini"}},[t("el-table-column",{attrs:{align:"center",label:"uid",prop:"uid","show-overflow-tooltip":"",sortable:"",width:"100"}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.chinesetitle"),prop:"name","show-overflow-tooltip":"",sortable:"",width:"140"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-popover",{attrs:{placement:"top",trigger:"hover"}},[t("p",[e._v(" "+e._s(e.$translateTitle("product.englishtitle"))+": "+e._s(a.enname)+" ")]),t("p",[e._v(" "+e._s(e.$translateTitle("developer.describe"))+": "+e._s(a.description)+" ")]),t("p",[e._v(" "+e._s(e.$translateTitle("product.identifier"))+": "+e._s(a.identifier)+" ")]),t("p",[e._v(" "+e._s(e.$translateTitle("developer.describe"))+": "+e._s(a.description)+" ")]),t("p",[e._v(" "+e._s(e.$translateTitle("product.Table Name"))+": "+e._s(a.table)+" ")]),t("p",[e._v(" "+e._s(e.$translateTitle("product.class"))+": "+e._s(a.field)+" ")]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("el-tag",{attrs:{size:"medium"}},[e._v(" "+e._s(a.name)+" ")])],1)])]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionaltypes"),prop:"type","show-overflow-tooltip":"",sortable:""}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.visible"),prop:"visible",sortable:"",width:"100"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-switch",{attrs:{disabled:""},model:{value:a.visible,callback:function(t){e.$set(a,"visible",t)},expression:"row.visible"}})]}}])}),t("el-table-column",{attrs:{align:"center",fixed:"right",label:e.$translateTitle("developer.operation"),width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:a,$index:r}){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.editParse(r,a)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.edit"))+" ")]),t("el-button",{attrs:{disabled:!a.config.order,type:"text"},on:{click:function(t){return e.previewParse(a.config)}}},[e._v(" "+e._s(e.$translateTitle("application.preview"))+" ")]),t("el-button",{attrs:{size:"small",type:"text"},nativeOn:{click:function(t){return t.preventDefault(),e.lockingParse(a.uid,r,e.parserTables)}}},[e._v(" "+e._s(e.$translateTitle("application.locking"))+" ")]),t("el-button",{attrs:{disabled:a.disable,size:"small",type:"text"},nativeOn:{click:function(t){return t.preventDefault(),e.deleteParse(a.uid,r,e.parserTables)}}},[e._v(" "+e._s(e.$translateTitle("task.Delete"))+" ")])]}}])})],1)],1)},o=[],l={name:"ProfileDrawer",props:{parserTable:{required:!0,type:Boolean,default:!1},parserTables:{required:!1,type:Array,default:()=>[]}},data(){return{}},created(){},mounted(){},methods:{addParse(e){this.$parent.addParse(e)},saveParse(e){dgiotlog.log("Preservation",e),this.$parent.saveParse(e)},editParse(e,t){this.$parent.editParse(e,t)},previewParse(e){this.$parent.previewParse(e)},lockingParse(e,t,a){this.$parent.lockingParse(e,t,a)},deleteParse(e,t,a){this.$parent.deleteParse(e,t,a)}}},i=l,s=a("2877"),n=Object(s["a"])(i,r,o,!1,null,null,null);t["default"]=n.exports},e22c:function(e,t,a){},e2e48:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{ref:"custom-table",staticClass:"custom-table-container",class:{"dgiot-fullscreen":e.isFullscreen}},[t("dgiot-query-form",[t("dgiot-query-form-left-panel",[t("el-form",{ref:"form",attrs:{inline:!0,"label-width":"0",model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",[t("el-input",{attrs:{clearable:""},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),t("el-form-item",[t("el-button",{attrs:{icon:"el-icon-search","native-type":"submit",type:"primary"},on:{click:e.handleQuery}},[e._v(" "+e._s(e.$translateTitle("button.search"))+" ")]),t("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},nativeOn:{click:function(t){return e.handleAdd.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("button.add"))+" ")])],1)],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{border:e.border,data:e.categoryList,"default-sort":{prop:"order",order:"ascending"},"row-key":"objectId",size:e.lineHeight,stripe:e.stripe,"tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.setSelectRows},scopedSlots:e._u([{key:"empty",fn:function(){return[t("el-image",{staticClass:"dgiot-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[t("el-table-column",{attrs:{align:"center",prop:"name","show-overflow-tooltip":"",sortable:"",type:"index",width:"50"}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.name"),prop:"name","show-overflow-tooltip":"",sortable:""}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),"show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleAddChild(a)}}},[e._v(" "+e._s(e.$translateTitle("category.Add subcategory"))+" ")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a.objectId)}}},[e._v(" "+e._s(e.$translateTitle("button.delete"))+" ")])]}}])})],1),t("categoryEdit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},o=[],l=a("9705"),i=a("03b1"),s=a("d292"),n=(e,t,a)=>new Promise((r,o)=>{var l=e=>{try{s(a.next(e))}catch(t){o(t)}},i=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);s((a=a.apply(e,t)).next())}),c={name:"Empty",components:{categoryEdit:l["default"]},data(){return{infoData:"Category",isFullscreen:!1,border:!0,height:this.$baseTableHeight(0)+40,stripe:!1,lineHeight:"medium",categoryList:[],listLoading:!0,total:0,selectRows:"",queryForm:{pageNo:1,pageSize:20,name:"",limt:10,skip:0,order:"createdAt",keys:"count(*)"}}},computed:{dragOptions(){return{animation:600,group:"description"}}},mounted(){},created(){this.fetchData()},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:{clickFullScreen(){this.isFullscreen=!this.isFullscreen,this.handleHeight()},handleHeight(){this.isFullscreen?this.height=this.$baseTableHeight(1)+210:this.height=this.$baseTableHeight(1)},setSelectRows(e){this.selectRows=e},handleAdd(){this.$refs["edit"].showEdit({order:0},"top")},handleAddChild(e){this.$refs["edit"].showEdit(e,"child")},handleEdit(e){this.$refs["edit"].showEdit(e,"edit")},handleDelete(e){this.$baseConfirm(this.$translateTitle("Maintenance.Are you sure you want to delete the current item"),this.$translateTitle("Maintenance.Delete reminder"),()=>n(this,null,(function*(){const t=yield Object(i["delCategory"])(e);dgiotlog.log(t,"res"),_.isEmpty(t)?(this.$baseMessage(this.$translateTitle("user.successfully deleted"),"success","dgiot-hey-message-success"),yield this.fetchData()):this.$baseMessage(this.$translateTitle("user.error deleted")+t,"error","dgiot-hey-message-error")})))},handleSizeChange(e){this.queryForm.pageSize=e,this.fetchData()},handleCurrentChange(e){this.queryForm.pageNo=e,this.fetchData()},handleQuery(){this.queryForm.pageNo=1,this.fetchData()},fetchData(){return n(this,null,(function*(){let e=this.queryForm.name.length?'{ "$regex": "'+this.queryForm.name+'"}':'{ "$ne": "null" }';this.listLoading=!0;let t={class:"Category",filter:'{"order": "createdAt","keys":["parent","name","level","createdAt"],"where":{"level": {"$gte": 1}, "name":'+e+"}}",parent:"parent"};dgiotlog.log(t);const{results:a=[]}=yield Object(s["post_tree"])(t);this.categoryList=a,this.listLoading=!1}))}}},d=c,p=(a("6016"),a("2877")),u=Object(p["a"])(d,r,o,!1,null,"2da43cc9",null);t["default"]=u.exports},e2ea:function(e,t,a){},ebd7:function(e,t,a){"use strict";a("700d")},ee0c:function(e,t,a){"use strict";a.r(t);var r,o,l=a("2877"),i={},s=Object(l["a"])(i,r,o,!1,null,null,null);t["default"]=s.exports},ee79:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this;e._self._c;return e._m(0)},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"DeviceInfo-container"},[t("div",{staticClass:"DeviceInfo"})])}],l={name:"DeviceInfo",components:{},props:{},data(){return{}},computed:{},watch:{},created(){},mounted(){},destroyed(){},methods:{}},i=l,s=(a("9ad4"),a("2877")),n=Object(s["a"])(i,r,o,!1,null,"40559eab",null);t["default"]=n.exports},f7ee:function(e,t,a){"use strict";a("0e34")},f86c:function(e,t,a){},fc06:function(e,t,a){"use strict";a("f86c")},fe26:function(e,t,a){}}]);