/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2022年09月22日12时23分27秒
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors-dgiot-b4389a1c"],{"0e9f":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CascaderSelectControlRenderer=t.NestedSelectControlRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=(0,n.__importDefault)(a("35b7")),i=(0,n.__importDefault)(a("3473")),l=(0,n.__importDefault)(a("dbb0")),s=(0,n.__importDefault)(a("1f88")),d=a("c264"),u=a("d369"),c=a("d55b"),p=a("79ae"),h=a("7dac"),m=a("4afe"),f=(0,n.__importDefault)(a("41c6")),v=(0,n.__importDefault)(a("bfc7")),_=(0,n.__importDefault)(a("c228")),g=a("ed20"),y=(0,n.__importDefault)(a("bb410")),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isOpened:!1,isFocused:!1,inputValue:"",stack:[t.props.options]},t}var a,c,b,C,O,F;return(0,n.__extends)(t,e),t.prototype.domRef=function(e){this.target=e},t.prototype.componentDidUpdate=function(e){e.options!==this.props.options&&this.setState({stack:[this.props.options]})},t.prototype.doAction=function(e,t,a){var n=this.props,r=n.resetValue,o=n.onChange,i=null===e||void 0===e?void 0:e.actionType;"clear"===i?null===o||void 0===o||o(""):"reset"===i&&(null===o||void 0===o||o(null!==r&&void 0!==r?r:""))},t.prototype.dispatchEvent=function(e,t){return void 0===t&&(t={}),(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,o,i;return(0,n.__generator)(this,(function(l){switch(l.label){case 0:return a=this.props,r=a.dispatchEvent,o=a.data,[4,r(e,(0,u.createObject)(o,(0,n.__assign)({},t)))];case 1:return i=l.sent(),[2,!!(null===i||void 0===i?void 0:i.prevented)]}}))}))},t.prototype.handleOutClick=function(e){this.props.options;e.defaultPrevented||this.setState({isOpened:!0})},t.prototype.handleResultClear=function(){this.setState({inputValue:void 0})},t.prototype.close=function(){this.setState({isOpened:!1})},t.prototype.removeItem=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,o,i,l,s,d,u,c;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return a=this.props,r=a.onChange,o=a.selectedOptions,i=a.joinValues,l=a.valueField,s=a.extractValue,d=a.delimiter,u=a.value,t&&t.stopPropagation(),o.splice(e,1),i?u=o.map((function(e){return e[l||"value"]})).join(d||","):s&&(u=o.map((function(e){return e[l||"value"]}))),[4,this.dispatchEvent("change",{value:u})];case 1:return c=n.sent(),c||r(u),[2]}}))}))},t.prototype.renderValue=function(e,t){var a=this.props,n=a.classnames,o=a.labelField,i=a.valueField,l=a.options,s=a.hideNodePathLabel,d=this.state.inputValue,c=(0,u.string2regExp)(d||"");if(s)return e[o||"label"];var p=(0,u.getTreeAncestors)(l,e,!0);return r.default.createElement("span",{className:n("Select-valueLabel"),key:t||e[i||"value"]},p?p.map((function(e,t){var a=e[o||"label"],i=t===p.length-1,l=a.split(c||""),s=0;return r.default.createElement("span",{key:t},c.test(a)?l.map((function(e,t){var o=s;return s+=e.length||(null===d||void 0===d?void 0:d.length)||0,r.default.createElement("span",{key:t,className:n({"NestedSelect-optionLabel-highlight":!e})},e||a.slice(o,s))})):a,!i&&">")})):e[o||"label"])},t.prototype.handleOptionClick=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i,l,s,d,u;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.multiple,r=t.onChange,o=t.joinValues,i=t.extractValue,l=t.valueField,s=t.onlyLeaf,a?[2]:(d=o||i?e[l||"value"]:e,void 0===d||s&&e.children?[2]:[4,this.dispatchEvent("change",{value:d})]);case 1:return u=n.sent(),u||r(d),u||this.handleResultClear(),!a&&this.close(),[2]}}))}))},t.prototype.handleCheck=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,o,i,l,s,d,c,p,h,m,g,y,b,C,O,F,E,w,A,k;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:if(a=this.props,r=a.onChange,o=a.selectedOptions,i=a.joinValues,l=a.delimiter,s=a.extractValue,d=a.withChildren,c=a.onlyChildren,p=a.cascade,h=a.options,m=a.onlyLeaf,g=this.state.stack,y=this.props.valueField||"value",m&&!Array.isArray(e)&&e.children)return[2];if(!Array.isArray(e)&&e.children&&e.children.length&&"number"===typeof t&&(g[t]?g.splice(t+1,1,e.children):g.push(e.children)),b=o,O=function(e){return(0,_.default)((0,u.flattenTree)(Array.isArray(e)?e:[e],(function(e){return e.children&&e.children.length?null:e})))},Array.isArray(e)?(d?e=(0,u.flattenTree)(e):c&&(e=O(e)),C=b.length===e.length?[]:e):Array.isArray(e.children)?p?C=(0,f.default)(b,[e]):d?(e=(0,u.flattenTree)([e]),F=e.every((function(e){return!!~b.indexOf(e)})),C=(F?f.default:v.default)(b,e)):c?(e=O(e),F=e.every((function(e){return!!~b.indexOf(e)})),C=(F?f.default:v.default)(b,e)):(C=b.filter((function(t){return!~(0,u.flattenTree)([e]).indexOf(t)})),!~b.indexOf(e)&&C.push(e)):C=(0,f.default)(b,[e]),!p){E=e;while(1){if(w=(0,u.getTreeParent)(h,E),!(null===w||void 0===w?void 0:w.value)||!w.children.every((function(e){return~C.indexOf(e)})))break;w.children.forEach((function(e){var t=C.indexOf(e);!~t||d||c||C.splice(t,1)})),c||C.push(w),E=w}}return A=i?C.map((function(e){return e[y]})).join(l):s?C.map((function(e){return e[y]})):C,[4,this.dispatchEvent("change",{value:A})];case 1:return k=n.sent(),k||r(A),k||this.handleResultClear(),[2]}}))}))},t.prototype.allChecked=function(e){var t=this,a=this.props,n=a.selectedOptions,r=a.withChildren,o=a.onlyChildren;return e.every((function(e){return(r||o)&&e.children?t.allChecked(e.children):n.some((function(t){return t===e}))}))},t.prototype.partialChecked=function(e){var t=this;return e.some((function(e){var a=e.children&&t.partialChecked(e.children);return a||t.props.selectedOptions.some((function(t){return t===e}))}))},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.getValue=function(){var e=this.props,t=e.selectedOptions,a=e.joinValues,n=e.valueField,r=e.extractValue,o=e.delimiter,i=e.value;return a?i=t.map((function(e){return e[n||"value"]})).join(o||","):r&&(i=t.map((function(e){return e[n||"value"]}))),i},t.prototype.onFocus=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.onFocus,r=t.disabled,o=this.getValue(),r||this.state.isOpened?[3,2]:(this.setState({isFocused:!0}),[4,this.dispatchEvent("focus",{value:o})]);case 1:i=n.sent(),i||a&&a(e),n.label=2;case 2:return[2]}}))}))},t.prototype.onBlur=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props.onBlur,a=this.getValue(),this.setState({isFocused:!1}),[4,this.dispatchEvent("blur",{value:a})];case 1:return r=n.sent(),r||t&&t(e),[2]}}))}))},t.prototype.getTarget=function(){return this.target||(this.target=(0,h.findDOMNode)(this)),this.target},t.prototype.handleKeyPress=function(e){" "===e.key&&(this.handleOutClick(e),e.preventDefault())},t.prototype.handleInputKeyDown=function(e){var t=this.state.inputValue,a=this.props,n=a.multiple,r=a.selectedOptions;"Backspace"===e.key&&!t&&r.length&&n&&this.removeItem(r.length-1)},t.prototype.handleInputChange=function(e){var t=this.props,a=t.options,n=t.labelField,r=t.valueField,o=(0,u.string2regExp)(e),i=e&&this.state.isOpened?(0,u.filterTree)(a,(function(e){return o.test(e[n||"label"])||o.test(e[r||"value"])||!(!e.children||!e.children.length)}),1,!0):a.concat();this.setState({inputValue:e,stack:[i]})},t.prototype.handleResultChange=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i,l,s,d,u,c;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.joinValues,r=t.extractValue,o=t.delimiter,i=t.valueField,l=t.onChange,s=t.multiple,d=Array.isArray(e)?e.concat():[],s||d.length?[3,2]:[4,this.dispatchEvent("change",{value:""})];case 1:return u=n.sent(),u||l(""),[2];case 2:return(a||r)&&(d=e.map((function(e){return e[i||"value"]}))),a&&(d=d.join(o||",")),[4,this.dispatchEvent("change",{value:d})];case 3:return c=n.sent(),c||l(d),[2]}}))}))},t.prototype.renderOptions=function(){var e=this,t=this.props,a=t.multiple,n=t.selectedOptions,o=t.classnames,l=t.options,s=t.disabled,c=t.checkAll,p=t.checkAllLabel,h=t.translate,m=t.labelField,f=t.menuClassName,v=t.cascade,_=t.onlyChildren,g=this.props.valueField||"value",y=this.state.stack,b=this.partialChecked(l),C=this.allChecked(l);return r.default.createElement(r.default.Fragment,null,y.map((function(t,y){return r.default.createElement("div",{key:y,className:o("NestedSelect-menu",f)},a&&c&&0===y?r.default.createElement("div",{className:o("NestedSelect-option","checkall")},r.default.createElement(i.default,{size:"sm",onChange:e.handleCheck.bind(e,t),checked:b,partial:b&&!C}),r.default.createElement("span",{onClick:e.handleCheck.bind(e,t)},h(p))):null,t.map((function(t,c){var p=(0,u.getTreeAncestors)(l,t),h=null===p||void 0===p?void 0:p.some((function(e){return!!~n.indexOf(e)})),f=!v&&(a&&h),b=null===p||void 0===p?void 0:p.some((function(e){return!!e.disabled})),C=f||t.disabled||b||!!s,O=!(!t.children||!e.partialChecked(t.children)),F=f||!!~n.indexOf(t);return!F&&_&&t.children&&e.allChecked(t.children)&&(F=!0),r.default.createElement("div",{key:c,className:o("NestedSelect-option",{"is-active":!C&&(F||!v&&O)}),onMouseEnter:e.onMouseEnter.bind(e,t,y)},a?r.default.createElement(i.default,{size:"sm",onChange:e.handleCheck.bind(e,t,y),trueValue:t[g],checked:F||!v&&O,partial:!F,disabled:C}):null,r.default.createElement("div",{className:o("NestedSelect-optionLabel",{"is-disabled":C}),onClick:function(){return!C&&(a?e.handleCheck(t,y):e.handleOptionClick(t))}},t[m||"label"]),t.children&&t.children.length?r.default.createElement("div",{className:o("NestedSelect-optionArrowRight")},r.default.createElement(d.Icon,{icon:"right-arrow-bold",className:"icon"})):null)})))})))},t.prototype.renderSearchResult=function(){var e=this,t=this.state,a=t.stack,n=t.inputValue,o=this.props,i=o.classnames,l=o.translate,s=o.options,d=o.labelField,c=o.cascade,p=o.selectedOptions,h=o.multiple,m=o.disabled,f=o.onlyChildren,v=o.render,_=this.props.noResultsText;_&&(_=v("noResultText",l(_)));var g=(0,u.string2regExp)(n||""),y=(0,u.flattenTree)(a[0]).filter((function(e){return g.test(e[d||"label"])})),b=r.default.createElement("div",{className:i("NestedSelect-menu")},y.length?y.map((function(t,a){var n=(0,u.getTreeAncestors)(s,t),o=!c&&(h&&(null===n||void 0===n?void 0:n.some((function(e){return!!~p.indexOf(e)})))),l=o||t.disabled||!!m||(null===n||void 0===n?void 0:n.some((function(e){return!!e.disabled}))),d=!(!t.children||!e.partialChecked(t.children)),v=o||!!~p.indexOf(t);return!v&&f&&t.children&&e.allChecked(t.children)&&(v=!0),r.default.createElement("div",{className:i("NestedSelect-option",{"is-active":!l&&(v||!c&&d)}),key:a},r.default.createElement("div",{className:i("NestedSelect-optionLabel",{"is-disabled":l}),onClick:function(){!l&&(h?e.handleCheck(t,t.value):e.handleOptionClick(t))}},e.renderValue(t,t.value)))})):r.default.createElement("div",{className:i("NestedSelect-option",{"no-result":!0})},_));return b},t.prototype.onMouseEnter=function(e,t,a){var n=this.state.stack;t+=1;var r=e.children;r&&r.length?n[t]?n.splice(t,1,r):n.push(r):n[t]&&n.splice(t,1),this.setState({stack:n.slice(0,t+1)})},t.prototype.renderOuter=function(){var e=this,t=this.props,a=t.popOverContainer,n=t.translate,i=t.classnames,s=t.options,d=t.render,u=!!this.state.inputValue,c=this.props.noResultsText;c&&(c=d("noResultText",n(c)));var p=r.default.createElement(g.RootClose,{disabled:!this.state.isOpened,onRootClose:this.close},(function(t){return r.default.createElement("div",{className:i("NestedSelect-menuOuter"),ref:t},u?e.renderSearchResult():s.length?e.renderOptions():r.default.createElement("div",{className:i("NestedSelect-noResult")},c))}));return r.default.createElement(o.default,{target:this.getTarget,container:a||function(){return(0,h.findDOMNode)(e)},placement:"auto",show:!0},r.default.createElement(l.default,{className:i("NestedSelect-popover")},p))},t.prototype.render=function(){var e,t=this.props,a=t.className,o=t.disabled,i=t.classnames,l=t.multiple,d=t.placeholder,c=t.translate,p=t.inline,h=t.searchable,f=(t.autoComplete,t.selectedOptions),v=t.clearable,_=t.loading,g=t.borderMode,b=t.useMobileUI,C=t.env,O=b&&(0,u.isMobile)();return r.default.createElement("div",{className:i("NestedSelectControl",a)},r.default.createElement(m.ResultBox,{useMobileUI:b,disabled:o,ref:this.domRef,placeholder:c(null!==d&&void 0!==d?d:"placeholder.empty"),className:i("NestedSelect",(e={"NestedSelect--inline":p,"NestedSelect--single":!l,"NestedSelect--multi":l,"NestedSelect--searchable":h,"is-opened":this.state.isOpened,"is-focused":this.state.isFocused},e["NestedSelect--border".concat((0,u.ucFirst)(g))]=g,e)),result:l?f:f.length?f[0]:"",onResultClick:this.handleOutClick,value:this.state.inputValue,onChange:this.handleInputChange,onResultChange:this.handleResultChange,onClear:this.handleResultClear,itemRender:this.renderValue,onKeyPress:this.handleKeyPress,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.handleInputKeyDown,clearable:v,hasDropDownArrow:!0,allowInput:h,inputPlaceholder:""},_?r.default.createElement(m.Spinner,{size:"sm"}):void 0),O?r.default.createElement(s.default,{className:i("NestedSelect-popup"),container:C&&C.getModalContainer?C.getModalContainer:void 0,isShow:this.state.isOpened,onHide:this.close,showConfirm:!1,showClose:!1},r.default.createElement(y.default,(0,n.__assign)({onClose:this.close},this.props,{onChange:this.handleResultChange,options:this.props.options.slice(),value:f}))):this.state.isOpened?this.renderOuter():null)},t.defaultProps={cascade:!1,withChildren:!1,onlyChildren:!1,onlyLeaf:!1,searchPromptText:"Select.searchPromptText",noResultsText:"noResult",checkAll:!0,checkAllLabel:"Select.checkAll",hideNodePathLabel:!1},(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"domRef",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String,Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"dispatchEvent",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof r.default&&r.default.MouseEvent)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleOutClick",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleResultClear",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"close",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(c="undefined"!==typeof p.Option&&p.Option)?c:Object,Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"renderValue",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof p.Option&&p.Option)?b:Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleOptionClick",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Number]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleCheck",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"getValue",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"onFocus",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"onBlur",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"getTarget",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(C="undefined"!==typeof r.default&&r.default.KeyboardEvent)?C:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleKeyPress",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(O="undefined"!==typeof r.default&&r.default.KeyboardEvent)?O:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleInputKeyDown",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleInputChange",null),(0,n.__decorate)([u.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(F="undefined"!==typeof Array&&Array)?F:Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleResultChange",null),t}(r.default.Component);t.default=b;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,c.OptionsControl)({type:"nested-select"})],t),t}(b);t.NestedSelectControlRenderer=C;var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,c.OptionsControl)({type:"cascader-select"})],t),t}(b);t.CascaderSelectControlRenderer=O},"14aa":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageFieldRenderer=t.ImageField=t.imagePlaceholder=t.ImageThumb=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("f83d"),i=a("a97c"),l=a("d77e"),s=a("d369"),d=a("c264"),u=a("32e1"),c=(0,n.__importDefault)(a("bc50")),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.handleEnlarge=function(){var e=this.props,t=e.onEnlarge,a=(0,n.__rest)(e,["onEnlarge"]);t&&t(a)},t.prototype.render=function(){var e=this.props,t=e.classnames,a=e.className,n=e.imageClassName,o=e.thumbClassName,i=e.thumbMode,l=e.thumbRatio,s=e.height,u=e.width,c=e.src,p=e.alt,h=e.title,m=e.caption,f=e.href,v=e.blank,_=void 0===v||v,g=e.htmlTarget,y=e.onLoad,b=e.enlargeAble,C=e.translate,O=e.overlays,F=e.imageMode,E=b||O?r.default.createElement("div",{key:"overlay",className:t("Image-overlay")},b?r.default.createElement("a",{"data-tooltip":C("Image.zoomIn"),"data-position":"bottom",target:"_blank",onClick:this.handleEnlarge},r.default.createElement(d.Icon,{icon:"view",className:"icon"})):null,O):null,w=r.default.createElement("div",{className:t("Image","original"===F?"Image--original":"Image--thumb",a)},"original"===F?r.default.createElement("div",{className:t("Image-origin",i?"Image-origin--".concat(i):""),style:{height:s,width:u}},r.default.createElement("img",{onLoad:y,className:t("Image-image",n),src:c,alt:p}),E):r.default.createElement("div",{className:t("Image-thumbWrap")},r.default.createElement("div",{className:t("Image-thumb",o,i?"Image-thumb--".concat(i):"",l?"Image-thumb--".concat(l.replace(/:/g,"-")):""),style:{height:s,width:u}},r.default.createElement("img",{onLoad:y,className:t("Image-image",n),src:c,alt:p})),E),h||m?r.default.createElement("div",{key:"caption",className:t("Image-info")},h?r.default.createElement("div",{className:t("Image-title"),title:h},h):null,m?r.default.createElement("div",{className:t("Image-caption"),title:m},m):null):null);return f&&(w=r.default.createElement("a",{href:f,target:g||(_?"_blank":"_self"),className:t("Link",a),title:h},w)),w},(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleEnlarge",null),t}(r.default.Component);t.ImageThumb=p;var h=(0,l.themeable)((0,u.localeable)(p));t.default=h,t.imagePlaceholder="data:image/svg+xml,%3C%3Fxml version='1.0' standalone='no'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg t='1631083237695' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='2420' xmlns:xlink='http://www.w3.org/1999/xlink' width='1024' height='1024'%3E%3Cdefs%3E%3Cstyle type='text/css'%3E%3C/style%3E%3C/defs%3E%3Cpath d='M959.872 128c0.032 0.032 0.096 0.064 0.128 0.128v767.776c-0.032 0.032-0.064 0.096-0.128 0.128H64.096c-0.032-0.032-0.096-0.064-0.128-0.128V128.128c0.032-0.032 0.064-0.096 0.128-0.128h895.776zM960 64H64C28.8 64 0 92.8 0 128v768c0 35.2 28.8 64 64 64h896c35.2 0 64-28.8 64-64V128c0-35.2-28.8-64-64-64z' p-id='2421' fill='%23bfbfbf'%3E%3C/path%3E%3Cpath d='M832 288c0 53.024-42.976 96-96 96s-96-42.976-96-96 42.976-96 96-96 96 42.976 96 96zM896 832H128V704l224-384 256 320h64l224-192z' p-id='2422' fill='%23bfbfbf'%3E%3C/path%3E%3C/svg%3E";var m=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}var o;return(0,n.__extends)(a,e),a.prototype.handleEnlarge=function(e){var t=e.src,a=e.originalSrc,n=e.title,r=e.caption,o=e.thumbMode,i=e.thumbRatio,l=this.props,s=l.onImageEnlarge,d=l.enlargeTitle,u=l.enlargeCaption;s&&s({src:t,originalSrc:a||t,title:d||n,caption:u||r,thumbMode:o,thumbRatio:i},this.props)},a.prototype.handleClick=function(e){var t=this.props.clickAction;t&&(0,c.default)(e,t,this.props)},a.prototype.render=function(){var e,a=this.props,n=a.className,o=a.defaultImage,l=a.imageCaption,d=a.title,u=a.data,c=a.imageClassName,p=a.thumbClassName,m=a.height,f=a.width,v=a.classnames,_=a.src,g=a.href,y=a.thumbMode,b=a.thumbRatio,C=a.placeholder,O=a.originalSrc,F=a.enlargeAble,E=a.imageMode,w=_?(0,i.filter)(_,u,"| raw"):"",A=w||(0,s.getPropValue)(this.props)||o||t.imagePlaceholder,k=g?(0,i.filter)(g,u,"| raw"):"";return r.default.createElement("div",{className:v("ImageField","original"===E?"ImageField--original":"ImageField--thumb",n),onClick:this.handleClick},A?r.default.createElement(h,{imageClassName:c,thumbClassName:p,height:m,width:f,src:A,href:k,title:(0,i.filter)(d,u),caption:(0,i.filter)(l,u),thumbMode:y,thumbRatio:b,originalSrc:null!==(e=(0,i.filter)(O,u,"| raw"))&&void 0!==e?e:A,enlargeAble:F&&A!==o,onEnlarge:this.handleEnlarge,imageMode:E}):r.default.createElement("span",{className:"text-muted"},C))},a.defaultProps={defaultImage:t.imagePlaceholder,thumbMode:"contain",thumbRatio:"1:1",placeholder:"-"},(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],a.prototype,"handleEnlarge",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(o="undefined"!==typeof r.default&&r.default.MouseEvent)?o:Object]),(0,n.__metadata)("design:returntype",void 0)],a.prototype,"handleClick",null),a}(r.default.Component);t.ImageField=m;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"image"})],t),t}(m);t.ImageFieldRenderer=f},"158e":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextAreaControlRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("2ab5"),i=(0,n.__importDefault)(a("5c0d")),l=a("d369"),s=a("4178"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=r.default.createRef(),t}var a,o;return(0,n.__extends)(t,e),t.prototype.doAction=function(e,t){var a=null===e||void 0===e?void 0:e.actionType,n=this.props.onChange;~["clear","reset"].indexOf(a)?(null===n||void 0===n||n(this.props.resetValue),this.focus()):"focus"===a&&this.focus()},t.prototype.focus=function(){var e;null===(e=this.inputRef.current)||void 0===e||e.focus()},t.prototype.handleFocus=function(e){var t=this.props.onFocus;this.setState({focused:!0},(function(){t&&t(e)}))},t.prototype.handleBlur=function(e){var t=this.props,a=t.onBlur,n=t.trimContents,r=t.value,o=t.onChange;this.setState({focused:!1},(function(){n&&r&&"string"===typeof r&&o(r.trim()),a&&a(e)}))},t.prototype.render=function(){var e=(0,n.__rest)(this.props,[]);return r.default.createElement(i.default,(0,n.__assign)({},e,{onFocus:this.handleFocus,onBlur:this.handleBlur}))},t.defaultProps={minRows:3,maxRows:20,trimContents:!0,resetValue:"",clearable:!1},(0,n.__decorate)([l.autobind,(0,s.bindRendererEvent)("focus"),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof r.default&&r.default.FocusEvent)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleFocus",null),(0,n.__decorate)([l.autobind,(0,s.bindRendererEvent)("blur"),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(o="undefined"!==typeof r.default&&r.default.FocusEvent)?o:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleBlur",null),t}(r.default.Component);t.default=d;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.FormItem)({type:"textarea"})],t),t}(d);t.TextAreaControlRenderer=u},"1a4f":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Grid2DRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("f83d"),i=a("d369"),l={left:"start",right:"end",center:"center",auto:"stretch"},s={top:"start",bottom:"end",middle:"center",auto:"stretch"},d=function(e){function t(t){return e.call(this,t)||this}return(0,n.__extends)(t,e),t.prototype.renderChild=function(e,t){var a=this.props,n=a.render,r=a.disabled;return n(e,t,{disabled:r})},t.prototype.renderGrid=function(e,t,a){var n=this.props,o=n.itemRender,d=n.data;if(!(0,i.isVisible)(e,d))return null;var u={gridColumnStart:e.x,gridColumnEnd:e.x+e.w,gridRowStart:e.y,gridRowEnd:e.y+e.h,justifySelf:e.align?l[e.align]:"stretch",alignSelf:e.valign?s[e.valign]:"stretch"};return r.default.createElement("div",{key:t,style:u,className:e.gridClassName},o?o(e,t,a,this.props):this.renderChild("grid2d/".concat(t),e))},t.prototype.renderGrids=function(){var e=this,t=this.props.grids;return t.map((function(a,n){return e.renderGrid(a,n,t.length)}))},t.prototype.render=function(){var e=this.props,t=e.grids,a=e.cols,n=e.gap,o=e.gapRow,i=e.width,l=e.rowHeight,s=new Array(a);s.fill("1fr");var d=0;t.forEach((function(e,t){var a=e.y+e.h-1;a>d&&(d=a)}));var u=new Array(d);u.fill(l),t.forEach((function(e){e.width&&(s[e.x-1]=Number.isInteger(e.width)?e.width+"px":e.width),e.height&&(u[e.y-1]=Number.isInteger(e.height)?e.height+"px":e.height)}));var c={display:"grid",columnGap:n,rowGap:"undefined"===typeof o?n:o,width:i,gridTemplateColumns:s.join(" "),gridTemplateRows:u.join(" ")};return r.default.createElement("div",{style:c},this.renderGrids())},t.propsList=["grids"],t.defaultProps={cols:12,width:"auto",gap:0,rowHeight:"3.125rem"},t}(r.default.Component);t.default=d;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"grid-2d"})],t),t}(d);t.Grid2DRenderer=u},"1b0d":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("2ab5"),i=a("7f82"),l=a("4afe"),s=a("d369"),d=function(e){function t(t){var a=e.call(this,t)||this;return a.mounted=!1,a.state={columns:t.columns||[],rows:t.rows||[],loading:!1},a.toggleItem=a.toggleItem.bind(a),a.reload=a.reload.bind(a),a.initOptions=a.initOptions.bind(a),a.mounted=!0,a}return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.formInited,a=e.addHook;t||!a?this.reload():a(this.initOptions,"init")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(e.columns!==t.columns||e.rows!==t.rows)this.setState({columns:t.columns||[],rows:t.rows||[]});else if(t.formInited&&(t.source!==e.source||e.data!==t.data)){var a=(0,i.buildApi)(e.source,e.data,{ignoreData:!0}),n=(0,i.buildApi)(t.source,t.data,{ignoreData:!0});a.url!==n.url&&(0,i.isValidApi)(n.url)&&this.reload()}},t.prototype.componentWillUnmount=function(){this.mounted=!1;var e=this.props.removeHook;null===e||void 0===e||e(this.initOptions,"init")},t.prototype.doAction=function(e,t,a){var n=this.props,r=n.resetValue,o=n.onChange,i=null===e||void 0===e?void 0:e.actionType;"clear"===i?null===o||void 0===o||o(""):"reset"===i&&(null===o||void 0===o||o(null!==r&&void 0!==r?r:""))},t.prototype.initOptions=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.reload()];case 1:return n.sent(),t=this.props,a=t.formItem,r=t.name,a?(a.value&&(0,s.setVariable)(e,r,a.value),[2]):[2]}}))}))},t.prototype.reload=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e,t,a,r,o,l,s=this;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:if(e=this.props,t=e.source,a=e.data,r=e.env,o=e.onChange,l=e.translate,!(0,i.isEffectiveApi)(t,a)||this.state.loading)return[2];if(!r||!r.fetcher)throw new Error("fetcher is required");return[4,new Promise((function(e,n){if(!s.mounted)return e();s.setState({loading:!0},(function(){if(!s.mounted)return e();r.fetcher(t,a).then((function(a){if(!a.ok)throw new Error(a.msg||l("fetchFailed"));if(!s.mounted)return e();s.setState({loading:!1,rows:a.data.rows||[],columns:a.data.columns||[]},(function(){t&&t.replaceData;var n=a.data.value;n&&(n=t.replaceData?n:c(n,s.state.columns,s.state.rows),o(n)),e()}))})).catch((function(t){return s.setState({error:t,loading:!1},(function(){return e()}))}))}))}))];case 1:return[2,n.sent()]}}))}))},t.prototype.toggleItem=function(e,t,a){return(0,n.__awaiter)(this,void 0,void 0,(function(){var r,o,i,l,d,c,p,h,m,f,v,_,g,y;return(0,n.__generator)(this,(function(b){switch(b.label){case 0:if(r=this.state,o=r.columns,i=r.rows,l=this.props,d=l.multiple,c=l.singleSelectMode,p=l.dispatchEvent,h=l.data,m=this.props.value||u(o,i),d)m[t][a]=(0,n.__assign)((0,n.__assign)({},m[t][a]),{checked:e});else if("row"===c)for(_=0,v=o.length;_<v;_++)m[_][a]=(0,n.__assign)((0,n.__assign)({},m[_][a]),{checked:t===_?e:!e});else if("column"===c)for(f=0,v=i.length;f<v;f++)m[t][f]=(0,n.__assign)((0,n.__assign)({},m[t][f]),{checked:a===f?e:!e});else for(f=0,v=i.length;f<v;f++)for(_=0,g=o.length;_<g;_++)m[_][f]=(0,n.__assign)((0,n.__assign)({},m[_][f]),{checked:t===_&&a===f?e:!e});return[4,p("change",(0,s.createObject)(h,{value:m.concat()}))];case 1:return y=b.sent(),(null===y||void 0===y?void 0:y.prevented)?[2]:(this.props.onChange(m.concat()),[2])}}))}))},t.prototype.renderInput=function(){var e=this,t=this.state,a=t.columns,n=t.rows,o=this.props,i=o.rowLabel,s=o.disabled,d=o.classnames,c=o.multiple,p=this.props.value||u(a,n);return r.default.createElement("div",{className:d("Table m-b-none")},r.default.createElement("div",{className:d("Table-content")},r.default.createElement("table",{className:d("Table-table")},r.default.createElement("thead",null,r.default.createElement("tr",null,r.default.createElement("th",null,i),a.map((function(e,t){return r.default.createElement("th",{key:t,className:"text-center"},e.label)})))),r.default.createElement("tbody",null,n.map((function(t,n){return r.default.createElement("tr",{key:n},r.default.createElement("td",null,t.label,t.description||t.desc?r.default.createElement("span",{className:"m-l-xs text-muted text-xs"},t.description||t.desc):null),a.map((function(t,a){return r.default.createElement("td",{key:a,className:"text-center"},r.default.createElement(l.Checkbox,{type:c?"checkbox":"radio",disabled:s,checked:!!(p[a]&&p[a][n]&&p[a][n].checked),onChange:function(t){return e.toggleItem(t,a,n)}}))})))}))))))},t.prototype.render=function(){var e=this.props,t=e.className,a=(e.render,e.classnames),n=this.state,o=n.error,i=n.loading;return r.default.createElement("div",{key:"input",className:a("MatrixControl",t||"")},o?r.default.createElement("div",{className:a("MatrixControl-error Alert Alert--danger")},String(o)):this.renderInput(),r.default.createElement(l.Spinner,{size:"lg",overlay:!0,key:"info",show:i}))},t.defaultProps={columns:[],rows:[],multiple:!0,singleSelectMode:"column"},t}(r.default.Component);function u(e,t){return Array.isArray(e)||(e=[]),Array.isArray(t)||(t=[]),e.map((function(e){return t.map((function(t){return(0,n.__assign)((0,n.__assign)((0,n.__assign)({},t),e),{checked:!1})}))}))}function c(e,t,a){return e.map((function(e,r){return e.map((function(e,o){return(0,n.__assign)((0,n.__assign)((0,n.__assign)({},t[r]),a[o]),e)}))}))}t.default=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.FormItem)({type:"matrix-checkboxes",strictMode:!1,sizeMutable:!1})],t),t}(d);t.MatrixRenderer=p},"1b6d":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GridRenderer=t.ColProps=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("f83d"),i=(0,n.__importDefault)(a("2593")),l=a("d369");function s(e){return"string"===typeof e&&e?e.replace(/\bcol-(xs|sm|md|lg)-(\d+)\b/g,(function(e,t,a){return"Grid-col--".concat(t).concat(a)})):e}function d(e){var a=[],n=t.ColProps;return n.forEach((function(t){return e&&e[t]&&a.push("Grid-col--".concat(t).concat((0,l.ucFirst)(e[t])))})),a.length||a.push("Grid-col--md"),a.join(" ")}t.ColProps=["lg","md","sm","xs"];var u=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(a,e),a.prototype.renderChild=function(e,t,a,n){void 0===n&&(n={});var r=this.props,o=r.render,i=r.itemRender;return i?i(t,a,this.props):o(e,t,n)},a.prototype.renderColumn=function(e,a,o){var u,c=(0,i.default)(e,t.ColProps);c=(0,n.__assign)({},c);var p=this.props,h=p.classnames,m=p.formMode,f=p.subFormMode,v=p.subFormHorizontal,_=p.formHorizontal,g=(p.translate,p.disabled);return r.default.createElement("div",{key:a,className:h(d(c),s(e.columnClassName),(u={},u["Grid-col--v".concat((0,l.ucFirst)(e.valign))]=e.valign,u))},this.renderChild("column/".concat(a),e.body||"",o,{disabled:g,formMode:e.mode||f||m,formHorizontal:e.horizontal||v||_}))},a.prototype.renderColumns=function(e){var t=this;return Array.isArray(e)?e.map((function(a,n){return t.renderColumn(a,n,e.length)})):null},a.prototype.render=function(){var e,t=this.props,a=t.className,n=t.classnames,o=t.gap,i=t.valign,s=t.align;return r.default.createElement("div",{className:n("Grid",(e={},e["Grid--".concat(o)]=o,e["Grid--v".concat((0,l.ucFirst)(i))]=i,e["Grid--h".concat((0,l.ucFirst)(s))]=s,e),a)},this.renderColumns(this.props.columns))},a.propsList=["columns"],a.defaultProps={},a}(r.default.Component);t.default=u;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"grid"})],t),t}(u);t.GridRenderer=c},2644:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSelectControlRenderer=t.SelectControlRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=(0,n.__importDefault)(a("c0a1")),i=a("d55b"),l=n.__importStar(a("79ae")),s=(0,n.__importDefault)(a("2769")),d=(0,n.__importDefault)(a("b047")),u=a("7f82"),c=a("d369"),p=(0,n.__importDefault)(a("c6e8")),h=a("5d73"),m=(0,n.__importDefault)(a("51ad")),f=function(e){function t(t){var a=e.call(this,t)||this;return a.lastTerm="",a.changeValue=a.changeValue.bind(a),a.lazyloadRemote=(0,d.default)(a.loadRemote.bind(a),250,{trailing:!0,leading:!1}),a.inputRef=a.inputRef.bind(a),a}var a;return(0,n.__extends)(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props;(0,u.isEffectiveApi)(t.autoComplete,t.data)&&(0,u.isApiOutdated)(e.autoComplete,t.autoComplete,e.data,t.data)&&this.lazyloadRemote(this.lastTerm)},t.prototype.componentWillUnmount=function(){this.unHook&&this.unHook()},t.prototype.inputRef=function(e){this.input=e},t.prototype.foucs=function(){this.input&&this.input.focus()},t.prototype.getValue=function(e){var t=this.props,a=t.joinValues,n=t.extractValue,r=t.delimiter,o=t.multiple,i=t.valueField,l=t.options,d=e,u=[];return(Array.isArray(e)?e:e?[e]:[]).forEach((function(e){var t=(0,s.default)(l,(function(t){return t[i||"value"]==e[i||"value"]}));t||u.push(e)})),a?d=o?Array.isArray(e)?e.map((function(e){return e[i||"value"]})).join(r):e?e[i||"value"]:"":d?d[i||"value"]:"":n&&(d=o?Array.isArray(e)?e.map((function(e){return e[i||"value"]})):e?[e[i||"value"]]:[]:d?d[i||"value"]:""),d},t.prototype.dispatchEvent=function(e,t){return void 0===t&&(t={}),(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,o,i,l,s;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return a="on"+e.charAt(0).toUpperCase()+e.slice(1),r=this.props,o=r.dispatchEvent,i=r.options,l=r.data,[4,o(e,(0,c.createObject)(l,{options:i,value:["onEdit","onDelete"].includes(a)?t:t&&t.value}))];case 1:return s=n.sent(),(null===s||void 0===s?void 0:s.prevented)?[2]:(this.props[a](t),[2])}}))}))},t.prototype.changeValue=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i,l,s,d,u;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.onChange,r=t.setOptions,o=t.options,i=t.data,l=t.dispatchEvent,s=this.getValue(e),d=[],d.length&&r(o.concat(d)),[4,l("change",(0,c.createObject)(i,{value:s,options:o}))];case 1:return u=n.sent(),(null===u||void 0===u?void 0:u.prevented)?[2]:(null===a||void 0===a||a(s),[2])}}))}))},t.prototype.loadRemote=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i,l,s,d,p,h,m,f;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:if(t=this.props,a=t.autoComplete,r=t.env,o=t.data,i=t.setOptions,l=t.setLoading,s=t.formInited,d=t.addHook,!r||!r.fetcher)throw new Error("fetcher is required");if(!s)return this.unHook&&this.unHook(),[2,this.unHook=d(this.loadRemote.bind(this,e),"init")];if(this.lastTerm=e,p=(0,c.createObject)(o,{term:e,value:e}),!(0,u.isEffectiveApi)(a,p))return[2,Promise.resolve({options:[]})];l(!0),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,r.fetcher(a,p)];case 2:return h=n.sent(),m=h.data&&h.data.options||h.data||[],f=this.mergeOptions(m),i(f),[2,{options:f}];case 3:return l(!1),[7];case 4:return[2]}}))}))},t.prototype.mergeOptions=function(e){var t=this.props,a=t.selectedOptions,r=t.valueField,o=void 0===r?"value":r,i=(0,l.normalizeOptions)(e,void 0,o).concat();return Array.isArray(a)&&a.length&&a.forEach((function(e){(0,s.default)(i,(function(t){return t.value==e.value}))||i.push((0,n.__assign)((0,n.__assign)({},e),{hidden:!0}))})),i},t.prototype.renderMenu=function(e,t){var a=this.props,n=a.menuTpl,r=a.render,o=a.data;return r("menu/".concat(t.index),n,{data:(0,c.createObject)((0,c.createObject)(o,t),e)})},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.option2value=function(){},t.prototype.renderOtherMode=function(){var e=this.props,t=e.selectMode,a=(0,n.__rest)(e,["selectMode"]);return r.default.createElement(v,(0,n.__assign)({},a,{selectMode:"group"===t?"list":t}))},t.prototype.doAction=function(e,t,a){var n=this.props,r=n.resetValue,o=n.onChange,i=null===e||void 0===e?void 0:e.actionType;if("clear"===i)null===o||void 0===o||o("");else if("reset"===i){var l=this.getValue(null!==r&&void 0!==r?r:"");null===o||void 0===o||o(l)}},t.prototype.render=function(){var e=this,t=this.props,a=t.autoComplete,i=t.searchable,s=t.options,d=t.className,p=t.loading,h=(t.value,t.selectedOptions),m=t.multi,f=t.multiple,v=t.placeholder,_=(t.id,t.classPrefix),g=(t.classnames,t.creatable),y=(t.inline,t.noResultsText),b=t.render,C=t.menuTpl,O=t.borderMode,F=t.selectMode,E=t.env,w=t.useMobileUI,A=(0,n.__rest)(t,["autoComplete","searchable","options","className","loading","value","selectedOptions","multi","multiple","placeholder","id","classPrefix","classnames","creatable","inline","noResultsText","render","menuTpl","borderMode","selectMode","env","useMobileUI"]);y&&(y=b("noResultText",y));var k=w&&(0,c.isMobile)();return r.default.createElement("div",{className:(0,o.default)("".concat(_,"SelectControl"),d)},["table","list","group","tree","chained","associated"].includes(F)?this.renderOtherMode():r.default.createElement(l.default,(0,n.__assign)({},A,{useMobileUI:w,popOverContainer:k&&E&&E.getModalContainer?E.getModalContainer:k?void 0:A.popOverContainer,borderMode:O,placeholder:v,multiple:f||m,ref:this.inputRef,value:h,options:s,loadOptions:(0,u.isEffectiveApi)(a)?this.lazyloadRemote:void 0,creatable:g,searchable:i||!!a,onChange:this.changeValue,onBlur:function(t){return e.dispatchEvent("blur",t)},onFocus:function(t){return e.dispatchEvent("focus",t)},onAdd:function(){return e.dispatchEvent("add")},onEdit:function(t){return e.dispatchEvent("edit",t)},onDelete:function(t){return e.dispatchEvent("delete",t)},loading:p,noResultsText:y,renderMenu:C?this.renderMenu:void 0})))},t.defaultProps={clearable:!1,searchable:!1,multiple:!1},(0,n.__decorate)([c.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof i.Option&&i.Option)?a:Object,Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"renderMenu",null),t}(r.default.Component);t.default=f;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var a;return(0,n.__extends)(t,e),t.prototype.renderItem=function(e){var t=this.props.labelField;return"".concat(e.scopeLabel||"").concat(e[t||"label"])},t.prototype.render=function(){var e,t=this.props,a=t.className,n=(t.classnames,t.selectedOptions),o=t.sortable,i=t.loading,l=t.searchable,s=t.searchResultMode,d=t.showArrow,u=t.deferLoad,c=t.disabled,h=t.clearable,f=t.selectTitle,v=t.selectMode,_=t.multiple,g=t.columns,y=t.leftMode,b=t.borderMode,C=t.useMobileUI,O=t.popOverContainer,F=this.props,E=F.options,w=F.leftOptions,A=F.leftDefaultValue;return"associated"===v&&E&&1===E.length&&E[0].leftOptions&&Array.isArray(E[0].children)&&(w=E[0].leftOptions,A=null!==(e=E[0].leftDefaultValue)&&void 0!==e?e:A,E=E[0].children),r.default.createElement(r.default.Fragment,null,r.default.createElement(m.default,{selectMode:v,className:a,value:n,disabled:c,clearable:h,options:E,onChange:this.handleChange,option2value:this.option2value,itemRender:this.renderItem,sortable:o,searchResultMode:s,onSearch:l?this.handleSearch:void 0,showArrow:d,onDeferLoad:u,selectTitle:f,multiple:_,columns:g,leftMode:y,leftOptions:w,borderMode:b,useMobileUI:C,popOverContainer:O}),r.default.createElement(p.default,{overlay:!0,key:"info",show:i}))},(0,n.__decorate)([c.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof i.Option&&i.Option)?a:Object]),(0,n.__metadata)("design:returntype",Object)],t.prototype,"renderItem",null),t}(h.BaseTransferRenderer),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,i.OptionsControl)({type:"select"})],t),t}(f);t.SelectControlRenderer=_;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.defaultProps={multiple:!0},t=(0,n.__decorate)([(0,i.OptionsControl)({type:"multi-select"})],t),t}(f);t.MultiSelectControlRenderer=g},"2ab5":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormItem=t.registerFormItem=t.asFormItem=t.detectProps=t.FormItemWrap=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=(0,n.__importDefault)(a("da6a")),i=a("daf9"),l=a("f83d"),s=a("d369"),d=a("4f20"),u=a("2029"),c=a("a97c"),p=a("904e"),h=a("ed3b"),m=(0,n.__importDefault)(a("b047")),f=a("7f82"),v=function(e){function t(t){var a=e.call(this,t)||this;a.reaction=[],a.syncAutoFill=(0,m.default)((function(e){(function(e){return(0,n.__awaiter)(a,void 0,void 0,(function(){var t,a,r,o,i,l,d,u,c,p,h;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.autoFillApi,r=t.onBulkChange,o=t.formItem,i=t.data,a?(l=null===o||void 0===o?void 0:o.name,d=(0,s.createObject)(i,(c={},c[l||""]=e,c)),r&&(0,f.isEffectiveApi)(a,d)&&this.lastSearchTerm!==e?[4,null===o||void 0===o?void 0:o.loadAutoUpdateData(a,d,!!(null===(p=a)||void 0===p?void 0:p.silent))]:[3,2]):[2];case 1:if(u=n.sent(),!u)return[2];this.lastSearchTerm=null!==(h=(0,s.getVariable)(u,l))&&void 0!==h?h:e,r(u),n.label=2;case 2:return[2]}}))}))})(e).catch((function(e){return console.error(e)}))}),250,{trailing:!0,leading:!1});var r=t.formItem;return r&&(a.reaction.push((0,i.reaction)((function(){return"".concat(r.errors.join("")).concat(r.isFocused).concat(r.dialogOpen)}),(function(){return a.forceUpdate()}))),a.reaction.push((0,i.reaction)((function(){return JSON.stringify(r.tmpValue)}),(function(){return a.syncAutoFill(r.tmpValue)})))),a}var a,o;return(0,n.__extends)(t,e),t.prototype.componentWillUnmount=function(){this.reaction.forEach((function(e){return e()})),this.reaction=[],this.syncAutoFill.cancel()},t.prototype.handleFocus=function(e){var t=this.props.formItem;t&&t.focus(),this.props.onFocus&&this.props.onFocus(e)},t.prototype.handleBlur=function(e){var t=this.props.formItem;t&&t.blur(),this.props.onBlur&&this.props.onBlur(e)},t.prototype.handleOpenDialog=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var a;return(0,n.__generator)(this,(function(n){return a=this.props.formItem,a?[2,new Promise((function(n){return a.openDialog(e,t,(function(e){return n(e)}))}))]:[2]}))}))},t.prototype.handleDialogConfirm=function(e){var t=e[0],a=this.props.formItem;a&&a.closeDialog(t)},t.prototype.handleDialogClose=function(e){void 0===e&&(e=!1);var t=this.props.formItem;t&&t.closeDialog(e)},t.prototype.renderControl=function(){var e,t=this.props,a=t.inputClassName,r=t.formItem,o=t.classnames,i=(t.children,t.type),l=t.renderControl,d=(t.formItemConfig,t.sizeMutable),u=t.size,c=t.defaultSize,p=t.useMobileUI,h=(0,n.__rest)(t,["inputClassName","formItem","classnames","children","type","renderControl","formItemConfig","sizeMutable","size","defaultSize","useMobileUI"]),m=p&&(0,s.isMobile)();if(l){var f=u||c;return l((0,n.__assign)((0,n.__assign)({},h),{onOpenDialog:this.handleOpenDialog,type:i,classnames:o,formItem:r,className:o("Form-control",(e={"is-inline":!!h.inline&&!m,"is-error":r&&!r.valid},e["Form-control--withSize Form-control--size".concat((0,s.ucFirst)(f))]=!1!==d&&"string"===typeof f&&!!f&&"full"!==f,e),null===r||void 0===r?void 0:r.errClassNames,a)}))}return null},t.prototype.render=function(){var e=this.props,a=e.formMode,o=e.inputOnly,i=e.wrap,l=e.render,s=e.formItem,d=this.props.mode||a;if(!1===i||o)return this.renderControl();var u=t.layoutRenderers[d]||t.layoutRenderers["normal"];return r.default.createElement(r.default.Fragment,null,u(this.props,this.renderControl.bind(this)),s?l("modal",(0,n.__assign)({type:"dialog"},s.dialogSchema),{show:s.dialogOpen,onClose:this.handleDialogClose,onConfirm:this.handleDialogConfirm,data:s.dialogData,formStore:void 0}):null)},t.layoutRenderers={horizontal:function(e,t){var a,n,o,i=e.className,l=e.classnames,d=e.description,u=e.descriptionClassName,p=e.captionClassName,h=e.desc,m=e.label,f=e.labelClassName,v=e.render,_=e.required,g=e.caption,y=e.remark,b=e.labelRemark,C=e.env,O=e.formItem,F=e.renderLabel,E=e.renderDescription,w=e.hint,A=e.data,k=e.showErrorMsg,S=e.useMobileUI;!1===F&&(m=!1!==m&&""),d=d||h;var I=e.horizontal||e.formHorizontal||{},R=(0,s.getWidthRate)(I.left),N=(0,s.getWidthRate)(I.right),x=e.labelAlign||e.formLabelAlign;return r.default.createElement("div",{"data-role":"form-item",className:l("Form-item Form-item--horizontal",i,(a={"Form-item--horizontal-justify":I.justify},a["is-error"]=O&&!O.valid,a["is-required"]=_,a),null===O||void 0===O?void 0:O.errClassNames)},!1!==m?r.default.createElement("label",{className:l("Form-label",(n={},n["Form-itemColumn--".concat("string"===typeof I.leftFixed?I.leftFixed:"normal")]=I.leftFixed,n["Form-itemColumn--".concat(R)]=!I.leftFixed,n["Form-label--left"]="left"===x,n),f)},r.default.createElement("span",null,m?v("label","string"===typeof m?(0,c.filter)(m,A):m):null,_&&(m||b)?r.default.createElement("span",{className:l("Form-star")},"*"):null,b?v("label-remark",{type:"remark",icon:b.icon||"warning-mark",tooltip:b,useMobileUI:S,className:l("Form-labelRemark"),container:e.popOverContainer?e.popOverContainer:C&&C.getModalContainer?C.getModalContainer:void 0}):null)):null,r.default.createElement("div",{className:l("Form-value",(o={},o["Form-itemColumn--".concat(N)]=!I.leftFixed&&!!N&&N!==12-R,o))},t(),g?v("caption",g,{className:l("Form-caption",p)}):null,y?v("remark",{type:"remark",icon:y.icon||"warning-mark",tooltip:y,className:l("Form-remark"),useMobileUI:S,container:e.popOverContainer?e.popOverContainer:C&&C.getModalContainer?C.getModalContainer:void 0}):null,w&&O&&O.isFocused?v("hint",w,{className:l("Form-hint")}):null,O&&!O.valid&&!1!==k&&Array.isArray(O.errors)?r.default.createElement("ul",{className:l("Form-feedback")},O.errors.map((function(e,t){return r.default.createElement("li",{key:t},e)}))):null,!1!==E&&d?v("description",d,{className:l("Form-description",u)}):null))},normal:function(e,t){var a,n=e.className,o=e.classnames,i=e.desc,l=e.description,s=e.label,d=e.labelClassName,u=e.render,p=e.required,h=e.caption,m=e.remark,f=e.labelRemark,v=e.env,_=e.descriptionClassName,g=e.captionClassName,y=e.formItem,b=e.renderLabel,C=e.renderDescription,O=e.hint,F=e.data,E=e.showErrorMsg,w=e.useMobileUI;return l=l||i,r.default.createElement("div",{"data-role":"form-item",className:o("Form-item Form-item--normal",n,(a={"is-error":y&&!y.valid},a["is-required"]=p,a),null===y||void 0===y?void 0:y.errClassNames)},s&&!1!==b?r.default.createElement("label",{className:o("Form-label",d)},r.default.createElement("span",null,s?u("label","string"===typeof s?(0,c.filter)(s,F):s):null,p&&(s||f)?r.default.createElement("span",{className:o("Form-star")},"*"):null,f?u("label-remark",{type:"remark",icon:f.icon||"warning-mark",tooltip:f,className:o("Form-lableRemark"),useMobileUI:w,container:e.popOverContainer?e.popOverContainer:v&&v.getModalContainer?v.getModalContainer:void 0}):null)):null,t(),h?u("caption",h,{className:o("Form-caption",g)}):null,m?u("remark",{type:"remark",icon:m.icon||"warning-mark",className:o("Form-remark"),tooltip:m,useMobileUI:w,container:v&&v.getModalContainer?v.getModalContainer:void 0}):null,O&&y&&y.isFocused?u("hint",O,{className:o("Form-hint")}):null,y&&!y.valid&&!1!==E&&Array.isArray(y.errors)?r.default.createElement("ul",{className:o("Form-feedback")},y.errors.map((function(e,t){return r.default.createElement("li",{key:t},e)}))):null,!1!==C&&l?u("description",l,{className:o("Form-description",_)}):null)},inline:function(e,t){var a,n=e.className,o=e.classnames,i=e.desc,l=e.description,s=e.label,d=e.labelClassName,u=e.render,p=e.required,h=e.caption,m=e.descriptionClassName,f=e.captionClassName,v=e.formItem,_=e.remark,g=e.labelRemark,y=e.env,b=e.hint,C=e.renderLabel,O=e.renderDescription,F=e.data,E=e.showErrorMsg,w=e.useMobileUI;return l=l||i,r.default.createElement("div",{"data-role":"form-item",className:o("Form-item Form-item--inline",n,(a={"is-error":v&&!v.valid},a["is-required"]=p,a),null===v||void 0===v?void 0:v.errClassNames)},s&&!1!==C?r.default.createElement("label",{className:o("Form-label",d)},r.default.createElement("span",null,s?u("label","string"===typeof s?(0,c.filter)(s,F):s):s,p&&(s||g)?r.default.createElement("span",{className:o("Form-star")},"*"):null,g?u("label-remark",{type:"remark",icon:g.icon||"warning-mark",tooltip:g,className:o("Form-lableRemark"),useMobileUI:w,container:e.popOverContainer?e.popOverContainer:y&&y.getModalContainer?y.getModalContainer:void 0}):null)):null,r.default.createElement("div",{className:o("Form-value")},t(),h?u("caption",h,{className:o("Form-caption",f)}):null,_?u("remark",{type:"remark",icon:_.icon||"warning-mark",className:o("Form-remark"),tooltip:_,useMobileUI:w,container:e.popOverContainer?e.popOverContainer:y&&y.getModalContainer?y.getModalContainer:void 0}):null,b&&v&&v.isFocused?u("hint",b,{className:o("Form-hint")}):null,v&&!v.valid&&!1!==E&&Array.isArray(v.errors)?r.default.createElement("ul",{className:o("Form-feedback")},v.errors.map((function(e,t){return r.default.createElement("li",{key:t},e)}))):null,!1!==O&&l?u("description",l,{className:o("Form-description",m)}):null))},row:function(e,t){var a,n=e.className,o=e.classnames,i=e.desc,l=e.description,s=e.label,d=e.labelClassName,u=e.render,p=e.required,h=e.caption,m=e.remark,f=e.labelRemark,v=e.env,_=e.descriptionClassName,g=e.captionClassName,y=e.formItem,b=e.renderLabel,C=e.renderDescription,O=e.hint,F=e.data,E=e.showErrorMsg,w=e.useMobileUI;return l=l||i,r.default.createElement("div",{"data-role":"form-item",className:o("Form-item Form-item--row",n,(a={"is-error":y&&!y.valid},a["is-required"]=p,a),null===y||void 0===y?void 0:y.errClassNames)},r.default.createElement("div",{className:o("Form-rowInner")},s&&!1!==b?r.default.createElement("label",{className:o("Form-label",d)},r.default.createElement("span",null,u("label","string"===typeof s?(0,c.filter)(s,F):s),p&&(s||f)?r.default.createElement("span",{className:o("Form-star")},"*"):null,f?u("label-remark",{type:"remark",icon:f.icon||"warning-mark",tooltip:f,className:o("Form-lableRemark"),useMobileUI:w,container:e.popOverContainer?e.popOverContainer:v&&v.getModalContainer?v.getModalContainer:void 0}):null)):null,t(),h?u("caption",h,{className:o("Form-caption",g)}):null,m?u("remark",{type:"remark",icon:m.icon||"warning-mark",className:o("Form-remark"),tooltip:m,container:v&&v.getModalContainer?v.getModalContainer:void 0}):null),O&&y&&y.isFocused?u("hint",O,{className:o("Form-hint")}):null,y&&!y.valid&&!1!==E&&Array.isArray(y.errors)?r.default.createElement("ul",{className:o("Form-feedback")},y.errors.map((function(e,t){return r.default.createElement("li",{key:t},e)}))):null,l&&!1!==C?u("description",l,{className:o("Form-description",_)}):null)}},(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleFocus",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleBlur",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof u.Schema&&u.Schema)?a:Object,Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleOpenDialog",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(o="undefined"!==typeof Array&&Array)?o:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleDialogConfirm",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleDialogClose",null),t}(r.default.Component);function _(e){return function(a){var i,l=!(a.prototype instanceof r.default.Component);if(e.validate&&!a.prototype.validate){var u=e.validate;a.prototype.validate=function(){var e={input:this};return u.apply(e,arguments)}}else e.validate&&console.error("FormItem配置中的 validate 将不起作用，因为类的成员函数中已经定义了 validate 方法，将优先使用类里面的实现。");return e.storeType&&(a=(0,p.HocStoreFactory)({storeType:e.storeType,extendsData:e.extendsData})((0,d.observer)(a)),delete e.storeType),(0,h.wrapControl)((0,o.default)((i=function(o){function i(t){var a=o.call(this,t)||this;a.refFn=a.refFn.bind(a);var n=t.validations,r=t.formItem;return r&&!n&&e.validations&&r.config({rules:e.validations}),a}return(0,n.__extends)(i,o),i.prototype.shouldComponentUpdate=function(a){var n;return!(!(null===(n=e.shouldComponentUpdate)||void 0===n?void 0:n.call(e,this.props,a))&&!1!==a.strictMode&&!1!==e.strictMode)||!!(0,s.anyChanged)(t.detectProps,this.props,a)},i.prototype.getWrappedInstance=function(){return this.ref},i.prototype.refFn=function(e){this.ref=e},i.prototype.renderControl=function(){var t,o=this.props,i=o.inputClassName,d=o.formItem,u=o.classnames,c=(o.children,o.type),p=o.size,h=o.defaultSize,m=o.useMobileUI,f=(0,n.__rest)(o,["inputClassName","formItem","classnames","children","type","size","defaultSize","useMobileUI"]),v=p||h,_=m&&(0,s.isMobile)();return r.default.createElement(a,(0,n.__assign)({},f,{useMobileUI:m,onOpenDialog:this.handleOpenDialog,size:!1!==e.sizeMutable?void 0:p,onFocus:this.handleFocus,onBlur:this.handleBlur,type:c,classnames:u,ref:l?void 0:this.refFn,forwardedRef:l?this.refFn:void 0,formItem:d,className:u("Form-control",(t={"is-inline":!!f.inline&&!_,"is-error":d&&!d.valid},t["Form-control--withSize Form-control--size".concat((0,s.ucFirst)(v))]=!1!==e.sizeMutable&&"string"===typeof v&&!!v&&"full"!==v,t),null===d||void 0===d?void 0:d.errClassNames,i)}))},i}(v),i.defaultProps=(0,n.__assign)({className:"",renderLabel:e.renderLabel,renderDescription:e.renderDescription,sizeMutable:e.sizeMutable,wrap:e.wrap,showErrorMsg:e.showErrorMsg},a.defaultProps),i.propsList=(0,n.__spreadArray)(["value","defaultValue","onChange","setPrinstineValue","readOnly","strictMode"],a.propsList||[],!0),i.displayName="FormItem".concat(e.type?"(".concat(e.type,")"):""),i.ComposedComponent=a,i),a))}}function g(e){var t=_(e)(e.component);return(0,l.registerRenderer)((0,n.__assign)((0,n.__assign)({},e),{weight:"undefined"!==typeof e.weight?e.weight:-100,component:t,isFormItem:!0}))}function y(e){return function(t){var a=g((0,n.__assign)((0,n.__assign)({},e),{component:t}));return a.component}}t.FormItemWrap=v,t.detectProps=["formPristine","formInited","addable","addButtonClassName","addButtonText","addOn","btnClassName","btnLabel","btnDisabled","className","clearable","columns","columnsCount","controls","desc","description","disabled","draggable","editable","editButtonClassName","formHorizontal","formMode","hideRoot","horizontal","icon","inline","inputClassName","label","labelClassName","labelField","language","level","max","maxRows","min","minRows","multiLine","multiple","option","placeholder","removable","required","remark","hint","rows","searchable","showCompressOptions","size","step","showInput","unit","value","diffValue","borderMode","items","showCounter","minLength","maxLength","embed","displayMode"],t.asFormItem=_,t.registerFormItem=g,t.FormItem=y,t.default=y},"2e2a":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchControlRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("2ab5"),i=(0,n.__importDefault)(a("b4c5")),l=a("d369"),s=a("721d"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.handleChange=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.dispatchEvent,r=t.data,o=t.onChange,[4,a("change",(0,l.createObject)(r,{value:e}))];case 1:return i=n.sent(),(null===i||void 0===i?void 0:i.prevented)?[2]:(o&&o(e),[2])}}))}))},t.prototype.render=function(){var e=this.props,t=e.className,a=e.classPrefix,n=e.classnames,o=e.value,d=e.trueValue,u=e.falseValue,c=e.onText,p=e.offText,h=e.option,m=(e.onChange,e.disabled),f=e.optionAtLeft,v=(0,l.isObject)(c)?(0,s.generateIcon)(n,c.icon,"Switch-icon"):c,_=(0,l.isObject)(p)?(0,s.generateIcon)(n,p.icon,"Switch-icon"):p;return r.default.createElement("div",{className:n("SwitchControl",t)},f?r.default.createElement("span",{className:n("Switch-option")},h):null,r.default.createElement(i.default,{classPrefix:a,value:o,trueValue:d,falseValue:u,onText:v,offText:_,disabled:m,onChange:this.handleChange}),f?null:r.default.createElement("span",{className:n("Switch-option")},h))},t.defaultProps={trueValue:!0,falseValue:!1,optionAtLeft:!1},(0,n.__decorate)([l.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleChange",null),t}(r.default.Component);t.default=d;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.FormItem)({type:"switch",sizeMutable:!1})],t),t}(d);t.SwitchControlRenderer=u},3947:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PickerControlRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("d55b"),i=(0,n.__importDefault)(a("c0a1")),l=a("2029"),s=(0,n.__importDefault)(a("2769")),d=a("d369"),u=(0,n.__importDefault)(a("51f5")),c=(0,n.__importDefault)(a("3485")),p=a("a97c"),h=a("c264"),m=a("7e49"),f=a("7f82"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isOpened:!1,schema:t.buildSchema(t.props),isFocused:!1},t.input=r.default.createRef(),t}var a,o,v,_,g;return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){this.fetchOptions()},t.prototype.componentDidUpdate=function(e){var t=this.props;(0,d.anyChanged)(["pickerSchema","multiple","source"],e,t)?this.setState({schema:this.buildSchema(t)}):(JSON.stringify(t.value)!==JSON.stringify(e.value)||(0,f.isApiOutdated)(e.source,t.source,e.data,t.data))&&this.fetchOptions()},t.prototype.fetchOptions=function(){var e,t=this.props,a=t.value,n=t.formItem,r=t.valueField,o=t.labelField,i=t.source,l=t.data;if(i&&n&&(r||"value")!==(o||"label")&&(!(e=n.getSelectedOptions(a))||e.length&&e[0][r||"value"]===e[0][o||"label"])){var s=(0,d.createObject)(l,{value:a,op:"loadOptions"});(0,m.isPureVariable)(i)?n.setOptions((0,m.resolveVariableAndFilter)(i,l,"| raw")):(0,f.isEffectiveApi)(i,s)&&n.loadOptions(i,s,{autoAppend:!0})}},t.prototype.buildSchema=function(e){var t,a,r=(0,m.isPureVariable)(e.source);return(0,n.__assign)((0,n.__assign)({checkOnItemClick:!0},e.pickerSchema),{labelTpl:null!==(a=null===(t=e.pickerSchema)||void 0===t?void 0:t.labelTpl)&&void 0!==a?a:e.labelTpl,type:"crud",pickerMode:!0,syncLocation:!1,api:r?null:e.source,source:r?e.source:null,keepItemSelectionOnPageChange:!0,valueField:e.valueField,labelField:e.labelField,bulkActions:e.multiple?e.pickerSchema.bulkActions:[]})},t.prototype.crudRef=function(e){while(e&&e.getWrappedInstance)e=e.getWrappedInstance();this.crud=e},t.prototype.reload=function(){if(this.crud)this.crud.search();else{var e=this.props.reloadOptions;e&&e()}},t.prototype.open=function(){this.setState({isOpened:!0})},t.prototype.close=function(){this.setState({isOpened:!1})},t.prototype.handleModalConfirm=function(e,t,a,n){var r=(0,u.default)(n,(function(e){return"crud"===e.props.type}));this.handleChange(e[r].items),this.close()},t.prototype.handleChange=function(e){var t=this.props,a=t.joinValues,n=t.valueField,r=t.delimiter,o=t.extractValue,i=t.multiple,l=t.options,d=t.setOptions,u=t.onChange,c=e;c=a?e.map((function(e){return e[n||"value"]})).join(r||","):o?i?e.map((function(e){return e[n||"value"]})):e[0]&&e[0][n||"value"]||"":i?e:e[0];var p=[];e.forEach((function(e){(0,s.default)(l,(function(t){return e[n||"value"]==t[n||"value"]}))||p.push(e)})),p.length&&d(l.concat(p)),u(c)},t.prototype.removeItem=function(e){var t=this.props,a=t.selectedOptions,n=t.joinValues,r=t.extractValue,o=t.delimiter,i=t.valueField,l=t.onChange,s=t.multiple,d=a.concat();d.splice(e,1);var u=d;u=n?d.map((function(e){return e[i||"value"]})).join(o||","):r?s?d.map((function(e){return e[i||"value"]})):d[0]&&d[0][i||"value"]||"":s?d:d[0],l(u)},t.prototype.handleKeyDown=function(e){var t=this.props.selectedOptions;" "===e.key?(this.open(),e.preventDefault()):t.length&&"Backspace"==e.key&&this.removeItem(t.length-1)},t.prototype.handleFocus=function(){this.setState({isFocused:!0})},t.prototype.handleBlur=function(){this.setState({isFocused:!1})},t.prototype.handleClick=function(){this.input.current&&this.input.current.focus()},t.prototype.clearValue=function(){var e=this.props,t=e.onChange,a=e.resetValue;t(void 0!==a?a:"")},t.prototype.renderValues=function(){var e=this,t=this.props,a=t.classPrefix,n=t.selectedOptions,o=t.labelField,l=t.labelTpl,s=t.translate,u=t.disabled;return r.default.createElement("div",{className:"".concat(a,"Picker-values")},n.map((function(t,n){return r.default.createElement("div",{key:n,className:(0,i.default)("".concat(a,"Picker-value"),{"is-disabled":u})},r.default.createElement("span",{"data-tooltip":s("delete"),"data-position":"bottom",className:"".concat(a,"Picker-valueIcon"),onClick:e.removeItem.bind(e,n)},"×"),r.default.createElement("span",{className:"".concat(a,"Picker-valueLabel")},l?r.default.createElement(c.default,{html:(0,p.filter)(l,t)}):"".concat((0,d.getVariable)(t,o||"label")||(0,d.getVariable)(t,"id"))))})))},t.prototype.renderBody=function(e){var t=void 0===e?{}:e,a=t.popOverContainer,n=this.props,r=n.render,o=n.selectedOptions,i=n.options,l=n.multiple,s=n.valueField,d=n.embed,u=n.source;return r("modal-body",this.state.schema,{value:o,valueField:s,primaryField:s,options:u?[]:i,multiple:l,onSelect:d?this.handleChange:void 0,ref:this.crudRef,popOverContainer:a})},t.prototype.render=function(){var e=this.props,t=e.className,a=e.classnames,n=e.disabled,o=e.render,i=e.modalMode,l=e.source,s=e.size,u=(e.env,e.clearable),c=e.multiple,p=e.placeholder,m=e.embed,f=(e.value,e.selectedOptions),v=e.translate,_=e.popOverContainer;return r.default.createElement("div",{className:a("PickerControl",t)},m?r.default.createElement("div",{className:a("Picker")},this.renderBody({popOverContainer:_})):r.default.createElement("div",{className:a("Picker",{"Picker--single":!c,"Picker--multi":c,"is-focused":this.state.isFocused,"is-disabled":n})},r.default.createElement("div",{onClick:this.handleClick,className:a("Picker-input")},!f.length&&p?r.default.createElement("div",{className:a("Picker-placeholder")},v(p)):null,r.default.createElement("div",{className:a("Picker-valueWrap")},this.renderValues(),r.default.createElement("input",{onChange:d.noop,value:"",ref:this.input,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur})),u&&!n&&f.length?r.default.createElement("a",{onClick:this.clearValue,className:a("Picker-clear")},r.default.createElement(h.Icon,{icon:"input-clear",className:"icon"})):null,r.default.createElement("span",{onClick:this.open,className:a("Picker-btn")},r.default.createElement(h.Icon,{icon:"window-restore",className:"icon"}))),o("modal",{title:v("Select.placeholder"),size:s,type:i,body:{children:this.renderBody}},{key:"modal",lazyRender:!!l,onConfirm:this.handleModalConfirm,onClose:this.close,show:this.state.isOpened})))},t.propsList=["modalMode","pickerSchema","labelField","onChange","options","value","inline","multiple","embed","resetValue","placeholder","onQuery"],t.defaultProps={modalMode:"dialog",multiple:!1,placeholder:"Picker.placeholder",labelField:"label",valueField:"value",pickerSchema:{mode:"list",listItem:{title:"${label|raw}"}},embed:!1},(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"crudRef",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"open",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"close",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof Array&&Array)?a:Object,"function"===typeof(o="undefined"!==typeof l.Action&&l.Action)?o:Object,Object,"function"===typeof(v="undefined"!==typeof Array&&Array)?v:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleModalConfirm",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(_="undefined"!==typeof Array&&Array)?_:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleChange",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(g="undefined"!==typeof r.default&&r.default.KeyboardEvent)?g:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleKeyDown",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleFocus",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleBlur",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleClick",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"clearValue",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"renderBody",null),t}(r.default.PureComponent);t.default=v;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.OptionsControl)({type:"picker",autoLoadOptionsFromSource:!1,sizeMutable:!1})],t),t}(v);t.PickerControlRenderer=_},"48e1":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserSelectControlRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=(0,n.__importDefault)(a("c0a1")),i=a("d55b"),l=(0,n.__importDefault)(a("4066")),s=(0,n.__importDefault)(a("0723")),d=a("7f82"),u=(0,n.__importDefault)(a("2769")),c=a("d369"),p=a("2029"),h=function(e){function t(t){return e.call(this,t)||this}var a,i,h,m;return(0,n.__extends)(t,e),t.prototype.componentWillUnmount=function(){this.unHook&&this.unHook()},t.prototype.onSearch=function(e,t,a){return(0,n.__awaiter)(this,void 0,void 0,(function(){var r,o,i,l,s,u,c,p,h,m;return(0,n.__generator)(this,(function(f){switch(f.label){case 0:if(r=this.props,o=r.searchApi,i=r.setLoading,l=r.env,o=(null===a||void 0===a?void 0:a.searchApi)||o,s=(null===a||void 0===a?void 0:a.searchTerm)||this.props.searchTerm||"term",u=(null===a||void 0===a?void 0:a.searchParam)||this.props.searchParam||{},c=(0,n.__assign)((m={},m[s]=e,m),u),!(0,d.isEffectiveApi)(o,c))return[2,Promise.resolve([])];i(!0),f.label=1;case 1:return f.trys.push([1,,3,4]),[4,l.fetcher(o,c,{cancelExecutor:t,autoAppend:!0})];case 2:return p=f.sent(),h=p.data&&p.data.options||p.data||[],[2,h];case 3:return i(!1),[7];case 4:return[2]}}))}))},t.prototype.deferLoad=function(e,t,a){return(0,n.__awaiter)(this,void 0,void 0,(function(){var r,o,i,l,s,u,p;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:if(r=this.props,o=r.env,i=r.deferApi,l=r.setLoading,r.formInited,r.addHook,i=(null===a||void 0===a?void 0:a.deferApi)||i,!o||!o.fetcher)throw new Error("fetcher is required");if(s=(0,c.createObject)(e,{}),!(0,d.isEffectiveApi)(i,s))return[2,Promise.resolve([])];n.label=1;case 1:return n.trys.push([1,,3,4]),[4,o.fetcher(i,s)];case 2:return u=n.sent(),p=u.data&&u.data.options||u.data||[],t&&p.forEach((function(e){e.isRef=!0})),[2,p];case 3:return l(!1),[7];case 4:return[2]}}))}))},t.prototype.changeValue=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i,l,s,d,p,h,m,f,v;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.joinValues,r=t.extractValue,o=t.delimiter,i=t.multiple,l=t.valueField,s=t.onChange,d=t.options,t.setOptions,p=t.data,h=t.dispatchEvent,m=e,f=[],(Array.isArray(e)?e:e?[e]:[]).forEach((function(e){var t=(0,u.default)(d,(function(t){return t[l||"value"]==e[l||"value"]}));t||f.push(e)})),a?m=i?Array.isArray(e)?e.map((function(e){return e[l||"value"]})).join(o):e?e[l||"value"]:"":m?m[l||"value"]:"":r&&(m=i?Array.isArray(e)?e.map((function(e){return e[l||"value"]})):e?[e[l||"value"]]:[]:m?m[l||"value"]:""),[4,h("change",(0,c.createObject)(p,{value:m,options:d}))];case 1:return v=n.sent(),(null===v||void 0===v?void 0:v.prevented)?[2]:(s(m),[2])}}))}))},t.prototype.render=function(){var e=this,t=this.props,a=t.showNav,n=t.navTitle,i=t.searchable,d=t.options,u=t.className,c=t.selectedOptions,p=t.tabOptions,h=t.multi,m=t.multiple,f=t.isDep,v=t.isRef,_=t.placeholder,g=t.searchPlaceholder,y=t.tabMode,b=t.data;return null===p||void 0===p||p.forEach((function(t){t.deferLoad=e.deferLoad,t.onChange=e.changeValue,t.onSearch=e.onSearch})),r.default.createElement("div",{className:(0,o.default)("UserSelectControl",u)},y?r.default.createElement(s.default,{selection:c,tabOptions:p,multiple:m,onChange:this.changeValue,onSearch:this.onSearch,deferLoad:this.deferLoad,data:b}):r.default.createElement(l.default,{showNav:a,navTitle:n,selection:c,options:d,multi:h,multiple:m,searchable:i,placeholder:_,searchPlaceholder:g,deferLoad:this.deferLoad,onChange:this.changeValue,onSearch:this.onSearch,isDep:f,isRef:v}))},t.defaultProps={showNav:!0},(0,n.__decorate)([c.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String,"function"===typeof(a="undefined"!==typeof Function&&Function)?a:Object,"function"===typeof(i="undefined"!==typeof p.PlainObject&&p.PlainObject)?i:Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"onSearch",null),(0,n.__decorate)([c.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(h="undefined"!==typeof Object&&Object)?h:Object,Boolean,"function"===typeof(m="undefined"!==typeof p.PlainObject&&p.PlainObject)?m:Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"deferLoad",null),(0,n.__decorate)([c.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"changeValue",null),t}(r.default.Component);t.default=h;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,i.OptionsControl)({type:"users-select"})],t),t}(h);t.UserSelectControlRenderer=m},"4a2a":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("f83d"),i=a("d369"),l=a("2b46"),s=a("7f82"),d=a("7e49"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.IFrameRef=r.default.createRef(),t.state={width:t.props.width||"100%",height:t.props.height||"100%"},t}var a;return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){window.addEventListener("message",this.onMessage)},t.prototype.componentDidUpdate=function(e){var t=this.props.data;t!==e.data?this.postMessage("update",t):this.props.width===e.width&&this.props.height===e.height||this.setState({width:this.props.width||"100%",height:this.props.height||"100%"})},t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.onMessage)},t.prototype.onMessage=function(e){var t,a=this.props,n=a.events,r=a.onAction,o=a.data;if("string"===typeof(null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.type)&&n){var l=e.data.type.split(":"),s=l[0],d=l[1];if("amis"===s&&d)if("resize"===d&&e.data.data)this.setState({width:e.data.data.width||"100%",height:e.data.data.height||"100%"});else{var u=n[d];u&&r(e,u,(0,i.createObject)(o,e.data.data))}}},t.prototype.onLoad=function(){var e=this.props,t=e.src,a=e.data;t&&this.postMessage("init",a)},t.prototype.reload=function(e,t){if(t)return this.receive(t);var a=this.props,n=a.src,r=a.data;n&&(this.IFrameRef.current.src=(0,d.resolveVariableAndFilter)(n,r,"| raw"))},t.prototype.receive=function(e){var t=this.props,a=t.src,n=t.data,r=(0,i.createObject)(n,e);this.postMessage("receive",r),(0,s.isApiOutdated)(a,a,n,r)&&(this.IFrameRef.current.src=(0,d.resolveVariableAndFilter)(a,r,"| raw"))},t.prototype.postMessage=function(e,t){var a,n;null===(n=null===(a=this.IFrameRef.current)||void 0===a?void 0:a.contentWindow)||void 0===n||n.postMessage({type:"amis:".concat(e),data:JSON.parse(JSON.stringify(t))},"*")},t.prototype.render=function(){var e=this.state,t=e.width,a=e.height,o=this.props,i=o.className,l=o.src,s=o.name,u=o.frameBorder,c=o.data,p=o.style,h={};void 0!==t&&(h.width=t),void 0!==a&&(h.height=a),p=(0,n.__assign)((0,n.__assign)({},h),p);var m=l?(0,d.resolveVariableAndFilter)(l,c,"| raw"):void 0;return"string"===typeof m&&m&&!/^(\.\/|\.\.\/|\/|https?\:\/\/|\/\/)/.test(m)?r.default.createElement("p",null,"请填写合法的 iframe 地址"):r.default.createElement("iframe",{name:s,className:i,frameBorder:u,style:p,ref:this.IFrameRef,onLoad:this.onLoad,src:m})},t.propsList=["src","className"],t.defaultProps={className:"",frameBorder:0},(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof MessageEvent&&MessageEvent)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"onMessage",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"onLoad",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"reload",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"receive",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String,Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"postMessage",null),t}(r.default.Component);t.default=u;var c=function(e){function t(t,a){var n=e.call(this,t)||this,r=a;return r.registerComponent(n),n}var a;return(0,n.__extends)(t,e),t.prototype.componentWillUnmount=function(){var e=this.context;e.unRegisterComponent(this)},t.contextType=l.ScopedContext,t=(0,n.__decorate)([(0,o.Renderer)({type:"iframe"}),(0,n.__metadata)("design:paramtypes",[Object,"function"===typeof(a="undefined"!==typeof l.IScopedContext&&l.IScopedContext)?a:Object])],t),t}(u);t.IFrameRenderer=c},"58d2":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("f83d"),i=a("d369"),l=a("7e49"),s=n.__importStar(a("2ab4")),d=(0,n.__importDefault)(a("bc50")),u=a("6662"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.handleClick=function(e){var t=this;return function(a){var n;n=e.link?u.validations.isUrl({},e.link)?{type:"button",actionType:"url",url:e.link,blank:e.blank}:{type:"button",actionType:"link",link:e.link}:e.clickAction,(0,d.default)(a,n,t.props)}},t.prototype.render=function(){var e=this,t=this.props,a=t.itemClassName,o=t.source,d=t.data,u=t.options,c=t.classnames,p=(0,i.getPropValue)(this.props),h=[];return"string"===typeof o&&(0,l.isPureVariable)(o)?h=(0,l.resolveVariableAndFilter)(o,d,"| raw")||void 0:Array.isArray(p)?h=p:Array.isArray(u)&&(h=u),h&&!Array.isArray(h)&&(h=[h]),(null===h||void 0===h?void 0:h.length)?r.default.createElement(s.default,(0,n.__assign)({},this.props),h.map((function(t,n){return r.default.createElement(s.GridNavItem,{key:n,onClick:t.clickAction||t.link?e.handleClick(t):void 0,className:a,text:t.text,icon:t.icon,classnames:c,badge:t.badge?{badge:t.badge,data:d,classnames:c}:void 0})}))):null},(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleClick",null),t=(0,n.__decorate)([(0,o.Renderer)({type:"grid-nav"})],t),t}(r.default.Component);t.default=c},"5d73":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransferRender=t.BaseTransferRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=(0,n.__importDefault)(a("2769")),i=a("d55b"),l=n.__importStar(a("369e")),s=a("d369"),d=(0,n.__importDefault)(a("c6e8")),u=a("79ae"),c=a("7e49"),p=a("739d"),h=a("4bb3"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var a,i,m,f;return(0,n.__extends)(t,e),t.prototype.handleChange=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,o,i,l,d,c,p,h,m,f,v;return(0,n.__generator)(this,(function(_){switch(_.label){case 0:return a=this.props,r=a.onChange,o=a.joinValues,i=a.delimiter,l=a.valueField,d=a.extractValue,c=a.options,p=a.dispatchEvent,h=a.setOptions,m=e,f=c.concat(),Array.isArray(e)?(m=e.map((function(e){var a=(0,s.findTreeIndex)(c,(0,u.optionValueCompare)(e[l||"value"],l||"value"));if(a){if(t){var r=(0,s.getTree)(f,a);f=(0,s.spliceTree)(f,a,1,(0,n.__assign)((0,n.__assign)({},r),e))}}else f.push(e);return o||d?e[l||"value"]:e})),o&&(m=m.join(i||","))):e&&(m=o||d?e[l||"value"]:e),(f.length>c.length||t)&&h(f,!0),[4,p("change",{value:m,options:c})];case 1:return v=_.sent(),(null===v||void 0===v?void 0:v.prevented)?[2]:(r(m),[2])}}))}))},t.prototype.option2value=function(e){return e},t.prototype.handleSearch=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,i,l,d,c,p,h,m,f,v,_;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:if(a=this.props,r=a.searchApi,i=a.options,l=a.labelField,d=a.valueField,c=a.env,p=a.data,h=a.translate,!r)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,c.fetcher(r,(0,s.createObject)(p,{term:e}),{cancelExecutor:t})];case 2:if(m=n.sent(),!m.ok)throw new Error(h(m.msg||"networkError"));if(f=m.data.options||m.data.items||m.data,!Array.isArray(f))throw new Error("CRUD.invalidArray");return[2,f.map((function(e){var t=null,a=e[d||"value"];return Array.isArray(i)&&null!==a&&void 0!==a&&(t=(0,o.default)(i,(0,u.optionValueCompare)(a,d))),t||e}))];case 3:return v=n.sent(),c.isCancel(v)||c.notify("error",v.message),[2,[]];case 4:return[3,6];case 5:return e?(_=(0,s.string2regExp)(e),[2,(0,s.filterTree)(i,(function(e){return!!(Array.isArray(e.children)&&e.children.length||e[d||"value"]&&(_.test(e[l||"label"])||_.test(e[d||"value"])))}),0,!0)]):[2,i];case 6:return[2]}}))}))},t.prototype.handleResultSearch=function(e,t){var a=this.props.valueField,n=(0,s.string2regExp)(e);return n.test(t[a||"value"])},t.prototype.optionItemRender=function(e,t){var a=this.props,n=a.menuTpl,r=a.render,o=a.data;return n?r("item/".concat(t.index),n,{data:(0,s.createObject)((0,s.createObject)(o,t),e)}):p.BaseSelection.itemRender(e,t)},t.prototype.resultItemRender=function(e,t){var a=this.props,n=a.valueTpl,r=a.render,o=a.data;return n?r("value/".concat(t.index),n,{onChange:t.onChange,data:(0,s.createObject)((0,s.createObject)(o,t),e)}):h.ResultList.itemRender(e)},t.prototype.renderCell=function(e,t,a,r){var o=this.props,i=o.render,l=o.data;return i("cell/".concat(a,"/").concat(r),(0,n.__assign)({type:"text"},e),{value:(0,c.resolveVariable)(e.name,t),data:(0,s.createObject)(l,t)})},t.prototype.getRef=function(e){this.tranferRef=e},t.prototype.onSelectAll=function(e){var t=this.props.dispatchEvent;t("selectAll",e)},t.prototype.doAction=function(e,t,a){var n,r=this.props,o=r.resetValue,i=r.onChange;switch(e.actionType){case"clear":null===i||void 0===i||i("");break;case"reset":null===i||void 0===i||i(null!==o&&void 0!==o?o:"");break;case"selectAll":null===(n=this.tranferRef)||void 0===n||n.selectAll();break}},t.prototype.render=function(){var e,t=this.props,a=t.className,n=t.classnames,o=t.selectedOptions,i=t.showArrow,s=t.sortable,u=t.selectMode,c=t.columns,p=t.loading,h=t.searchable,m=t.searchResultMode,f=t.searchResultColumns,v=t.deferLoad,_=t.leftMode,g=t.rightMode,y=t.disabled,b=t.selectTitle,C=t.resultTitle,O=(t.menuTpl,t.searchPlaceholder),F=t.resultListModeFollowSelect,E=void 0!==F&&F,w=t.resultSearchPlaceholder,A=t.resultSearchable,k=void 0!==A&&A,S=this.props,I=S.options,R=S.leftOptions,N=S.leftDefaultValue;return"associated"===u&&I&&I.length&&I[0].leftOptions&&Array.isArray(I[0].children)&&(R=I[0].leftOptions,N=null!==(e=I[0].leftDefaultValue)&&void 0!==e?e:N,I=I[0].children),r.default.createElement("div",{className:n("TransferControl",a)},r.default.createElement(l.default,{value:o,options:I,disabled:y,onChange:this.handleChange,option2value:this.option2value,sortable:s,showArrow:i,selectMode:u,searchResultMode:m,searchResultColumns:f,columns:c,onSearch:h?this.handleSearch:void 0,onDeferLoad:v,leftOptions:R,leftMode:_,rightMode:g,cellRender:this.renderCell,selectTitle:b,resultTitle:C,resultListModeFollowSelect:E,onResultSearch:this.handleResultSearch,searchPlaceholder:O,resultSearchable:k,resultSearchPlaceholder:w,optionItemRender:this.optionItemRender,resultItemRender:this.resultItemRender,onSelectAll:this.onSelectAll,onRef:this.getRef}),r.default.createElement(d.default,{overlay:!0,key:"info",show:p}))},(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleChange",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"option2value",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String,"function"===typeof(a="undefined"!==typeof Function&&Function)?a:Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleSearch",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String,Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleResultSearch",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,"function"===typeof(i="undefined"!==typeof p.ItemRenderStates&&p.ItemRenderStates)?i:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"optionItemRender",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,"function"===typeof(m="undefined"!==typeof h.ItemRenderStates&&h.ItemRenderStates)?m:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"resultItemRender",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object,Number,Number]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"renderCell",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(f="undefined"!==typeof l.Transfer&&l.Transfer)?f:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"getRef",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Array]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"onSelectAll",null),t}(r.default.Component);t.BaseTransferRenderer=m;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t}(m);t.TransferRender=f,t.default=(0,i.OptionsControl)({type:"transfer"})(f)},66939:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UUIDControlRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("d369"),i=a("2ab5"),l=function(e){function t(t){var a=e.call(this,t)||this;return t.value||a.setValue(),a}return(0,n.__extends)(t,e),t.prototype.componentDidUpdate=function(e){e.value||this.setValue()},t.prototype.setValue=function(){var e=this.props,t=(0,o.uuidv4)();e.length&&(t=t.substring(0,e.length)),e.onChange(t)},t.prototype.render=function(){return null},t}(r.default.Component);t.default=l;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,i.FormItem)({type:"uuid",wrap:!1,sizeMutable:!1})],t),t}(l);t.UUIDControlRenderer=s},8273:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabsTransferRenderer=t.BaseTabsTransferRenderer=void 0;var n=a("9ab4"),r=a("d55b"),o=(0,n.__importDefault)(a("7037")),i=(0,n.__importDefault)(a("2769")),l=(0,n.__importDefault)(a("c6e8")),s=a("5d73"),d=(0,n.__importDefault)(a("cadf")),u=a("79ae"),c=a("d369"),p=a("739d"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeKey:0},t}var a,r;return(0,n.__extends)(t,e),t.prototype.onTabChange=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props.dispatchEvent,[4,t("tab-change",{key:e})];case 1:return a=n.sent(),(null===a||void 0===a?void 0:a.prevented)?[2]:(this.setState({activeKey:e}),[2])}}))}))},t.prototype.handleTabSearch=function(e,t,a){return(0,n.__awaiter)(this,void 0,void 0,(function(){var r,o,l,s,d,p,h,m,f,v,_,g;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:if(r=this.props,o=r.options,l=r.labelField,s=r.valueField,d=r.env,p=r.data,h=r.translate,m=t.searchApi,!m)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,d.fetcher(m,(0,c.createObject)(p,{term:e}),{cancelExecutor:a})];case 2:if(f=n.sent(),!f.ok)throw new Error(h(f.msg||"networkError"));if(v=f.data.options||f.data.items||f.data,!Array.isArray(v))throw new Error(h("CRUD.invalidArray"));return[2,v.map((function(e){var t=null,a=e[s||"value"];return Array.isArray(o)&&null!==a&&void 0!==a&&(t=(0,i.default)(o,(0,u.optionValueCompare)(a,s))),t||e}))];case 3:return _=n.sent(),d.isCancel(_)||d.notify("error",_.message),[2,[]];case 4:return[3,6];case 5:return e?(g=(0,c.string2regExp)(e),[2,(0,c.filterTree)(o,(function(e){return!!(Array.isArray(e.children)&&e.children.length||e[s||"value"]&&(g.test(e[l||"label"])||g.test(e[s||"value"])))}),0,!0)]):[2,o];case 6:return[2]}}))}))},t.prototype.handleChange=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,o,i,l,s,d,p,h,m,f,v,_,g;return(0,n.__generator)(this,(function(y){switch(y.label){case 0:return a=this.props,r=a.onChange,o=a.joinValues,i=a.delimiter,l=a.valueField,s=a.extractValue,d=a.options,p=a.dispatchEvent,h=a.setOptions,m=a.translate,f=e,v=d.concat(),_="UN_MATCH_RESULT",Array.isArray(e)?(f=e.map((function(e){var a=(0,c.findTreeIndex)(d,(0,u.optionValueCompare)(e[l||"value"],l||"value"));if(a){if(t){i=(0,c.getTree)(v,a);v=(0,c.spliceTree)(v,a,1,(0,n.__assign)((0,n.__assign)({},i),e))}}else{var r=(0,c.findTreeIndex)(v,(function(e){return e.value===_}));if(r){var i=(0,c.getTree)(v,r);(null===i||void 0===i?void 0:i.children)&&(i.children.push(e),v=(0,c.spliceTree)(v,r,1,(0,n.__assign)((0,n.__assign)({},i),e)))}else v.push({label:m("searchResult"),value:_,visible:!1,children:[e]})}return o||s?e[l||"value"]:e})),o&&(f=f.join(i||","))):e&&(f=o||s?e[l||"value"]:e),(v.length>d.length||t)&&h(v,!0),[4,p("change",{value:f,options:d})];case 1:return g=y.sent(),(null===g||void 0===g?void 0:g.prevented)?[2]:(r(f),[2])}}))}))},(0,n.__decorate)([c.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Number]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"onTabChange",null),(0,n.__decorate)([c.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String,"function"===typeof(a="undefined"!==typeof u.Option&&u.Option)?a:Object,"function"===typeof(r="undefined"!==typeof Function&&Function)?r:Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleTabSearch",null),(0,n.__decorate)([c.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleChange",null),t}(s.BaseTransferRenderer);t.BaseTabsTransferRenderer=h;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var a;return(0,n.__extends)(t,e),t.prototype.optionItemRender=function(e,t){var a=this.props,r=a.menuTpl,o=a.render,i=a.data,l=arguments[2]||{};return r?o("item/".concat(t.index),r,{data:(0,c.createObject)((0,c.createObject)(i,(0,n.__assign)((0,n.__assign)({},t),l)),e)}):p.BaseSelection.itemRender(e,t)},t.prototype.doAction=function(e,t){var a=this.props,n=a.resetValue,r=a.onChange,o=null===t||void 0===t?void 0:t.activeKey;switch(e.actionType){case"clear":null===r||void 0===r||r("");break;case"reset":null===r||void 0===r||r(null!==n&&void 0!==n?n:"");break;case"changeTabKey":this.setState({activeKey:o});break}},t.prototype.render=function(){var e=this.props,t=e.className,a=e.classnames,n=e.options,r=e.selectedOptions,i=e.sortable,s=e.loading,u=e.searchResultMode,c=e.showArrow,p=e.deferLoad,h=e.leftDeferLoad,m=e.disabled,f=e.selectTitle,v=e.resultTitle;return o.default.createElement("div",{className:a("TabsTransferControl",t)},o.default.createElement(d.default,{activeKey:this.state.activeKey,value:r,disabled:m,options:n,onChange:this.handleChange,option2value:this.option2value,sortable:i,searchResultMode:u,onSearch:this.handleTabSearch,showArrow:c,onDeferLoad:p,onLeftDeferLoad:h,selectTitle:f,resultTitle:v,optionItemRender:this.optionItemRender,resultItemRender:this.resultItemRender,onTabChange:this.onTabChange}),o.default.createElement(l.default,{overlay:!0,key:"info",show:s}))},(0,n.__decorate)([c.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,"function"===typeof(a="undefined"!==typeof p.ItemRenderStates&&p.ItemRenderStates)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"optionItemRender",null),t=(0,n.__decorate)([(0,r.OptionsControl)({type:"tabs-transfer"})],t),t}(h);t.TabsTransferRenderer=m},"8efc":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaticFieldRenderer=t.StaticControlRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("2ab5"),i=a("8978"),l=(0,n.__importDefault)(a("ea9c")),s=(0,n.__importDefault)(a("b8e3")),d=(0,n.__importDefault)(a("dd59")),u=a("d369"),c=a("3eea"),p=function(e){function t(t){var a=e.call(this,t)||this;return a.handleQuickChange=a.handleQuickChange.bind(a),a}return(0,n.__extends)(t,e),t.prototype.handleQuickChange=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,o,i;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return a=this.props,r=a.onBulkChange,o=a.onAction,i=a.data,t&&t.api?[4,o(null,{actionType:"ajax",api:t.api},(0,u.extendObject)(i,e),!0)]:[3,2];case 1:n.sent(),n.label=2;case 2:return r&&r(e,!0===t),[2]}}))}))},t.prototype.render=function(){var e,t=this.props,a=t.className,o=t.value,i=t.label,l=t.type,s=t.render,d=(t.children,t.data),c=t.classnames,p=t.name,h=t.disabled,f=t.$schema,v=t.defaultValue,_=t.borderMode,g=(0,n.__rest)(t,["className","value","label","type","render","children","data","classnames","name","disabled","$schema","defaultValue","borderMode"]),y=/^static/.test(l)?l.substring(7)||(g.tpl?"tpl":"plain"):l,b=(0,n.__assign)((0,n.__assign)({label:i,name:p},f),{type:y});return r.default.createElement("div",{className:c("Form-static",(e={},e["Form-static--border".concat((0,u.ucFirst)(_))]=_,e))},r.default.createElement(m,(0,n.__assign)({},(0,n.__assign)((0,n.__assign)({},g),{name:p,render:s,field:b,value:o===v?void 0:o,className:a,onQuickChange:this.handleQuickChange,data:d,disabled:h,classnames:c}))))},t.defaultProps={placeholder:"-"},t}(r.default.Component);t.default=p;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.FormItem)({test:/(^|\/)static(\-[^\/]+)?$/,weight:-90,strictMode:!1,sizeMutable:!1,name:"static"})],t),t}(p);t.StaticControlRenderer=h;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=(e.type,e.className),a=e.render,o=e.style,i=e.wrapperComponent,l=(e.labelClassName,e.value),s=e.data,d=e.children,u=e.width,p=e.inputClassName,h=(e.label,e.tabIndex),m=e.onKeyUp,f=e.field,v=(0,n.__rest)(e,["type","className","render","style","wrapperComponent","labelClassName","value","data","children","width","inputClassName","label","tabIndex","onKeyUp","field"]),_=(0,n.__assign)((0,n.__assign)({},f),{className:p,type:f&&f.type||"plain"}),g=d||a("field",_,(0,n.__assign)((0,n.__assign)({},c(v,Object.keys(_))),{value:l,data:s}));return u&&(o=o||{},o.width=o.width||u),i?r.default.createElement(i,{style:o,className:t,tabIndex:h,onKeyUp:m},g):g},t.defaultProps=(0,n.__assign)((0,n.__assign)({},i.TableCell.defaultProps),{wrapperComponent:"div"}),t=(0,n.__decorate)([(0,s.default)(),(0,l.default)({position:"right"}),(0,d.default)()],t),t}(i.TableCell);t.StaticFieldRenderer=m},"9b7c":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadiosControlRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=(0,n.__importDefault)(a("c0a1")),i=(0,n.__importDefault)(a("02245")),l=a("d55b"),s=a("d369"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var a;return(0,n.__extends)(t,e),t.prototype.doAction=function(e,t,a){var n=this.props,r=n.resetValue,o=n.onChange,i=null===e||void 0===e?void 0:e.actionType;"clear"===i?null===o||void 0===o||o(""):"reset"===i&&(null===o||void 0===o||o(null!==r&&void 0!==r?r:""))},t.prototype.handleChange=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i,l,d,u,c;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.joinValues,r=t.extractValue,o=t.valueField,i=t.onChange,l=t.dispatchEvent,d=t.options,u=t.data,e&&(a||r)&&(e=e[o||"value"]),[4,l("change",(0,s.createObject)(u,{value:e,options:d}))];case 1:return c=n.sent(),(null===c||void 0===c?void 0:c.prevented)?[2]:(i&&i(e),[2])}}))}))},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.render=function(){var e=this.props,t=e.className,a=e.classPrefix,n=e.value,l=(e.onChange,e.disabled),s=e.joinValues,d=e.extractValue,u=e.delimiter,c=e.placeholder,p=e.options,h=e.inline,m=void 0===h||h,f=e.formMode,v=e.columnsCount,_=e.classPrefix,g=e.itemClassName,y=e.labelClassName,b=e.labelField,C=e.valueField,O=e.translate,F=e.optionType,E=e.level;return r.default.createElement(i.default,{inline:m||"inline"===f,className:(0,o.default)("".concat(a,"RadiosControl"),t),value:"undefined"===typeof n||null===n?"":n,disabled:l,onChange:this.handleChange,joinValues:s,extractValue:d,delimiter:u,labelClassName:y,labelField:b,valueField:C,placeholder:O(c),options:p,columnsCount:v,classPrefix:_,itemClassName:g,optionType:F,level:E})},t.defaultProps={columnsCount:1},(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof l.Option&&l.Option)?a:Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleChange",null),t}(r.default.Component);t.default=d;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.defaultProps={multiple:!1,inline:!0},t=(0,n.__decorate)([(0,l.OptionsControl)({type:"radios",sizeMutable:!1})],t),t}(d);t.RadiosControlRenderer=u},a4b3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationRenderer=t.LocationControl=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=(0,n.__importDefault)(a("2ab5")),i=(0,n.__importDefault)(a("9834a")),l=a("a97c"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){return r.default.createElement("div",{className:this.props.classnames("LocationControl")},r.default.createElement(i.default,(0,n.__assign)({},this.props,{ak:(0,l.filter)(this.props.ak,this.props.data)})))},t.defaultProps={vendor:"baidu",coordinatesType:"bd09"},t}(r.default.Component);t.LocationControl=s;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.default)({type:"location-picker"})],t),t}(s);t.LocationRenderer=d},b35b:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListControlRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("d55b"),i=a("d369"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.doAction=function(e,t,a){var n=this.props,r=n.resetValue,o=n.onChange,i=null===e||void 0===e?void 0:e.actionType;"clear"===i?null===o||void 0===o||o(""):"reset"===i&&(null===o||void 0===o||o(null!==r&&void 0!==r?r:""))},t.prototype.handleDBClick=function(e,t){this.props.onToggle(e,!1,!0),this.props.onAction(null,{type:"submit"})},t.prototype.handleClick=function(e,t){if(!t.target||!t.target.closest("a,button")){var a=this.props.onToggle;a(e)}},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.render=function(){var e=this,t=this.props,a=t.render,n=t.itemClassName,o=t.classnames,l=t.className,s=t.disabled,d=t.options,u=t.placeholder,c=t.selectedOptions,p=t.imageClassName,h=t.submitOnDBClick,m=t.itemSchema,f=t.data,v=t.labelField,_=t.listClassName,g=t.translate,y=null;return d&&d.length&&(y=r.default.createElement("div",{className:o("ListControl-items",_)},d.map((function(t,l){return r.default.createElement("div",{key:l,className:o("ListControl-item",n,{"is-active":~c.indexOf(t),"is-disabled":t.disabled||s}),onClick:e.handleClick.bind(e,t),onDoubleClick:h?e.handleDBClick.bind(e,t):void 0},m?a("".concat(l,"/body"),m,{data:(0,i.createObject)(f,t)}):t.body?a("".concat(l,"/body"),t.body):[t.image?r.default.createElement("div",{key:"image",className:o("ListControl-itemImage",p)},r.default.createElement("img",{src:t.image,alt:t[v||"label"]})):null,t[v||"label"]?r.default.createElement("div",{key:"label",className:o("ListControl-itemLabel")},String(t[v||"label"])):null])})))),r.default.createElement("div",{className:o("ListControl",l)},y||r.default.createElement("span",{className:o("ListControl-placeholder")},g(u)))},t.propsList=["itemSchema","value","renderFormItems"],t.defaultProps={clearable:!1,imageClassName:"",submitOnDBClick:!1},t}(r.default.Component);t.default=l;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.OptionsControl)({type:"list-select",sizeMutable:!1})],t),t}(l);t.ListControlRenderer=s},b3fe:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImagesFieldRenderer=t.ImagesField=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("f83d"),i=a("a97c"),l=a("7e49"),s=n.__importStar(a("14aa")),d=a("d369"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=[],t}var a;return(0,n.__extends)(t,e),t.prototype.handleEnlarge=function(e){var t=this.props,a=t.onImageEnlarge,r=t.src,o=t.originalSrc;a&&a((0,n.__assign)((0,n.__assign)({},e),{originalSrc:e.originalSrc||e.src,list:this.list.map((function(e){return{src:r?(0,i.filter)(r,e,"| raw"):e&&e.image||e,originalSrc:o?(0,i.filter)(o,e,"| raw"):(null===e||void 0===e?void 0:e.src)||(0,i.filter)(r,e,"| raw")||(null===e||void 0===e?void 0:e.image)||e,title:e&&(e.enlargeTitle||e.title),caption:e&&(e.enlargeCaption||e.description||e.caption)}}))}),this.props)},t.prototype.render=function(){var e,t,a=this,n=this.props,o=n.className,u=n.defaultImage,c=n.thumbMode,p=n.thumbRatio,h=n.data,m=(n.name,n.placeholder),f=n.classnames,v=n.source,_=n.delimiter,g=n.enlargeAble,y=n.src,b=n.originalSrc,C=n.listClassName,O=n.options;return"string"===typeof v&&(0,l.isPureVariable)(v)?t=(0,l.resolveVariableAndFilter)(v,h,"| raw")||void 0:Array.isArray(e=(0,d.getPropValue)(this.props))||"string"===typeof e?t=e:Array.isArray(O)&&(t=O),"string"===typeof t?t=t.split(_):t&&!Array.isArray(t)&&(t=[t]),this.list=t,r.default.createElement("div",{className:f("ImagesField",o)},Array.isArray(t)?r.default.createElement("div",{className:f("Images",C)},t.map((function(e,t){return r.default.createElement(s.default,{index:t,className:f("Images-item"),key:t,src:(y?(0,i.filter)(y,e,"| raw"):e&&e.image)||e,originalSrc:(b?(0,i.filter)(b,e,"| raw"):e&&e.src)||e,title:e&&e.title,caption:e&&(e.description||e.caption),thumbMode:c,thumbRatio:p,enlargeAble:g,onEnlarge:a.handleEnlarge})}))):u?r.default.createElement("div",{className:f("Images",C)},r.default.createElement(s.default,{className:f("Images-item"),src:u,thumbMode:c,thumbRatio:p})):m)},t.defaultProps={className:"",delimiter:",",defaultImage:s.imagePlaceholder,placehoder:"-",thumbMode:"contain",thumbRatio:"1:1"},(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof s.ImageThumbProps&&s.ImageThumbProps)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleEnlarge",null),t}(r.default.Component);t.ImagesField=u;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"images"})],t),t}(u);t.ImagesFieldRenderer=c},c876:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HBoxRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("f83d"),i=a("d369"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.renderChild=function(e,t,a){void 0===a&&(a={});var n=this.props.render;return n(e,t,a)},t.prototype.renderColumn=function(e,t,a){var o,l=this.props,s=l.itemRender,d=l.data,u=l.classnames,c=l.subFormMode,p=l.subFormHorizontal,h=l.formMode,m=l.formHorizontal;if(!(0,i.isVisible)(e,d)||!e)return null;var f=(0,n.__assign)({width:e.width,height:e.height},e.style);return r.default.createElement("div",{key:t,className:u("Hbox-col","auto"===f.width?"Hbox-col--auto":f.width?"Hbox-col--customWidth":"",(o={},o["Hbox-col--v".concat((0,i.ucFirst)(e.valign))]=e.valign,o),e.columnClassName),style:f},s?s(e,t,a,this.props):this.renderChild("column/".concat(t),e.body,{formMode:e.mode||c||h,formHorizontal:e.horizontal||p||m}))},t.prototype.renderColumns=function(){var e=this,t=this.props.columns;return t.map((function(a,n){return e.renderColumn(a,n,t.length)}))},t.prototype.render=function(){var e,t=this.props,a=t.className,n=t.classnames,o=t.gap,l=t.valign,s=t.align;return r.default.createElement("div",{className:n("Hbox",a,(e={},e["Hbox--".concat(o)]=o,e["Hbox--v".concat((0,i.ucFirst)(l))]=l,e["Hbox--h".concat((0,i.ucFirst)(s))]=s,e))},this.renderColumns())},t.propsList=["columns"],t.defaultProps={gap:"xs"},t}(r.default.Component);t.default=l;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"hbox"})],t),t}(l);t.HBoxRenderer=s},d151c:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONSchemaRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("2ab5"),i=(0,n.__importDefault)(a("3e73")),l=a("1930"),s=(0,l.withRemoteConfig)({sourceField:"schema",injectedPropsFilter:function(e,t){return{schema:e.config,loading:e.loading}}})(i.default),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=(0,n.__rest)(this.props,[]);return r.default.createElement(s,(0,n.__assign)({},e))},t}(r.default.PureComponent);t.default=d;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.FormItem)({type:"json-schema",strictMode:!1})],t),t}(d);t.JSONSchemaRenderer=u},d55b:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlight=t.OptionsControl=t.registerOptionsControl=t.detectProps=t.Option=void 0;var n=a("9ab4"),r=a("7f82"),o=a("f7d3"),i=a("d369"),l=a("daf9"),s=a("2ab5"),d=(0,n.__importDefault)(a("7037")),u=a("7e49"),c=a("79ae");Object.defineProperty(t,"Option",{enumerable:!0,get:function(){return c.Option}});var p=a("a97c"),h=(0,n.__importDefault)(a("51f5")),m=(0,n.__importDefault)(a("60ed")),f=(0,n.__importDefault)(a("4245"));function v(e){var a=e.component,v=function(s){function v(t){var a,n=s.call(this,t)||this;n.toDispose=[],n.mounted=!1;var r=t.initFetch,o=t.formItem,i=t.source,d=t.data,u=t.setPrinstineValue,p=t.defaultValue,h=t.multiple,m=t.joinValues,f=t.extractValue,v=t.addHook,_=t.formInited,g=t.valueField,y=t.options,b=t.value,C=t.defaultCheckAll;o&&(o.setOptions((0,c.normalizeOptions)(y,void 0,g),n.changeOptionValue,d),n.toDispose.push((0,l.reaction)((function(){return JSON.stringify([o.loading,o.filteredOptions])}),(function(){return n.mounted&&n.forceUpdate()}))),n.toDispose.push((0,l.reaction)((function(){return JSON.stringify(o.options)}),(function(){return n.mounted&&n.syncAutoFill(o.tmpValue)}))),h&&C&&(null===(a=o.filteredOptions)||void 0===a?void 0:a.length)&&!i&&n.defaultCheckAll());var O=!1!==r;if(o&&!1===m&&p){var F=f?o.getSelectedOptions(b).map((function(e){return e[g||"value"]})):o.getSelectedOptions(b);u(h?F.concat():F[0])}return O&&!1!==e.autoLoadOptionsFromSource&&(_||!v?n.reload():v&&v(n.initOptions,"init")),n}var _,g,y,b,C;return(0,n.__extends)(v,s),v.prototype.componentDidMount=function(){this.mounted=!0,this.normalizeValue(),this.props.value&&this.syncAutoFill(this.props.value)},v.prototype.shouldComponentUpdate=function(a){var n;return!1===e.strictMode||!1===a.strictMode||(!(!a.source&&!a.autoComplete)||(!!(null===(n=a.formItem)||void 0===n?void 0:n.expressionsInOptions)||!!(0,i.anyChanged)(t.detectProps,this.props,a)))},v.prototype.componentDidUpdate=function(t){var a=this,n=this.props,o=n.formItem;if(t.options!==n.options&&o)o.setOptions((0,c.normalizeOptions)(n.options||[],void 0,n.valueField),this.changeOptionValue,n.data),this.normalizeValue();else if(!1!==e.autoLoadOptionsFromSource&&(n.formInited||"undefined"===typeof n.formInited)&&n.source&&o&&(t.source!==n.source||t.data!==n.data))if((0,u.isPureVariable)(n.source)){var i=(0,u.resolveVariableAndFilter)(t.source,t.data,"| raw"),l=(0,u.resolveVariableAndFilter)(n.source,n.data,"| raw");i!==l&&(o.setOptions((0,c.normalizeOptions)(l||[],void 0,n.valueField||"value"),this.changeOptionValue,n.data),this.normalizeValue())}else(0,r.isEffectiveApi)(n.source,n.data)&&(0,r.isApiOutdated)(t.source,n.source,t.data,n.data)&&o.loadOptions(n.source,n.data,void 0,!0,this.changeOptionValue).then((function(){return a.normalizeValue()}));(t.value!==n.value||(null===o||void 0===o?void 0:o.expressionsInOptions))&&(o.syncOptions(void 0,n.data),this.syncAutoFill(n.value))},v.prototype.componentWillUnmount=function(){var e,t;null===(t=(e=this.props).removeHook)||void 0===t||t.call(e,this.reload,"init"),this.toDispose.forEach((function(e){return e()})),this.toDispose=[]},v.prototype.dispatchOptionEvent=function(e,t){return void 0===t&&(t=""),(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,o,l,s;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return a=this.props,r=a.dispatchEvent,o=a.options,l=a.data,[4,r(e,(0,i.createObject)(l,{value:t,options:o}))];case 1:return s=n.sent(),[2,!!(null===s||void 0===s?void 0:s.prevented)]}}))}))},v.prototype.doAction=function(e,t,a){var n=this.props,r=n.resetValue,o=n.onChange,i=null===e||void 0===e?void 0:e.actionType;"clear"===i?null===o||void 0===o||o(""):"reset"===i&&(null===o||void 0===o||o(null!==r&&void 0!==r?r:""))},v.prototype.syncAutoFill=function(e){var t=this.props,a=t.autoFill,r=t.multiple,o=t.onBulkChange,l=t.data,s=this.props.formItem;if(o&&a&&!(0,i.isEmpty)(a)&&s.filteredOptions.length){var d=s.getSelectedOptions(e),c=(0,u.dataMapping)(a,r?{items:d.map((function(e){return(0,i.createObject)((0,n.__assign)((0,n.__assign)({},l),{ancestors:(0,i.getTreeAncestors)(s.filteredOptions,e,!0)}),e)}))}:(0,i.createObject)((0,n.__assign)((0,n.__assign)({},l),{ancestors:(0,i.getTreeAncestors)(s.filteredOptions,d[0],!0)}),d[0]));Object.keys(c).forEach((function(e){(0,m.default)(c[e])&&(0,m.default)(l[e])&&(c[e]=(0,f.default)({},l[e],c[e]))})),o(c)}},v.prototype.normalizeValue=function(){var e=this.props,t=e.joinValues,a=e.extractValue,n=e.value,r=e.multiple,o=e.formItem,i=e.valueField,l=(e.enableNodePath,e.pathSeparator,e.onChange);if(o&&!1===t&&o.options.length)if(!1!==a||"string"!==typeof n&&"number"!==typeof n){if(!0===a&&n&&!(Array.isArray(n)&&n.every((function(e){return"string"===typeof e||"number"===typeof e}))||"string"===typeof n||"number"===typeof n)){s=o.getSelectedOptions(n).map((function(e){return e[i||"value"]}));null===l||void 0===l||l(r?s.concat():s[0])}}else{var s=o.getSelectedOptions(n);null===l||void 0===l||l(r?s.concat():s[0])}},v.prototype.getWrappedInstance=function(){return this.input},v.prototype.inputRef=function(e){this.input=e},v.prototype.handleToggle=function(e,t,a){return(0,n.__awaiter)(this,void 0,void 0,(function(){var r,o,i,l,s,d;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return r=this.props,o=r.onChange,i=r.formItem,l=r.value,i?(s=this.toggleValue(e,l),[4,this.dispatchOptionEvent("change",s)]):[2];case 1:return d=n.sent(),d||o&&o(s,t,a),[2]}}))}))},v.prototype.defaultCheckAll=function(){var e=this.props,t=e.value,a=e.formItem,n=e.setPrinstineValue;if(a&&!a.getSelectedOptions(t).length){var r=a.filteredOptions.concat(),o=this.formatValueArray(r);null===n||void 0===n||n(o)}},v.prototype.formatValueArray=function(e){var t=this.props,a=t.joinValues,n=t.extractValue,r=t.valueField,o=t.delimiter,l=t.resetValue,s=t.multiple,d="";return s?(d=(0,i.getTreeDepth)(e)>1?(0,i.flattenTree)(e):e,a?d=d.map((function(e){return e[r||"value"]})).filter((function(e){return null!=e})).join(o):n&&(d=d.map((function(e){return e[r||"value"]})).filter((function(e){return null!=e})))):(d=e[0]||l,a&&d&&(d=d[r||"value"])),d},v.prototype.handleToggleAll=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e,t,a,r,o,l,s,d,u,c;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return e=this.props,t=e.value,a=e.onChange,r=e.formItem,o=e.valueField,r?(l=r.getSelectedOptions(t),s=(0,i.flattenTree)(r.filteredOptions.concat()).filter((function(e){return null!=e&&null!=e[o||"value"]})),d=l.length===s.length?[]:r.filteredOptions.concat(),u=this.formatValueArray(d),[4,this.dispatchOptionEvent("change",u)]):[2];case 1:return c=n.sent(),c||a&&a(u),[2]}}))}))},v.prototype.toggleValue=function(e,t){var a=this.props,n=a.joinValues,r=a.extractValue,o=a.valueField,i=a.delimiter,l=a.clearable,s=a.resetValue,d=a.multiple,u=a.formItem,p=void 0!==t?u.getSelectedOptions(t).concat():[],m=(0,h.default)(p,(0,c.optionValueCompare)(e[o||"value"],o||"value")),f="";return d?(~m?p.splice(m,1):p.push(e),f=p,n?f=f.map((function(e){return e[o||"value"]})).join(i):r&&(f=f.map((function(e){return e[o||"value"]})))):(~m&&l?p.splice(m,1):p=[e],f=p[0]||s,(n||r)&&f&&(f=f[o||"value"])),f},v.prototype.reload=function(){return this.reloadOptions()},v.prototype.reloadOptions=function(e,t){void 0===t&&(t=!1);var a=this.props,n=a.source,i=a.formItem,l=a.data,s=a.onChange,d=a.setPrinstineValue,p=a.valueField;if(i&&(0,u.isPureVariable)(n))(0,o.isAlive)(i)&&i.setOptions((0,c.normalizeOptions)((0,u.resolveVariableAndFilter)(n,l,"| raw")||[],void 0,p),this.changeOptionValue,l);else if(i&&(0,r.isEffectiveApi)(n,l))return i.loadOptions(n,l,void 0,!1,t?d:s,e)},v.prototype.deferLoad=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,l,s,d,u;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.deferApi,r=t.source,o=t.env,l=t.formItem,s=t.data,d=e.deferApi||a||r,d?[4,null===l||void 0===l?void 0:l.deferLoadOptions(e,d,(0,i.createObject)(s,e))]:(o.notify("error","请在选项中设置 `deferApi` 或者表单项中设置 `deferApi`，用来加载子选项。"),[2]);case 1:return u=n.sent(),this.dispatchOptionEvent("loadFinished",u),[2]}}))}))},v.prototype.leftDeferLoad=function(e,t){var a=this.props,n=a.deferApi,r=a.source,o=a.env,l=a.formItem,s=a.data,d=e.deferApi||n||r;d?null===l||void 0===l||l.deferLoadLeftOptions(e,t,d,(0,i.createObject)(s,e)):o.notify("error","请在选项中设置 `deferApi` 或者表单项中设置 `deferApi`，用来加载子选项。")},v.prototype.expandTreeOptions=function(e){var t=this.props,a=t.deferApi,n=t.source,r=t.env,o=t.formItem,l=t.data,s=a||n;s?null===o||void 0===o||o.expandTreeOptions(e,s,(0,i.createObject)(l)):r.notify("error","请在选项中设置 `deferApi` 或者表单项中设置 `deferApi`，用来加载子选项。")},v.prototype.initOptions=function(e){var t;return(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,l,s,d;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.reloadOptions(!1,!0)];case 1:return n.sent(),a=this.props,r=a.formItem,l=a.name,s=a.multiple,d=a.defaultCheckAll,r?((0,o.isAlive)(r)&&r.value&&(0,i.setVariable)(e,l,r.value),s&&d&&(null===(t=r.filteredOptions)||void 0===t?void 0:t.length)&&this.defaultCheckAll(),[2]):[2]}}))}))},v.prototype.focus=function(){this.input&&this.input.focus&&this.input.focus()},v.prototype.changeOptionValue=function(e){var t=this.props,a=t.onChange,n=t.formInited,r=t.setPrinstineValue,o=t.value;!1===n?void 0===o&&(null===r||void 0===r||r(e)):null===a||void 0===a||a(e)},v.prototype.setOptions=function(e,t){void 0===t&&(t=!1);var a=this.props.formItem;a&&a.setOptions(t?e:(0,c.normalizeOptions)(e||[],void 0,this.props.valueField),this.changeOptionValue,this.props.data)},v.prototype.syncOptions=function(){var e=this.props.formItem;e&&e.syncOptions(void 0,this.props.data)},v.prototype.setLoading=function(e){var t=this.props.formItem;t&&t.setLoading(e)},v.prototype.handleOptionAdd=function(e,t,a){return void 0===e&&(e=-1),void 0===a&&(a=!1),(0,n.__awaiter)(this,void 0,void 0,(function(){var r,o,l,s,d,u,c,p,h,m,f,v,_,g,y,b,C,O,F,E,w,A,k;return(0,n.__generator)(this,(function(S){switch(S.label){case 0:return r=this.props,o=r.addControls,l=r.disabled,s=r.labelField,d=r.onOpenDialog,u=r.optionLabel,c=r.addApi,p=r.source,h=r.data,m=r.valueField,f=r.formItem,v=r.createBtnLabel,_=r.env,g=r.translate,l||!f?[2]:(a||Array.isArray(o)&&o.length||(o=[{type:"text",name:s||"label",label:!1,placeholder:g("Options.addPlaceholder")}]),y=Array.isArray(e)?(0,i.getTree)(f.options,e.slice(0,-1)):void 0,b=(0,i.createObject)(h,Array.isArray(e)?(0,n.__assign)({parent:y},t):t),a?(O=b,[3,3]):[3,1]);case 1:return[4,d({type:"dialog",title:v||"新增".concat(u||"选项"),body:{type:"form",api:c,controls:(0,n.__spreadArray)([{type:"hidden",name:"idx",value:e},{type:"hidden",name:"parent",value:y}],o||[],!0)}},b)];case 2:O=S.sent(),S.label=3;case 3:if(C=O,!a||!c)return[3,7];S.label=4;case 4:return S.trys.push([4,6,,7]),[4,_.fetcher(c,C,{method:"post"})];case 5:return F=S.sent(),F.ok?C=F.data||C:(_.notify("error",F.msg||g("Options.createFailed")),C=null),[3,7];case 6:return E=S.sent(),C=null,console.error(E),_.notify("error",E.message),[3,7];case 7:return C?(C.hasOwnProperty(m||"value")||(C=(0,n.__assign)((0,n.__assign)({},C),(k={},k[m||"value"]=C[s||"label"],k))),[4,this.dispatchOptionEvent("add",(0,n.__assign)((0,n.__assign)({},C),{idx:e}))]):[2];case 8:return w=S.sent(),w?[2]:(null===y||void 0===y?void 0:y.defer)?[4,this.deferLoad(y)]:[3,10];case 9:return S.sent(),[3,11];case 10:p&&c?this.reload():(A=f.options.concat(),Array.isArray(e)?A=(0,i.spliceTree)(A,e,0,(0,n.__assign)({},C)):~e?A.splice(e,0,(0,n.__assign)({},C)):A.push((0,n.__assign)({},C)),f.setOptions(A,this.changeOptionValue,h)),S.label=11;case 11:return[2]}}))}))},v.prototype.handleOptionEdit=function(e,t,a){return void 0===t&&(t=e),void 0===a&&(a=!1),(0,n.__awaiter)(this,void 0,void 0,(function(){var r,o,l,s,d,u,c,p,h,m,f,v,_,g,y,b,C,O;return(0,n.__generator)(this,(function(F){switch(F.label){case 0:return r=this.props,o=r.editControls,l=r.disabled,s=r.labelField,d=r.onOpenDialog,u=r.editApi,c=r.env,p=r.source,h=r.data,m=r.formItem,f=r.optionLabel,v=r.translate,l||!m?[2]:(a||Array.isArray(o)&&o.length||(o=[{type:"text",name:s||"label",label:!1,placeholder:v("Options.addPlaceholder")}]),a?(g=e,[3,3]):[3,1]);case 1:return[4,d({type:"dialog",title:v("Options.editLabel",{label:f||v("Options.label")}),body:{type:"form",api:u,controls:o}},(0,i.createObject)(h,e))];case 2:g=F.sent(),F.label=3;case 3:if(_=g,!a||!u)return[3,7];F.label=4;case 4:return F.trys.push([4,6,,7]),[4,c.fetcher(u,(0,i.createObject)(h,_),{method:"post"})];case 5:return y=F.sent(),y.ok?_=y.data||_:(c.notify("error",y.msg||v("saveFailed")),_=null),[3,7];case 6:return b=F.sent(),_=null,console.error(b),c.notify("error",b.message),[3,7];case 7:return _?[4,this.dispatchOptionEvent("edit",_)]:[2];case 8:return C=F.sent(),C?[2]:(p&&u?this.reload():(O=(0,i.findTreeIndex)(m.options,(function(e){return e===t})),O&&m.setOptions((0,i.spliceTree)(m.options,O,1,(0,n.__assign)((0,n.__assign)({},t),_)),this.changeOptionValue,h)),[2])}}))}))},v.prototype.handleOptionDelete=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,l,s,d,u,c,h,m,f,v,_,g,y,b,C;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.deleteConfirmText,r=t.disabled,o=t.data,l=t.deleteApi,s=t.env,d=t.formItem,u=t.source,c=t.valueField,h=t.translate,r||!d?[2]:(m=(0,i.createObject)(o,e),a?[4,s.confirm((0,p.filter)(h(a),m))]:[3,2]);case 1:return v=n.sent(),[3,3];case 2:v=!0,n.label=3;case 3:return f=v,f?[4,this.dispatchOptionEvent("delete",m)]:[2];case 4:if(_=n.sent(),_)return[2];n.label=5;case 5:if(n.trys.push([5,7,,8]),!l)throw new Error(h("Options.deleteAPI"));return[4,s.fetcher(l,m,{method:"delete"})];case 6:return g=n.sent(),g.ok?u?this.reload():(y=d.options.concat(),b=(0,i.findTreeIndex)(y,(function(t){return t[c||"value"]==e[c||"value"]})),b&&d.setOptions((0,i.spliceTree)(y,b,1),this.changeOptionValue,o)):s.notify("error",g.msg||h("deleteFailed")),[3,8];case 7:return C=n.sent(),console.error(C),s.notify("error",C.message),[3,8];case 8:return[2]}}))}))},v.prototype.render=function(){var e=this.props,t=e.value,o=e.formItem,l=e.addApi,s=e.editApi,u=e.deleteApi,c=e.creatable,p=e.editable,h=e.removable,m=e.enableNodePath,f=e.pathSeparator,v=e.delimiter,_=void 0===v?",":v,g=e.labelField,y=void 0===g?"label":g,b=e.valueField,C=void 0===b?"value":b,O=(0,i.normalizeNodePath)(t,m,y,C,f,_),F=O.nodePathArray,E=O.nodeValueArray;return d.default.createElement(a,(0,n.__assign)({},this.props,{ref:this.inputRef,options:o?o.filteredOptions:[],onToggle:this.handleToggle,onToggleAll:this.handleToggleAll,selectedOptions:o?o.getSelectedOptions(t,m?E:void 0):[],nodePath:F,loading:!!o&&o.loading,setLoading:this.setLoading,setOptions:this.setOptions,syncOptions:this.syncOptions,reloadOptions:this.reload,deferLoad:this.deferLoad,leftDeferLoad:this.leftDeferLoad,expandTreeOptions:this.expandTreeOptions,creatable:!(!1===c||!(0,r.isEffectiveApi)(l))||c,editable:p||!1!==p&&(0,r.isEffectiveApi)(s),removable:h||!1!==h&&(0,r.isEffectiveApi)(u),onAdd:this.handleOptionAdd,onEdit:this.handleOptionEdit,onDelete:this.handleOptionDelete}))},v.displayName="OptionsControl(".concat(e.type,")"),v.defaultProps=(0,n.__assign)({delimiter:",",labelField:"label",valueField:"value",joinValues:!0,extractValue:!1,multiple:!1,placeholder:"Select.placeholder",resetValue:"",deleteConfirmText:"deleteConfirm"},a.defaultProps),v.propsList=a.propsList?(0,n.__spreadArray)([],a.propsList,!0):[],v.ComposedComponent=a,(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"inputRef",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(_="undefined"!==typeof c.Option&&c.Option)?_:Object,Boolean,Boolean]),(0,n.__metadata)("design:returntype",Promise)],v.prototype,"handleToggle",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",Promise)],v.prototype,"handleToggleAll",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"reload",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Boolean,Object]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"reloadOptions",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(g="undefined"!==typeof c.Option&&c.Option)?g:Object]),(0,n.__metadata)("design:returntype",Promise)],v.prototype,"deferLoad",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(y="undefined"!==typeof c.Option&&c.Option)?y:Object,"function"===typeof(b="undefined"!==typeof c.Option&&c.Option)?b:Object]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"leftDeferLoad",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Array]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"expandTreeOptions",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],v.prototype,"initOptions",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"changeOptionValue",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(C="undefined"!==typeof Array&&Array)?C:Object,Object]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"setOptions",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"syncOptions",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Boolean]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"setLoading",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object,Boolean]),(0,n.__metadata)("design:returntype",Promise)],v.prototype,"handleOptionAdd",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object,Boolean]),(0,n.__metadata)("design:returntype",Promise)],v.prototype,"handleOptionEdit",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],v.prototype,"handleOptionDelete",null),v}(d.default.Component);return(0,s.registerFormItem)((0,n.__assign)((0,n.__assign)({},e),{strictMode:!1,component:v}))}function _(e){return function(t){var a=v((0,n.__assign)((0,n.__assign)({},e),{component:t}));return a.component}}function g(e,t,a){if(void 0===a&&(a="is-matched"),!t)return e;e=String(e);var n=new RegExp(t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),"ig");if(!n.test(e))return e;var r=[],o=0,i=null;n.lastIndex=0;while(i=n.exec(e)){var l=e.substring(o,i.index);l&&r.push(d.default.createElement("span",{key:r.length},l)),i[0]&&r.push(d.default.createElement("span",{className:a,key:r.length},i[0])),o=i.index+i[0].length}var s=e.substring(o);return s&&r.push(d.default.createElement("span",{key:r.length},s)),r}t.detectProps=s.detectProps.concat(["value","options","size","buttons","columnsCount","multiple","hideRoot","checkAll","defaultCheckAll","showIcon","showRadio","btnDisabled","joinValues","extractValue","borderMode","hideSelected"]),t.registerOptionsControl=v,t.OptionsControl=_,t.highlight=g},d82e:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabsTransferPickerRenderer=void 0;var n=a("9ab4"),r=a("d55b"),o=(0,n.__importDefault)(a("7037")),i=(0,n.__importDefault)(a("c6e8")),l=a("8273"),s=(0,n.__importDefault)(a("9390")),d=a("d369"),u=a("739d"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeKey:0},t}var a;return(0,n.__extends)(t,e),t.prototype.dispatchEvent=function(e){var t=this.props,a=t.dispatchEvent,n=t.data;a(e,n)},t.prototype.optionItemRender=function(e,t){var a=this.props,r=a.menuTpl,o=a.render,i=a.data,l=arguments[2]||{};return r?o("item/".concat(t.index),r,{data:(0,d.createObject)((0,d.createObject)(i,(0,n.__assign)((0,n.__assign)({},t),l)),e)}):u.BaseSelection.itemRender(e,t)},t.prototype.doAction=function(e){var t=this.props,a=t.resetValue,n=t.onChange;switch(e.actionType){case"clear":null===n||void 0===n||n("");break;case"reset":null===n||void 0===n||n(null!==a&&void 0!==a?a:"");break}},t.prototype.render=function(){var e=this,t=this.props,a=t.className,n=t.classnames,r=t.options,l=t.selectedOptions,d=t.sortable,u=t.loading,c=t.searchResultMode,p=t.showArrow,h=t.deferLoad,m=t.disabled,f=t.selectTitle,v=t.resultTitle,_=t.pickerSize,g=t.leftMode,y=t.leftOptions;return o.default.createElement("div",{className:n("TabsTransferControl",a)},o.default.createElement(s.default,{activeKey:this.state.activeKey,onTabChange:this.onTabChange,value:l,disabled:m,options:r,onChange:this.handleChange,option2value:this.option2value,sortable:d,searchResultMode:c,onSearch:this.handleTabSearch,showArrow:p,onDeferLoad:h,selectTitle:f,resultTitle:v,size:_,leftMode:g,leftOptions:y,optionItemRender:this.optionItemRender,resultItemRender:this.resultItemRender,onFocus:function(){return e.dispatchEvent("focus")},onBlur:function(){return e.dispatchEvent("blur")}}),o.default.createElement(i.default,{overlay:!0,key:"info",show:u}))},(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"dispatchEvent",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,"function"===typeof(a="undefined"!==typeof u.ItemRenderStates&&u.ItemRenderStates)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"optionItemRender",null),t=(0,n.__decorate)([(0,r.OptionsControl)({type:"tabs-transfer-picker"})],t),t}(l.BaseTabsTransferRenderer);t.TabsTransferPickerRenderer=c},de1f:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransferPickerRenderer=void 0;var n=a("9ab4"),r=a("d55b"),o=(0,n.__importDefault)(a("7037")),i=(0,n.__importDefault)(a("c6e8")),l=a("5d73"),s=(0,n.__importDefault)(a("ca38")),d=a("d369"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.dispatchEvent=function(e){var t=this.props,a=t.dispatchEvent,n=t.data;a(e,n)},t.prototype.doAction=function(e){var t=this.props,a=t.resetValue,n=t.onChange;switch(e.actionType){case"clear":null===n||void 0===n||n("");break;case"reset":null===n||void 0===n||n(null!==a&&void 0!==a?a:"");break}},t.prototype.render=function(){var e,t=this,a=this.props,n=a.className,r=a.classnames,l=a.selectedOptions,d=a.sortable,u=a.loading,c=a.searchable,p=a.searchResultMode,h=a.showArrow,m=a.deferLoad,f=a.disabled,v=a.selectTitle,_=a.resultTitle,g=a.pickerSize,y=a.columns,b=a.leftMode,C=a.selectMode,O=a.borderMode,F=this.props,E=F.options,w=F.leftOptions,A=F.leftDefaultValue;return"associated"===C&&E&&1===E.length&&E[0].leftOptions&&Array.isArray(E[0].children)&&(w=E[0].leftOptions,A=null!==(e=E[0].leftDefaultValue)&&void 0!==e?e:A,E=E[0].children),o.default.createElement("div",{className:r("TransferControl",n)},o.default.createElement(s.default,{borderMode:O,selectMode:C,value:l,disabled:f,options:E,onChange:this.handleChange,option2value:this.option2value,sortable:d,searchResultMode:p,onSearch:c?this.handleSearch:void 0,showArrow:h,onDeferLoad:m,selectTitle:v,resultTitle:_,size:g,columns:y,leftMode:b,leftOptions:w,optionItemRender:this.optionItemRender,resultItemRender:this.resultItemRender,onFocus:function(){return t.dispatchEvent("focus")},onBlur:function(){return t.dispatchEvent("blur")}}),o.default.createElement(i.default,{overlay:!0,key:"info",show:u}))},(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"dispatchEvent",null),t=(0,n.__decorate)([(0,r.OptionsControl)({type:"transfer-picker"})],t),t}(l.BaseTransferRenderer);t.TransferPickerRenderer=u},eb68:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeSelectControlRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=(0,n.__importDefault)(a("35b7")),i=(0,n.__importDefault)(a("dbb0")),l=(0,n.__importDefault)(a("1f88")),s=a("d55b"),d=(0,n.__importDefault)(a("faf7")),u=a("8a53"),c=(0,n.__importDefault)(a("b047")),p=(0,n.__importDefault)(a("2769")),h=a("7f82"),m=(0,n.__importDefault)(a("c6e8")),f=(0,n.__importDefault)(a("d380")),v=a("d369"),_=a("7dac"),g=a("79ae"),y=function(e){function t(t){var a=e.call(this,t)||this;return a.container=r.default.createRef(),a.input=r.default.createRef(),a.cache={},a.targetRef=function(e){return a.target=e?(0,_.findDOMNode)(e):null},a.state={inputValue:"",isOpened:!1,isFocused:!1},a.open=a.open.bind(a),a.close=a.close.bind(a),a.handleChange=a.handleChange.bind(a),a.clearValue=a.clearValue.bind(a),a.handleFocus=a.handleFocus.bind(a),a.handleBlur=a.handleBlur.bind(a),a.handleKeyPress=a.handleKeyPress.bind(a),a.handleInputChange=a.handleInputChange.bind(a),a.handleInputKeyDown=a.handleInputKeyDown.bind(a),a.loadRemote=(0,c.default)(a.loadRemote.bind(a),250,{trailing:!0,leading:!1}),a}var a,y,b;return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){this.loadRemote("")},t.prototype.open=function(e){this.props.disabled||this.setState({isOpened:!0},e)},t.prototype.close=function(){var e=this;this.setState({isOpened:!1,inputValue:this.props.multiple?this.state.inputValue:""},(function(){return e.loadRemote(e.state.inputValue)}))},t.prototype.handleFocus=function(e){var t=this.props,a=t.dispatchEvent,n=t.value,r=t.data;this.setState({isFocused:!0}),a("focus",(0,v.createObject)(r,{value:n}))},t.prototype.handleBlur=function(e){var t=this.props,a=t.dispatchEvent,n=t.value,r=t.data;this.setState({isFocused:!1}),a("blur",(0,v.createObject)(r,{value:n}))},t.prototype.handleKeyPress=function(e){" "===e.key&&(this.handleOutClick(e),e.preventDefault())},t.prototype.validate=function(){var e=this.props,t=e.value,a=e.minLength,n=e.maxLength,r=e.delimiter,o=e.translate,i=Array.isArray(t)?t:(t?String(t):"").split(r||",");return a&&i.length<a?o("已选择数量低于设定的最小个数${minLength}，请选择更多的选项。",{minLength:a}):n&&i.length>n?o("已选择数量超出设定的最大个数{{maxLength}}，请取消选择超出的选项。",{maxLength:n}):void 0},t.prototype.removeItem=function(e,t){var a=this.props,n=a.selectedOptions,r=a.joinValues,o=a.extractValue,i=a.delimiter,l=a.valueField,s=a.onChange,d=a.disabled;if(t&&t.stopPropagation(),!d){var u=n.concat();u.splice(e,1);var c=u;r?c=u.map((function(e){return e[l||"value"]})).join(i||","):o&&(c=u.map((function(e){return e[l||"value"]}))),s(c)}},t.prototype.handleChange=function(e){var t=this,a=this.props.multiple;a||this.close(),a||!this.state.inputValue?this.resultChangeEvent(e):this.setState({inputValue:""},(function(){return t.resultChangeEvent(e)}))},t.prototype.handleInputChange=function(e){var t=this,a=this.props,n=a.autoComplete,r=a.data;this.setState({inputValue:e},(0,h.isEffectiveApi)(n,r)?function(){return t.loadRemote(t.state.inputValue)}:void 0)},t.prototype.handleInputKeyDown=function(e){var t=this.state.inputValue,a=this.props,n=a.multiple,r=a.selectedOptions;"Backspace"===e.key&&!t&&r.length&&n&&this.removeItem(r.length-1)},t.prototype.clearValue=function(){var e=this.props,t=e.onChange,a=e.resetValue;t("undefined"===typeof a?"":a)},t.prototype.filterOptions=function(e,t){var a=this,r=this.props,o=r.labelField,i=r.valueField;return e.map((function(e){if(e=(0,n.__assign)({},e),e.visible=!!(0,u.matchSorter)([e],t,{keys:[o||"label",i||"value"]}).length,!e.visible&&e.children){e.children=a.filterOptions(e.children,t);var r=e.children.filter((function(e){return e.visible})).length;e.visible=!!r}return e.visible&&(e.collapsed=!1),e}))},t.prototype.loadRemote=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i,l,s,d,u;return(0,n.__generator)(this,(function(c){switch(c.label){case 0:if(t=this.props,a=t.autoComplete,r=t.env,o=t.data,i=t.setOptions,l=t.setLoading,!(0,h.isEffectiveApi)(a,o))return[2];if(!r||!r.fetcher)throw new Error("fetcher is required");if(this.cache[e]||~e.indexOf("'"))return d=this.cache[e]||[],u=this.mergeOptions(d),i(u),[2,Promise.resolve({options:u})];l(!0),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,r.fetcher(a,(0,n.__assign)((0,n.__assign)({},o),{term:e,value:e}))];case 2:return s=c.sent(),d=s.data&&s.data.options||s.data||[],this.cache[e]=d,u=this.mergeOptions(d),i(u),[2,{options:u}];case 3:return l(!1),[7];case 4:return[2]}}))}))},t.prototype.mergeOptions=function(e){var t=this.props.selectedOptions,a=(0,g.normalizeOptions)(e).concat();return Array.isArray(t)&&t.length&&t.forEach((function(e){(0,p.default)(a,(function(t){return t.value==e.value}))||a.push((0,n.__assign)((0,n.__assign)({},e),{visible:!1}))})),a},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.handleOutClick=function(e){e.defaultPrevented||this.setState({isOpened:!0})},t.prototype.handleResultChange=function(e){var t=this.props,a=t.joinValues,n=t.extractValue,r=t.delimiter,o=t.valueField,i=t.multiple,l=Array.isArray(e)?e.concat():[];i||l.length?((a||n)&&(l=e.map((function(e){return e[o||"value"]}))),a&&(l=l.join(r||",")),this.resultChangeEvent(l)):this.resultChangeEvent("")},t.prototype.doAction=function(e,t,a){e.actionType&&["clear","reset"].includes(e.actionType)&&this.clearValue()},t.prototype.resultChangeEvent=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.onChange,r=t.dispatchEvent,o=t.data,[4,r("change",(0,v.createObject)(o,{value:e}))];case 1:return i=n.sent(),(null===i||void 0===i?void 0:i.prevented)?[2]:(a&&a(e),[2])}}))}))},t.prototype.renderItem=function(e){var t=this.props,a=t.labelField,n=t.options,r=t.hideNodePathLabel;if(r)return e[a||"label"];var o=(0,v.getTreeAncestors)(n,e,!0);return"".concat(o?o.map((function(e){return"".concat(e[a||"label"])})).join(" / "):e[a||"label"])},t.prototype.domRef=function(e){this.treeRef=e},t.prototype.renderOuter=function(){var e=this.props,t=e.value,a=e.enableNodePath,n=e.pathSeparator,o=void 0===n?"/":n,i=e.disabled,l=e.joinValues,s=e.extractValue,u=e.delimiter,c=(e.placeholder,e.options),p=e.multiple,m=e.valueField,f=e.initiallyOpen,v=e.unfoldedLevel,_=e.withChildren,g=e.rootLabel,y=e.cascade,b=e.rootValue,C=e.showIcon,O=e.showRadio,F=(e.popOverContainer,e.onlyChildren),E=e.onlyLeaf,w=e.classPrefix,A=e.optionsPlaceholder,k=e.searchable,S=e.autoComplete,I=e.maxLength,R=e.minLength,N=e.labelField,x=e.nodePath,D=e.onAdd,V=e.creatable,T=e.createTip,M=e.addControls,P=e.onEdit,j=e.editable,L=e.editTip,B=e.editControls,z=e.removable,U=e.removeTip,H=e.onDelete,$=e.rootCreatable,W=e.rootCreateTip,K=e.translate,q=e.deferLoad,G=e.expandTreeOptions,Q=e.selfDisabledAffectChildren,J=e.showOutline,Y=e.autoCheckChildren,X=!(0,h.isEffectiveApi)(S)&&k&&this.state.inputValue?this.filterOptions(c,this.state.inputValue):c;return r.default.createElement(d.default,{classPrefix:w,onRef:this.domRef,onlyChildren:F,onlyLeaf:E,labelField:N,valueField:m,disabled:i,onChange:this.handleChange,joinValues:l,extractValue:s,delimiter:u,placeholder:K(A),options:X,highlightTxt:this.state.inputValue,multiple:p,initiallyOpen:f,unfoldedLevel:v,withChildren:_,autoCheckChildren:Y,rootLabel:K(g),rootValue:b,showIcon:C,showRadio:O,showOutline:J,cascade:y,foldedField:"collapsed",hideRoot:!0,value:t||"",nodePath:x,enableNodePath:a,pathSeparator:o,maxLength:I,minLength:R,onAdd:D,creatable:V,createTip:T,rootCreatable:$,rootCreateTip:W,onEdit:P,editable:j,editTip:L,removable:z,removeTip:U,onDelete:H,bultinCUD:!M&&!B,onDeferLoad:q,onExpandTree:G,selfDisabledAffectChildren:Q})},t.prototype.render=function(){var e=this,t=this.props,a=t.className,n=t.disabled,s=t.inline,d=t.loading,u=t.multiple,c=(t.value,t.clearable),p=t.classPrefix,_=t.classnames,g=t.searchable,y=t.autoComplete,b=t.selectedOptions,C=t.placeholder,O=t.popOverContainer,F=t.useMobileUI,E=t.translate,w=t.env,A=this.state.isOpened,k=F&&(0,v.isMobile)();return r.default.createElement("div",{ref:this.container,className:_("TreeSelectControl",a)},r.default.createElement(f.default,{disabled:n,ref:this.targetRef,placeholder:E(C||"placeholder.empty"),className:_("TreeSelect",{"TreeSelect--inline":s,"TreeSelect--single":!u,"TreeSelect--multi":u,"TreeSelect--searchable":g||(0,h.isEffectiveApi)(y),"is-opened":this.state.isOpened,"is-focused":this.state.isFocused,"is-disabled":n}),result:u?b:b.length?this.renderItem(b[0]):"",onResultClick:this.handleOutClick,value:this.state.inputValue,onChange:this.handleInputChange,onResultChange:this.handleResultChange,itemRender:this.renderItem,onKeyPress:this.handleKeyPress,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleInputKeyDown,clearable:c,allowInput:g||(0,h.isEffectiveApi)(y),inputPlaceholder:""},d?r.default.createElement(m.default,{size:"sm"}):void 0),!k&&A?r.default.createElement(o.default,{container:O||function(){return e.container.current},target:function(){return e.target},show:!0},r.default.createElement(i.default,{classPrefix:p,className:"".concat(p,"TreeSelect-popover"),style:{minWidth:this.target?this.target.offsetWidth:void 0},onHide:this.close,overlay:!0},this.renderOuter())):null,k?r.default.createElement(l.default,{container:w&&w.getModalContainer?w.getModalContainer:void 0,className:_("".concat(p,"TreeSelect-popup")),isShow:A,onHide:this.close},this.renderOuter()):null)},t.defaultProps={placeholder:"Select.placeholder",optionsPlaceholder:"placeholder.noData",multiple:!1,clearable:!0,rootLabel:"Tree.root",rootValue:"",showIcon:!0,joinValues:!0,extractValue:!1,delimiter:",",resetValue:"",hideNodePathLabel:!1,enableNodePath:!1,pathSeparator:"/",selfDisabledAffectChildren:!0},(0,n.__decorate)([v.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof r.default&&r.default.MouseEvent)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleOutClick",null),(0,n.__decorate)([v.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(y="undefined"!==typeof Array&&Array)?y:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleResultChange",null),(0,n.__decorate)([v.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"resultChangeEvent",null),(0,n.__decorate)([v.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof s.Option&&s.Option)?b:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"renderItem",null),(0,n.__decorate)([v.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"domRef",null),t}(r.default.Component);t.default=y;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,s.OptionsControl)({type:"tree-select"})],t),t}(y);t.TreeSelectControlRenderer=b},ec2a:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TplRenderer=t.Icon=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("f83d"),i=a("4864"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,a=e.vendor,n=e.classnames,o=e.className,i=-1!==(null===t||void 0===t?void 0:t.indexOf(".")),l="";return l="iconfont"===a?"iconfont icon-".concat(t):"fa"===a?"".concat(a," ").concat(a,"-").concat(t):"".concat(t),i?r.default.createElement("img",{className:n("Icon"),src:t}):r.default.createElement("i",{className:n(l,o)})},t.defaultProps={icon:"",vendor:"fa"},t}(r.default.Component);t.Icon=l;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"icon"}),i.withBadge],t),t}(l);t.TplRenderer=s},ed3b:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapControl=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=(0,n.__importDefault)(a("b047")),i=a("7f9f"),l=a("d369"),s=a("2b46"),d=a("dce3"),u=a("f7d3"),c=a("4f20"),p=(0,n.__importDefault)(a("da6a")),h=a("9a21"),m=a("e8da");function f(e){var t,a=(0,p.default)((0,h.withRootStore)((0,c.observer)((t=function(t){function a(e){var a,n,r=t.call(this,e)||this;r.value=void 0,r.lazyEmitChange=(0,o.default)(r.emitChange.bind(r),250,{trailing:!0,leading:!1});var s=r.props,u=s.formStore,c=s.formItem,p=s.rootStore,h=s.store,f=s.onChange,v=(s.data,s.$schema),_=v.name,g=v.id,y=v.type,b=v.required,C=v.validations,O=v.validationErrors,F=v.unique,E=v.value,w=v.multiple,A=v.delimiter,k=v.valueField,S=v.labelField,I=v.joinValues,R=v.extractValue,N=v.selectFirst,x=v.autoFill,D=v.clearValueOnHidden,V=v.validateApi,T=v.minLength,M=v.maxLength,P=v.validateOnChange,j=v.label;if(r.getValue=r.getValue.bind(r),r.setValue=r.setValue.bind(r),r.handleChange=r.handleChange.bind(r),r.setPrinstineValue=r.setPrinstineValue.bind(r),r.controlRef=r.controlRef.bind(r),r.handleBlur=r.handleBlur.bind(r),!_)return r;var L=r.props.value,B=p.addStore({id:(0,l.guid)(),path:r.props.$path,storeType:d.FormItemStore.name,parentId:null===h||void 0===h?void 0:h.id,name:_});if(r.model=B,null===c||void 0===c||c.addSubFormItem(B),B.config({id:g,type:y,required:b,unique:F,value:E,rules:C,messages:O,multiple:w,delimiter:A,valueField:k,labelField:S,joinValues:I,extractValue:R,selectFirst:N,autoFill:x,clearValueOnHidden:D,validateApi:V,minLength:T,maxLength:M,validateOnChange:P,label:j}),r.model.unique&&(null===(a=null===u||void 0===u?void 0:u.parentStore)||void 0===a?void 0:a.storeType)===i.ComboStore.name){var z=u.parentStore;z.bindUniuqueItem(B)}return B.changeTmpValue(null!==(n=null!==L&&void 0!==L?L:null===h||void 0===h?void 0:h.getValueByName(B.name))&&void 0!==n?n:E),f&&"undefined"===typeof L&&"undefined"===typeof(null===h||void 0===h?void 0:h.getValueByName(B.name,!1))&&(null===h||void 0===h?void 0:h.storeType)!==m.TableStore.name&&f(B.tmpValue,B.name,!1,!0),r}return(0,n.__extends)(a,t),a.prototype.componentDidMount=function(){var e=this,t=this.props,a=(t.store,t.formStore,t.$schema),n=a.name,r=a.validate,o=t.addHook;this.hook3=function(){e.lazyEmitChange.flush()},null===o||void 0===o||o(this.hook3,"flush");var i=this.model;if(i&&r){var s=(0,l.promisify)(r.bind(i));this.hook2=function(){return i.clearError("control:valdiate"),s(e.props.data,e.getValue(),n).then((function(e){("string"===typeof e||Array.isArray(e))&&e&&i.addError(e,"control:valdiate")}))},null===o||void 0===o||o(this.hook2)}},a.prototype.componentDidUpdate=function(e){var t=this.props,a=(t.formStore,this.model);if(a&&(0,l.anyChanged)(["id","validations","validationErrors","value","required","unique","multiple","delimiter","valueField","labelField","joinValues","extractValue","selectFirst","autoFill","clearValueOnHidden","validateApi","minLength","maxLength","label"],e.$schema,t.$schema)&&a.config({required:t.$schema.required,id:t.$schema.id,unique:t.$schema.unique,value:t.$schema.value,rules:t.$schema.validations,multiple:t.$schema.multiple,delimiter:t.$schema.delimiter,valueField:t.$schema.valueField,labelField:t.$schema.labelField,joinValues:t.$schema.joinValues,extractValue:t.$schema.extractValue,messages:t.$schema.validationErrors,selectFirst:t.$schema.selectFirst,autoFill:t.$schema.autoFill,clearValueOnHidden:t.$schema.clearValueOnHidden,validateApi:t.$schema.validateApi,minLength:t.$schema.minLength,maxLength:t.$schema.maxLength,label:t.$schema.label}),a&&"undefined"!==typeof t.value)t.value!==e.value&&t.value!==a.tmpValue&&a.changeTmpValue(t.value);else if(a&&t.data!==e.data&&(!a.emitedValue||a.emitedValue===a.tmpValue)){a.changeEmitedValue(void 0);var n=(0,l.getVariable)(t.data,a.name),r=(0,l.getVariable)(e.data,a.name);n===r&&(0,l.getVariable)(t.data,a.name,!1)===(0,l.getVariable)(e.data,a.name,!1)||n===a.tmpValue||a.changeTmpValue(n)}},a.prototype.componentWillUnmount=function(){var e,t,a,n,r,o,i;this.hook&&(null===(t=(e=this.props).removeHook)||void 0===t||t.call(e,this.hook)),this.hook2&&(null===(n=(a=this.props).removeHook)||void 0===n||n.call(a,this.hook2)),this.hook3&&(null===(o=(r=this.props).removeHook)||void 0===o||o.call(r,this.hook3,"flush")),this.lazyEmitChange.cancel(),null===(i=this.reaction)||void 0===i||i.call(this),this.disposeModel()},a.prototype.disposeModel=function(){var e,t=this.props,a=t.formStore,n=t.formItem,r=t.rootStore;if(this.model&&this.model.unique&&(null===a||void 0===a?void 0:a.parentStore)&&(null===a||void 0===a?void 0:a.parentStore.storeType)===i.ComboStore.name){var o=a.parentStore;o.unBindUniuqueItem(this.model)}this.model&&(n&&(0,u.isAlive)(n)&&n.removeSubFormItem(this.model),this.model.clearValueOnHidden&&(null===(e=this.model.form)||void 0===e||e.deleteValueByName(this.model.name)),(0,u.isAlive)(r)&&r.removeStore(this.model)),delete this.model},a.prototype.controlRef=function(e){var t=this,a=this.props,n=a.addHook,r=a.removeHook,o=(a.formStore,a.$schema.name);while(e&&e.getWrappedInstance)e=e.getWrappedInstance();if(e&&e.validate&&this.model){var i=this.model,s=(0,l.promisify)(e.validate.bind(e));this.hook=function(){return i.clearError("component:valdiate"),s(t.props.data,t.getValue(),o).then((function(e){("string"===typeof e||Array.isArray(e))&&e&&i.setError(e,"component:valdiate")}))},null===n||void 0===n||n(this.hook)}else!e&&this.hook&&(null===r||void 0===r||r(this.hook),this.hook=void 0);var d=this.control;this.control=e;var u=this.context;e?u.registerComponent(this.control):d&&u.unRegisterComponent(d)},a.prototype.validate=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e,t,a,r,o,l,s,d;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return e=this.props,t=e.formStore,a=e.data,r=e.formItemDispatchEvent,this.model?this.model.unique&&(null===t||void 0===t?void 0:t.parentStore)&&t.parentStore.storeType===i.ComboStore.name?(l=t.parentStore,s=l.uniques.get(this.model.name),d=s.items.map((function(e){return e.validate(a)})),[4,Promise.all(d)]):[3,2]:[3,4];case 1:return o=n.sent(),[3,4];case 2:return d=null===t||void 0===t?void 0:t.getItemsByName(this.model.name).map((function(e){return e.validate(a)})),d&&d.length?[4,Promise.all(d)]:[3,4];case 3:o=n.sent(),n.label=4;case 4:return o&&o.length&&(o.indexOf(!1)>-1?r("formItemValidateError",a):r("formItemValidateSucc",a)),[2]}}))}))},a.prototype.handleChange=function(e,t,a){void 0===t&&(t=this.props.$schema.submitOnChange),void 0===a&&(a=!1);var n=this.props,r=(n.formStore,n.onChange),o=n.$schema,i=o.type,l=o.pipeOut,s=o.changeImmediately,d=n.formInited,u=n.data;if(this.model&&!~["service","group","hbox","panel","grid","input-group"].indexOf(i)){if(l){var c=this.model.value;e=l(e,c,u)}this.model.changeTmpValue(e),a||s||!d?this.emitChange(t):this.lazyEmitChange(t)}else r&&r.apply(null,arguments)},a.prototype.emitChange=function(e){var t;void 0===e&&(e=this.props.$schema.submitOnChange);var a=this.props,n=a.formStore,r=a.onChange,o=a.$schema,i=o.name,s=o.id,d=o.label,u=o.type,c=o.onChange,p=(o.maxLength,o.minLength,a.data),h=a.env,m=a.validateOnChange,f=a.formSubmited;if(this.model){var v=this.model.tmpValue,_=(0,l.getVariable)(p,this.model.name,!1);if(_!==v&&("input-password"!==u&&(null===h||void 0===h||h.tracker({eventType:"formItemChange",eventData:{id:s,name:i,label:d,type:u,value:v}},this.props)),this.model.changeEmitedValue(v),!1!==(null===c||void 0===c?void 0:c(v,_,this.model,n)))){var g=this.model.validated;null===r||void 0===r||r(v,i,!0===e),!0===m||!1!==m&&(f||g)?this.validate():!1===m&&(null===(t=this.model)||void 0===t||t.reset())}}},a.prototype.handleBlur=function(e){var t=this.props,a=t.onBlur,n=t.$schema.validateOnBlur;n&&this.model&&this.validate(),a&&a(e)},a.prototype.setPrinstineValue=function(e){if(this.model){var t=this.props,a=(t.formStore,t.name),n=t.$schema.pipeOut,r=t.onChange,o=t.value,i=t.data;n&&(e=n(e,o,i)),null===r||void 0===r||r(e,a,!1,!0)}},a.prototype.getValue=function(){var e=this.props,t=e.formStore,a=e.$schema,n=this.model?this.model.tmpValue:a.value;return a.pipeIn&&(n=a.pipeIn(n,t)),n},a.prototype.setValue=function(e,t){var a,n=this.props,r=n.$schema.name,o=n.onBulkChange;t&&t!==r?o&&o((a={},a[t]=e,a)):this.handleChange(e)},a.prototype.render=function(){var t=this.props,a=t.controlWidth,o=t.disabled,i=t.formMode,l=t.$schema,s=t.store,d=t.data,u=t.invisible;if(u)return null;var c=this.getValue(),p=this.model,h={defaultSize:a,disabled:null!==o&&void 0!==o?o:l.disabled,formItem:this.model,formMode:l.mode||i,ref:this.controlRef,data:d||(null===s||void 0===s?void 0:s.data),value:c,defaultValue:l.value,formItemValue:c,onChange:this.handleChange,onBlur:this.handleBlur,setValue:this.setValue,getValue:this.getValue,prinstine:p?p.prinstine:void 0,setPrinstineValue:this.setPrinstineValue};return r.default.createElement(e,(0,n.__assign)({},this.props,h))},a}(r.default.Component),t.contextType=s.ScopedContext,t.defaultProps={},t))),e);return a}t.wrapControl=f},f02f:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONSchemaEditorRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("2ab5"),i=(0,n.__importDefault)(a("e9db")),l=a("d369"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.renderModalProps=function(e,t){var a=this.props,n=a.render,r=a.advancedSettings,o=(null===r||void 0===r?void 0:r[null===e||void 0===e?void 0:e.type])||[];return n("modal",{type:"form",wrapWithPanel:!1,body:o,submitOnChange:!0},{data:e,onSubmit:function(e){return t(e)}})},t.prototype.render=function(){var e=this.props,t=e.enableAdvancedSetting,a=(0,n.__rest)(e,["enableAdvancedSetting"]);return r.default.createElement(i.default,(0,n.__assign)({},a,{enableAdvancedSetting:t,renderModalProps:this.renderModalProps}))},t.defaultProps={enableAdvancedSetting:!1},(0,n.__decorate)([l.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Function]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"renderModalProps",null),t}(r.default.PureComponent);t.default=s;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.FormItem)({type:"json-schema-editor"})],t),t}(s);t.JSONSchemaEditorRenderer=d},fda0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormRenderer=void 0;var n=a("9ab4"),r=(0,n.__importDefault)(a("7037")),o=a("f83d"),i=a("689c"),l=a("a97c"),s=(0,n.__importDefault)(a("c0a1")),d=(0,n.__importDefault)(a("746f")),u=a("d369"),c=(0,n.__importDefault)(a("b047")),p=(0,n.__importDefault)(a("4d8c")),h=(0,n.__importDefault)(a("2769")),m=a("2b46"),f=a("7e49"),v=a("7f82"),_=(0,n.__importDefault)(a("c6e8")),g=a("4afe"),y=a("f7d3"),b=function(e){function t(t){var a=e.call(this,t)||this;a.hooks={},a.shouldLoadInitApi=!1,a.lazyEmitChange=(0,c.default)(a.emitChange.bind(a),250,{trailing:!0,leading:!1}),a.onInit=a.onInit.bind(a),a.handleAction=a.handleAction.bind(a),a.handleQuery=a.handleQuery.bind(a),a.handleChange=a.handleChange.bind(a),a.handleDialogConfirm=a.handleDialogConfirm.bind(a),a.handleDialogClose=a.handleDialogClose.bind(a),a.handleDrawerConfirm=a.handleDrawerConfirm.bind(a),a.handleDrawerClose=a.handleDrawerClose.bind(a),a.handleFormSubmit=a.handleFormSubmit.bind(a),a.validate=a.validate.bind(a),a.submit=a.submit.bind(a),a.addHook=a.addHook.bind(a),a.removeHook=a.removeHook.bind(a),a.emitChange=a.emitChange.bind(a),a.handleBulkChange=a.handleBulkChange.bind(a),a.renderFormItems=a.renderFormItems.bind(a),a.reload=a.reload.bind(a),a.silentReload=a.silentReload.bind(a),a.initInterval=a.initInterval.bind(a),a.blockRouting=a.blockRouting.bind(a),a.beforePageUnload=a.beforePageUnload.bind(a);var n=t.store,r=t.canAccessSuperData,o=t.persistData,i=t.simpleMode;if(n.setCanAccessSuperData(!1!==r),n.setPersistData(o),i&&n.setInited(!0),n&&n.parentStore&&"ComboStore"===n.parentStore.storeType){var l=n.parentStore;l.addForm(n),l.forms.forEach((function(e){return e.items.forEach((function(t){return t.unique&&t.syncOptions(void 0,e.data)}))}))}return a}return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){var e,t,a=this,r=this.props,o=r.initApi,i=r.initFetch,s=r.initFetchOn,d=r.initAsyncApi,c=r.initFinishedField,p=r.initCheckInterval,h=r.store,m=r.messages,f=m.fetchSuccess,_=m.fetchFailed,g=r.onValidate,y=r.promptPageLeave,b=r.env,C=r.rules;if(this.mounted=!0,g){var O=(0,u.promisify)(g);this.disposeOnValidate=this.addHook((function(){return(0,n.__awaiter)(a,void 0,void 0,(function(){var e;return(0,n.__generator)(this,(function(t){switch(t.label){case 0:return[4,O(h.data,h)];case 1:return e=t.sent(),e&&(0,u.isObject)(e)&&(Object.keys(e).forEach((function(t){var a=e[t],n=h.getItemsByPath(t);Array.isArray(n)&&n.length&&(n.forEach((function(e){return e.clearError()})),a&&(a=Array.isArray(a)?a:[a],n.forEach((function(e){return e.addError(a)}))),delete e[t])})),(0,u.isEmpty)(e)?h.clearRestError():h.setRestError(Object.keys(e).map((function(t){return e[t]})))),[2]}}))}))}))}Array.isArray(C)&&C.length&&(this.disposeRulesValidate=this.addHook((function(){h.valid&&C.forEach((function(e){return!(0,l.evalExpression)(e.rule,h.data)&&h.addRestError(e.message,e.name)}))}))),(0,v.isEffectiveApi)(o,h.data,i,s)?h.fetchInitData(o,h.data,{successMessage:f,errorMessage:_,onSuccess:function(){if((0,v.isEffectiveApi)(d,h.data)&&!h.data[c||"finished"])return(0,u.until)((function(){return h.checkRemote(d,h.data)}),(function(e){return e&&e[c||"finished"]}),(function(e){return a.asyncCancel=e}),p)}}).then(this.initInterval).then(this.onInit):setTimeout(this.onInit.bind(this),4),y&&(window.addEventListener("beforeunload",this.beforePageUnload),this.unBlockRouting=null!==(t=null===(e=b.blockRouting)||void 0===e?void 0:e.call(b,this.blockRouting))&&void 0!==t?t:void 0)},t.prototype.componentDidUpdate=function(e){var t=this.props,a=t.store;if((0,v.isApiOutdated)(e.initApi,t.initApi,e.data,t.data)){var n=t.fetchSuccess,r=t.fetchFailed;a[a.hasRemoteData?"fetchData":"fetchInitData"](t.initApi,a.data,{successMessage:n,errorMessage:r}).then(this.initInterval)}},t.prototype.componentWillUnmount=function(){var e;this.mounted=!1,clearTimeout(this.timer),this.lazyEmitChange.cancel(),this.asyncCancel&&this.asyncCancel(),this.disposeOnValidate&&this.disposeOnValidate(),this.disposeRulesValidate&&this.disposeRulesValidate(),window.removeEventListener("beforeunload",this.beforePageUnload),null===(e=this.unBlockRouting)||void 0===e||e.call(this)},t.prototype.blockRouting=function(){var e=this.props.store,t=this.props,a=t.promptPageLeaveMessage,n=t.promptPageLeave;if(n&&e.modified)return a||"新的修改没有保存，确认要离开？"},t.prototype.beforePageUnload=function(e){var t=this.blockRouting();t&&(e.preventDefault(),e.returnValue="")},t.prototype.onInit=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e,t,a,r,o,i,l,s,d,c;return(0,n.__generator)(this,(function(p){switch(p.label){case 0:return e=this.props,t=e.onInit,a=e.store,r=e.persistData,o=e.submitOnInit,i=e.dispatchEvent,(0,y.isAlive)(a)?(l=(0,u.cloneObject)(a.data),s=a.initedAt,a.setInited(!0),d=this.hooks["init"]||[],[4,Promise.all(d.map((function(e){return e(l)})))]):[2];case 1:return p.sent(),(0,y.isAlive)(a)?(a.initedAt!==s&&(l=(0,n.__assign)((0,n.__assign)({},l),a.data)),r&&(a.getLocalPersistData(),l=(0,u.cloneObject)(a.data)),[4,i("inited",(0,u.createObject)(this.props.data,l))]):[2];case 2:return c=p.sent(),(null===c||void 0===c?void 0:c.prevented)||t&&t(l,this.props),o&&this.handleAction(void 0,{type:"submit"},a.data),[2]}}))}))},t.prototype.reload=function(e,t,a,n){var r,o=this;if(t)return this.receive(t);var i=this.props,l=i.store,s=i.initApi,d=i.initAsyncApi,c=i.initFinishedField,p=i.messages,h=p.fetchSuccess,m=p.fetchFailed;(0,v.isEffectiveApi)(d,l.data)&&l.updateData((r={},r[c||"finished"]=!1,r)),(0,v.isEffectiveApi)(s,l.data)?l.fetchInitData(s,l.data,{successMessage:h,errorMessage:m,silent:n,onSuccess:function(){if((0,v.isEffectiveApi)(d,l.data)&&!l.data[c||"finished"])return(0,u.until)((function(){return l.checkRemote(d,l.data)}),(function(e){return e&&e[c||"finished"]}),(function(e){return o.asyncCancel=e}))}}).then((function(e){(null===e||void 0===e?void 0:e.ok)&&(o.initInterval(e),l.reset(void 0,!1))})):l.reset(void 0,!1)},t.prototype.receive=function(e){var t=this.props.store;t.updateData(e),this.reload()},t.prototype.silentReload=function(e,t){this.reload(e,t,void 0,!0)},t.prototype.initInterval=function(e){var t=this.props,a=t.interval,n=t.silentPolling,r=t.stopAutoRefreshWhen,o=t.data;return clearTimeout(this.timer),a&&this.mounted&&(!r||!(0,l.evalExpression)(r,o))&&(this.timer=setTimeout(n?this.silentReload:this.reload,Math.max(a,1e3))),e},t.prototype.isValidated=function(){return this.props.store.validated},t.prototype.validate=function(e){var t=this.props,a=t.store,n=t.dispatchEvent,r=t.data;return this.flush(),a.validate(this.hooks["validate"]||[],e).then((function(e){return n(e?"validateSucc":"validateError",r),e}))},t.prototype.clearErrors=function(){var e=this.props.store;return e.clearErrors()},t.prototype.getValues=function(){var e=this.props.store;return this.flush(),e.data},t.prototype.setValues=function(e){var t=this.props.store;this.flush(),t.setValues(e)},t.prototype.submit=function(e){var t=this.props,a=t.store,n=t.messages,r=t.translate,o=t.dispatchEvent,i=t.data;this.flush();var l=function(){return o("validateError",i)};return a.submit(e,this.hooks["validate"]||[],r(n&&n.validateFailed),l)},t.prototype.flush=function(){var e=this.hooks["flush"]||[];e.forEach((function(e){return e()})),this.lazyEmitChange.flush()},t.prototype.reset=function(){var e=this.props,t=e.store,a=e.onReset;t.reset(a)},t.prototype.addHook=function(e,t){var a=this;return void 0===t&&(t="validate"),this.hooks[t]=this.hooks[t]||[],this.hooks[t].push("flush"===t?e:(0,u.promisify)(e)),function(){a.removeHook(e,t),e=u.noop}},t.prototype.removeHook=function(e,t){void 0===t&&(t="validate");var a=this.hooks[t];if(a)for(var n=0,r=a.length;n<r;n++){var o=a[n];o!==e&&o.raw!==e||(a.splice(n,1),r--,n--)}},t.prototype.handleChange=function(e,t,a,n){void 0===n&&(n=!1);var r=this.props,o=r.store,i=r.formLazyChange;"string"===typeof t&&(o.changeValue(t,e,n),n||(!1===i?this.emitChange:this.lazyEmitChange)(a),o.persistData&&o.inited&&o.setLocalPersistData())},t.prototype.formItemDispatchEvent=function(e){return function(t,a){e(t,a)}},t.prototype.emitChange=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i,l,s;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.onChange,r=t.store,o=t.submitOnChange,i=t.dispatchEvent,l=t.data,(0,y.isAlive)(r)?[4,i("change",(0,u.createObject)(l,r.data))]:[2];case 1:return s=n.sent(),(null===s||void 0===s?void 0:s.prevented)||a&&a(r.data,(0,u.difference)(r.data,r.pristine),this.props),r.clearRestError(),(e||o&&r.inited)&&this.handleAction(void 0,{type:"submit"},r.data),[2]}}))}))},t.prototype.handleBulkChange=function(e,t){var a=this.props,n=(a.onChange,a.store),r=a.formLazyChange;n.updateData(e),n.items.forEach((function(t){var a=(0,u.getVariable)(e,t.name,!1);void 0!==a&&(t.reset(!0),t.changeTmpValue(a),t.validateOnChange&&t.validate(e))})),(!1===r?this.emitChange:this.lazyEmitChange)(t)},t.prototype.handleFormSubmit=function(e){var t=this.props.preventEnterSubmit;return e.preventDefault(),!t&&this.handleAction(e,{type:"submit"},this.props.store.data)},t.prototype.handleAction=function(e,t,a,r,o){var i=this;void 0===r&&(r=!1);var s=this.props,d=s.store,c=s.onSubmit,p=s.api,h=s.asyncApi,m=s.finishedField,f=s.checkInterval,_=s.messages,g=_.saveSuccess,y=_.saveFailed,b=s.resetAfterSubmit,C=s.clearAfterSubmit,O=s.onAction,F=s.onSaved,E=s.onReset,w=s.onFinished,A=s.onFailed,k=s.redirect,S=s.reload,I=s.target,R=s.env,N=s.onChange,x=s.clearPersistDataAfterSubmit,D=s.trimValues,V=s.dispatchEvent,T=s.translate;if(this.flush(),D&&d.trimValues(),a===this.props.data&&(a=d.data),Array.isArray(t.required)&&t.required.length)return d.validateFields(t.required).then((function(l){return(0,n.__awaiter)(i,void 0,void 0,(function(){var i;return(0,n.__generator)(this,(function(s){switch(s.label){case 0:return l?[3,2]:[4,V("validateError",this.props.data)];case 1:return i=s.sent(),(null===i||void 0===i?void 0:i.prevented)||R.notify("error",T("Form.validateFailed")),[3,3];case 2:V("validateSucc",this.props.data),this.handleAction(e,(0,n.__assign)((0,n.__assign)({},t),{required:void 0}),a,r,o),s.label=3;case 3:return[2]}}))}))}));if("submit"===t.type||"submit"===t.actionType||"confirm"===t.actionType||"reset-and-submit"===t.actionType||"clear-and-submit"===t.actionType)return d.setCurrentAction(t),"reset-and-submit"===t.actionType?d.reset(E):"clear-and-submit"===t.actionType&&d.clear(E),this.submit((function(e){var r;if(c&&!1===c(e,t))return Promise.resolve(!1);if(V("validateSucc",i.props.data),I)i.submitToTarget(I,e),V("submitSucc",(0,u.createObject)(i.props.data,e));else if("reload"===t.actionType)t.target&&i.reloadTarget(t.target,e);else if("dialog"===t.actionType)d.openDialog(a);else if("drawer"===t.actionType)d.openDrawer(a);else{if((0,v.isEffectiveApi)(t.api||p,e)){var o=t.asyncApi||h;return(0,v.isEffectiveApi)(o,d.data)&&d.updateData((r={},r[m||"finished"]=!1,r)),d.saveRemote(t.api||p,e,{successMessage:g,errorMessage:y,onSuccess:function(e){return(0,n.__awaiter)(i,void 0,void 0,(function(){var t,a,r=this;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return[4,V("submitSucc",(0,u.createObject)(this.props.data,{result:e}))];case 1:return t=n.sent(),!(0,v.isEffectiveApi)(o,d.data)||d.data[m||"finished"]?[2,{cbResult:null,dispatcher:t}]:(a=(0,u.until)((function(){return d.checkRemote(o,d.data)}),(function(e){return e&&e[m||"finished"]}),(function(e){return r.asyncCancel=e}),f),[2,{cbResult:a,dispatcher:t}])}}))}))},onFailed:function(e){return(0,n.__awaiter)(i,void 0,void 0,(function(){var t;return(0,n.__generator)(this,(function(a){switch(a.label){case 0:return[4,V("submitFail",(0,u.createObject)(this.props.data,{error:e}))];case 1:return t=a.sent(),[2,{dispatcher:t}]}}))}))}}).then((function(a){return(0,n.__awaiter)(i,void 0,void 0,(function(){var r,o;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return F&&F(e,a),r=t.feedback||this.props.feedback,r&&(0,u.isVisible)(r,d.data)?[4,this.openFeedback(r,d.data)]:[3,2];case 1:if(o=n.sent(),r.skipRestOnCancel&&!o)throw new u.SkipOperation;if(r.skipRestOnConfirm&&o)throw new u.SkipOperation;n.label=2;case 2:return[2]}}))}))}))}V("submitSucc",(0,u.createObject)(i.props.data,e))}return Promise.resolve(null)})).then((function(e){if(!1===e)return d.data;if(w&&!1===w(e,t))return e;if(b&&d.reset(E),C&&d.clear(E),x&&d.clearLocalPersistData(),t.redirect||k){var a=(0,l.filter)(t.redirect||k,d.data);a&&R.jumpTo(a,t)}else(t.reload||S)&&i.reloadTarget(t.reload||S,d.data);return t.close&&i.closeTarget(t.close),e})).catch((function(e){if(!(e instanceof u.SkipOperation)&&(A&&A(e,d.errors),r))throw e}));if("reset"===t.type||"reset"===t.actionType)d.setCurrentAction(t),d.reset(E);else if("clear"===t.actionType)d.setCurrentAction(t),d.clear(E);else if("validate"===t.actionType)d.setCurrentAction(t),this.validate(!0);else if("dialog"===t.actionType)d.setCurrentAction(t),d.openDialog(a);else if("drawer"===t.actionType)d.setCurrentAction(t),d.openDrawer(a);else{if("ajax"===t.actionType)return d.setCurrentAction(t),(0,v.isEffectiveApi)(t.api)?d.saveRemote(t.api,a,{successMessage:T(t.messages&&t.messages.success||g),errorMessage:T(t.messages&&t.messages.failed||y)}).then((function(e){return(0,n.__awaiter)(i,void 0,void 0,(function(){var a;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return e&&N&&N(d.data,(0,u.difference)(d.data,d.pristine),this.props),d.validated?[4,this.validate(!0)]:[3,2];case 1:n.sent(),n.label=2;case 2:return t.feedback&&(0,u.isVisible)(t.feedback,d.data)?[4,this.openFeedback(t.feedback,d.data)]:[3,4];case 3:n.sent(),n.label=4;case 4:return a=t.redirect&&(0,l.filter)(t.redirect,d.data),a&&R.jumpTo(a,t),t.reload&&this.reloadTarget(t.reload,d.data),t.close&&this.closeTarget(t.close),[2]}}))}))})).catch((function(e){if(A&&A(e,d.errors),r||t.countDown)throw e})):R.alert(T("当 actionType 为 ajax 时，请设置 api 属性"));if("reload"===t.actionType)d.setCurrentAction(t),t.target?this.reloadTarget(t.target,a):this.receive(a);else if(O)return O(e,t,a,r,o||this.context)}},t.prototype.handleQuery=function(e){var t,a;this.props.initApi?this.receive(e):null===(a=(t=this.props).onQuery)||void 0===a||a.call(t,e)},t.prototype.handleDialogConfirm=function(e,t,a,n){var r=this.props,o=r.store;r.onChange;(t.mergeData||o.action.mergeData)&&1===e.length&&e[0]&&"form"===n[0].props.type&&this.handleBulkChange(e[0],!1),o.closeDialog(!0)},t.prototype.handleDialogClose=function(e){void 0===e&&(e=!1);var t=this.props.store;t.closeDialog(e)},t.prototype.handleDrawerConfirm=function(e,t,a,n){var r=this.props,o=r.store,i=r.onChange;(t.mergeData||o.action.mergeData)&&1===e.length&&e[0]&&"form"===n[0].props.type&&(o.updateData(e[0]),i&&i(o.data,(0,u.difference)(o.data,o.pristine),this.props)),o.closeDrawer(!0)},t.prototype.handleDrawerClose=function(){var e=this.props.store;e.closeDrawer(!1)},t.prototype.submitToTarget=function(e,t){},t.prototype.reloadTarget=function(e,t){},t.prototype.closeTarget=function(e){},t.prototype.openFeedback=function(e,t){var a=this;return new Promise((function(n){var r=a.props.store;r.setCurrentAction({type:"button",actionType:"dialog",dialog:e}),r.openDialog(t,void 0,(function(e){n(e)}))}))},t.prototype.buildActions=function(){var e=this.props,t=e.actions,a=e.submitText,n=e.body,r=e.translate;return"undefined"!==typeof t||!a||Array.isArray(n)&&n.some((function(e){var t,a,n,r,o;return e&&!!~["submit","button","button-group","reset"].indexOf((null===(n=null===(a=null===(t=e)||void 0===t?void 0:t.body)||void 0===a?void 0:a[0])||void 0===n?void 0:n.type)||(null===(o=null===(r=e)||void 0===r?void 0:r.body)||void 0===o?void 0:o.type)||e.type)}))?t:[{type:"submit",label:r(a),primary:!0}]},t.prototype.renderFormItems=function(e,t,a){void 0===t&&(t=""),void 0===a&&(a={});var n=Array.isArray(e.body)?e.body:e.body?[e.body]:[];return!n.length&&e.controls&&(console.warn("请用 body 代替 controls"),n=[{size:"none",type:"wrapper",wrap:!1,controls:e.controls}]),this.renderChildren(n,t,a)},t.prototype.renderChildren=function(e,t,a){var o=this;if(void 0===a&&(a={}),e=e||[],Array.isArray(e)||(e=[e]),"row"===this.props.mode){var i=this.props.classPrefix;return e=(0,p.default)(e).filter((function(e){if(e.hidden||!1===e.visible)return!1;var t=(0,d.default)(e,o.props.store.data,void 0,o.props);return!t.hidden&&!1!==t.visible})),e.length?r.default.createElement("div",{className:"".concat(i,"Form-row")},e.map((function(e,t){return~["hidden","formula"].indexOf(e.type)||"inline"===e.mode?o.renderChild(e,t,a):r.default.createElement("div",{key:t,className:(0,s.default)("".concat(i,"Form-col"),e.columnClassName)},o.renderChild(e,"",(0,n.__assign)((0,n.__assign)({},a),{mode:"row"})))}))):null}return e.map((function(e,n){return o.renderChild(e,n,a,t)}))},t.prototype.renderChild=function(e,t,a,r){if(void 0===t&&(t=""),void 0===a&&(a={}),void 0===r&&(r=""),!e)return null;"string"===typeof e&&(e={type:"tpl",tpl:e});var o=(0,n.__assign)((0,n.__assign)({},this.props),a),i=this.props.store,l=o.render,s=o.mode,d=o.horizontal,u=o.store,c=o.disabled,p=o.controlWidth,h=o.resolveDefinitions,m=o.lazyChange,f=(o.formLazyChange,o.dispatchEvent),v=o.labelAlign,_={formStore:i,data:u.data,key:"".concat(e.name||"","-").concat(e.type,"-").concat(t),formInited:i.inited,formSubmited:i.submited,formMode:s,formHorizontal:d,formLabelAlign:"left"!==v?"right":v,controlWidth:p,disabled:c||e.disabled||i.loading,btnDisabled:c||i.loading||i.validating,onAction:this.handleAction,onQuery:this.handleQuery,onChange:this.handleChange,onBulkChange:this.handleBulkChange,addHook:this.addHook,removeHook:this.removeHook,renderFormItems:this.renderFormItems,formItemDispatchEvent:this.formItemDispatchEvent(f),formPristine:i.pristine},g=(0,n.__assign)({},e);return g.$ref&&(g=(0,n.__assign)((0,n.__assign)({},h(g.$ref)),g)),!1===m&&(g.changeImmediately=!0),l("".concat(r?"".concat(r,"/"):"").concat(t),g,_)},t.prototype.renderBody=function(){var e=this.props,t=e.body,a=e.mode,o=e.className,i=e.classnames,l=e.debug,s=e.$path,d=e.store,c=e.columnCount,p=e.render,h=d.restError,m=this.props.wrapperComponent||(/(?:\/|^)form\//.test(s)?"div":"form"),f=(0,u.repeatCount)(c&&Array.isArray(t)?c-t.length%c:0,(function(e){return r.default.createElement("div",{className:i("Form-item Form-item--".concat(a," is-placeholder")),key:e})}));return r.default.createElement(m,{className:i("Form","Form--".concat(a||"normal"),c?"Form--column Form--column-".concat(c):null,o),onSubmit:this.handleFormSubmit,noValidate:!0},r.default.createElement("input",{type:"submit",style:{display:"none"}}),l?r.default.createElement("pre",null,r.default.createElement("code",null,JSON.stringify(d.data,null,2))):null,r.default.createElement(_.default,{show:d.loading,overlay:!0}),this.renderFormItems({body:t}),f,h&&h.length?r.default.createElement("ul",{className:i("Form-restError","Form-feedback")},h.map((function(e,t){return r.default.createElement("li",{key:t},e)}))):null,p("modal",(0,n.__assign)((0,n.__assign)({},d.action&&d.action.dialog),{type:"dialog"}),{key:"dialog",data:d.dialogData,onConfirm:this.handleDialogConfirm,onClose:this.handleDialogClose,show:d.dialogOpen}),p("modal",(0,n.__assign)((0,n.__assign)({},d.action&&d.action.drawer),{type:"drawer"}),{key:"drawer",data:d.drawerData,onConfirm:this.handleDrawerConfirm,onClose:this.handleDrawerClose,show:d.drawerOpen}))},t.prototype.render=function(){var e=this.props,t=(e.$path,e.$schema,e.wrapWithPanel),a=e.render,n=e.title,o=e.store,i=e.panelClassName,l=e.headerClassName,s=e.footerClassName,d=e.footerWrapClassName,u=e.actionsClassName,c=e.bodyClassName,p=e.classnames,h=e.affixFooter,m=e.lazyLoad,f=e.translate,v=e.footer,_=(e.formStore,this.renderBody());return t&&(_=a("body",{type:"panel",title:f(n)},{className:p(i,"Panel--form"),formStore:this.props.store,children:_,actions:this.buildActions(),onAction:this.handleAction,onQuery:this.handleQuery,disabled:o.loading,btnDisabled:o.loading||o.validating,headerClassName:l,footer:v,footerClassName:s,footerWrapClassName:d,actionsClassName:u,bodyClassName:c,affixFooter:h})),m&&(_=r.default.createElement(g.LazyComponent,null,_)),_},t.defaultProps={title:"Form.title",submitText:"Form.submit",initFetch:!0,wrapWithPanel:!0,mode:"normal",collapsable:!1,controlWidth:"full",horizontal:{left:2,right:10,offset:2},columnCount:0,panelClassName:"Panel--default",messages:{fetchFailed:"fetchFailed",saveSuccess:"saveSuccess",saveFailed:"saveFailed"},wrapperComponent:"",finishedField:"finished",initFinishedField:"finished",labelAlign:"right"},t.propsList=["title","header","controls","tabs","fieldSet","submitText","initFetch","wrapWithPanel","mode","columnCount","collapsable","horizontal","panelClassName","messages","wrapperComponent","resetAfterSubmit","clearAfterSubmit","submitOnInit","submitOnChange","onInit","onReset","onSubmit","onChange","onFailed","onFinished","onSaved","canAccessSuperData","lazyChange","formLazyChange","lazyLoad","formInited","simpleMode","inputOnly","value","actions","multiple"],t}(r.default.Component);t.default=b;var C=function(e){function t(t,a){var n=e.call(this,t)||this,r=a;return r.registerComponent(n),n}var a;return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){if(e.prototype.componentDidMount.call(this),this.props.autoFocus){var t=this.context,a=t.getComponents(),n=(0,h.default)(a,(function(e){return e.focus}));n&&setTimeout((function(){return n.focus()}),200)}},t.prototype.componentWillUnmount=function(){var t=this.context;t.unRegisterComponent(this),e.prototype.componentWillUnmount.call(this)},t.prototype.doAction=function(e,t,a){return void 0===t&&(t=this.props.store.data),void 0===a&&(a=!1),this.handleAction(void 0,e,t,a)},t.prototype.handleAction=function(t,a,r,o,i){if(void 0===o&&(o=!1),a.target&&"reload"!==a.actionType){var l=this.context;return Promise.all(a.target.split(",").map((function(e){var t=l.getComponentByName(e);return t&&t.doAction&&t.doAction((0,n.__assign)((0,n.__assign)({},a),{target:void 0}),r,o)})))}return e.prototype.handleAction.call(this,t,a,r,o,i)},t.prototype.handleDialogConfirm=function(t,a,n,r){e.prototype.handleDialogConfirm.call(this,t,a,n,r);var o=this.props.store,i=this.context;a.reload?i.reload(a.reload,n):o.action&&o.action.reload&&i.reload(o.action.reload,n)},t.prototype.submitToTarget=function(e,t){var a=this.context;a.send(e,t)},t.prototype.reloadTarget=function(e,t){var a=this.context;a.reload(e,t)},t.prototype.closeTarget=function(e){var t=this.context;t.close(e)},t.prototype.reload=function(t,a,n,r){if(a)return this.receive(a);var o,i=this.context,l="",s=null;t&&~(o=t.indexOf("."))&&(l=t.substring(o+1),t=t.substring(0,o));var d,c=t?t.indexOf("?"):-1;if(~c&&(s=(0,f.dataMapping)((0,u.qsparse)(t.substring(c+1)),n),t=t.substring(0,c)),t&&(d=i.getComponentByName(t))&&d.reload)d.reload(l,s,n);else if("*"===t){e.prototype.reload.call(this,t,a,n,r);var p=i.getComponents();p.forEach((function(e){return e.reload&&e.reload("",s,n)}))}else e.prototype.reload.call(this,t,a,n,r)},t.prototype.receive=function(t,a){if(!a)return e.prototype.receive.call(this,t);var n=this.context,r=a.indexOf("."),o="";~r&&(o=a.substring(1+r),a=a.substring(0,r));var i=n.getComponentByName(a);i&&i.receive&&i.receive(t,o)},t.prototype.setData=function(t){return e.prototype.setValues.call(this,t)},t.contextType=m.ScopedContext,t=(0,n.__decorate)([(0,o.Renderer)({type:"form",storeType:i.FormStore.name,isolateScope:!0,storeExtendsData:function(e){return e.inheritData},shouldSyncSuperStore:function(e,t,a){var n,r;if(t.quickEditFormRef&&t.onQuickChange&&((0,u.isObjectShallowModified)(a.data,t.data)||(0,u.isObjectShallowModified)(a.data.__super,t.data.__super)||(0,u.isObjectShallowModified)(null===(n=a.data.__super)||void 0===n?void 0:n.__super,null===(r=t.data.__super)||void 0===r?void 0:r.__super)))return!0}}),(0,n.__metadata)("design:paramtypes",[Object,"function"===typeof(a="undefined"!==typeof m.IScopedContext&&m.IScopedContext)?a:Object])],t),t}(b);t.FormRenderer=C}}]);