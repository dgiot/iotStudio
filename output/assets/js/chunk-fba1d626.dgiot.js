/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2022年07月01日22时26分03秒
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fba1d626"],{"00c5":function(e,t,o){e.exports=o.p+"static/img/personal_video_black_24dp.57cfa0c3.svg"},"04d1":function(e,t,o){"use strict";o("3cc8")},"08e9":function(e,t,o){e.exports=o.p+"static/img/timeline_black_24dp.29d77d59.svg"},"0b14":function(e,t,o){"use strict";o("d979")},"0c3c":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"comprehensive-table-container"},[t("dgiot-query-form",[t("dgiot-query-form-top-panel",[t("el-form",{ref:"form",attrs:{inline:!0,"label-width":"49px",model:e.queryForm,size:"mini"}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.Table Name")}},[t("el-select",{attrs:{"allow-create":"",clearable:"","default-first-option":"",disabled:e.classDisable,filterable:"",size:"mini"},on:{change:e.changeClass},model:{value:e.queryForm.class,callback:function(t){e.$set(e.queryForm,"class",t)},expression:"queryForm.class"}},e._l(e.DbaTable,(function(e){return t("el-option",{key:e.className,attrs:{label:e.className,value:e.className}})})),1)],1),t("el-form-item",{attrs:{label:e.$translateTitle("product.title")}},[t("el-input",{model:{value:e.queryForm.title,callback:function(t){e.$set(e.queryForm,"title",t)},expression:"queryForm.title"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("rule.Type")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"","default-first-option":"",filterable:""},on:{change:function(t){return e.fetchData()}},model:{value:e.queryForm.type,callback:function(t){e.$set(e.queryForm,"type",t)},expression:"queryForm.type"}},e._l(e.Types,(function(o){return t("el-option",{key:o.label,attrs:{label:o.label,value:o.value}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(o.label))]),t("span",{staticStyle:{float:"right","font-size":"13px",color:"#8492a6"}},[e._v(" "+e._s(o.value)+" ")])])})),1)],1),t("el-form-item",{attrs:{label:"key"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"","default-first-option":"",filterable:"",size:"mini"},on:{change:function(t){return e.fetchData()}},model:{value:e.queryForm.key,callback:function(t){e.$set(e.queryForm,"key",t)},expression:"queryForm.key"}},e._l(e.keys,(function(o){return t("el-option",{key:o.objectId,attrs:{label:o.objectId,value:o.objectId}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(o.objectId))]),t("span",{staticStyle:{float:"right","font-size":"13px",color:"#8492a6"}},[e._v(" "+e._s(o.description||o.name||o.title||o.username||o.type)+" ")])])})),1)],1),t("el-form-item",{attrs:{label:e.$translateTitle("home.language")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"","default-first-option":"",filterable:""},on:{change:function(t){return e.fetchData()}},model:{value:e.queryForm.language,callback:function(t){e.$set(e.queryForm,"language",t)},expression:"queryForm.language"}},e._l(e.lang,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"id"}},[t("el-input",{attrs:{size:"mini"},model:{value:e.queryForm.objectId,callback:function(t){e.$set(e.queryForm,"objectId",t)},expression:"queryForm.objectId"}})],1),t("el-form-item",[t("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleAdd}}),t("el-button",{attrs:{icon:"el-icon-search",type:"success"},on:{click:function(t){return e.fetchData()}}})],1)],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{border:"",data:e.list,height:e.$baseTableHeight(0)}},[t("el-table-column",{attrs:{align:"center",label:"序号","show-overflow-tooltip":"",width:"55"},scopedSlots:e._u([{key:"default",fn:function({$index:t}){return[e._v(" "+e._s(t+1)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"视图ID",prop:"objectId","show-overflow-tooltip":"",width:"auto"}}),t("el-table-column",{directives:[{name:"show",rawName:"v-show",value:!e.queryForm.hiddenRow.includes("title"),expression:"!queryForm.hiddenRow.includes('title')"}],attrs:{align:"center",label:e.$translateTitle("product.title"),prop:"title","show-overflow-tooltip":"",width:"200px"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-form",{attrs:{model:o}},[t("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{size:"mini"}},[o.isEdit?t("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{size:"mini"},on:{blur:function(t){return e.blurEvent(o)},focus:function(e){o.oldTitle=o.title}},model:{value:o.title,callback:function(t){e.$set(o,"title",t)},expression:"row.title"}}):t("p",{staticStyle:{float:"left",height:"8px","margin-left":"15px"},domProps:{innerHTML:e._s(o.title)}}),t("i",{directives:[{name:"show",rawName:"v-show",value:!o.isEdit,expression:"!row.isEdit"}],staticClass:"el-icon-edit",staticStyle:{float:"right","line-height":"26px",cursor:"pointer"},on:{click:function(e){o.isEdit=!o.isEdit}}})],1)],1)]}}])}),t("el-table-column",{directives:[{name:"show",rawName:"v-show",value:!e.queryForm.hiddenRow.includes("class"),expression:"!queryForm.hiddenRow.includes('class')"}],attrs:{align:"center",label:e.$translateTitle("product.Table Name"),prop:"class","show-overflow-tooltip":"",width:"auto"}}),t("el-table-column",{attrs:{align:"center",label:"表名Id",prop:"key","show-overflow-tooltip":"",width:"auto"}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("rule.Type"),prop:"type","show-overflow-tooltip":"",width:"auto"}}),t("el-table-column",{directives:[{name:"show",rawName:"v-show",value:!e.queryForm.hiddenRow.includes("createdAt"),expression:"!queryForm.hiddenRow.includes('createdAt')"}],attrs:{align:"center",label:e.$translateTitle("application.createtime"),prop:"createdAt","show-overflow-tooltip":"",width:"auto"}}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("home.language"),"show-overflow-tooltip":"",width:"140"},scopedSlots:e._u([{key:"default",fn:function({row:o,$index:i}){return[t("Select",{on:{"on-change":function(t){return e.switchlanguage(o)}},model:{value:o.language,callback:function(t){e.$set(o,"language",t)},expression:"row.language"}},e._l(e.lang,(function(o){return t("Option",{key:o.value,staticStyle:{"z-index":"999"},attrs:{placement:0==i?"top-start":"bottom-start",value:o.value}},[e._v(" "+e._s(o.label)+" ")])})),1)]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("node.operation"),"show-overflow-tooltip":"",width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.queryForm.showRow,expression:"queryForm.showRow"}],attrs:{type:"text"},on:{click:function(t){return e.handleNotification(o)}}},[e._v(" 关联 ")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:"role"===e.type,expression:"type === 'role'"}],attrs:{type:"text"},on:{click:function(t){e.handleRelation(o,e.setRowState(e.selectRow,o))}}},[e._v(" "+e._s(e.setRowState(e.selectRow,o))+" ")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleLowCode(o.objectId)}}},[e._v(" "+e._s(e.$translateTitle("application.preview"))+" ")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(o)}}},[e._v(" "+e._s(e.$translateTitle("product.Design"))+" ")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(o)}}},[e._v(" "+e._s(e.$translateTitle("task.Delete"))+" ")])]}}])})],1),t("dgiot-parser-pagination",{attrs:{pagination:e.paginations,"query-payload":e.queryPayload},on:{pagination:e.fetchData,paginationQuery:e.paginationQuery}}),t("view-edit",{ref:"edit",on:{"fetch-data":e.fetchData}}),t("lowcodeDesign",{ref:"lowcodeDesign",on:{objectId:e.lowcodeId}})],1)},a=[],n=o("ed07"),s=o("5880"),c=o("209d"),r=o("8ba7"),l=o("eb54"),d=Object.defineProperty,u=Object.defineProperties,m=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,o)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,b=(e,t)=>{for(var o in t||(t={}))h.call(t,o)&&f(e,o,t[o]);if(p)for(var o of p(t))g.call(t,o)&&f(e,o,t[o]);return e},y=(e,t)=>u(e,m(t)),v=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())});const w={class:"",type:"",title:"",key:"",data:{type:"page",initApi:{url:"iotapi/classes/Device/parse_objectid",method:"get",adaptor:'return {\r\n  "status":0,\r\n  "msg":"",\r\n  "data":response.data.basedata\r\n  }',headers:{store:"localStorage",dgiotReplace:"parse_objectid"},dataType:"json"},body:[{type:"form",api:{method:"put",url:"iotapi/classes/Device/parse_objectid",headers:{store:"localStorage",dgiotReplace:"parse_objectid"},dataType:"json",requestAdaptor:"return {\r\n    ...api,\r\n    data: {\r\n        basedata:{ ...api.data}\r\n    }\r\n}"},body:[{type:"input-text",label:"设备名称",name:"name"}]}]},disabled:!1,hiddenRow:[]};var $={name:"ComprehensiveTable",components:{ViewEdit:l["default"],lowcodeDesign:c["default"]},props:{classDisable:{required:!1,type:Boolean,default:()=>!1},type:{required:!1,type:String,default:()=>""},viewForm:{required:!1,type:Object,default:()=>w},editRow:{required:!1,type:Object,default:()=>{}},selectRow:{required:!1,type:Array,default:()=>{}}},data(){return{lang:[{label:"中文简体",value:"zh"},{label:"english",value:"en"},{label:"日本語",value:"jp"}],Types:[{value:"amis",label:"低代码"},{value:"notification",label:"告警联动"},{value:"reportFrom",label:"报告表单"},{value:"deviceInfo",label:"设备信息"},{value:"amis_view",label:"低代码预览"},{value:"pressureconfig",label:"压测配置"},{value:"topo",label:"组态"},{value:"profile",label:"设备控制"},{value:"content",label:"数据展示"},{value:"sms_template",label:"短信模板"}],DbaTable:[],keys:[],lowcodeId:"",paginations:{pageSizes:[5,10,20,50,100,200,500],layout:"total, sizes, prev, pager, next, jumper",background:!0,hidden:!1,small:!1,pageSize:10,total:0,pageCount:0,pagerCount:7,currentPage:1,popperClass:"",prevText:"",nextText:"",disabled:!1,hideOnSinglePage:!1},queryPayload:{excludeKeys:"data",include:"",order:"-updatedAt",limit:10,skip:0,count:"objectId"},queryForm:this.viewForm,list:[],imageList:[],listLoading:!0,selectRows:""}},created(){this.setTreeFlag(!1),this.fetchData(),this.featchTable()},mounted(){if("amis"==this.$route.query.type){const{key:e,type:t,_class:o}=this.$route.query;this.queryForm.key=e,this.queryForm.type=t,this.queryForm.class=o,this.queryForm.data={type:"page",initApi:{url:"iotapi/classes/Device/parse_objectid",method:"get",adaptor:'return {\r\n  "status":0,\r\n  "msg":"",\r\n  "data":response.data.profile\r\n  }',headers:{store:"localStorage",dgiotReplace:"parse_objectid"},dataType:"json"},body:[{type:"form",api:{method:"put",url:"iotapi/classes/Device/parse_objectid",headers:{store:"localStorage",dgiotReplace:"parse_objectid"},dataType:"json",requestAdaptor:"return {\r\n    ...api,\r\n    data: {\r\n        profile:{ ...api.data}\r\n    }\r\n}"},body:[{type:"input-text",label:"设备名称",name:"name"}]}]}}this.$dgiotBus.$off("saveLowCode"),this.$dgiotBus.$on("saveLowCode",e=>{this.saveLowCode(e.id,e.data)})},methods:y(b({},Object(s["mapMutations"])({set_amisJson:"amis/set_amisJson",setTreeFlag:"settings/setTreeFlag"})),{switchlanguage(e){return v(this,null,(function*(){if(!e.language)return!1;yield Object(r["putView"])(e.objectId,{language:e.language}),this.$message({type:"success",message:"语言类型修改成功",showClose:!0})}))},setRowState(e,t){let o="关联";return _.isEmpty(e)?o="关联":e.forEach(e=>{e.objectId==t.objectId&&(o="解除关联")}),o},handleRelation(e,t){this.$emit("BusRole",{row:e,type:t})},blurEvent(e){return v(this,null,(function*(){e.isEdit=!e.isEdit,e.title!==e.oldTitle&&(yield Object(r["putView"])(e.objectId,{title:e.title}),this.$message({message:"标题修改成功",type:"success",showClose:!0,duration:1500}))}))},changeClass(e){return v(this,null,(function*(){if(this.fetchData(),!e)return!1;try{console.log(e);const t={order:"-updatedAt"},{results:o=[]}=yield this.$query_object(e,t);console.log(o),this.keys=o}catch(t){console.log(t),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+t,"error","dgiot-hey-message-error")}}))},featchTable(){return v(this,null,(function*(){try{const{results:e=[]}=yield Object(n["getTable"])();this.DbaTable=e}catch(e){console.log(e)}}))},handleNotification(e){return v(this,null,(function*(){yield this.$baseEventBus.$emit("showNotificationSettings",e)}))},handleAdd(){this.$refs["edit"].type="add",this.$refs["edit"].DbaTable=this.DbaTable,this.$refs["edit"].dialogFormVisible=!0,this.$refs["edit"].showEdit(this.queryForm)},handleEdit(e){return v(this,null,(function*(){const t=this.$baseLoading(1),{data:o={}}=yield Object(r["getView"])(e.objectId);-1==["amis_view","amis","topo"].includes(e.type)?this.$router.push({path:"/Topo?productid",query:{productid:e.key}}):this.$router.push({path:"/design/editor/amis/",query:{viewId:e.objectId,type:e.type}}),t.close(),this.set_amisJson(o)}))},handleDelete(e){console.log(e.data,e.objectId),this.$baseConfirm(this.$translateTitle("Maintenance.Are you sure you want to delete the current item"),null,()=>v(this,null,(function*(){yield Object(r["delView"])(e.objectId);this.$baseMessage(this.$translateTitle("Maintenance.successfully deleted"),"success","dgiot-hey-message-success"),this.fetchData()})))},handleLowCode(e){return v(this,null,(function*(){const t=this.$baseColorfullLoading(1);t.close(),this.$dgiotBus.$emit("lowcodePreview",yield Object(r["getView"])(e))}))},saveLowCode(e,t){return v(this,null,(function*(){const o=this.$baseColorfullLoading(1);yield Object(r["putView"])(e,t);o.close()}))},paginationQuery(e){return v(this,null,(function*(){this.queryPayload=e}))},fetchData(e){return v(this,null,(function*(){_.isEmpty(e)&&(e=this.queryPayload),this.queryPayload.where={},this.queryForm.class&&(this.queryPayload.where.class={$regex:this.queryForm.class}),this.queryForm.type&&(this.queryPayload.where.type={$regex:this.queryForm.type}),this.queryForm.title&&(this.queryPayload.where.title={$regex:this.queryForm.title}),this.queryForm.key&&(this.queryPayload.where.key={$regex:this.queryForm.key}),this.queryForm.objectId&&(this.queryPayload.where.objectId={$regex:this.queryForm.objectId}),this.queryForm.language&&(this.queryPayload.where.language={$regex:this.queryForm.language});const{count:t,order:o,excludeKeys:i,limit:a,skip:n,where:s}=e;console.log(this.queryForm),this.listLoading=!0;const{results:c,count:l}=yield Object(r["queryView"])({count:t,order:o,excludeKeys:i,limit:a,skip:n,where:s});c&&c.forEach(e=>{e.isEdit=!1,e.oldTitle=e.title,e.createdAt=moment(e.createdAt).format("YYYY-MM-DD HH:mm:ss")}),this.list=c,this.$dgiotBus.$emit("lowcodeLen",l),this.paginations.total=l,this.listLoading=!1}))}})},j=$,k=o("2877"),F=Object(k["a"])(j,i,a,!1,null,null,null);t["default"]=F.exports},"0ed6":function(e,t,o){e.exports=o.p+"static/img/volume_up_black_24dp.74a31953.svg"},"13ce":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"konva",class:{"dgiot-fullscreen":e.isFullscreen,"konva-fullscreen":e.isDevice}},[t("el-container",{staticClass:"konva-container"},[t("el-main",{staticClass:"konva-container-main"},[t("el-row",{staticClass:"user-content",attrs:{gutter:e.gutter.gutter}},[t("el-col",{staticClass:"konva-container-main-baseCol",attrs:{span:24}},[t("el-main",{staticClass:"konva-container-baseCol-baseContainer"},[t("topo-base",{ref:"topobase",staticStyle:{position:"absolute",width:"100%"}}),t("div",{ref:"konva",staticClass:"konva, _center",staticStyle:{display:"none"},attrs:{id:"konva"}})],1)],1)],1)],1)],1)],1)},a=[],n=o("e556"),s=(o("e05f"),o("d44d")),c=o("5880"),r=o("7a1d"),l=o("7212"),d=o("8ba7"),u=o("ed08"),m=Object.defineProperty,p=Object.defineProperties,h=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,y=(e,t,o)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,v=(e,t)=>{for(var o in t||(t={}))f.call(t,o)&&y(e,o,t[o]);if(g)for(var o of g(t))b.call(t,o)&&y(e,o,t[o]);return e},w=(e,t)=>p(e,h(t)),$=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())}),j={components:v({},Object(s["default"])(o("614c"))),data(){return{subtopic:"",router:"",viewInfo:{},driver:null,Stage:{},isFull:!1,topicKey:"",isFullscreen:!1,gutter:{gutter:24,xs:24,sm:24,md:24,lg:24,xl:24},productid:this.$route.query.productid||"",viewid:this.$route.query.viewid||""}},computed:w(v({},Object(c["mapGetters"])({defaultKonva:"topo/defaultKonva",graphColor:"konva/graphColor",drawing:"konva/drawing",graphNow:"konva/graphNow",pointStart:"konva/pointStart",draw:"konva/draw",flag:"konva/flag",drawParams:"konva/drawParams"})),{isDevice:{get:function(){return!("device"!=this.$route.query.type&&!this.$route.query.deviceid)}}}),mounted(){var e,t;this.$nextTick(()=>{this.handleMqtt()}),this.$dgiotBus.$off("_busUpdata"),this.$dgiotBus.$on("_busUpdata",()=>$(this,null,(function*(){this.viewInfo.objectId&&(yield this._updataTopo(this.viewInfo.objectId))}))),this.driver=new this.$Driver({className:"vue-admin-beautiful-wrapper",animate:!0,opacity:.75,padding:10,allowClose:!0,overlayClickNext:!1,doneBtnText:"完成",closeBtnText:"关闭",nextBtnText:"下一步",prevBtnText:"上一步"}),(null==(t=null==(e=null==this?void 0:this.$router)?void 0:e.query)?void 0:t.guide)&&1==Boolean(this.$router.query.guide)&&this.guide(),this.$baseEventBus.$off("ToggleView"),this.$baseEventBus.$on("ToggleView",()=>{this.isFull=!this.isFull}),this.Stage=_.isEmpty(localStorage.getItem("konvaStale"))?localStorage.getItem("konvaStale"):this.defaultKonva,this.router=this.$dgiotBus.router(this.$route.fullPath),this.setTreeFlag(!1)},destroyed(){return $(this,null,(function*(){_.isEmpty(localStorage.getItem("konvaStale"))||localStorage.setItem("konvaStale",JSON.stringify(canvas.stageJson)),yield this.$unSubscribe(this.topotopic)}))},created(){},methods:w(v({},Object(c["mapMutations"])({deleteTopo:"topo/deleteTopo",initKonva:"topo/initKonva",createThing:"topo/createThing",setTreeFlag:"settings/setTreeFlag",createdEvidence:"topo/createdEvidence"})),{nextPage(e){let t=JSON.parse(JSON.stringify(this.$route.query));const o=JSON.parse(this.$route.query.list),i=t.length;t.page=Number(t.page),t.page="left"==e?t.page-- >=-1&&t.page>0?t.page:i:t.page++>=i?0:t.page,t.viewid=o[t.page].viewid,this.$router.push({path:this.$route.path,query:t}),this.handleMqtt()},guide(){this.driver.defineSteps(n["default"]),this.driver.start()},_updataTopo(e){return $(this,null,(function*(){this.viewInfo.data.konva={Stage:JSON.parse(canvas.stage.toJSON())};try{yield Object(d["putView"])(e,{data:this.viewInfo.data}),this.$baseMessage(this.$translateTitle("user.update completed"),"success","dgiot-hey-message-success"),console.error("this.viewInfo.data",this.viewInfo.data)}catch(t){console.log(t)}}))},handleMqtt(){return $(this,null,(function*(){var e,t;let o=this;"device"==o.$route.query.type&&(o.productid=o.$route.query.deviceid);const i=o.$baseColorfullLoading(3);try{const{productid:e,viewid:t,devaddr:a}=o.$route.query;let n={productid:e,devaddr:a,viewid:t};const{message:s="",data:c={}}=yield Object(r["_getTopo"])(n),{results:u=[]}=yield Object(l["getProduct"])(o.$route.query.productid);if(o.productconfig=u,console.groupCollapsed("%c productconfig","color:#009a61; font-size: 28px; font-weight: 300"),console.info("productconfig ->\n",o.productconfig),console.groupEnd(),"SUCCESS"==s){if(console.groupCollapsed("%c _getTopo","color:#009a61; font-size: 28px; font-weight: 300"),console.info("data ->\n",c),console.groupEnd(),o.$refs["operation"]?o.$refs["operation"].productconfig=u[0]:console.log(" _this.$refs['operation']",o.$refs["operation"]),o.globalStageid=c.Stage.attrs.id,o.paramsconfig={konva:c},console.log("topo info msg 请求数据有组态 就设置这个组态为请求回来的组态",c.Stage,c.viewid),c.viewid){const e=yield Object(d["getView"])(c.viewid);this.viewInfo=e}console.error(this.viewInfo),yield o.initKonva({data:c.Stage,id:"kevCurrent"})}else o.$baseMessage("暂无组态。显示默认组态","info","dgiot-hey-message-error"),console.log("topo info msg 请求数据没有组态 就设置这个组态为默认",o.Stage),yield o.initKonva({data:o.initKonva,id:"kevCurrent"});i.close()}catch(a){yield o.initKonva({data:this.Stage,id:"kevCurrent"}),console.log("topo info msg 组态请求出错",a),i.close()}setTimeout(()=>{const e={icon:"timeline",type:"delete",path:"M23,8c0,1.1-0.9,2-2,2c-0.18,0-0.35-0.02-0.51-0.07l-3.56,3.55C16.98,13.64,17,13.82,17,14c0,1.1-0.9,2-2,2s-2-0.9-2-2 c0-0.18,0.02-0.36,0.07-0.52l-2.55-2.55C10.36,10.98,10.18,11,10,11s-0.36-0.02-0.52-0.07l-4.55,4.56C4.98,15.65,5,15.82,5,16 c0,1.1-0.9,2-2,2s-2-0.9-2-2s0.9-2,2-2c0.18,0,0.35,0.02,0.51,0.07l4.56-4.55C8.02,9.36,8,9.18,8,9c0-1.1,0.9-2,2-2s2,0.9,2,2 c0,0.18-0.02,0.36-0.07,0.52l2.55,2.55C14.64,12.02,14.82,12,15,12s0.36,0.02,0.52,0.07l3.55-3.56C19.02,8.35,19,8.18,19,8 c0-1.1,0.9-2,2-2S23,6.9,23,8z"};o.createdEvidence(_.merge(e,{index:7,fill:"orange",productid:o.$route.query.productid})),o.deleteTopo(window.deletePath)},1e3),o.subtopic=`$dg/user/konva/${(null==(t=null==(e=null==o?void 0:o.$route)?void 0:e.query)?void 0:t.deviceid)||"test"}/report`,console.warn("订阅mqtt",o.subtopic),yield o.$subscribe(o.subtopic),console.log(o.$mqttInfo),o.handleMqttMsg()}))},handleMqttMsg(){console.error("this.topicKey",this.$mqttInfo.topicKey),this.$dgiotBus.$off(this.$mqttInfo.topicKey),this.$dgiotBus.$on(this.$mqttInfo.topicKey,e=>{if(console.log(e),e.payloadString){let t;return Object(u["isBase64"])(e.payloadString)?(t=JSON.parse(Base64.decode(e.payloadString)),console.log("消息解密消息",t)):(console.log("非base64数据类型",JSON.parse(e.payloadString)),t=JSON.parse(e.payloadString)),console.log("decodeMqtt.konva",canvas.stage),console.log(t),t.forEach(e=>{konvaUtils.putNode(canvas.stage,e.id,e.params,e.type)}),void console.log("infokonvaUtils",konvaUtils)}})}})},k=j,F=(o("cade"),o("2877")),T=Object(F["a"])(k,i,a,!1,null,"d12f6b78",null);t["default"]=T.exports},"17ea":function(e,t,o){"use strict";o("5cb5")},"1e6b":function(e,t,o){"use strict";o("22a2")},2036:function(e,t,o){"use strict";o("fcf5")},"209d":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"index-container"},[t("el-drawer",{directives:[{name:"drawerDrag",rawName:"v-drawerDrag"}],key:e.type+e.objectId,attrs:{"append-to-body":"","before-close":e.handleClose,size:"90%",title:e.objectId,visible:e.flag,"with-header":e.withHeader},on:{"update:visible":function(t){e.flag=t}}},["topo"===e.type?t("topo",{attrs:{code:e.code.konva,"object-id":e.objectId}}):t("amis",{attrs:{code:e.code,"object-id":e.objectId}})],1)],1)},a=[],n=o("8e26"),s=o("f27c"),c=o("5880"),r=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(e,t,o)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,g=(e,t)=>{for(var o in t||(t={}))m.call(t,o)&&h(e,o,t[o]);if(u)for(var o of u(t))p.call(t,o)&&h(e,o,t[o]);return e},f=(e,t)=>l(e,d(t)),_=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())}),b={name:"Index",components:{topo:s["default"],amis:n["default"]},data(){return{withHeader:!0,types:["amis","deviceInfo","amis_view","topo","profile","content","notification","reportFrom"],code:{},objectId:"",flag:!1,type:"amis"}},mounted(){localStorage.removeItem("parse_objectid"),this.$dgiotBus.$off("lowcodePreview"),this.$dgiotBus.$on("lowcodePreview",e=>{const t={},{type:o,data:i,objectId:a,class:n}=e;"Device"==n&&(console.log(i),t["parse_objectid"]=parse_objectid,localStorage.setItem("parse_objectid",parse_objectid),console.groupCollapsed("%c amis env","color:#009a61; font-size: 28px"),console.log("amisEnv",t),console.groupEnd()),this.designLowCode(o,a,i)})},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:f(g({},Object(c["mapMutations"])({setData:"view/setData"})),{handleClose(e){return _(this,null,(function*(){try{this.$confirm("确认关闭？").then(t=>{e(),this.$dgiotBus.$emit("lowcodeClose")}).catch(e=>{})}catch(t){console.log(t)}}))},designLowCode(e,t,o){return _(this,null,(function*(){console.log(e),console.log(o),console.log(t),this.code=o,this.type=e,this.objectId=t,this.flag=!0}))}})},y=b,v=(o("3ca7"),o("2877")),w=Object(v["a"])(y,i,a,!1,null,"1d80ab7e",null);t["default"]=w.exports},"22a2":function(e,t,o){},2369:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"iframe-container"},[t("iframe",{attrs:{frameborder:"0",src:e.url}})])},a=[],n={name:"Swagger",data(){return{url:location.origin+"/dgiot_swagger/"}}},s=n,c=(o("89fd"),o("2877")),r=Object(c["a"])(s,i,a,!1,null,"757fa2e1",null);t["default"]=r.exports},"25ad":function(e,t,o){},"27f8":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"icon-selector-popper"},[t("div",{staticClass:"dialog"},[t("dgiot-input",{ref:"uploadFinish",on:{fileInfo:e.fileInfo}})],1),t("el-collapse",{attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-collapse-item",{attrs:{name:"icon",title:"iconfont"}},[t("el-row",{attrs:{gutter:20}},e._l(e.iconfont.glyphs,(function(o,i){return t("el-col",{directives:[{name:"show",rawName:"v-show",value:i<=11,expression:"index <= 11"}],key:o.icon_id,attrs:{span:8}},[t("i",{directives:[{name:"svg-drag",rawName:"v-svg-drag",value:{callback:e.coordinate},expression:"{ callback: coordinate }"}],on:{mousedown:function(t){return e.moveSvg(o)}}},[t("DgiotIconfont",{attrs:{name:o.font_class,title:o.name,type:"svg"}})],1)])})),1)],1)],1)],1)},a=[],n=o("ac49"),s=n["a"],c=(o("ba07"),o("2877")),r=Object(c["a"])(s,i,a,!1,null,null,null);t["default"]=r.exports},"32b2":function(e,t,o){"use strict";o("4af0")},3449:function(e,t,o){"use strict";o("cd44")},"38e5":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"TopoArom"},[t("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.wmxhandleClose,"close-on-click-modal":!1,title:e.wmxSituation+"自定义属性",top:"5vh",visible:e.wmxdialogVisible,width:"60%"},on:{"update:visible":function(t){e.wmxdialogVisible=t}}},[t("div",{staticClass:"wmxheader"},[t("el-form",{ref:"sizeForm",attrs:{"label-position":"left","label-width":"150px",model:e.sizeForm,rules:e.sizerule,size:"mini"}},["int"==e.sizeForm.type||"float"==e.sizeForm.type||"double"==e.sizeForm.type?t("div",[t("el-collapse",{model:{value:e.collapseName,callback:function(t){e.collapseName=t},expression:"collapseName"}},[t("el-collapse-item",{attrs:{name:"1"}},[t("template",{slot:"title"},[t("h3",{staticStyle:{"font-size":"normal"}},[e._v("数据存储")])]),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.functionname"),prop:"name"}},[t("el-input",{model:{value:e.sizeForm.name,callback:function(t){e.$set(e.sizeForm,"name",t)},expression:"sizeForm.name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.identifier"),prop:"identifier"}},[t("el-input",{model:{value:e.sizeForm.identifier,callback:function(t){e.$set(e.sizeForm,"identifier",t)},expression:"sizeForm.identifier"}})],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"取值范围(最小值)",prop:"startnumber"}},[t("el-input",{attrs:{placeholder:e.$translateTitle("product.minimumvalue"),type:"number"},model:{value:e.sizeForm.startnumber,callback:function(t){e.$set(e.sizeForm,"startnumber",e._n(t))},expression:"sizeForm.startnumber"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"取值范围(最大值)",prop:"endnumber"}},[t("el-input",{attrs:{placeholder:e.$translateTitle("product.maximumvalue"),type:"number"},on:{input:function(t){return e.changeValue("sizeForm")}},model:{value:e.sizeForm.endnumber,callback:function(t){e.$set(e.sizeForm,"endnumber",e._n(t))},expression:"sizeForm.endnumber"}})],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"步长",prop:"step"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:0,precision:2,step:.01},model:{value:e.sizeForm.step,callback:function(t){e.$set(e.sizeForm,"step",t)},expression:"sizeForm.step"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.readandwritetype"),prop:"isread"}},[t("el-radio-group",{staticStyle:{width:"100%"},attrs:{size:"medium"},model:{value:e.sizeForm.isread,callback:function(t){e.$set(e.sizeForm,"isread",t)},expression:"sizeForm.isread"}},[t("el-radio",{attrs:{label:"rw"}},[e._v(" "+e._s(e.$translateTitle("product.readandwrite"))+" ")]),t("el-radio",{attrs:{label:"r"}},[e._v(" "+e._s(e.$translateTitle("product.onlyread"))+" ")])],1)],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.datatype"),prop:"type"}},[t("el-select",{staticStyle:{width:"100%"},on:{change:e.selectStruct},model:{value:e.sizeForm.type,callback:function(t){e.$set(e.sizeForm,"type",t)},expression:"sizeForm.type"}},[t("el-option",{attrs:{label:e.$translateTitle("product.struct"),value:"struct"}}),t("el-option",{attrs:{label:e.$translateTitle("product.init"),value:"int"}}),t("el-option",{attrs:{label:e.$translateTitle("product.float"),value:"float"}}),t("el-option",{attrs:{label:e.$translateTitle("product.double"),value:"double"}}),t("el-option",{attrs:{label:e.$translateTitle("product.bool"),value:"bool"}}),t("el-option",{attrs:{label:e.$translateTitle("product.enum"),value:"enum"}}),t("el-option",{attrs:{label:e.$translateTitle("product.string"),value:"string"}}),t("el-option",{attrs:{label:e.$translateTitle("product.date"),value:"date"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.unit")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$translateTitle("product.unit")},model:{value:e.sizeForm.unit,callback:function(t){e.$set(e.sizeForm,"unit",t)},expression:"sizeForm.unit"}},e._l(e.allunit,(function(e,o){return t("el-option",{key:o,attrs:{label:e.data.Name+"/"+e.data.Symbol,value:e.data.Symbol}})})),1)],1)],1)],1)],2),t("el-collapse-item",{attrs:{name:"2"}},[t("template",{slot:"title"},[t("h3",{staticStyle:{"font-size":"normal"}},[e._v("数据采集")]),t("el-row",{staticStyle:{margin:"0 auto"}},[t("el-col",{attrs:{span:2}},[t("el-popover",{attrs:{placement:"right",trigger:"click",width:"400"}},[t("el-table",{attrs:{data:e.wmxData.slice((e.wmxstart-1)*e.wmxPageSize,e.wmxstart*e.wmxPageSize)}},[t("el-table-column",{attrs:{label:"标识符"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(o.identifier)+" ")])]}}],null,!1,945501893)}),t("el-table-column",{attrs:{label:"功能名称"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(o.name)+" ")])]}}],null,!1,3608931969)}),t("el-table-column",{attrs:{label:"数据类型"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(o.dataType.type)+" ")])]}}],null,!1,404777272)})],1),t("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.wmxPageSize,"page-sizes":[10,20,30,50],total:e.wmxData.length},on:{"current-change":e.wmxCurrentChange,"size-change":e.wmxSizeChange}}),t("el-button",{staticStyle:{"text-align":"center"},attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v(" 添加变量 ")])],1)],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-tooltip",{staticStyle:{float:"left"},attrs:{effect:"dark",placement:"right-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 采集策略表达式 。 "),t("br"),e._v(" 如： "),t("br"),e._v(" 5分钟 = 5 * 60 "),t("br"),e._v(" 1小时 = 60 * 60 "),t("br"),e._v(" 5小时 = 5 * 60 * 60 "),t("br"),e._v(" 1天 = 24 * 60 * 60 "),t("br")]),t("i",{staticClass:"el-icon-question"})]),t("el-form-item",{attrs:{label:"采集策略(单位：秒)"}},[t("el-select",{staticStyle:{width:"95%"},attrs:{"allow-create":"","default-first-option":"",filterable:"",placeholder:"请选择",size:"mini"},model:{value:e.sizeForm.strategy,callback:function(t){e.$set(e.sizeForm,"strategy",t)},expression:"sizeForm.strategy"}},e._l(e.sizeOption,(function(e){return t("el-option",{key:e.val,attrs:{label:e.label,size:"mini",value:e.val}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"采集轮次"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"","default-first-option":"",filterable:"",placeholder:"请选择",size:"mini"},model:{value:e.sizeForm.round,callback:function(t){e.$set(e.sizeForm,"round",t)},expression:"sizeForm.round"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("p",{staticStyle:{position:"absolute",top:"26px",margin:"0","font-size":"12px",color:"black"}},[e._v(" 例如:1,3,5,8;(可选可自主填写)(注意:逗号为英文逗号) ")])],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-tooltip",{staticStyle:{float:"left"},attrs:{effect:"dark",placement:"right-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 1. 采集值 设备上行数据经采集公式计算后显示 。 "),t("br"),e._v(" 公式中的%s为占位符，是固定字段。 "),t("br"),e._v(" 如： "),t("br"),e._v(" 加：%s+10 "),t("br"),e._v(" 减：%s-10 "),t("br"),e._v(" 乘：%s*10 "),t("br"),e._v(" 除：%s/10 "),t("br"),e._v(" 余数：%s%10 "),t("br"),e._v(" 2. 计算值 添加变量按钮, "),t("br"),e._v(" 复制对应的标识符 "),t("br"),e._v(" 例：pressure_out "),t("br"),e._v(" 加：pressure_out+10 "),t("br"),e._v(" 减：pressure_out-10 "),t("br"),e._v(" 乘：pressure_out*10 "),t("br"),e._v(" 除：pressure_out/10 "),t("br"),e._v(" 余数：pressure_out%10 "),t("br"),e._v(" 3. 复杂值 ：关闭本弹窗后使用物解析处理 "),t("br")]),t("i",{staticClass:"el-icon-question"})]),t("el-form-item",{attrs:{label:"采集公式"}},[t("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"%s",rows:1,type:"textarea"},model:{value:e.sizeForm.collection,callback:function(t){e.$set(e.sizeForm,"collection",t)},expression:"sizeForm.collection"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"采集顺序"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{label:"采集顺序",min:0},model:{value:e.sizeForm.Order,callback:function(t){e.$set(e.sizeForm,"Order",t)},expression:"sizeForm.Order"}})],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:24}},[t("el-tooltip",{attrs:{effect:"dark",placement:"right-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 1. 采集值: 主动向设备写数据经控制公式计算后下发 。 "),t("br"),e._v(" 公式中的%s为占位符，是固定字段。 "),t("br"),e._v(" 如： "),t("br"),e._v(" 加：%s+10 "),t("br"),e._v(" 减：%s-10 "),t("br"),e._v(" 乘：%s*10 "),t("br"),e._v(" 除：%s/10 "),t("br"),e._v(" 余数：%s%10 "),t("br"),e._v(" 2. 计算值: 点击添加变量按钮, "),t("br"),e._v(" 复制对应的标识符 "),t("br"),e._v(" 例：pressure_out "),t("br"),e._v(" 加：pressure_out+10 "),t("br"),e._v(" 减：pressure_out-10 "),t("br"),e._v(" 乘：pressure_out*10 "),t("br"),e._v(" 除：pressure_out/10 "),t("br"),e._v(" 余数：pressure_out%10 "),t("br"),e._v(" 3. 复杂值 ：关闭本弹窗后使用物解析处理 "),t("br")]),t("i",{staticClass:"el-icon-question",staticStyle:{float:"left"}})]),t("el-form-item",{attrs:{label:"控制公式"}},[t("el-input",{staticStyle:{width:"98%"},attrs:{placeholder:"%s",rows:1,type:"textarea"},model:{value:e.sizeForm.control,callback:function(t){e.$set(e.sizeForm,"control",t)},expression:"sizeForm.control"}})],1)],1)],1)],2),t("el-collapse-item",{attrs:{name:"3"}},[t("template",{slot:"title"},[t("h3",{staticStyle:{"font-size":"normal"}},[e._v("数据来源")])]),t("el-divider"),t("div",{attrs:{name:"dataIdentification"}},[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"数据标识",prop:"dis",required:""}},[t("el-input",{attrs:{placeholder:"数据标识"},model:{value:e.sizeForm.dis,callback:function(t){e.$set(e.sizeForm,"dis",t)},expression:"sizeForm.dis"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"数据",required:""}},[t("el-input",{attrs:{placeholder:"数据个数"},model:{value:e.sizeForm.dinumber,callback:function(t){e.$set(e.sizeForm,"dinumber",e._n(t))},expression:"sizeForm.dinumber"}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"协议类型"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.sizeForm.protocol,callback:function(t){e.$set(e.sizeForm,"protocol",t)},expression:"sizeForm.protocol"}},e._l(["normal","modbus","DLT645"],(function(e,o){return t("el-option",{key:o,attrs:{label:e,value:e}})})),1)],1)],1),t("el-col",{directives:[{name:"show",rawName:"v-show",value:"modbus"==e.sizeForm.protocol,expression:"sizeForm.protocol == 'modbus'"}],attrs:{span:12}},[t("el-form-item",{attrs:{label:"字节序",prop:"byteorder"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.sizeForm.byteorder,callback:function(t){e.$set(e.sizeForm,"byteorder",t)},expression:"sizeForm.byteorder"}},e._l([{value:"big",label:"大端"},{value:"little",label:"小端"}],(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showNewItem,expression:"showNewItem"}],attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"寄存器状态",prop:"byteorder"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.sizeForm.operatetype,callback:function(t){e.$set(e.sizeForm,"operatetype",t)},expression:"sizeForm.operatetype"}},e._l([{value:"coilStatus",label:"线圈状态"},{value:"输入状态",label:"输入状态"},{value:"holdingRegister",label:"保持寄存器"},{value:"inputRegister",label:"输入寄存器"}],(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"数据类型"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.sizeForm.originaltype,callback:function(t){e.$set(e.sizeForm,"originaltype",t)},expression:"sizeForm.originaltype"}},e._l(["int16","uint16","int32","uint32","int64","uint64","float","double","string","customizedData"],(function(e,o){return t("el-option",{key:o,staticStyle:{width:"100%"},attrs:{label:e,value:e}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"从机地址"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.sizeForm.slaveid,callback:function(t){e.$set(e.sizeForm,"slaveid",t)},expression:"sizeForm.slaveid"}})],1)],1)],1)],2)],1)],1):e._e(),"bool"==e.sizeForm.type?t("div",[t("el-form-item",{attrs:{label:e.$translateTitle("product.attribute"),required:""}},[t("div",{staticStyle:{height:"40px"}},[t("el-col",{attrs:{span:11}},[t("el-form-item",[t("el-input",{staticClass:"inputnumber",staticStyle:{width:"100%"},attrs:{placeholder:e.$translateTitle("product.attribute"),readonly:"",type:"number"},model:{value:e.sizeForm.truevalue,callback:function(t){e.$set(e.sizeForm,"truevalue",t)},expression:"sizeForm.truevalue"}})],1)],1),t("el-col",{attrs:{span:2}},[e._v("-")]),t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"true"}},[t("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egopen")},model:{value:e.sizeForm.true,callback:function(t){e.$set(e.sizeForm,"true",t)},expression:"sizeForm.true"}})],1)],1)],1),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-col",{attrs:{span:11}},[t("el-form-item",[t("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.attribute"),readonly:"",type:"number"},model:{value:e.sizeForm.falsevalue,callback:function(t){e.$set(e.sizeForm,"falsevalue",t)},expression:"sizeForm.falsevalue"}})],1)],1),t("el-col",{attrs:{span:2}},[e._v("-")]),t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"true"}},[t("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egclose")},model:{value:e.sizeForm.false,callback:function(t){e.$set(e.sizeForm,"false",t)},expression:"sizeForm.false"}})],1)],1)],1)])],1):e._e(),"enum"==e.sizeForm.type?t("div",[e._l(e.sizeForm.specs,(function(o,i){return t("el-form-item",{key:i,attrs:{required:""}},[t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.attribute")+i,prop:"specs."+i+".attribute",rules:[{required:!0,message:"输入属性"}]}},[t("el-input",{attrs:{placeholder:e.$translateTitle("product.egnumber0")},model:{value:o.attribute,callback:function(t){e.$set(o,"attribute",t)},expression:"item.attribute"}})],1)],1),t("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:e.$translateTitle("product.attributevalue")+i,prop:"specs."+i+".attributevalue",rules:[{required:!0,message:"输入属性值"}]}},[t("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:o.attributevalue,callback:function(t){e.$set(o,"attributevalue",t)},expression:"item.attributevalue"}})],1)],1),t("el-col",{staticClass:"line",attrs:{span:2}}),t("el-col",{staticClass:"line",attrs:{span:4}},[t("el-link",{staticStyle:{"margin-top":"30px","margin-left":"5px"},attrs:{icon:"el-icon-minus",type:"primary",underline:!1},on:{click:function(t){return t.preventDefault(),e.removeDomain(o)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)],1)})),t("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},on:{click:e.addDomain}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")])],2):e._e(),"struct"==e.sizeForm.type?t("div",[t("el-form-item",{attrs:{label:"JSON对象",required:""}},[t("ul",{staticStyle:{"padding-left":"20px",margin:"0"}},e._l(e.sizeForm.struct,(function(o,i){return t("li",{key:i,staticStyle:{display:"flex","list-style":"none"},attrs:{value:"item"}},[t("div",[t("span",[e._v(" "+e._s(e.$translateTitle("product.parametername")+":")+"} ")]),t("span",[e._v(e._s(o.name))])]),t("div",[t("el-link",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",underline:!1},on:{click:function(t){return e.editStruct(o,i)}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),t("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){return e.deleteStruct(i)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)])})),0),t("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},on:{click:function(t){return e.addStruct("structform")}}},[e._v(" "+e._s(e.$translateTitle("product.addparameter"))+" ")])],1)],1):e._e(),"string"==e.sizeForm.type?t("div",[t("el-form-item",{attrs:{label:e.$translateTitle("product.datalength"),prop:"string"}},[t("el-input",{attrs:{type:"number"},model:{value:e.sizeForm.string,callback:function(t){e.$set(e.sizeForm,"string",e._n(t))},expression:"sizeForm.string"}},[t("template",{slot:"append"},[e._v(" "+e._s(e.$translateTitle("product.byte"))+" ")])],2)],1)],1):e._e(),"date"==e.sizeForm.type?t("div",[t("el-form-item",{attrs:{label:e.$translateTitle("product.timeformat")}},[t("el-input",{attrs:{readonly:""},model:{value:e.sizeForm.date,callback:function(t){e.$set(e.sizeForm,"date",t)},expression:"sizeForm.date"}})],1)],1):e._e()])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.wmxhandleClose}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitForm("sizeForm")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1)},a=[],n={name:"TopoArom",components:{},data(){return{infoData:"TopoArom"}},computed:{},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:{}},s=n,c=o("2877"),r=Object(c["a"])(s,i,a,!1,null,null,null);t["default"]=r.exports},"3ab6":function(e,t,o){"use strict";(function(e){var i=o("6dd4"),a=o("5880"),n=o("6db3"),s=o("bf14"),c=o("6951"),r=o("79fe"),l=o("c250"),d=Object.defineProperty,u=Object.defineProperties,m=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,o)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,_=(e,t)=>{for(var o in t||(t={}))h.call(t,o)&&f(e,o,t[o]);if(p)for(var o of p(t))g.call(t,o)&&f(e,o,t[o]);return e},b=(e,t)=>u(e,m(t)),y=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())});const v=/(\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&:/~+#-]*[\w@?^=%&/~+#-])?$/,w=Object({NODE_ENV:"production",VUE_APP_TITLE:"物联网开发平台",VUE_APP_AUTHOR:"h7ml",VUE_APP_UPDATE_TIME:"2022年07月01日22时26分03秒",VUE_APP_VERSION:"4.5.4",VUE_APP_Keywords:"一站式物联网PaaS平台|物联网应用服务",VUE_APP_Description:"提供物联网垂直领域应用使能平台及解决方案",VUE_APP_URL:"http://127.0.0.1:5080",VUE_APP_CDN_URL:"/dgiot_dashboard/public",BASE_URL:""}).CDN_URL,$=o("df7c"),j=v.test(w)?w+"/assets/images/dgiot_release/topo/":$.join(e,"/assets/images/dgiot_release/topo/"),k=o("e043");t["a"]={name:"TopoTabs",components:{Thing:s["default"],Amis:c["default"],Background:r["default"],Evidence:l["default"]},props:{isDirver:{type:Boolean,default:!1,required:!1}},data(){return{inputParams:{},upImgType:"bg",tabPosition:"left",iconfont:k,busData:{coordinate:{},paths:[]},accept:".jpg,.jpeg,.png,.gif,.bmp,.pdf,.JPG,.JPEG,.PBG,.GIF,.BMP,.PDF",imgHost:j,icon:"24-hours-fill",layout:"total, prev, next",total:0,background:!0,height:0,selectRows:"",queryIcon:[],queryForm:{pageNo:1,pageSize:30,title:""},images:[],imgParams:{},activeNames:"icon"}},computed:{},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:b(_({handleDragStart(e){e.dataTransfer.setData("index",e.target),this.$dgiotBus.$emit("dgiotDragStart",e)},coordinate(e){const t={x:e.pageX,y:e.pageY};this.busData.coordinate=t},moveSvg(e){let t=Object(n["default"])(e,"path");const o=JSON.stringify(t.topo);console.info("getSvgPath function return "+o),this.busData.paths=o,this.$dgiotBus.$emit("busTopo","path",this.busData)},createdText(e){const t=Object(i["default"])({productid:"productid",thingid:"thingid"});console.log(t)},uploadCkick(e){this.upImgType=e,this.$refs["uploadFinish"].$refs.uploader.dispatchEvent(new MouseEvent("click")),this.inputParams={file:"",scene:"app",path:"product/topo/",filename:this.$route.query.productid+"_bg"}},files(e,t){this.inputParams.filename=this.$route.query.productid+"_bg",this.inputParams.file=e}},Object(a["mapMutations"])({setFlag:"konva/setFlag",setDrawParams:"konva/setDrawParams",createThing:"topo/createThing",createAmis:"topo/createAmis",createHistory:"topo/createHistory",setKonvaBg:"topo/setKonvaBg"})),{fileInfo(e){return y(this,null,(function*(){console.log(e),"img"===this.upImgType?yield this.handleIcon(e.url):(localStorage.setItem("konvaBg",e.path),yield this.setKonvaBg(e.path),console.error("set konva bg \n",Cookies.get("fileServer")+e.path))}))},handleIcon(e){var t=new Image;let o=this;t.src=e+"?"+(new Date).getTime(),t.onload=function(){o.$set(o.imgParams,"width",t.width),o.$set(o.imgParams,"height",t.height),o.$set(o.imgParams,"src",t.src),console.log("图片加载完成",o.imgParams),o.$baseMessage(o.$translateTitle("图片加载完成,可双击画图区域填充"),"success",!1,"dgiot-hey-message-success")},o.setFlag("image"),o.setDrawParams(o.imgParams)}})}}).call(this,"/")},"3b3a":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"icon-selector-popper"},[t("div",{staticClass:"dialog"},[t("dgiot-input",{ref:"uploadFinish",attrs:{params:e.inputParams},on:{fileInfo:e.fileInfo,files:e.files}})],1),t("Thing"),t("Amis"),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isDirver,expression:"isDirver"}],staticStyle:{margin:"0 auto","text-align":"center"}},[t("Evidence")],1),t("a-collapse",{directives:[{name:"show",rawName:"v-show",value:!e.isDirver,expression:"!isDirver"}],attrs:{accordion:""}},[t("a-collapse-panel",{key:"1",attrs:{header:e.$translateTitle("topo.background")}},[t("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.uploadCkick("bg")}}},[e._v(" "+e._s(e.$translateTitle("topo.Upload background"))+" ")]),t("Background")],1),t("a-collapse-panel",{key:"2",attrs:{header:e.$translateTitle("product.button control")}},[t("el-button",{attrs:{draggable:"true",size:"mini",type:"primary"},nativeOn:{click:function(t){return e.createThing({productid:e.$route.query.productid,hidden:!1})}}},[e._v(" 实时数据 ")]),t("el-divider"),t("el-button",{attrs:{draggable:"true",size:"mini",type:"primary"},nativeOn:{click:function(t){return e.createAmis({productid:e.$route.query.productid,hidden:!1})}}},[e._v(" 数据下发 ")]),t("el-divider")],1),t("a-collapse-panel",{key:"3",attrs:{header:e.$translateTitle("topo.evidence control")}},[t("Evidence")],1)],1)],1)},a=[],n=o("3ab6"),s=n["a"],c=(o("d74f"),o("0b14"),o("2877")),r=Object(c["a"])(s,i,a,!1,null,null,null);t["default"]=r.exports},"3baa":function(e,t,o){"use strict";o("f8a2")},"3ca7":function(e,t,o){"use strict";o("b25c")},"3cc8":function(e,t,o){},"459e":function(e,t,o){e.exports=o.p+"static/img/archive_black_24dp.64a01172.svg"},"48b0":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"maintenancePlanAdd"},[e._m(0),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"demo"},[t("canvas",{attrs:{id:"canvas",width:e.width}}),t("div",{staticClass:"draw-btn-group"},[t("div",{class:{active:""==e.drawType},attrs:{title:"自由选择"},on:{click:function(t){return e.drawTypeChange("")}}},[t("i",{staticClass:"draw-icon icon-mouse"})]),t("div",{class:{active:"arrow"==e.drawType},attrs:{title:"画箭头"},on:{click:function(t){return e.drawTypeChange("arrow")}}},[t("i",{staticClass:"draw-icon icon-1"})]),t("div",{class:{active:"text"==e.drawType},attrs:{title:"文本输入框"},on:{click:function(t){return e.drawTypeChange("text")}}},[t("i",{staticClass:"draw-icon icon-2"})]),t("div",{class:{active:"ellipse"==e.drawType},attrs:{title:"画圆"},on:{click:function(t){return e.drawTypeChange("ellipse")}}},[t("i",{staticClass:"draw-icon icon-3"})]),t("div",{class:{active:"rectangle"==e.drawType},attrs:{title:"画矩形"},on:{click:function(t){return e.drawTypeChange("rectangle")}}},[t("i",{staticClass:"draw-icon icon-4"})]),t("div",{class:{active:"polygon"==e.drawType},attrs:{title:"画多边形"},on:{click:e.drawPolygon}},[t("i",{staticClass:"draw-icon icon-6"})]),t("div",{class:{active:"pen"==e.drawType},attrs:{title:"笔画"},on:{click:function(t){return e.drawTypeChange("pen")}}},[t("i",{staticClass:"draw-icon icon-7"})]),t("div",{class:{active:"pentagram"==e.drawType},attrs:{title:"五角星"},on:{click:function(t){return e.drawTypeChange("pentagram")}}},[t("i",{staticClass:"draw-icon icon-pentagram"})]),t("div",{attrs:{title:"从文件选择图片上传"},on:{click:e.uploadImg}},[t("i",{staticClass:"draw-icon icon-img"})]),t("div",{attrs:{title:"加载背景图"},on:{click:e.loadExpImg}},[t("i",{staticClass:"draw-icon icon-back"})]),t("div",{attrs:{title:"保存"},on:{click:e.save}},[t("i",{staticClass:"draw-icon icon-save"})])])])]),t("input",{attrs:{id:"imgInput",accept:"image/*",type:"file"},on:{change:e.uploadImgChange}}),t("img",{attrs:{id:"img",src:e.imgSrc}}),t("img",{attrs:{id:"expImg",src:"https://cdn.jsdelivr.net/gh/Couy69/vue-fabric-drawingboard@master/src/assets/icons/draw/exp.jpg"}})])},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"child-panel-title"},[t("h2",[e._v("图形标注")])])}],n={name:"Fabric",data(){return{width:1280,height:720,rect:[],canvas:{},showMenu:!1,x:"",y:"",mouseFrom:{},mouseTo:{},drawType:null,canvasObjectIndex:0,textbox:null,rectangleLabel:"warning",drawWidth:2,color:"#E34F51",drawingObject:null,moveCount:1,doDrawing:!1,polygonMode:!1,pointArray:[],lineArray:[],activeShape:!1,activeLine:"",line:{},delectKlass:{},imgFile:{},imgSrc:""}},watch:{drawType(){this.canvas.selection=!this.drawType},width(){this.canvas.setWidth(this.width)},height(){this.canvas.setHeight(this.height)}},mounted(){this.canvas=new fabric.Canvas("canvas",{}),this.canvas.selectionColor="rgba(0,0,0,0.05)",this.canvas.on("mouse:down",this.mousedown),this.canvas.on("mouse:move",this.mousemove),this.canvas.on("mouse:up",this.mouseup),document.onkeydown=e=>{46==e.keyCode&&this.deleteObj(),90==e.keyCode&&e.ctrlKey&&this.canvas.remove(this.canvas.getObjects()[this.canvas.getObjects().length-1])}},methods:{save(){var e=document.getElementById("canvas"),t=e.toDataURL("png");t=t.replace("image/png","image/octet-stream");var o="drawingboard_"+(new Date).getTime()+".png";this.saveFile(t,o)},saveFile(e,t){var o=document.createElement("a");o.href=e,o.download=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(i)},uploadImg(){document.getElementById("imgInput").click()},loadExpImg(){var e=document.getElementById("expImg"),t=new fabric.Image(e,{selectable:!1});this.canvas.add(t)},uploadImgChange(){var e=document.getElementById("imgInput");this.imgFile=e.files[0];if(/\.(jpe?g|png|gif)$/i.test(this.imgFile.name)){var t=new FileReader,o=this;t.addEventListener("load",(function(){o.imgFile.name,o.imgSrc=this.result}),!1),t.readAsDataURL(this.imgFile)}var i=document.getElementById("img");i.onload=()=>{this.width=i.width,this.height=i.height;var e=new fabric.Image(i,{zIndex:-1,selectable:!1});this.canvas.add(e)}},drawTypeChange(e){this.drawType=e,this.canvas.skipTargetFind=!!e,this.canvas.isDrawingMode="pen"==e},mousedown(e){var t=e.pointer||this.transformMouse(e.e.offsetX,e.e.offsetY);if(this.mouseFrom.x=t.x,this.mouseFrom.y=t.y,this.doDrawing=!0,"text"==this.drawType&&this.drawing(),this.textbox&&(this.textbox.enterEditing(),this.textbox.hiddenTextarea.focus()),"polygon"==this.drawType){this.canvas.skipTargetFind=!1;try{this.pointArray.length>1&&e.target&&e.target.id==this.pointArray[0].id&&this.generatePolygon(),this.polygonMode&&this.addPoint(e)}catch(o){console.log(o)}}},mouseup(e){var t=e.pointer||this.transformMouse(e.e.offsetX,e.e.offsetY);this.mouseTo.x=t.x,this.mouseTo.y=t.y,this.drawingObject=null,this.moveCount=1,"polygon"!=this.drawType&&(this.doDrawing=!1)},mousemove(e){if(!(this.moveCount%2)||this.doDrawing){this.moveCount++;var t=e.pointer||this.transformMouse(e.e.offsetX,e.e.offsetY);if(this.mouseTo.x=t.x,this.mouseTo.y=t.y,"text"==this.drawType&&"polygon"==this.drawType||this.drawing(e),"polygon"==this.drawType){if(this.activeLine&&"line"==this.activeLine.class){var o=this.canvas.getPointer(e.e);this.activeLine.set({x2:o.x,y2:o.y});var i=this.activeShape.get("points");i[this.pointArray.length]={x:o.x,y:o.y,zIndex:1},this.activeShape.set({points:i}),this.canvas.renderAll()}this.canvas.renderAll()}}},deleteObj(){this.canvas.getActiveObjects().map(e=>{this.canvas.remove(e)})},transformMouse(e,t){return{x:e/1,y:t/1}},drawPolygon(){this.drawType="polygon",this.polygonMode=!0,this.pointArray=new Array,this.lineArray=new Array,this.canvas.isDrawingMode=!1},addPoint(e){var t=Math.floor(1e4*Math.random()),o=(new Date).getTime()+t,i=new fabric.Circle({radius:5,fill:"#ffffff",stroke:"#333333",strokeWidth:.5,left:(e.pointer.x||e.e.layerX)/this.canvas.getZoom(),top:(e.pointer.y||e.e.layerY)/this.canvas.getZoom(),selectable:!1,hasBorders:!1,hasControls:!1,originX:"center",originY:"center",id:o,objectCaching:!1});0==this.pointArray.length&&i.set({fill:"red"});var a=[(e.pointer.x||e.e.layerX)/this.canvas.getZoom(),(e.pointer.y||e.e.layerY)/this.canvas.getZoom(),(e.pointer.x||e.e.layerX)/this.canvas.getZoom(),(e.pointer.y||e.e.layerY)/this.canvas.getZoom()];if(this.line=new fabric.Line(a,{strokeWidth:2,fill:"#999999",stroke:"#999999",class:"line",originX:"center",originY:"center",selectable:!1,hasBorders:!1,hasControls:!1,evented:!1,objectCaching:!1}),this.activeShape){var n=this.canvas.getPointer(e.e);a=this.activeShape.get("points");a.push({x:n.x,y:n.y});var s=new fabric.Polygon(a,{stroke:"#333333",strokeWidth:1,fill:"#cccccc",opacity:.3,selectable:!1,hasBorders:!1,hasControls:!1,evented:!1,objectCaching:!1});this.canvas.remove(this.activeShape),this.canvas.add(s),this.activeShape=s,this.canvas.renderAll()}else{var c=[{x:(e.pointer.x||e.e.layerX)/this.canvas.getZoom(),y:(e.pointer.y||e.e.layerY)/this.canvas.getZoom()}];s=new fabric.Polygon(c,{stroke:"#333333",strokeWidth:1,fill:"#cccccc",opacity:.3,selectable:!1,hasBorders:!1,hasControls:!1,evented:!1,objectCaching:!1});this.activeShape=s,this.canvas.add(s)}this.activeLine=this.line,this.pointArray.push(i),this.lineArray.push(this.line),this.canvas.add(this.line),this.canvas.add(i)},generatePolygon(){var e=new Array;this.pointArray.map((t,o)=>{e.push({x:t.left,y:t.top}),this.canvas.remove(t)}),this.lineArray.map((e,t)=>{this.canvas.remove(e)}),this.canvas.remove(this.activeShape).remove(this.activeLine);var t=new fabric.Polygon(e,{stroke:this.color,strokeWidth:this.drawWidth,fill:"rgba(255, 255, 255, 0)",opacity:1,hasBorders:!0,hasControls:!1});this.canvas.add(t),this.activeLine=null,this.activeShape=null,this.polygonMode=!1,this.doDrawing=!1,this.drawType=null},drawing(e){this.drawingObject&&this.canvas.remove(this.drawingObject);var t=null,o=this.mouseFrom.x,i=this.mouseFrom.y,a=this.mouseFrom,n=this.mouseTo;switch(this.drawType){case"arrow":var s=a.x,c=n.x,r=a.y,l=n.y,d=c-s,u=l-r,m=16*Math.cos(Math.PI/4),p=u/Math.sqrt(Math.pow(d,2)+Math.pow(u,2)),h=d/Math.sqrt(Math.pow(d,2)+Math.pow(u,2)),g=16*p/4,f=16*h/4,_=m*h,b=m*p,y=" M "+s+" "+r;y+=" L "+(c-_+g)+" "+(l-b-f),y+=" L "+(c-_+2*g)+" "+(l-b-2*f),y+=" L "+c+" "+l,y+=" L "+(c-_-2*g)+" "+(l-b+2*f),y+=" L "+(c-_-g)+" "+(l-b+f),y+=" Z",t=new fabric.Path(y,{stroke:this.color,fill:this.color,strokeWidth:this.drawWidth});break;case"pentagram":s=a.x,c=n.x,r=a.y,l=n.y,d=Math.abs(c-s),u=Math.abs(l-r);var v=Math.sqrt(d*d+u*u),w=Math.cos(18*Math.PI/180),$=Math.sin(18*Math.PI/180),j=[s,r+v],k=[s+2*v*$,r+v-2*v*w],F=[s-v*w,r+v*$],T=[s+v*w,r+v*$],x=[s-2*v*$,r+v-2*v*w];y=" M "+j[0]+" "+j[1];y+=" L "+k[0]+" "+k[1],y+=" L "+F[0]+" "+F[1],y+=" L "+T[0]+" "+T[1],y+=" L "+x[0]+" "+x[1],y+=" Z",t=new fabric.Path(y,{stroke:this.color,fill:this.color,strokeWidth:this.drawWidth});break;case"ellipse":e.e.shiftKey&&(n.x-o>n.y-i?n.y=i+n.x-o:n.x=o+n.y-i);Math.sqrt((n.x-o)*(n.x-o)+(n.y-i)*(n.y-i));t=new fabric.Ellipse({left:(n.x-o)/2+o,top:(n.y-i)/2+i,stroke:this.color,fill:"rgba(255, 255, 255, 0)",originX:"center",originY:"center",rx:Math.abs(o-n.x)/2,ry:Math.abs(i-n.y)/2,strokeWidth:this.drawWidth});break;case"rectangle":e.e.shiftKey&&(n.x-o>n.y-i?n.y=i+n.x-o:n.x=o+n.y-i);y="M "+a.x+" "+a.y+" L "+n.x+" "+a.y+" L "+n.x+" "+n.y+" L "+a.x+" "+n.y+" L "+a.x+" "+a.y+" z";t=new fabric.Path(y,{left:o,top:i,stroke:this.color,strokeWidth:this.drawWidth,fill:"rgba(255, 255, 255, 0)",hasControls:!1});break;case"text":this.textbox=new fabric.Textbox("",{left:a.x,top:a.y-10,fontSize:16,borderColor:this.color,fill:this.color,hasControls:!1}),this.canvas.add(this.textbox),this.textbox.enterEditing(),this.textbox.hiddenTextarea.focus();break;default:break}t&&(this.canvas.add(t),this.drawingObject=t)}}},s=n,c=(o("3449"),o("2877")),r=Object(c["a"])(s,i,a,!1,null,"758cb71a",null);t["default"]=r.exports},"4af0":function(e,t,o){},"4cf1":function(e,t,o){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},5168:function(e,t,o){"use strict";o("9a53")},"5a6c":function(e,t,o){},"5be3":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"topo-header"},[t("el-drawer",{directives:[{name:"show",rawName:"v-show",value:e.infoVisible,expression:"infoVisible"},{name:"drawerDrag",rawName:"v-drawerDrag"}],attrs:{"append-to-body":"",size:"100%",visible:e.infoVisible},on:{"update:visible":function(t){e.infoVisible=t}}},[t("div",{key:e.konva_key,staticClass:"konva_preview",attrs:{id:"konva_preview"}})]),t("div",{staticClass:"topo-header-drawer"},[t("el-drawer",{attrs:{"append-to-body":"",direction:"rtl",size:"40%",visible:e.drawer,"with-header":!1},on:{"update:visible":function(t){e.drawer=t}}})],1),t("dgiot-input",{ref:"uploadFinish",on:{fileInfo:e.fileInfo}}),t("div",{staticClass:"topo-header-top"},[t("dgiot-query-form",{staticClass:"topo-header-top-query"},[t("dgiot-query-form-left-panel",{staticClass:"topo-header-top-query-left-panel"},[t("a-dropdown",{directives:[{name:"show",rawName:"v-show",value:!e.noTools,expression:"!noTools"}],staticClass:"topo-header-top-query-left-panel-dropdown",nativeOn:{click:function(t){return e.ToggleView.apply(null,arguments)}}},[t("a",{staticClass:"ant-dropdown-link"},[t("a-icon",{attrs:{type:"tool"}}),t("p",[e._v(e._s(e.$translateTitle("leftbar.tools")))])],1)]),t("a-dropdown",{staticClass:"topo-header-top-query-left-panel-dropdown"},[t("a",{staticClass:"ant-dropdown-link",on:{click:e.saveTopo}},[t("a-icon",{attrs:{type:"save"}}),t("p",[e._v(e._s(e.$translateTitle("konva.save")))])],1)]),Boolean(e.$route.query.noTools)?t("a-dropdown",{staticClass:"topo-header-top-query-left-panel-dropdown"},[t("a",{staticClass:"ant-dropdown-link",on:{click:e.preview}},[t("a-icon",{attrs:{type:"eye"}}),t("p",[e._v(e._s(e.$translateTitle("application.preview")))])],1)]):e._e(),Boolean(e.$route.query.noTools)?t("a-dropdown",{staticClass:"topo-header-top-query-left-panel-dropdown"},[t("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return e.$router.push({path:"/cloudTest/report"})}}},[t("a-icon",{attrs:{type:"home"}}),t("p",[e._v(e._s(e.$translateTitle("cloudTest.report template")))])],1)]):e._e(),t("a-dropdown",{directives:[{name:"show",rawName:"v-show",value:!e.noTools,expression:"!noTools"}],staticClass:"topo-header-top-query-left-panel-dropdown"},[t("a",{directives:[{name:"copyText",rawName:"v-copyText",value:e.copyText,expression:"copyText"}],staticClass:"ant-dropdown-link"},[t("a-icon",{attrs:{type:"share-alt"}}),t("p",[e._v(e._s(e.$translateTitle("konva.share")))])],1)]),t("a-dropdown",{directives:[{name:"show",rawName:"v-show",value:!e.noTools,expression:"!noTools"}],staticClass:"topo-header-top-query-left-panel-dropdown"},[t("a",{staticClass:"ant-dropdown-link"},[t("a-icon",{attrs:{type:"plus"}}),t("p",[t("topo-scale")],1)],1)])],1),t("dgiot-query-form-right-panel")],1),t("el-drawer",{attrs:{"append-to-body":"",visible:e.drawerTopo,"with-header":!1},on:{"update:visible":function(t){e.drawerTopo=t}}},[e.drawerTopo?t("dgiot-monaco-plus",{ref:"monacoCodeTopo",staticStyle:{"margin-top":"26px"},attrs:{codes:e.codes,lang:"json","read-only":!1,theme:"vs-dark"}}):e._e()],1)],1)],1)},a=[],n=o("5880"),s=o("9bfd"),c=Object.defineProperty,r=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,p=(e,t,o)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,h=(e,t)=>{for(var o in t||(t={}))u.call(t,o)&&p(e,o,t[o]);if(d)for(var o of d(t))m.call(t,o)&&p(e,o,t[o]);return e},g=(e,t)=>r(e,l(t)),f={name:"TopoHeader",components:{TopoScale:s["default"]},props:{productid:{type:String,default:""},stopMqtt:{type:Boolean,default:!1},noTools:{type:Boolean,default:!1,required:!1},drawerflag:{type:Boolean,default:!1},value:{type:Boolean,default:!1}},data(){return{codes:"",drawerTopo:!1,konva_key:moment(new Date).valueOf(),infoVisible:!1,topic:"",isshow:!0,pickerColor:this.graphColor,activeNames:[],switchvalue:this.value,drawer:this.drawerflag}},computed:h({copyText:function(){return location.href}},Object(n["mapGetters"])({graphColor:"konva/graphColor",drawing:"konva/drawing",graphNow:"konva/graphNow",pointStart:"konva/pointStart",draw:"konva/draw",flag:"konva/flag"})),mounted(){this.$nextTick(()=>{var e,t;this.codes=null!=(t=null==(e=null==canvas?void 0:canvas.stage)?void 0:e.toJSON())?t:"",document.onkeydown=e=>{46==e.keyCode&&this.removeFn()}})},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},activated(){},methods:g(h({},Object(n["mapMutations"])({initKonva:"topo/initKonva",setDrawing:"konva/setDrawing",setPointStart:"konva/setPointStart",setDraw:"konva/setDraw",setFlag:"konva/setFlag",setGraphNow:"konva/setGraphNow",setGraphColor:"konva/setGraphColor",setDrawParams:"konva/setDrawParams"})),{topoJson(){this.$nextTick(()=>{this.codes=canvas.stage.toJSON(),this.drawerTopo=!0,console.log("monacoCodeTopo 加载日志"),console.log(this.$refs.monacoCodeTopo),this.$refs.monacoCodeTopo.monacoEditor&&this.$refs.monacoCodeTopo.monacoEditor.getAction("editor.action.formatDocument").run()})},ToggleView(){this.$baseEventBus.$emit("ToggleView")},saveTopo(){this.$dgiotBus.$emit("busUpdata"),this.$dgiotBus.$emit("_busUpdata")},preview(){this.$nextTick(()=>{this.infoVisible=!this.infoVisible,this.initKonva({data:JSON.parse(canvas.stage.toJSON()),id:"konva_preview"})}),this.konva_key=moment(new Date).valueOf()},handFullscreen(){this.$parent.$parent.$parent.isFullscreen=!this.$parent.$parent.$parent.isFullscreen},setColor(e){this.setGraphColor(e)},subscribe(e){var t={topic:`thing/${e}/post`,qos:2};Websocket.subscribe(t,e=>{e.result?(this.$message("订阅成功 topic: "+t.topic,"sussess"),this.stop_Mqtt=!1,this.$emit("messageData",this.stop_Mqtt)):this.$message("订阅失败,请手动订阅mqtt","error")})},flagFn(e){"text"==e&&this.setDrawParams({text:"请输入相关文字"+moment().format("x")}),e&&(this.setDraw(!0),this.setFlag(e)),console.info("我要绘制",e)},removeFn(){console.log(this.graphNow),this.graphNow?this.$dgiotBus.$emit("removeShape",this.graphNow):this.$baseMessage("请选择图形","error","dgiot-hey-message-error")},showImageTable(e){this.$refs["uploadFinish"].$refs.uploader.dispatchEvent(new MouseEvent("click"))},destroyed(){console.log("取消订阅mqtt"),this.handleCloseSub()},fileInfo(e){var t;(null==(t=null==e?void 0:e.url)?void 0:t.length)&&this.$emit("uploadFinish",e.url)},CloseSub(){this.stop_Mqtt=!0,this.$emit("messageData",this.stop_Mqtt);var e=JSON.stringify({action:"stop_logger"}),t={topic:"thing/"+this.productid+"/post",text:e,retained:!0,qos:2};Websocket.unsubscribe(t,e=>{console.log("取消订阅mqtt",e.msg)})},stopsub(e){var t;t=0==e?JSON.stringify({action:"stop_logger"}):JSON.stringify({action:"start_logger"});var o={topic:"thing/"+this.productid+"/post",text:t,retained:!0,qos:2};Websocket.sendMessage(o)},handleCloseSub(e){Websocket.unsubscribe(e,e=>{console.log("取消订阅mqtt",e.msg)})}})},_=f,b=(o("04d1"),o("2877")),y=Object(b["a"])(_,i,a,!1,null,"5abe010c",null);t["default"]=y.exports},"5cb5":function(e,t,o){},"614c":function(e,t,o){var i={"./Amis.vue":"6951","./Background.vue":"79fe","./Thing.vue":"bf14","./TopoAllocation.vue":"27f8","./TopoArom.vue":"38e5","./TopoBase.vue":"65e3","./TopoEvidence.vue":"c250","./TopoOperation.vue":"bd42","./TopoScale.vue":"9bfd","./TopoTabs.vue":"3b3a","./TopoThing.vue":"b99f","./fabric.vue":"48b0","./topoHeader.vue":"5be3"};function a(e){var t=n(e);return o(t)}function n(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id="614c"},"65e3":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{"append-to-body":"",title:e.$translateTitle("topo.topo")+e.$translateTitle("topo.tag"),visible:e.tagDialog,width:"50%"},on:{"update:visible":function(t){e.tagDialog=t}}},[t("span",[e._v("这是一段信息")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.tagDialog=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.tagDialog=!1}}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{"append-to-body":"",title:e.$translateTitle("topo.topo")+e.$translateTitle("topo.thing"),visible:e.thingDialog,width:"50%"},on:{"update:visible":function(t){e.thingDialog=t}}},[t("span",[e._v("这是一段信息")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.thingDialog=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.thingDialog=!1}}},[e._v("确 定")])],1)]),t("div",{staticClass:"topoBase",class:{"topoBase-fullscreen":e.isDevice},on:{contextmenu:e.showMenu,mousemove:e.handleMouseenter,mouseup:e.handleMouseDown}},[t("vue-context-menu",{staticStyle:{"font-size":"14px"},attrs:{"context-menu-data":e.contextMenuData},on:{copy:function(t){return e.contextMenu("copy")},deleteSahpe:function(t){return e.contextMenu("remove")},getPicture:function(t){return e.contextMenu("getPicture")},moveDown:function(t){return e.contextMenu("moveDown")},moveToBottom:function(t){return e.contextMenu("moveToBottom")},moveToTop:function(t){return e.contextMenu("moveToTop")},moveUp:function(t){return e.contextMenu("moveUp")}}}),t("div",{key:e.Sale,staticClass:"konvaTest",attrs:{id:"kevCurrent"}})],1)],1)},a=[],n=o("5880"),s=Object.defineProperty,c=Object.defineProperties,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,o)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))d.call(t,o)&&m(e,o,t[o]);if(l)for(var o of l(t))u.call(t,o)&&m(e,o,t[o]);return e},h=(e,t)=>c(e,r(t)),g=(window.innerWidth,window.innerHeight,{name:"KonvaTest",prop:{},components:{},data(){return{dgiotDragEvent:!1,contextMenuData:{menuName:"demo",axis:{x:null,y:null},menulists:[{fnHandler:"getPicture",btnName:"导出"},{fnHandler:"moveUp",btnName:"上移"},{fnHandler:"moveDown",btnName:"下移"},{fnHandler:"moveToTop",btnName:"置顶"},{fnHandler:"moveToBottom",btnName:"置底"},{fnHandler:"deleteSahpe",btnName:"删除"}]},stage:{},konvajson:{},tagDialog:!1,thingDialog:!1,defaultJson:'{"attrs":{"width":2382,"height":1200,"draggable":false},"className":"Stage","children":[{"attrs":{"hitGraphEnabled":false},"className":"Layer","children":[{"attrs":{},"className":"Image"},{"attrs":{"source":"https://konvajs.org/assets/yoda.jpg"},"className":"Image"}]},{"attrs":{},"className":"Layer","children":[{"attrs":{"draggable":true,"x":306,"y":303,"transformsEnabled":"position"},"className":"Group","children":[{"attrs":{"radius":20,"stroke":"#231fff","strokeWidth":4,"fill":"#ffffff"},"className":"Circle"},{"attrs":{"text":"1","fontSize":14,"originX":"center","originY":"center","fill":"#231fff","x":-5,"y":-5},"className":"Text"},{"attrs":{"data":"M.91,0H29.09A.91.91,0,0,1,30,.91v243a.88.88,0,0,1-.26.63L15.65,258.86a.9.9,0,0,1-1.3,0L.26,244.52a.88.88,0,0,1-.26-.63V.91A.91.91,0,0,1,.91,0Z","originX":"center","originY":"bottom","x":10,"y":15,"angle":-30,"fill":"#231fff","scaleX":0.15,"scaleY":0.15,"rotation":-30},"className":"Path"}]},{"attrs":{"draggable":true,"x":490,"y":557,"transformsEnabled":"position"},"className":"Group","children":[{"attrs":{"radius":20,"stroke":"#231fff","strokeWidth":4,"fill":"#ffffff"},"className":"Circle"},{"attrs":{"text":"2","fontSize":14,"originX":"center","originY":"center","fill":"#231fff","x":-5,"y":-5},"className":"Text"},{"attrs":{"data":"M.91,0H29.09A.91.91,0,0,1,30,.91v243a.88.88,0,0,1-.26.63L15.65,258.86a.9.9,0,0,1-1.3,0L.26,244.52a.88.88,0,0,1-.26-.63V.91A.91.91,0,0,1,.91,0Z","originX":"center","originY":"bottom","x":10,"y":15,"angle":-30,"fill":"#231fff","scaleX":0.15,"scaleY":0.15,"rotation":-30},"className":"Path"}]}]}]}'}},computed:h(p({},Object(n["mapGetters"])({Sale:"topo/konvaSale"})),{isDevice:function(){return!("device"!=this.$route.query.type&&!this.$route.query.deviceid)}}),watch:{},mounted(){this.dgiotDragEvent=!1,this.$dgiotBus.$off("dgiotDragStart"),this.$dgiotBus.$on("dgiotDragStart",e=>{console.log(e,"args"),e&&(this.dgiotDragEvent=!0)})},methods:h(p(p({},Object(n["mapMutations"])({contextMenu:"topo/contextMenu",createThing:"topo/createThing"})),Object(n["mapActions"])({setKonva:"topo/Sale",initKonva:"topo/initKonva"})),{handleMouseDown(e){this.dgiotDragEvent&&(console.info("handleMouseDown",e),this.createThing({productid:this.$route.query.productid,hidden:!1,x:e.offsetX,y:e.offsetY}),this.dgiotDragEvent=!1)},handleMouseenter(e){this.dgiotDragEvent},showMenu(){event.preventDefault();var e=event.clientX,t=event.clientY;this.contextMenuData.axis={x:e,y:t}},getPicture(){const e=document.createElement("a");e.href=topo.toDataURL,e.download="stage.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}})}),f=g,_=(o("2036"),o("2877")),b=Object(_["a"])(f,i,a,!1,null,"0679dbc2",null);t["default"]=b.exports},6951:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[e.nodeAttr.visible?t("div",[t("el-dialog",{attrs:{"append-to-body":"",center:"",visible:e.nodeAttr.visible,width:"80%"},on:{"update:visible":function(t){return e.$set(e.nodeAttr,"visible",t)}}},[t("dgiot-amis",{directives:[{name:"show",rawName:"v-show",value:e.nodeAttr.visible,expression:"nodeAttr.visible"}],key:e.nodeAttr.description.attrs.amis_id,attrs:{schema:e.nodeAttr.code,"show-help":!1}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.nodeAttr.visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.nodeAttr.visible=!1}}},[e._v(" 确 定 ")])],1)],1)],1):e._e(),e.amisLoading?t("div",[t("el-dialog",{attrs:{"append-to-body":"",center:"",top:"5vh",visible:e.amisLoading},on:{"update:visible":function(t){e.amisLoading=t}}},[t("el-badge",{staticClass:"item",attrs:{slot:"title",type:"primary",value:e.amisCount},slot:"title"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.goDesign()}}},[e._v("amis列表")])],1),t("el-dialog",{attrs:{"append-to-body":"",visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[t("dgiot-amis",{directives:[{name:"show",rawName:"v-show",value:e.innerVisible,expression:"innerVisible"}],attrs:{schema:e.nodeAttr.code,"show-help":!1}})],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.amisDict},scopedSlots:e._u([{key:"empty",fn:function(){return[t("el-empty",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.goDesign()}}},[e._v("前往添加")])],1)]},proxy:!0}],null,!1,1460458625)},[t("el-table-column",{attrs:{align:"center",label:"名称",prop:"title","show-overflow-tooltip":"",sortable:"",width:"180"}}),t("el-table-column",{attrs:{align:"center",label:"类型",prop:"type","show-overflow-tooltip":"",sortable:""}}),t("el-table-column",{attrs:{align:"center",label:"操作",width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-button",{attrs:{disabled:e.amisNode.node.getAttr("amis_id")==o.objectId,size:"mini",type:e.amisNode.node.getAttr("amis_id")==o.objectId?"success":"primary"},on:{click:function(t){return e.bind_amis(o)}}},[e._v(" "+e._s(e.amisNode.node.getAttr("amis_id")==o.objectId?"已绑":"绑定")+" ")]),t("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.preview_amis(o)}}},[e._v(" 预览 ")])]}}],null,!1,727966579)})],1)],1)],1):e._e()])},a=[],n=o("7212"),s=o("7a1d"),c=o("5880"),r=o("8ba7"),l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,o)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,f=(e,t)=>{for(var o in t||(t={}))p.call(t,o)&&g(e,o,t[o]);if(m)for(var o of m(t))h.call(t,o)&&g(e,o,t[o]);return e},b=(e,t)=>d(e,u(t)),y=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())}),v={name:"Amis",components:{},data(){return{innerVisible:!1,nodeAttr:{description:{},visible:!1},amisCount:0,amisLoading:!1,thingType:"post",productconfig:{},amisDict:[],amisNode:{},thingDialog:!1,infoData:"Thing",thingArgs:{},text:"text",shapeid:"",viewInfo:{},das:[],daslist:[],toponobound:[],topokonvathing:{},preview:!1}},computed:f({},Object(c["mapGetters"])({sizeForm:"konva/sizeForm"})),mounted(){localStorage.removeItem("parse_objectid"),this.nodeAttr.visible=!1,this.$dgiotBus.$off("nodeInfo"),this.$dgiotBus.$on("nodeInfo",e=>{console.log(e.attrs.amis_id,"nodeInfo"),this.$route.query.deviceid&&(localStorage.setItem("parse_objectid",this.$route.query.deviceid),this.quertAmis(e.attrs.amis_id),this.nodeAttr.description=e)}),this.$baseEventBus.$off(this.$dgiotBus.topicKey("dgiot_amis","dgiotamis")),this.$baseEventBus.$on(this.$dgiotBus.topicKey("dgiot_amis","dgiotamis"),e=>y(this,null,(function*(){"bind_amis"==(null==e?void 0:e.type)&&(yield this.bindAmis(e))})))},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:b(f({},Object(c["mapMutations"])({setSizeForm:"konva/setSizeForm"})),{view(e){return y(this,null,(function*(){const{data:t={}}=yield Object(r["getView"])(e);this.viewInfo=t}))},bind_amis(e){return y(this,null,(function*(){console.log(e.objectId,this.amisNode.node),this.amisNode.node.setAttrs({fill:"red",bind_amis:!0,amis_id:e.objectId}),this.amisNode.node.children[1].setAttrs({text:e.title,bind_amis:!0,amis_id:e.objectId}),this.amisNode.node.children[0].setAttrs({fill:"#1e83d4",bind_amis:!0,amis_id:e.objectId}),this.$message({showClose:!0,duration:2e3,message:"绑定成功",type:"success"}),this.amisLoading=!1,console.log(e,this.amisNode.node)}))},bindAmis(e){return y(this,null,(function*(){const t=this.$baseLoading();this.amisNode=e;const{results:o=[],count:i=0}=yield Object(r["queryView"])({count:"objectId",order:"-updatedAt",excludeKeys:"data",skip:0,where:{key:this.$route.query.productid,type:"amis"}});console.log(o,e),this.amisDict=o,this.amisCount=i,this.nodeAttr.visible=!1,this.amisLoading=!0,t.close()}))},preview_amis(e){return y(this,null,(function*(){console.log(e),yield this.quertAmis(e.objectId)}))},goDesign(){return y(this,null,(function*(){this.$router.push({path:"/design",query:{key:this.$route.query.productid,_class:"Product",type:"amis",ischildren:"false"}})}))},quertAmis(e){return y(this,null,(function*(){const{data:t={}}=yield Object(r["getView"])(e);this.nodeAttr.code=t,this.innerVisible=!0,this.viewInfo=t,this.$route.query.deviceid&&(this.nodeAttr.visible=!0)}))},wmxhandleClose(){this.wmxdialogVisible=!1,this.setSizeForm({}),this.$dgiotBus.$emit("refresh",this.$route)},updataForm(e){console.log("子组件改变的值"),console.log(e),this.setSizeForm(e)},addDas(){console.log(this.sizeForm),this.sizeForm.daslist.push({addr:""})},removeDas(e){var t=this.sizeForm.daslist.indexOf(e);-1!==t&&this.sizeForm.daslist.splice(t,1)},submitForm(e){console.log("sizeForm",e),console.log("thingType",this.thingType),console.log("toponobound",this.toponobound),console.log("topokonvathing",this.topokonvathing),console.info("如果type是put 走put，否则post"),1==_.isEmpty(this.topokonvathing)?this.thingType="post":this.thingType="put",this.toponobound.forEach(t=>{console.log(e.identifier,t.identifier,"identifier"),e.identifier==t.identifier&&(this.thingType="put")}),console.log("thingType",this.thingType);let t={item:e,productid:this.$route.query.productid};"post"==this.thingType?Object(n["postThing"])(t).then(t=>{if(console.log("编辑",t),200==t.code){this.$message({showClose:!0,duration:2e3,type:"success",message:"编辑成功"});let t={identifier:e.identifier,name:e.name,productid:this.$route.query.productid,shapeid:this.shapeid};Object(s["edit_konva_thing"])(t).then(e=>{console.log(e)}),this.wmxhandleClose()}else this.$message({showClose:!0,duration:2e3,type:"warning",message:"编辑失败"+t.msg})}):Object(n["putThing"])(t).then(t=>{if(console.log("编辑",t),200==t.code){this.$message({showClose:!0,duration:2e3,type:"success",message:"编辑成功"});let t={identifier:e.identifier,name:e.name,productid:this.$route.query.productid,shapeid:this.shapeid};Object(s["edit_konva_thing"])(t).then(e=>{console.log(e)}),this.wmxhandleClose()}else this.$message({showClose:!0,duration:2e3,type:"warning",message:"编辑失败"+t.msg})})},removeDomain(e){var t=this.sizeForm.struct.indexOf(e);-1!==t&&this.sizeForm.struct.splice(t,1)},addDomain(){this.sizeForm.struct.push({attribute:"",attributevalue:""})},updataTopo(){return y(this,null,(function*(){const e=this.$baseLoading();try{localStorage.setItem("konvaStale",canvas.stage.toJSON());const t={config:_.merge(this.productconfig,{konva:{Stage:JSON.parse(canvas.stage.toJSON())}})};this.$message({showClose:!0,duration:2e3,message:this.$translateTitle("user.update completed"),type:"success"});"Evidence"==this.$route.query.type?yield Object(r["putView"])(this.$route.query.viewid,{data:_.merge({konva:{Stage:JSON.parse(canvas.stage.toJSON())}},this.viewInfo)}):yield Object(n["putProduct"])(this.$route.query.productid,t);e.close()}catch(t){e.close(),console.log(t)}}))},bindTopo(e){return y(this,null,(function*(){const t=this.$baseLoading();this.thingArgs={args:e,id:e.id,productid:e.id.split("_")[0],text:e.text},console.log("args",e);try{let n={productid:e.id.split("_")[0],shapeid:e.id.slice(11).replace("_text","")};this.shapeid=e.id;const{data:c,code:r=200,message:l="",error:d=""}=yield Object(s["get_konva_thing"])(n);if(204==r||d)return this.$baseMessage(l||d,"error",!1,"dgiot-hey-message-error"),void t.close();const{konvathing:u={},nobound:m=[]}=c;if(console.log(u,"konvathing"),console.log(m,"nobound"),this.toponobound=m,this.topokonvathing=u,Object.values(u).length>0){console.log("物模型存在这个属性",u),this.reset(m);var o={},i=[];if(u.dataType.das.forEach(e=>{i.push({addr:e})}),-1!=["float","double","int","long"].indexOf(u.dataType.type))o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,endnumber:this.$objGet(u,"dataType.specs.max"),startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),precision:this.$objGet(u,"dataType.specs.precision"),dis:this.$objGet(u,"dataForm.address"),round:this.$objGet(u,"dataForm.round"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),slaveid:this.$objGet(u,"dataForm.slaveid"),collection:"",control:"",strategy:"",required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,identifier:u.identifier,editdatatype:!0},u.dataForm&&(o.collection=u.dataForm.collection,o.control=u.dataForm.control,o.strategy=u.dataForm.strategy);else if("bool"==u.dataType.type)o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,true:u.dataType.specs[1],false:u.dataType.specs[0],startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!1,ico:u.ico,isread:u.accessMode,isshow:u.isshow,identifier:u.identifier,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,strategy:void 0==u.dataForm?"":u.dataForm.strategy,editdatatype:!0};else if("image"==u.dataType.type)o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,imagevalue:u.dataType.imagevalue,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!1,ico:u.ico,isread:u.accessMode,isshow:u.isshow,identifier:u.identifier,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,strategy:void 0==u.dataForm?"":u.dataForm.strategy,editdatatype:!0};else if("enum"==u.dataType.type){var a=[];for(const e in u.dataType.specs)a.push({attribute:e,attributevalue:u.dataType.specs[e]});o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,specs:u.dataType.specs,struct:a,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,identifier:u.identifier,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,strategy:void 0==u.dataForm?"":u.dataForm.strategy,editdatatype:!0}}else"struct"==u.dataType.type?o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,struct:u.dataType.specs,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,identifier:void 0==u.dataForm?"":u.identifier,strategy:void 0==u.dataForm?"":u.dataForm.strategy,editdatatype:!0}:"text"==u.dataType.type?o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,string:u.dataType.size,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,identifier:u.identifier,strategy:void 0==u.dataForm?"":u.dataForm.strategy,editdatatype:!0}:"date"==u.dataType.type?o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,strategy:void 0==u.dataForm?"":u.dataForm.strategy,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),order:this.$objGet(u,"dataForm.order"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,identifier:u.identifier,editdatatype:!0}:"geopoint"==u.dataType.type&&(o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,gpstype:u.dataType.gpstype,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,strategy:void 0==u.dataForm?"":u.dataForm.strategy,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),order:this.$objGet(u,"dataForm.order"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,identifier:u.identifier,editdatatype:!0});o.nobound=[],this.setSizeForm(o)}else this.reset(m),this.wmxData=[],this.sizeForm.name=e.text,this.sizeForm.isdis=!0;this.thingDialog=!0,t.close()}catch(n){t.close(),console.log(n)}}))},reset(e){const t={name:"",identifier:"",strategy:"20",resource:1,dis:"0X10",dinumber:"528590",type:"int",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",isshow:!1,unit:"",string:"",date:"String类型的UTC时间戳 (毫秒)",specs:{},precision:3,das:[],daslist:[],round:"all",struct:[{attribute:"",attributevalue:""}],rate:1,offset:0,order:0,byteorder:"big",protocol:"normal",operatetype:"holdingRegister",originaltype:"int16",slaveid:256,collection:"%s",control:"%q",nobound:e,editdatatype:!1,iscount:"0",countstrategy:20,countround:"all",countcollection:"%s"};this.setSizeForm(t)}})},w=v,$=o("2877"),j=Object($["a"])(w,i,a,!1,null,null,null);t["default"]=j.exports},"74fb":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"edit-container"},[t("div",{staticClass:"edit-content"},[e._v(" "+e._s(e.infoData)+" ")])])},a=[],n={name:"TopoEdit",components:{},data(){return{infoData:"edit"}},computed:{},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:{}},s=n,c=(o("7a92"),o("2877")),r=Object(c["a"])(s,i,a,!1,null,"7a0eb790",null);t["default"]=r.exports},"79fe":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"Background"},[t("div",{staticClass:"demo-image__lazy"},e._l(e.urls,(function(o){return t("el-image",{key:o,attrs:{lazy:"",src:o},nativeOn:{click:function(t){return e.setKonvaBg(o)}}})})),1)])},a=[],n=o("5880"),s=Object.defineProperty,c=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,o)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,u=(e,t)=>{for(var o in t||(t={}))r.call(t,o)&&d(e,o,t[o]);if(c)for(var o of c(t))l.call(t,o)&&d(e,o,t[o]);return e},m={name:"Background",components:{},data(){return{BackgroundData:[],productconfig:{},BackgroundDialog:!1,infoData:"Background",BackgroundArgs:{},urls:["//img7.ddove.com/upload/20181127/134600237598.jpg"]}},methods:u({},Object(n["mapActions"])({setKonvaBg:"topo/setKonvaBg"}))},p=m,h=(o("5168"),o("2877")),g=Object(h["a"])(p,i,a,!1,null,"2a8bcb9e",null);t["default"]=g.exports},"7a92":function(e,t,o){"use strict";o("b278")},8621:function(e,t,o){"use strict";o("d071")},8815:function(e,t,o){},"89fd":function(e,t,o){"use strict";o("9f8a")},"8c6c":function(e,t,o){"use strict";o("e35a")},"8d51a":function(e,t,o){e.exports=o.p+"static/img/volume_mute_black_24dp.8b96109a.svg"},"8e26":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("dgiot-amis",{key:e.objectId,attrs:{schema:e.code,"show-help":!1}})},a=[],n=o("5880"),s=Object.defineProperty,c=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,o)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,u=(e,t)=>{for(var o in t||(t={}))r.call(t,o)&&d(e,o,t[o]);if(c)for(var o of c(t))l.call(t,o)&&d(e,o,t[o]);return e},m={name:"Amis",components:{},props:{objectId:{default:"",required:!0,type:String},code:{default:()=>{},required:!0,type:Object}},data(){return{infoData:"dgiotAmis"}},computed:u({},Object(n["mapGetters"])({viewData:"view/viewData"})),mounted(){this.$dgiotBus.$off("setViewData"),this.$dgiotBus.$on("setViewData",e=>{this.setData(e)}),this.$dgiotBus.$off("submitCode"),this.$dgiotBus.$on("submitCode",e=>{this.$dgiotBus.$emit("saveLowCode",{id:this.objectId,data:{data:e}})})},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:u({},Object(n["mapMutations"])({setData:"view/setData"}))},p=m,h=o("2877"),g=Object(h["a"])(p,i,a,!1,null,null,null);t["default"]=g.exports},9159:function(e,t,o){"use strict";o("25ad")},"9a53":function(e,t,o){},"9bfd":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"TopoScale-container"},[t("div",{staticClass:"TopoScale-container-content"},[t("i",{staticClass:"el-icon-zoom-out",on:{click:function(t){return e.setSize("out")}}}),t("div",{staticClass:"scale"},[e._v(" "+e._s(e.scale)+" ")]),t("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return e.setSize("in")}}})])])},a=[],n=o("5880"),s=Object.defineProperty,c=Object.defineProperties,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,o)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))d.call(t,o)&&m(e,o,t[o]);if(l)for(var o of l(t))u.call(t,o)&&m(e,o,t[o]);return e},h=(e,t)=>c(e,r(t)),g={name:"TopoScale",components:{},data(){return{infoData:"TopoScale"}},computed:p({},Object(n["mapGetters"])({scale:"topo/Sale"})),mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:h(p({},Object(n["mapActions"])({setSale:"topo/setSale"})),{setSize(e){"out"===e?this.setSale(this.scale-10>=40?this.scale-10:this.scale):this.setSale(this.scale+10<=200?this.scale+10:this.scale)}})},f=g,_=(o("1e6b"),o("2877")),b=Object(_["a"])(f,i,a,!1,null,"3c8bea0d",null);t["default"]=b.exports},"9d14":function(e,t,o){"use strict";o("e22f")},"9f8a":function(e,t,o){},ac49:function(e,t,o){"use strict";(function(e){var i=o("5880"),a=o("6db3"),n=Object.defineProperty,s=Object.defineProperties,c=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,o)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,m=(e,t)=>{for(var o in t||(t={}))l.call(t,o)&&u(e,o,t[o]);if(r)for(var o of r(t))d.call(t,o)&&u(e,o,t[o]);return e},p=(e,t)=>s(e,c(t));const h=/(\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&:/~+#-]*[\w@?^=%&/~+#-])?$/,g=Object({NODE_ENV:"production",VUE_APP_TITLE:"物联网开发平台",VUE_APP_AUTHOR:"h7ml",VUE_APP_UPDATE_TIME:"2022年07月01日22时26分03秒",VUE_APP_VERSION:"4.5.4",VUE_APP_Keywords:"一站式物联网PaaS平台|物联网应用服务",VUE_APP_Description:"提供物联网垂直领域应用使能平台及解决方案",VUE_APP_URL:"http://127.0.0.1:5080",VUE_APP_CDN_URL:"/dgiot_dashboard/public",BASE_URL:""}).CDN_URL,f=o("df7c"),_=h.test(g)?g+"/assets/images/dgiot_release/topo/":f.join(e,"/assets/images/dgiot_release/topo/"),b=o("e043");t["a"]={name:"Allocation",data(){return{iconfont:b,busData:{coordinate:{},paths:[]},accept:".jpg,.jpeg,.png,.gif,.bmp,.pdf,.JPG,.JPEG,.PBG,.GIF,.BMP,.PDF",imgHost:_,icon:"24-hours-fill",layout:"total, prev, next",total:0,background:!0,height:0,selectRows:"",queryIcon:[],queryForm:{pageNo:1,pageSize:30,title:""},images:[],imgParams:{},activeNames:"icon"}},computed:{},created(){},mounted(){console.log(this.$router)},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:p(m({coordinate(e){const t={x:e.pageX,y:e.pageY};this.busData.coordinate=t},moveSvg(e){let t=Object(a["default"])(e,"path");const o=JSON.stringify(t.topo);console.info("getSvgPath function return "+o),this.busData.paths=o,this.$dgiotBus.$emit("busTopo","path",this.busData)},uploadCkick(){this.$refs["uploadFinish"].$refs.uploader.dispatchEvent(new MouseEvent("click"))}},Object(i["mapMutations"])({setFlag:"konva/setFlag",setDrawParams:"konva/setDrawParams"})),{handleChange(e){console.log(e)},fileInfo(e){console.log(e),this.dialogVisible=!this.dialogVisible,this.handleIcon(e.url)},handleIcon(e){var t=new Image;let o=this;t.src=e+"?"+(new Date).getTime(),t.onload=function(){o.$set(o.imgParams,"width",t.width),o.$set(o.imgParams,"height",t.height),o.$set(o.imgParams,"src",t.src),console.log("图片加载完成",o.imgParams),o.$baseMessage(o.$translateTitle("图片加载完成,可双击画图区域填充"),"success",!1,"dgiot-hey-message-success")},o.setFlag("image"),o.setDrawParams(o.imgParams)}})}}).call(this,"/")},acc5:function(e,t,o){},b0a9:function(e){e.exports=JSON.parse('{"konva":{"Stage":{"attrs":{"x":396,"y":28,"id":"current1","width":1666,"height":305,"draggable":true},"children":[{"attrs":{"id":"996"},"children":[{"attrs":{"id":"switch","width":2000,"height":2000},"children":[{"attrs":{"id":"curr23ent1","source":"http://dgiot-1253666439.cos.ap-shanghai-fsi.myqcloud.com/shuwa_tech/zh/blog/study/opc/nf_taiti.png"},"className":"Image"},{"attrs":{"x":100,"y":130,"id":"switch","fill":"#000000","text":"开关","type":"text","fontSize":20,"draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":744,"y":230,"id":"opening","fill":"#000000","text":"球阀开度","type":"text","fontSize":20,"container":"","draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":932,"y":281,"id":"pressure_out","fill":"#000000","text":"出口压","type":"text","fontSize":20,"container":"","draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":100,"y":220,"id":"pressure_in","fill":"#000000","text":"进口压1力","type":"text","fontSize":20,"draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":100,"y":250,"id":"factor","fill":"#000000","text":"功率因数","type":"text","fontSize":20,"draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":100,"y":280,"id":"torque","fill":"#000000","text":"转矩","type":"text","fontSize":20,"draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":100,"y":310,"id":"power","fill":"#000000","text":"功率","type":"text","fontSize":20,"container":"","draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":226,"y":265,"id":"vol","fill":"#000000","text":"电压","type":"text","fontSize":20,"draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":248,"y":224,"id":"current","fill":"#000000","text":"电流","type":"text","fontSize":20,"draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":100,"y":400,"id":"flow","fill":"#000000","text":"流量","type":"text","fontSize":20,"draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":100,"y":430,"id":"speed","fill":"#000000","text":"转速111","type":"text","fontSize":20,"container":"","draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":100,"y":460,"id":"temperature","fill":"#000000","text":"温度","type":"text","fontSize":20,"draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":100,"y":490,"id":"effect","fill":"#000000","text":"效率","type":"text","fontSize":20,"draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":100,"y":520,"id":"head","fill":"#000000","text":"扬程","type":"text","fontSize":20,"draggable":true,"fontFamily":"Calibri"},"className":"Text"},{"attrs":{"x":146,"id":"1111146123","y":37,"name":"line","points":[5,70,140,23,250,60,300,20],"stroke":"red","lineCap":"round","tension":0.5,"lineJoin":"round","draggable":true,"strokeWidth":15},"className":"Line"},{"attrs":{"x":40,"y":40,"id":"1111123","name":"ellipse","stroke":"red","radiusX":20,"radiusY":20,"draggable":true,"strokeWidth":4},"className":"Ellipse"},{"attrs":{"x":50,"y":50,"id":"11111","width":106,"height":118,"draggable":true,"source":"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2234238213,2776120128&fm=26&gp=0.jpg"},"className":"Image"}],"className":"Group"}],"className":"Layer"}],"className":"Stage"}}}')},b25c:function(e,t,o){},b278:function(e,t,o){},b426:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"konva",class:{"dgiot-fullscreen":e.isFullscreen,"konva-fullscreen":e.isDevice}},[t("el-container",{staticClass:"konva-container"},[t("el-header",{directives:[{name:"show",rawName:"v-show",value:!e.isDevice,expression:"!isDevice"}],staticClass:"konva-container-header hidden-xs-only"},[t("topo-header")],1),t("el-main",{staticClass:"konva-container-main"},[t("el-row",{attrs:{gutter:e.gutter.gutter}},[t("el-col",{staticClass:"hidden-xs-only konva-container-main-allocation",attrs:{lg:e.isDevice?0:4,md:e.isDevice?0:6,sm:e.isDevice?0:6,xl:e.isDevice?0:3,xs:0}},[t("Topo-allocation")],1),t("el-col",{staticClass:"konva-container-main-baseCol",attrs:{lg:e.isDevice?24:e.gutter.lg,md:e.isDevice?24:e.gutter.md,sm:e.isDevice?24:e.gutter.sm,xl:e.isDevice?24:e.gutter.xl,xs:e.isDevice?24:e.gutter.xs}},[t("el-container",{staticClass:"konva-container-baseCol-baseContainer"},[t("Topo-base",{ref:"topobase"}),t("div",{ref:"konva",staticClass:"konva, _center",staticStyle:{display:"none"},attrs:{id:"konva"}})],1)],1),t("el-col",{staticClass:"hidden-xs-only",attrs:{"hidden-xs-only":"",lg:e.isDevice?0:5,md:e.isDevice?0:6,sm:e.isDevice?0:6,xl:e.isDevice?0:3,xs:0}},[t("el-aside",{staticClass:"konva-container-main-operationsSide"},[t("TopoOperation",{ref:"operation",on:{upconfig:e.saveKonvaitem}})],1)],1)],1)],1)],1)],1)},a=[],n=(o("e05f"),o("d44d")),s=o("5880"),c=o("ed08"),r=o("2b3e9"),l=o("7a1d"),d=o("7212"),u=Object.defineProperty,m=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,b=(e,t,o)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,y=(e,t)=>{for(var o in t||(t={}))g.call(t,o)&&b(e,o,t[o]);if(h)for(var o of h(t))f.call(t,o)&&b(e,o,t[o]);return e},v=(e,t)=>m(e,p(t)),w=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())}),$={components:y({},Object(n["default"])(o("614c"))),data(){return{router:"",topicKey:"",isFullscreen:!1,gutter:{gutter:24,xs:24,sm:12,md:12,lg:15,xl:18},productid:this.$route.query.productid||""}},computed:v(y({},Object(s["mapGetters"])({graphColor:"konva/graphColor",drawing:"konva/drawing",graphNow:"konva/graphNow",pointStart:"konva/pointStart",draw:"konva/draw",flag:"konva/flag",drawParams:"konva/drawParams"})),{stageConfig(){let e=document.getElementsByClassName("konva");return{width:e[0].clientWidth,height:e[0].clientHeight,container:"container",id:"container"}},isDevice:function(){return!("device"!=this.$route.query.type&&!this.$route.query.deviceid)}}),watch:{},mounted(){this.router=this.$dgiotBus.router(this.$route.fullPath),this.handleMqtt()},destroyed(){return w(this,null,(function*(){yield this.$unSubscribe(this.subtopic)}))},created(){this.$dgiotBus.$off("removeShape"),this.$dgiotBus.$on("removeShape",e=>{e.attrs.id&&this.removeShape(e)}),this.$dgiotBus.$on("busTopo",(e,t)=>{this.newTopo(e,t)})},methods:v(y({},Object(s["mapMutations"])({setDrawing:"konva/setDrawing",setPointStart:"konva/setPointStart",setDraw:"konva/setDraw",setFlag:"konva/setFlag",setGraphNow:"konva/setGraphNow",setGraphColor:"konva/setGraphColor",setDrawParams:"konva/setDrawParams"})),{removeShape(e){var t;const o=e.attrs.id,i=e.attrs.className;var a="";let n=this;const s=n.stage.find("Layer")[0],c=n.stage.find("Path"),r=n.stage.find("Image"),l=n.stage.find("Text"),d=n.stage.find("Group"),u=n.stage.find(e.attrs.id);for(var m=[],p=0;p<m.length;p++)m[p].destroy();"Path"==i&&(a="Path",c.forEach(t=>{t.attrs.id==o&&(a="img",t.remove(),t.destroy(),e.remove(),e.destroy(),s.draw())})),"Stage"==i&&(a="Stage",u.forEach(t=>{t.attrs.id==o&&(a="Stage",t.remove(),t.destroy(),e.remove(),e.destroy(),s.draw())})),"Text"==i&&(a="Text",l.forEach(t=>{t.attrs.id==o&&(a="img",t.remove(),t.destroy(),e.remove(),e.destroy(),s.draw())})),"Group"==i&&(a="Group",d.forEach(t=>{t.attrs.id==o&&(a="img",t.remove(),t.destroy(),e.remove(),e.destroy(),s.draw())})),(null==(t=null==e?void 0:e.attrs)?void 0:t.image)&&r.forEach(t=>{console.log("图片相关",t),t.attrs.id==e.attrs.id&&(a="img",t.remove(),t.destroy(),e.remove(),e.destroy(),s.draw())}),n.stage.find("Transformer").map(e=>{console.log(e,"_Transformer")});const h={topoid:o,lab:i,type:a,PathLen:c.length};console.groupCollapsed("%cTopo delete info","color:#009a61; font-size: 28px; font-weight: 300"),console.table(h),console.groupEnd(),console.log(n.stage.find("Transformer"),n.stage.find()),e.remove(),s.draw(),s.batchDraw(),n.$refs.topobase.createTopo(n.stage.toJSON(),moment(new Date).valueOf()),n.setGraphNow(""),e.attrs.id==n.$refs["operation"].Shapeconfig.attrs.id&&(n.$refs["operation"].Shapeconfig=[]),n.updataTopo(this.productid)},updataTopo(e=""){return w(this,null,(function*(){let t=this.productconfig.config,o=JSON.parse(this.$refs["topobase"].stage);console.log(o,t),t.konva.Stage=o,this.paramsconfig.konva.Stage=o;let i=_.merge(this.paramsconfig,t);console.log(i,"upconfig");let a={config:i};yield Object(d["putProduct"])(this.productid,a).then(t=>{e&&this.$message({showClose:!0,duration:2e3,message:this.$translateTitle("产品组态更新成功"),type:"success"})}).catch(e=>{this.$baseMessage(this.$translateTitle(""+e.error),"error","dgiot-hey-message-error")})}))},saveKonvaitem(e,t={index:1,opacity:1}){const o=e.className;let i=this;const a=i.stage.find("Text"),n=i.stage.find("Image"),s=i.stage.find("Group"),c=i.stage.find(e.attrs.id),r=i.stage.find("Layer")[0];let l=c;console.log("stage",c);const d=[];for(let m=0;m<d.length;m++)d[m].destroy(),d[m].remove();const u=i.stage.find(""+o);console.log(i.stage.find("#"+e.attrs.id)),console.log("shope",u),u.forEach(o=>{o.attrs.id==e.attrs.id&&(console.log("updata type is image",o,e),l=o,i.kovaUpType="Image",l.zIndex(t.zIndex),l.opacity(t.opacity),r.draw(),d.push(new Konva.Tween({node:o,Opacity:t.opacity,duration:1,zIndex:t.zIndex,easing:Konva.Easings.ElasticEaseOut}).play()))}),n.forEach(o=>{o.attrs.id==e.attrs.id&&(console.log("updata type is image",o,e),l=o,i.kovaUpType="Image",l.zIndex(t.zIndex),l.opacity(t.opacity),r.draw(),d.push(new Konva.Tween({node:o,Opacity:t.opacity,duration:1,zIndex:t.zIndex,easing:Konva.Easings.ElasticEaseOut}).play()))}),s.forEach(t=>{t.attrs.id==e.attrs.id&&(i.kovaUpType="Group",l=t,d.push(new Konva.Tween({node:Object.assign(t,e),Opacity:.8,duration:1,easing:Konva.Easings.ElasticEaseOut}).play()))}),a.forEach(t=>{t.attrs.id==e.attrs.id&&(i.kovaUpType="Text",l=t,d.push(new Konva.Tween({node:Object.assign(t,e),Opacity:.8,duration:1,easing:Konva.Easings.ElasticEaseOut}).play()))}),"Image"!=i.kovaUpType&&(l.zIndex(t.index),l.opacity(t.opacity),r.draw()),console.log("upshape",l),i.stage.batchDraw(),i.stage.attrs.id==e.attrs.id&&(i.kovaUpType="Layer",i.stage=e),i.$refs.topobase.createTopo(i.stage.toJSON(),moment(new Date).valueOf()),console.info("updata type is "+i.kovaUpType),console.log("konva数据更新成功"),i.$dgiotBus.$emit("refresh",this.$route),i.updataTopo(i.productid)},newTopo(e,t){const o=this,i=new Konva.Group({x:t.coordinate.x,y:t.coordinate.y,id:"Group_"+Object(c["uuid"])(6),draggable:!0}),a=o.stage.find("Layer")[0],{paths:n=[]}=t,s=JSON.parse(n);console.log(n,"path"),s.forEach(e=>{var t=new Konva.Path(e);i.add(t)}),console.log(t,"data"),a.add(i),a.batchDraw(),o.$refs.topobase.createTopo(o.stage.toJSON(),moment(new Date).valueOf())},handleMqtt(){return w(this,null,(function*(){let e=this;"device"==e.$route.query.type&&(e.productid=e.$route.query.deviceid);const{productid:t,devaddr:o}=e.$route.query;let i={productid:t,devaddr:o};const{message:a="",data:n}=yield Object(l["_getTopo"])(i),{results:s=[]}=yield Object(d["queryProduct"])({where:{objectId:e.$route.query.productid}});e.productconfig=s[0],console.log(e.productconfig),"SUCCESS"==a&&(e.$refs["operation"]?e.$refs["operation"].productconfig=s[0]:console.log(" _this.$refs['operation']",e.$refs["operation"]),console.error(n.Stage.attrs.id),e.globalStageid=n.Stage.attrs.id,e.createKonva(n,e.globalStageid,"create"),e.paramsconfig={konva:n})}))},handleMqttMsg(){console.error("this.topicKey",this.$mqttInfo.topicKey),this.$dgiotBus.$off(this.$mqttInfo.topicKey),this.$dgiotBus.$on(this.$mqttInfo.topicKey,e=>{if(console.log("收到消息",e),e.payloadString){let o,i=[];Object(c["isBase64"])(e.payloadString)?(o=JSON.parse(Base64.decode(e.payloadString)),console.log("消息解密消息",o)):(console.log("非base64数据类型"),o=e.payloadString),console.log(o.konva);const a=o.konva,n=this.stage.find("Text");console.log(n);const s=[];for(var t=0;t<s.length;t++)s[t].destroy();a.forEach(e=>{n.forEach(t=>{e.id==t.attrs.id?(console.log("更新节点",e),console.log(t),t.text(e.text),s.push(new Konva.Tween({node:t,duration:1,easing:Konva.Easings.ElasticEaseOut}).play())):i.push(e.id)})}),i&&console.log("以下组态id未更新",i),this.stage.batchDraw(),console.log("konva数据更新成功")}})},createKonva(e,t,o){return w(this,null,(function*(){var i,a;let n;console.log("type",o);let s=this;n="create"!=o?e:e.Stage,console.log(e),console.log(n.attrs.height,n.attrs.width,"450"),n.attrs.height=s.stageConfig.height,n.attrs.width=s.stageConfig.width,console.log(n.attrs.height,n.attrs.width,"453");var l=document.querySelectorAll("._center")[0];console.log(l);const d=document.createElement("div");l.appendChild(d),d.setAttribute("id",t),console.log("globalStageid",t),n.attrs.draggable=!s.isDevice,s.stage=Konva.Node.create(n,t),console.log("_this.$refs.topobase",s.$refs.topobase),console.log("data",e);var u=s.stage.find("Layer")[0],m=s.stage.find("Layer");m.forEach(e=>{s.unDraggable(e)}),s.stage.on("click",e=>{var t=e.target;if(console.log(e,"stage node"),console.log(t,"stage target"),s.unDraggable(t),t==s.stage&&u.draw(),s.isDevice)return;if(s.setGraphNow(e.target),s.$refs["operation"].Shapeconfig=JSON.parse(t.toJSON()),!s.flag)return;console.log("类型",s.flag),console.log("this.draw",s.draw),console.log("color",s.graphColor),console.error("drawParams",s.drawParams);const o=s.graphColor,i=s.flag;console.log("params",s.drawParams);const a=s.stage.find("Group")[0],{offsetX:n,offsetY:c}=e.evt;var l=Object(r["default"])(i,n,c,o,s.drawParams);console.log("createState",l),a.add(l),u.draw(),u.batchDraw(),s.setFlag(""),s.setDraw(!1),s.$refs.topobase.createTopo(s.stage.toJSON(),moment(new Date).valueOf()),s.updataTopo()});const p=s.stage.find("Group");p.forEach((function(e){s.unDraggable(e)}));const h=s.stage.find("Text");console.log(h,"Text"),!s.isDevice&&(null==h?void 0:h.length)&&h.forEach(e=>{e.on("mouseenter",(function(e){console.log(e,"Text mouseenter"),s.stage.container().style.cursor="move"})),e.on("mouseleave",(function(e){console.log(e,"Text mouseleave"),s.stage.container().style.cursor="default"})),e.on("dblclick",(function(e){var t;console.log(e,"Text dblclick"),console.log(s.stage.find("Transformer"),s.stage.find()),(null==(t=s.stage.find("Transformer"))?void 0:t.length)?s.stage.find("Transformer").destroy():console.log("_this.stage.find('Transformer')",s.stage.find("Transformer"));let o=this.getAbsolutePosition(),i=s.stage.container().getBoundingClientRect();console.log("eeeeeeeeeeeeeeeee",e);let a={x:i.left+o.x,y:i.top+o.y,color:e.target.attrs.fill,text:e.target.attrs.text},n=document.createElement("textarea");document.body.appendChild(n);let c=this.text();"双击编辑文字"===c?(n.value="",n.setAttribute("placeholder","请输入文字")):n.value=c,n.style.position="absolute",n.style.top=a.y+"px",n.style.left=a.x+"px",n.style.background="none",n.style.border="1px dashed #000",n.style.outline="none",n.style.color=a.color,n.focus(),this.setAttr("text",""),u.draw();let r=e=>{this.text(e||"双击编辑文字"),u.draw(),n&&document.body.removeChild(n)},l=e=>{13===e.keyCode&&(n.removeEventListener("blur",d),r(n.value))},d=()=>{n.removeEventListener("keydown",l),r(n.value)};n.addEventListener("keydown",l),n.addEventListener("blur",d)}))}),console.log(p,"Group"),!s.isDevice&&(null==p?void 0:p.length)&&p.forEach((function(e){s.unDraggable(e),e.on("dblclick",e=>{console.log(e,"Group dblclick");const t=new Konva.Transformer({borderStroke:"#000",borderStrokeWidth:1,borderDash:[5],keepRatio:!1,id:"Transformer_"+Object(c["uuid"])(6)});u.add(t),t.attachTo(e.target),u.draw(),console.log("#"+e.target.attrs.id);var o=e.target;console.log("当前图层层级",Number(o.zIndex())),s.setGraphNow(e.target),s.$refs["operation"].ShapeIndex=Number(o.zIndex()),s.$refs["operation"].ShapeOpacity=o.opacity(),s.rightrow||s.isDevice||(s.rightrow=6)}),e.on("mouseup",e=>{!s.isDevice&&s.productid&&(s.headevisible=!0),document.body.style.cursor="pointer"}),e.on("mouseover",e=>{document.body.style.cursor="pointer"}),e.on("mouseout",e=>{const t=e.target.id(),o=s.stage.find(e=>e.id===t);o.x=e.target.x(),o.y=e.target.y(),document.body.style.cursor="default"})}));var g=s.stage.find("Image");g.forEach(e=>{const t=new Image;t.src=e.getAttr("source"),e.draggable=!1,e.attrs.draggable=!1,s.unDraggable(e),t.draggable=!s.isDevice,t.onload=()=>{e.image(t),s.stage.batchDraw()},e.on("mouseout",t=>{const o=t.target.id();console.log(e,"images的移动事件",t.target,t.target.x(),t.target.y(),o,t),e.attrs.x=t.target.x(),e.attrs.y=t.target.y(),document.body.style.cursor="default"}),e.on("dblclick",e=>{const t=new Konva.Transformer({borderStroke:"#000",borderStrokeWidth:1,borderDash:[5],keepRatio:!1,id:"Transformer_"+Object(c["uuid"])(6)});u.add(t),t.attachTo(e.target),u.draw(),console.log("#"+e.target.attrs.id)})}),!s.isDevice&&(null==p?void 0:p.length)&&p.forEach((function(e){s.unDraggable(e),e.on("dblclick",e=>{console.log(e,"Group dblclick");const t=new Konva.Transformer({borderStroke:"#000",borderStrokeWidth:1,borderDash:[5],keepRatio:!1,id:"Transformer_"+Object(c["uuid"])(6)});u.add(t),t.attachTo(e.target),u.draw(),console.log("#"+e.target.attrs.id);var o=e.target;console.log("当前图层层级",Number(o.zIndex())),s.setGraphNow(e.target),s.$refs["operation"].ShapeIndex=Number(o.zIndex()),s.$refs["operation"].ShapeOpacity=o.opacity(),s.rightrow||s.isDevice||(s.rightrow=6)}),e.on("mouseup",e=>{!s.isDevice&&s.productid&&(s.headevisible=!0),document.body.style.cursor="pointer"}),e.on("mouseover",e=>{document.body.style.cursor="pointer"}),e.on("mouseout",e=>{const t=e.target.id(),o=s.stage.find(e=>e.id===t);o.x=e.target.x(),o.y=e.target.y(),document.body.style.cursor="default"})})),u.draw(),u.batchDraw(),console.log("绘制完成"),s.$refs.topobase.createTopo(s.stage.toJSON(),moment(new Date).valueOf()),s.subtopic=`$dg/user/konva/${(null==(a=null==(i=null==s?void 0:s.$route)?void 0:i.query)?void 0:a.deviceid)||"test"}/report`,yield s.$subscribe(s.subtopic),console.log(s.$mqttInfo),console.warn("订阅mqtt",s.subtopic),s.handleMqttMsg()}))},scaleCanvas(e,{x:t=1,y:o=1,zoomLevelX:i=1,zoomLevelY:a=1}=args){e.scale({x:i,y:a})},unDraggable(e){e.draggable=!this.isDevice,e.attrs.draggable=!this.isDevice,console.log("node",e),this.stage.draw(),this.stage.batchDraw()}})},j=$,k=(o("8621"),o("2877")),F=Object(k["a"])(j,i,a,!1,null,"72b3c1d7",null);t["default"]=F.exports},b546:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-container",{staticClass:"evidence"},[t("el-drawer",{directives:[{name:"drawerDrag",rawName:"v-drawerDrag"}],attrs:{"append-to-body":"",placement:"right",size:"50%",visible:e.auditDialog,"with-header":!1,"wrapper-closable":!0},on:{close:function(t){e.auditDialog=!1}}},[t("dgiot-query-form",{staticStyle:{margin:"10px 20px"}},[t("el-form",{ref:"form",attrs:{"label-width":"120px",model:e.task}},["review"==e.taskType?t("el-form-item",{staticStyle:{float:"left"},attrs:{"label-width":"0"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.finishEvidence(e.task,1==Number(e.$route.query.step)?2:3)}}},[e._v(" 提交审核 ")])],1):e._e(),"evidence"==e.taskType?t("el-form-item",{staticStyle:{float:"left"},attrs:{"label-width":"0"}},[t("el-button",{on:{click:function(t){return e.notapproved(e.task,-1)}}},[e._v(" "+e._s(e.$translateTitle("cloudTest.notapproved"))+" ")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.notapproved(e.task,3)}}},[e._v(" "+e._s(e.$translateTitle("cloudTest.Approved"))+" ")])],1):e._e(),1!=Number(e.$route.query.step)?t("el-form-item",{attrs:{label:e.$translateTitle("cloudTest.report audit opinion")}},[t("el-input",{staticStyle:{width:"60%"},attrs:{rows:2,type:"textarea"},model:{value:e.task.profile.message,callback:function(t){e.$set(e.task.profile,"message",t)},expression:"task.profile.message"}})],1):e._e()],1)],1),t("span",[t("el-table",{attrs:{border:"",data:e.auditList,size:"mini",stripe:""}},[t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.number"),prop:"original.path","show-overflow-tooltip":"",width:"80"},scopedSlots:e._u([{key:"default",fn:function({$index:t}){return[e._v(" "+e._s(t+1)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.evidence"),prop:"row.original.path","show-overflow-tooltip":"",sortable:"",width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-link",{attrs:{href:e.$FileServe+o.original.path,target:"_blank"}},[e._v(" "+e._s(o.original.path.split("/")[""+(o.original.path.split("/").length-1)])+" ")])]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("deviceLog.type"),prop:"row.original.type","show-overflow-tooltip":"",sortable:"",width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-tag",{attrs:{effect:"plain"}},[e._v(" "+e._s(e.$translateTitle("cloudTest."+o.original.type))+" ")])]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("user.Remarks"),prop:"row.original.remarks",sortable:"",width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-input",{attrs:{readonly:Number(e.$route.query.step)>2,rows:2,type:"textarea"},model:{value:o.original.remarks,callback:function(t){e.$set(o.original,"remarks",t)},expression:"row.original.remarks"}})]}}])}),1==Number(e.$route.query.step)?t("el-table-column",{attrs:{align:"center",label:1==Number(e.$route.query.step)?e.$translateTitle("concentrator.operation"):e.$translateTitle("cloudTest.single audit"),width:1==Number(e.$route.query.step)?"220":"420"},scopedSlots:e._u([{key:"default",fn:function({row:o,$index:i}){return[t("el-button",{attrs:{sizes:"mini",type:"danger"},nativeOn:{click:function(t){return e.deleteFile(o.objectId,i,e.evidences)}}},[e._v(" "+e._s(e.$translateTitle("cloudTest.delete"))+" ")]),t("el-button",{attrs:{sizes:"mini",type:"success"},nativeOn:{click:function(t){return e.saveEvidences(o.objectId,i,o)}}},[e._v(" "+e._s(e.$translateTitle("konva.save"))+" ")])]}}],null,!1,2318592330)}):e._e(),"review"!=e.taskType?t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("user.Current state"),prop:"original.status",width:"100"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-tag",{attrs:{effect:"dark",type:["success","info","danger"]["未审核"==o.original.status?1:"通过审核"==o.original.status?0:2]}},[e._v(" "+e._s(o.original.status)+" ")])]}}],null,!1,3500859974)}):e._e(),"review"!=e.taskType?t("el-table-column",{attrs:{align:"center",fixed:"right",label:e.$translateTitle("cloudTest.single audit opinion"),prop:"original.message","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-input",{attrs:{rows:2,type:"textarea"},model:{value:o.original.message,callback:function(t){e.$set(o.original,"message",t)},expression:"row.original.message"}})]}}],null,!1,2712488978)}):e._e()],1)],1)],1),t("el-drawer",{directives:[{name:"drawerDrag",rawName:"v-drawerDrag"}],attrs:{"append-to-body":"",size:"60%",visible:e.evidenceDialog,"with-header":!1,"wrapper-closable":!1},on:{close:function(t){e.evidenceDialog=!1}}},[t("div",[t("dgiot-query-form",{staticStyle:{margin:"10px 20px"}},[e.evidenceList.id?t("dgiot-query-form-left-panel",{directives:[{name:"show",rawName:"v-show",value:1==Number(e.$route.query.step),expression:"Number($route.query.step) == 1"}]},[t("el-button",{staticClass:"el-icon-upload",attrs:{title:"取证",type:"primary"},nativeOn:{click:function(t){return e.$refs.uploader.click()}}},[e._v(" 上传 ")])],1):e._e(),t("dgiot-query-form-right-panel",{staticStyle:{float:"right"}},[t("el-button",{attrs:{title:"关闭",type:"info"},nativeOn:{click:function(t){return e.clouseDraw.apply(null,arguments)}}},[e._v(" 关闭 ")])],1)],1),t("input",{ref:"uploader",staticStyle:{display:"none"},attrs:{accept:"*",type:"file"},on:{change:function(t){return e.doUpload(t,e.evidenceList.node.attrs.icon)}}})],1),t("el-table",{attrs:{border:"",data:e.evidences,stripe:""}},[t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.number"),"show-overflow-tooltip":"",width:"100"},scopedSlots:e._u([{key:"default",fn:function({$index:t}){return[e._v(" "+e._s(t+1)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.evidence"),prop:"row.original.path","show-overflow-tooltip":"",sortable:"",width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-link",{attrs:{href:e.$FileServe+o.original.path,target:"_blank"}},[e._v(" "+e._s(o.original.path.split("/")[""+(o.original.path.split("/").length-1)])+" ")])]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("user.Remarks"),prop:"row.original.remarks",sortable:"",width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-input",{attrs:{rows:2,type:"textarea"},model:{value:o.original.remarks,callback:function(t){e.$set(o.original,"remarks",t)},expression:"row.original.remarks"}})]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("deviceLog.type"),prop:"row.original.type","show-overflow-tooltip":"",sortable:"",width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-tag",{attrs:{effect:"plain"}},[e._v(" "+e._s(e.$translateTitle("cloudTest."+o.original.type))+" ")])]}}])}),t("el-table-column",{attrs:{align:"center",label:1==Number(e.$route.query.step)?e.$translateTitle("concentrator.operation"):e.$translateTitle("cloudTest.single audit"),width:1==Number(e.$route.query.step)?"220":"420"},scopedSlots:e._u([{key:"default",fn:function({row:o,$index:i}){return[1==Number(e.$route.query.step)?t("el-button",{attrs:{sizes:"mini",type:"danger"},nativeOn:{click:function(t){return e.deleteFile(o.objectId,i,e.evidences)}}},[e._v(" "+e._s(e.$translateTitle("cloudTest.delete"))+" ")]):e._e(),1==Number(e.$route.query.step)?t("el-button",{attrs:{sizes:"mini",type:"success"},nativeOn:{click:function(t){return e.saveEvidences(o.objectId,i,o)}}},[e._v(" "+e._s(e.$translateTitle("konva.save"))+" ")]):e._e(),1!==Number(e.$route.query.step)&&4!=Number(e.$route.query.step)?t("el-radio-group",{attrs:{size:"mini"},model:{value:o.original.status,callback:function(t){e.$set(o.original,"status",t)},expression:"row.original.status"}},[t("el-radio",{attrs:{label:"未审核"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.Unreviewed"))+" ")]),t("el-radio",{attrs:{label:"通过审核"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.Approved"))+" ")]),t("el-radio",{attrs:{label:"不通过审核"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.notapproved"))+" ")])],1):e._e(),1!==Number(e.$route.query.step)&&3!=Number(e.$route.query.step)?t("el-tag",{attrs:{effect:"dark",type:["","success","danger"][["未审核","通过审核","不通过审核"].indexOf(o.original.status)]}},[e._v(" "+e._s(o.original.status)+" ")]):e._e()]}}])}),3==Number(e.$route.query.step)?t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("cloudTest.single audit opinion"),width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:o,$index:i}){return[t("el-input",{attrs:{size:"mini",type:"textarea"},model:{value:o.original.message,callback:function(t){e.$set(o.original,"message",t)},expression:"row.original.message"}})]}}],null,!1,4261977001)}):e._e(),3==Number(e.$route.query.step)?t("el-table-column",{attrs:{align:"center",label:e.$translateTitle("application.submit"),width:"auto"},scopedSlots:e._u([{key:"default",fn:function({row:o}){return[t("el-button",{attrs:{plain:""},nativeOn:{click:function(t){return e.changeItem(o)}}},[e._v(" "+e._s(e.$translateTitle("application.submit"))+" ")])]}}],null,!1,2568775408)}):e._e()],1)],1),t("el-header",{staticClass:"evidence_header"},[t("el-row",{staticClass:"evidence_header_row",attrs:{gutter:24}},[t("el-col",{attrs:{lg:1,md:1,sm:1,title:"检测详情",xl:1,xs:1}},[t("el-button",{attrs:{round:"",size:"mini",type:"success"},nativeOn:{click:function(t){e.asideShow=!e.asideShow}}},[t("dgiot-icon",{attrs:{color:"red",icon:"file-list-line"}})],1)],1),t("el-col",{attrs:{lg:22,md:22,sm:22,xl:22,xs:22}},[t("p",[e.task.name?t("el-tooltip",{staticClass:"item",attrs:{content:"报告名称",effect:"dark",placement:"top-start"}},[t("el-tag",[e._v(e._s(e.task.name))])],1):e._e(),e.ukey?t("el-tooltip",{staticClass:"item",attrs:{content:"ukey",effect:"dark",placement:"top-start"}},[t("el-tag",{attrs:{effect:"dark",title:"ukey"}},[e._v(e._s(e.ukey))])],1):e._e(),e.ukey?t("el-tooltip",{staticClass:"item",attrs:{content:"报告id",effect:"dark",placement:"top-start"}},[t("el-tag",{attrs:{effect:"dark",title:"objectId"}},[e._v(" "+e._s(e.task.objectId)+" ")])],1):e._e()],1)])],1)],1),t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"evidence_container",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":e.$translateTitle("developer.Waitingtoreturn")}},[t("transition",{attrs:{name:"el-fade-in-linear"}},[t("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.asideShow,expression:"asideShow"}],staticClass:"evidence_container_aside"},e._l(e.evidence,(function(o,i){return t("div",{key:o.objectId,staticClass:"btns"},[t("el-button",{attrs:{circle:"",type:o.type.length?o.type:"info"},nativeOn:{click:function(t){return e.activeBtn(o,i)}}},[e._v(" "+e._s(i+1)+" ")])],1)})),0)],1),t("el-main",{staticClass:"evidence_main"},[t("div",{staticClass:"evidence_main_konva",attrs:{id:"konva"}})])],1),e.task.name?t("el-footer",{staticClass:"evidence_footer"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{lg:3,md:2,sm:3,xl:1,xs:4}},[1==Number(e.$route.query.step)?t("el-button",{attrs:{round:"",type:"success"},nativeOn:{click:function(t){return e.auditQuery(1,"review")}}},[e._v(" "+e._s(e.$translateTitle(""+(1==Number(e.$route.query.step)?"cloudTest.预览审核":"cloudTest.audit opinion")))+" ")]):e._e(),3==Number(e.$route.query.step)?t("el-button",{attrs:{round:"",type:"success"},nativeOn:{click:function(t){return e.auditQuery(1,"evidence")}}},[e._v(" "+e._s(e.$translateTitle("cloudTest.audit opinion"))+" ")]):e._e()],1),t("el-col",{attrs:{lg:16,md:13,sm:11,xl:18,xs:10}},[e.$route.query.message&&5!=Number(e.$route.query.step)?t("el-link",{attrs:{type:"warning",underline:!1}},[e._v(" "+e._s(e.$translateTitle("cloudTest.The reason is not reviewed"))+"： "+e._s(e.$route.query.message)+" ")]):e._e(),3==Number(e.$route.query.step)?t("el-link",{attrs:{type:"success",underline:!1}},[e._v(" "+e._s(e.task.profile.message||"")+" ")]):e._e()],1),1!=Number(e.$route.query.step)?t("el-col",{attrs:{lg:4,md:9,sm:10,xl:4,xs:10}},[t("el-badge",{attrs:{type:"warning",value:e.badge.Unreviewed.length},nativeOn:{click:function(t){return e.evidenceClick(e.badge.Unreviewed)}}},[t("el-button",{attrs:{circle:"",size:"mini",type:"warning"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.Unreviewed"))+" ")])],1),t("el-badge",{attrs:{type:"primary",value:e.badge.Approved.length},nativeOn:{click:function(t){return e.evidenceClick(e.badge.Approved)}}},[t("el-button",{attrs:{circle:"",size:"mini",type:"primary"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.Approved"))+" ")])],1),t("el-badge",{attrs:{type:"danger",value:e.badge.notapproved.length},nativeOn:{click:function(t){return e.evidenceClick(e.badge.notapproved)}}},[t("el-button",{attrs:{circle:"",size:"mini",type:"danger"}},[e._v(" "+e._s(e.$translateTitle("cloudTest.notapproved"))+" ")])],1)],1):e._e()],1)],1):e._e()],1)},a=[],n=o("5880"),s=o("1285"),c=o("c008"),r=o("8ba7"),l=o("b8fa"),d=o("7365"),u=Object.defineProperty,m=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,b=(e,t,o)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,y=(e,t)=>{for(var o in t||(t={}))g.call(t,o)&&b(e,o,t[o]);if(h)for(var o of h(t))f.call(t,o)&&b(e,o,t[o]);return e},v=(e,t)=>m(e,p(t)),w=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())});const $=window["vue-aliplayer-v2"].default;var j={name:"Index",components:{"vue-aliplayer-v2":$},data(){var e;return{badgePath:null!=(e=d["default"].info.Path)?e:[],options:{autoplay:!1,width:"220px",height:"180px",margin:"0 auto"},badge:{Unreviewed:[],Approved:[],notapproved:[]},taskType:"review",nowItem:{},types:{video:["video","videocam_black"],audio:["audio","volume_mute"],image:["image","image"],file:["file","archive"]},evidences:[],timer:new Date,evidenceid:"",ukey:"",auditDialog:!1,auditList:[],timeout:null,queryPayload:{excludeKeys:"data,basedata,content",include:"",order:"-createdAt",limit:10,skip:0,count:"objectId"},paginations:{layout:"total, sizes"},taskid:this.$route.query.taskid||"",suite:this.$route.query.suite&&this.$route.query.suite>=0?this.$route.query.suite:0,evidence:[],evidenceList:[],evidenceDialog:!1,task:{name:"",profile:{message:""}},asideShow:!0,loading:!1}},computed:y({scrollerHeight:function(){return"280px"}},Object(n["mapGetters"])({role:"acl/role"})),created(){this.setTreeFlag(!1)},mounted(){this.$baseEventBus.$off(this.$dgiotBus.topicKey("dgiot_evidence","dgiotEvidence")),this.$baseEventBus.$on(this.$dgiotBus.topicKey("dgiot_evidence","dgiotEvidence"),e=>{this.evidenceList=e,this.queryevidences()}),this.taskid&&(this.queryTask(this.taskid),this.queryEvidence(this.taskid),this.auditQuery(0,"init"))},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},watch:{},methods:v(y({},Object(n["mapActions"])({deleteTopo:"topo/deleteTopo",initKonva:"topo/initKonva",setTreeFlag:"settings/setTreeFlag",createdEvidence:"topo/createdEvidence"})),{clearKonvaText(){d["default"].layer.find("Text").forEach(e=>{0!=e.attrs.id.indexOf("_evidence_delete_text")&&(e.remove(),e.destroy())})},getNumberEvidence(e){return w(this,null,(function*(){this.clearKonvaText(),d["default"].info.badge=[];let t={path:[],batch:[]};e.forEach(e=>{t.batch.push({body:{order:"-createdAt",skip:0,count:"objectId",where:{reportId:this.nowItem.objectId,"original.controlid":e.attrs.id}},method:"GET",evidence:e.attrs.icon,path:"/classes/Evidence"}),t.path.push(e)});try{const e=yield this.$shuwa_batch({requests:t.batch});t.path.forEach((o,i)=>{var a;const n=new Konva.Text({id:t.path[i].attrs.x+"_evidence_delete_text",x:t.path[i].attrs.x,y:"volume_mute"===t.path[i].attrs.icon?t.path[i].attrs.y:t.path[i].attrs.y-13,text:null!=(a=e[i].success.count)?a:0,fontSize:24,fontFamily:"Calibri",fill:"orange"});d["default"].info.badge.push(n),d["default"].layer.add(n)})}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}}))},paginationQuery(e){return w(this,null,(function*(){this.queryPayload=e}))},clouseDraw(){try{this.evidenceDialog=!1,this.auditDialog=!1}catch(e){console.log(e),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+e,"error","dgiot-hey-message-error")}},saveEvidences(e,t,o){return w(this,null,(function*(){console.log(e,t,o);try{const t=this.$baseColorfullLoading(),i={original:o.original},a=yield Object(c["putEvidence"])(e,i);console.log(a),this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),t.close()}catch(i){console.log(i),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+i,"error","dgiot-hey-message-error")}}))},deleteFile(e,t,o){return w(this,null,(function*(){o.splice(t,1);try{const t=this.$baseColorfullLoading();yield Object(c["delEvidence"])(e);this.getNumberEvidence(this.badgePath),this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),t.close()}catch(i){console.log(i),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+i,"error","dgiot-hey-message-error")}}))},changeItem(e){return w(this,null,(function*(){try{const t=this.$baseColorfullLoading(),o={original:_.merge(e.original,{status:e.original.status,message:e.original.message})},i=yield Object(c["putEvidence"])(e.objectId,o);console.log(i),this.auditQuery(0,"init"),this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),t.close()}catch(t){console.log(t),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+t,"error","dgiot-hey-message-error")}}))},doUpload(e,t){return w(this,null,(function*(){this.timer=new Date,this.evidenceid=md5("Evidence"+this.ukey+Math.round(this.timer)).substring(0,10);const o=e.target.files[0],i=o.name.substring(o.name.lastIndexOf("."));try{const e={auth_token:Cookies.get("dgiot_auth_token"),scene:"evidence",code:"",path:"dgiot_file/evidence/"+t,output:"json",submit:"upload",file:o,filename:`${this.evidenceid}${i}`};console.warn("Evidence",e);var a=new FormData;for(let t in e)a.append(t,e[t]);const{NODE_ENV:n="development"}=Object({NODE_ENV:"production",VUE_APP_TITLE:"物联网开发平台",VUE_APP_AUTHOR:"h7ml",VUE_APP_UPDATE_TIME:"2022年07月01日22时26分03秒",VUE_APP_VERSION:"4.5.4",VUE_APP_Keywords:"一站式物联网PaaS平台|物联网应用服务",VUE_APP_Description:"提供物联网垂直领域应用使能平台及解决方案",VUE_APP_URL:"http://127.0.0.1:5080",VUE_APP_CDN_URL:"/dgiot_dashboard/public",BASE_URL:""}),s="development"==n?"http://127.0.0.1:5080/upload":"upload",{data:c}=yield Object(l["uppyUpload"])(s,a);(null==c?void 0:c.md5)&&this.depositEvidence(c);const r=this.$baseColorfullLoading();this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),r.close()}catch(n){console.log(n),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+n,"error","dgiot-hey-message-error")}}))},utc2beijing(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},depositEvidence(e){return w(this,null,(function*(){try{const t=this.$baseColorfullLoading(),o={objectId:this.evidenceid,ukey:this.ukey,timestamp:Math.round(this.timer),md5:e.md5,original:{taskid:this.taskid,controlid:this.evidenceList.node.attrs.id,path:e.path,type:this.evidenceList.node.attrs.type}};t.close();yield Object(c["postEvidence"])(this.nowItem.objectId,o);this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),this.getNumberEvidence(this.badgePath),t.close()}catch(t){console.log(t),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+t,"error","dgiot-hey-message-error")}this.queryevidences()}))},getUkey(e){return w(this,null,(function*(){var t;this.ukey="";try{const o={limit:1,order:"-createdAt",skip:0,keys:"devaddr",where:{parentId:e,product:"3f95880e09"}},i=this.$baseColorfullLoading(),{results:a=[]}=yield Object(s["queryDevice"])(o);(null==(t=null==a?void 0:a[0])?void 0:t.devaddr)?(this.ukey=a[0].devaddr,console.info("-----------------this.ukey",this.ukey)):this.$baseMessage(this.$translateTitle("cloudTest.There is no uKey for this product, please contact the administrator"),"error","dgiot-hey-message-error"),i.close()}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}}))},evidenceClick(e){return w(this,null,(function*(){this.evidences=[];try{const t=this.$baseColorfullLoading();(null==e?void 0:e.length)&&e.forEach(e=>{e.original.path="/dgiot_file"+e.original.path.split("/dgiot_file")[1]}),this.evidences=e,this.evidenceDialog=!0,t.close()}catch(t){console.log(t),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+t,"error","dgiot-hey-message-error")}}))},queryevidences(){return w(this,null,(function*(){this.evidences=[];try{const e=this.$baseColorfullLoading(),t={order:"-createdAt",skip:0,where:{reportId:this.nowItem.objectId,"original.controlid":this.evidenceList.node.attrs.id}},{results:o=[]}=yield Object(c["queryEvidence"])(t);(null==o?void 0:o.length)&&_.filter(o,(function(e){return e.original.path="/dgiot_file"+e.original.path.split("/dgiot_file")[1],"avgs"!==e.original.type})),this.evidences=o,this.evidenceDialog=!0,this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),e.close()}catch(e){console.log(e),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+e,"error","dgiot-hey-message-error")}}))},headerTask(e,t){return w(this,null,(function*(){var o,i,a,n;try{const s=this.$baseColorfullLoading();console.log(e,t);const c=JSON.parse(JSON.stringify(this.$route.query));c.taskid=e.objectId,c.suite=1,c.state="preview",c.message=null!=(i=null==(o=null==e?void 0:e.profile)?void 0:o.message)?i:"",c.back=null!=(n=null==(a=null==e?void 0:e.profile)?void 0:a.step)?n:"",c.step=-1==e.profile.step?1:e.profile.step,this.$router.push({path:this.$route.path,query:c}),s.close(),this.queryTask(c.taskid),this.queryEvidence(c.taskid)}catch(s){console.log(s),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+s,"error","dgiot-hey-message-error")}}))},auditQuery(e,t){return w(this,null,(function*(){this.taskType=t,this.badge={Unreviewed:[],Approved:[],notapproved:[]};try{const t={order:"-createdAt",skip:0,where:{"original.taskid":this.taskid,reportId:{$ne:this.taskid}}};1==e&&(this.auditDialog=!0);const{results:o}=yield Object(c["queryEvidence"])(t);this.auditList=_.filter(o,(function(e){return"avgs"!==e.original.type})),this.auditList.forEach(e=>{"未审核"==e.original.status?this.badge.Unreviewed.push(e):"通过审核"==e.original.status?this.badge.Approved.push(e):this.badge.notapproved.push(e)})}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}}))},queryEvidence(e){return w(this,null,(function*(){var t;try{const t=this.$baseColorfullLoading(),o={order:"title",skip:0,where:{type:"topo",class:"Device",key:e}},{results:i=[]}=yield Object(r["queryView"])(o);i.forEach(e=>{e.type="info"}),this.evidence=i,this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),t.close()}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}(null==(t=this.evidence)?void 0:t.length)&&(this.suite<this.evidence.length||(this.suite=0),this.activeBtn(this.evidence[this.suite],this.suite))}))},notapproved(e,t){return w(this,null,(function*(){if(this.badge.Unreviewed.length===this.auditList)return this.$baseMessage("当前任务证据没有被审核","warning","dgiot-hey-message-warning"),!1;try{const o=this.$baseColorfullLoading(),i={profile:_.merge(e.profile,{message:e.profile.message,step:t,endtime:moment(new Date).format("x")})};yield Object(s["putDevice"])(e.objectId,i);this.auditDialog=!1,this.$router.push({path:"/cloudTest/review"}),this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),o.close()}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}}))},finishEvidence(e,t){return w(this,null,(function*(){this.$baseConfirm(this.$translateTitle("cloudTest.Please confirm that all review items have been completed"),null,()=>w(this,null,(function*(){var o;try{if(!(null==(o=this.auditList)?void 0:o.length))return void this.$baseMessage("未提交任何证据","error","dgiot-hey-message-error");{const o=this.$baseColorfullLoading(),i={profile:_.merge(e.profile,{step:t})};yield Object(c["generatereport"])(e.objectId);yield Object(s["putDevice"])(e.objectId,i);this.$router.push({path:"/cloudTest/Task"}),o.close()}}catch(i){console.log(i),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+i,"error","dgiot-hey-message-error")}})))}))},queryTask(e){return w(this,null,(function*(){var t;try{const o=yield Object(s["getDevice"])(e);o?(this.task=_.merge({profile:{message:""}},o),(null==(t=null==o?void 0:o.parentId)?void 0:t.objectId)&&(yield this.getUkey(o.parentId.objectId))):this.task={name:"111",profile:{message:""}}}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}}))},activeBtn(e,t){return w(this,null,(function*(){this.nowItem=e;const o=JSON.parse(JSON.stringify(this.$route.query));o.suite=t,this.$router.push({path:this.$route.path,query:o}),this.loading=!0,this.evidence.forEach(e=>{e.type="info"}),e.type="success";const{konva:i}=e.data;d["default"].info.badge=[],yield this.initKonva({data:i.Stage,id:"konva"}),this.clearKonvaText(),yield setTimeout(()=>{var e;this.badgePath=[],d["default"].info.Path=[],this.loading=!1;const t={icon:"timeline",type:"delete",path:"M23,8c0,1.1-0.9,2-2,2c-0.18,0-0.35-0.02-0.51-0.07l-3.56,3.55C16.98,13.64,17,13.82,17,14c0,1.1-0.9,2-2,2s-2-0.9-2-2 c0-0.18,0.02-0.36,0.07-0.52l-2.55-2.55C10.36,10.98,10.18,11,10,11s-0.36-0.02-0.52-0.07l-4.55,4.56C4.98,15.65,5,15.82,5,16 c0,1.1-0.9,2-2,2s-2-0.9-2-2s0.9-2,2-2c0.18,0,0.35,0.02,0.51,0.07l4.56-4.55C8.02,9.36,8,9.18,8,9c0-1.1,0.9-2,2-2s2,0.9,2,2 c0,0.18-0.02,0.36-0.07,0.52l2.55,2.55C14.64,12.02,14.82,12,15,12s0.36,0.02,0.52,0.07l3.55-3.56C19.02,8.35,19,8.18,19,8 c0-1.1,0.9-2,2-2S23,6.9,23,8z"};this.createdEvidence(_.merge(t,{index:7,fill:"orange",productid:this.$route.query.taskid})),this.deleteTopo(window.deletePath),this.badgePath=null!=(e=_.filter(d["default"].info.Path,(function(e){return"timeline"!==e.attrs.icon})))?e:[],this.getNumberEvidence(this.badgePath)},1e3)}))}})},k=j,F=(o("f235"),o("2877")),T=Object(F["a"])(k,i,a,!1,null,"67a121ba",null);t["default"]=T.exports},b99f:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"TopoThing-container"},[t("div",{staticClass:"TopoThing-content"},[t("span",{staticClass:"material-icons"},[e._v("home")]),e._v(" "+e._s(e.infoData)+" "),t("md-icon",[e._v("favorite")]),t("i",{staticClass:"material-icons"},[e._v("account_balance_wallet")])],1)])},a=[],n={name:"TopoThing",components:{},data(){return{infoData:"TopoThing"}},computed:{},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:{}},s=n,c=(o("3baa"),o("2877")),r=Object(c["a"])(s,i,a,!1,null,"3f158633",null);t["default"]=r.exports},b9e9:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"konva",class:{"dgiot-fullscreen":e.isFullscreen,"konva-fullscreen":e.isDevice}},[t("el-container",{staticClass:"konva-container"},[t("el-header",{directives:[{name:"show",rawName:"v-show",value:!e.isDevice,expression:"!isDevice"}],staticClass:"konva-container-header hidden-xs-only"},[t("topo-header",{attrs:{noTools:Boolean(e.$route.query.noTools)}})],1),t("el-main",{staticClass:"konva-container-main"},[t("el-row",{staticClass:"user-content",attrs:{gutter:e.gutter.gutter}},[t("el-col",{staticClass:"hidden-xs-only konva-container-main-allocation",attrs:{lg:e.isDevice||e.isFull?0:3,md:e.isDevice||e.isFull?0:3,sm:e.isDevice||e.isFull?0:4,xl:e.isDevice||e.isFull?0:3,xs:0}},[t("Topo-tabs",{staticClass:"tabs",attrs:{isDirver:Boolean(e.$route.query.isDirver)}})],1),t("el-col",{staticClass:"konva-container-main-baseCol",attrs:{lg:e.isDevice||e.isFull?24:e.gutter.lg,md:e.isDevice||e.isFull?24:e.gutter.md,sm:e.isDevice||e.isFull?24:e.gutter.sm,xl:e.isDevice||e.isFull?24:e.gutter.xl,xs:e.isDevice||e.isFull?24:e.gutter.xs}},[t("el-main",{staticClass:"konva-container-baseCol-baseContainer"},[t("topo-base",{ref:"topobase",staticStyle:{position:"absolute",width:"100%"}}),Boolean(e.$route.query.guide)?t("div",[t("el-button",{staticStyle:{position:"relative",left:"0"},attrs:{size:"mini",type:"primary",disabled:e.$route.query.page<0,icon:"el-icon-arrow-left"},nativeOn:{click:function(t){return e.nextPage("left")}}},[e._v(" "+e._s(e.$translateTitle("button.previous"))+" ")]),t("el-button",{staticStyle:{position:"fixed",right:"30px"},attrs:{disabled:e.$route.query.page>e.$route.query.list.length,type:"primary",size:"mini",icon:"el-icon-arrow-right"},nativeOn:{click:function(t){return e.nextPage("right")}}},[e._v(" "+e._s(e.$translateTitle("button.next"))+" ")])],1):e._e(),t("div",{ref:"konva",staticClass:"konva, _center",staticStyle:{display:"none"},attrs:{id:"konva"}})],1)],1)],1)],1)],1)],1)},a=[],n=o("e556"),s=(o("e05f"),o("d44d")),c=o("5880"),r=o("7a1d"),l=o("7212"),d=o("8ba7"),u=Object.defineProperty,m=Object.defineProperties,p=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,b=(e,t,o)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,y=(e,t)=>{for(var o in t||(t={}))g.call(t,o)&&b(e,o,t[o]);if(h)for(var o of h(t))f.call(t,o)&&b(e,o,t[o]);return e},v=(e,t)=>m(e,p(t)),w=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())}),$={components:y({},Object(s["default"])(o("614c"))),data(){return{subtopic:"",router:"",viewInfo:{},driver:null,Stage:{},isFull:!1,topicKey:"",isFullscreen:!1,gutter:{gutter:24,xs:24,sm:20,md:21,lg:21,xl:21},productid:this.$route.query.productid||"",viewid:this.$route.query.viewid||""}},computed:v(y({},Object(c["mapGetters"])({defaultKonva:"topo/defaultKonva",graphColor:"konva/graphColor",drawing:"konva/drawing",graphNow:"konva/graphNow",pointStart:"konva/pointStart",draw:"konva/draw",flag:"konva/flag",drawParams:"konva/drawParams"})),{isDevice:{get:function(){return!("device"!=this.$route.query.type&&!this.$route.query.deviceid)}}}),mounted(){var e,t;this.$nextTick(()=>{this.handleKonva()}),this.$dgiotBus.$off("_busUpdata"),this.$dgiotBus.$on("_busUpdata",()=>w(this,null,(function*(){this.viewInfo.objectId&&(yield this._updataTopo(this.viewInfo.objectId))}))),this.driver=new this.$Driver({className:"vue-admin-beautiful-wrapper",animate:!0,opacity:.75,padding:10,allowClose:!0,overlayClickNext:!1,doneBtnText:"完成",closeBtnText:"关闭",nextBtnText:"下一步",prevBtnText:"上一步"}),(null==(t=null==(e=null==this?void 0:this.$router)?void 0:e.query)?void 0:t.guide)&&1==Boolean(this.$router.query.guide)&&this.guide(),this.$baseEventBus.$off("ToggleView"),this.$baseEventBus.$on("ToggleView",()=>{this.isFull=!this.isFull}),this.Stage=_.isEmpty(localStorage.getItem("konvaStale"))?localStorage.getItem("konvaStale"):this.defaultKonva,this.router=this.$dgiotBus.router(this.$route.fullPath),this.setTreeFlag(!1)},destroyed(){return w(this,null,(function*(){_.isEmpty(localStorage.getItem("konvaStale"))||localStorage.setItem("konvaStale",JSON.stringify(canvas.stageJson)),yield this.$unSubscribe(this.topotopic)}))},methods:v(y({},Object(c["mapMutations"])({deleteTopo:"topo/deleteTopo",initKonva:"topo/initKonva",createThing:"topo/createThing",setTreeFlag:"settings/setTreeFlag",createdEvidence:"topo/createdEvidence"})),{nextPage(e){let t=JSON.parse(JSON.stringify(this.$route.query));const o=JSON.parse(this.$route.query.list),i=t.length;t.page=Number(t.page),t.page="left"==e?t.page-- >=-1&&t.page>0?t.page:i:t.page++>=i?0:t.page,t.viewid=o[t.page].viewid,this.$router.push({path:this.$route.path,query:t}),this.handleKonva()},guide(){this.driver.defineSteps(n["default"]),this.driver.start()},_updataTopo(e){return w(this,null,(function*(){this.viewInfo.data.konva={Stage:JSON.parse(canvas.stage.toJSON())};try{yield Object(d["putView"])(e,{data:this.viewInfo.data}),this.$baseMessage(this.$translateTitle("user.update completed"),"success","dgiot-hey-message-success"),console.error("this.viewInfo.data",this.viewInfo.data)}catch(t){console.log(t)}}))},handleKonva(){return w(this,null,(function*(){let e=this;"device"==e.$route.query.type&&(e.productid=e.$route.query.deviceid);const t=e.$baseColorfullLoading(3);try{const{productid:o,viewid:i,devaddr:a}=e.$route.query;let n={productid:o,devaddr:a,viewid:i};const{message:s="",data:c={}}=yield Object(r["_getTopo"])(n),{results:u=[]}=yield Object(l["getProduct"])(e.$route.query.productid);e.productconfig=u,console.groupCollapsed("%c productconfig","color:#009a61; font-size: 28px; font-weight: 300"),console.info("productconfig ->\n",e.productconfig),console.groupEnd(),"SUCCESS"==s?(console.groupCollapsed("%c _getTopo","color:#009a61; font-size: 28px; font-weight: 300"),console.info("data ->\n",c),console.groupEnd(),e.$refs["operation"]?e.$refs["operation"].productconfig=u[0]:console.log(" _this.$refs['operation']",e.$refs["operation"]),e.globalStageid=c.Stage.attrs.id,e.paramsconfig={konva:c},console.log("topo info msg 请求数据有组态 就设置这个组态为请求回来的组态",c.Stage,c.viewid),c.viewid&&(this.viewInfo=yield Object(d["getView"])(c.viewid)),console.error(this.viewInfo),yield e.initKonva({data:c.Stage,id:"kevCurrent"})):(e.$baseMessage("暂无组态。显示默认组态","info","dgiot-hey-message-error"),console.log("topo info msg 请求数据没有组态 就设置这个组态为默认",e.Stage),yield e.initKonva({data:e.initKonva,id:"kevCurrent"})),t.close()}catch(o){yield e.initKonva({data:this.Stage,id:"kevCurrent"}),console.log("topo info msg 组态请求出错",o),t.close()}setTimeout(()=>{const t={icon:"timeline",type:"delete",path:"M23,8c0,1.1-0.9,2-2,2c-0.18,0-0.35-0.02-0.51-0.07l-3.56,3.55C16.98,13.64,17,13.82,17,14c0,1.1-0.9,2-2,2s-2-0.9-2-2 c0-0.18,0.02-0.36,0.07-0.52l-2.55-2.55C10.36,10.98,10.18,11,10,11s-0.36-0.02-0.52-0.07l-4.55,4.56C4.98,15.65,5,15.82,5,16 c0,1.1-0.9,2-2,2s-2-0.9-2-2s0.9-2,2-2c0.18,0,0.35,0.02,0.51,0.07l4.56-4.55C8.02,9.36,8,9.18,8,9c0-1.1,0.9-2,2-2s2,0.9,2,2 c0,0.18-0.02,0.36-0.07,0.52l2.55,2.55C14.64,12.02,14.82,12,15,12s0.36,0.02,0.52,0.07l3.55-3.56C19.02,8.35,19,8.18,19,8 c0-1.1,0.9-2,2-2S23,6.9,23,8z"};e.createdEvidence(_.merge(t,{index:7,fill:"orange",productid:e.$route.query.productid})),e.deleteTopo(window.deletePath)},1e3)}))}})},j=$,k=(o("32b2"),o("2877")),F=Object(k["a"])(j,i,a,!1,null,"815a9d38",null);t["default"]=F.exports},ba07:function(e,t,o){"use strict";o("4cf1")},bc00:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"_vuekonva"},[t("div",{staticClass:"_dialog"},[t("el-dialog",{staticClass:"_shape",attrs:{"append-to-body":!0,visible:e.ShapeVisible,width:"100vh"},on:{"update:visible":function(t){e.ShapeVisible=t}}},["ShapeJson"==e.tabsName?t("span",{attrs:{slot:"footer"},slot:"footer"}):e._e()])],1),t("div",{staticClass:"_header",style:{display:e.headevisible?"block":"none"}},[t("topo-header",{ref:"topoheader",attrs:{drawerflag:e.drawer,productid:e.productid,"stop-mqtt":e.stop_Mqtt,value:e.value},on:{ImageTable:e.ImageTable,messageData:e.set_mqttflag,removeShape:e.removeShape,uploadFinish:e.uploadFinishs}})],1),t("div",{staticClass:"_mian"},[t("el-row",{staticClass:"_row",attrs:{gutter:e.gutter}},[t("transition",{attrs:{name:"fade"}},[t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}],attrs:{span:e.leftrow}},[t("div",{staticClass:"_left"},[t("topo-allocation")],1)])],1),t("el-col",{staticClass:"_konvarow",attrs:{span:24-e.rightrow}},[t("div",{ref:"konva",class:e.konvaClass,attrs:{id:"konva"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isDevice&&e.productid,expression:"!isDevice && productid"}],staticClass:"_info",style:{display:(e.infoFlag,"block")}},[t("el-row",{staticStyle:{"text-align":"center"},attrs:{gutter:10}},[t("el-col",{attrs:{span:24}},[t("el-button",{attrs:{disabled:e.productid.length<1,icon:"el-icon-s-management",plain:"",type:"success"},on:{click:function(t){return e.regulate("save")}}},[e._v(" "+e._s(e.$translateTitle("konva.save"))+" ")]),t("el-button",{attrs:{icon:"el-icon-arrow-up",plain:"",type:"success"},on:{click:function(t){return e.regulate("top")}}},[e._v(" "+e._s(e.headevisible?e.$translateTitle("konva.hide"):e.$translateTitle("konva.show"))+e._s(e.$translateTitle("konva.top"))+" ")]),t("el-button",{attrs:{icon:"el-icon-arrow-right",plain:"",type:"success"},on:{click:function(t){return e.regulate("right")}}},[e._v(" "+e._s(e.rightrow?e.$translateTitle("konva.hide"):e.$translateTitle("konva.show"))+e._s(e.$translateTitle("konva.right"))+" ")])],1)],1)],1)]),t("el-col",{attrs:{span:e.rightrow}},[t("topo-operation",{ref:"operation",on:{clearImg:e.clearImg,handleCloseSub:e.handleCloseSub,upImg:e.upProduct,upconfig:e.saveKonvaitem}})],1)],1)],1)])},a=[],n=o("969d"),s=o.n(n),c=o("ed08"),r=o("d44d"),l=o("2b3e9"),d=o("5880"),u=o("7a1d"),m=o("7212"),p=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,y=(e,t,o)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,v=(e,t)=>{for(var o in t||(t={}))_.call(t,o)&&y(e,o,t[o]);if(f)for(var o of f(t))b.call(t,o)&&y(e,o,t[o]);return e},w=(e,t)=>h(e,g(t)),j=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())}),k={components:v({},Object(r["default"])(o("614c"))),data(){return{per:"100",rightFlag:!1,paramsconfig:{},productconfig:{},backgroundImage:"",gutter:24,leftrow:0,rightrow:0,productid:this.$route.query.productid||"",isDevice:"device"==this.$route.query.type,konvaClass:["konva","_center"],drawer:!1,ShapeVisible:!1,arrowFlag:!1,headevisible:!1,infoFlag:!1,arrowClass:"arrowClass",topic:"",stop_Mqtt:!0,tabsName:"ShapeJson",globalStageid:"",value:!1,kovaUpType:"",showTable:!1}},computed:w(v({},Object(d["mapGetters"])({graphColor:"konva/graphColor",drawing:"konva/drawing",graphNow:"konva/graphNow",pointStart:"konva/pointStart",draw:"konva/draw",flag:"konva/flag",drawParams:"konva/drawParams"})),{stageConfig(){let e=document.getElementsByClassName("konva");return{width:e[0].clientWidth,height:e[0].clientHeight,container:"container",id:"container"}}}),watch:{rightrow:{deep:!0,handler(e){this.rightFlag=0!==e}}},mounted(){this.productid?this.handleCloseSub():this._initCreate()},destroyed(){this.$refs.topoheader&&this.handleCloseSub()},methods:w(v({},Object(d["mapMutations"])({setDrawing:"konva/setDrawing",setPointStart:"konva/setPointStart",setDraw:"konva/setDraw",setFlag:"konva/setFlag",setGraphNow:"konva/setGraphNow",setGraphColor:"konva/setGraphColor",setDrawParams:"konva/setDrawParams"})),{uploadFinishs(e){var t=this.stage.find("Image");t.forEach(t=>{t.setAttrs({source:e}),console.log("img node ",t),t.draw()}),console.log("this.stage",this.stage,JSON.parse(this.stage.toJSON())),this.updataProduct(this.productid)},_initCreate(){let e=s.a;this.$refs.konva.style.backgroundImage=`url(${e})`},set_mqttflag(e){this.stop_Mqtt=e},removeShape(e){var t;let o=this;const i=o.stage.find("Layer")[0];console.log("删除的节点",e);for(var a=o.stage.find("Image"),n=[],s=0;s<n.length;s++)n[s].destroy();(null==(t=null==e?void 0:e.attrs)?void 0:t.image)&&(console.log("is img",e.attrs.id),a.each(t=>{console.log("图片相关",t),t.attrs.id==e.attrs.id&&(console.log(t,"shape.target 找到了这个node 节点"),console.log(e,"shape.target 找到了这个node 节点"),t.remove(),t.destroy(),e.remove(),e.destroy(),i.draw())})),console.log("删除的节点",e.remove()),o.stage.find("Transformer").map(e=>{console.log(e,"_Transformer")}),console.log(o.stage.find("Transformer"),o.stage.find()),e.remove(),i.draw(),o.setGraphNow(""),e.attrs.id==o.$refs["operation"].Shapeconfig.attrs.id&&(o.$refs["operation"].Shapeconfig=[]),o.updataProduct(this.productid)},ImageTable(e){this.leftrow=e?3:0,this.showTable=e},saveKonvaitem(e,t={index:1,opacity:1}){let o=this;console.log(o.stage.find("#"+e.attrs.id)),console.log("config.attrs.id",e.attrs.id);const i=o.stage.find("Text"),a=o.stage.find("Image"),n=o.stage.find("Group"),s=o.stage.find(e.attrs.id),c=o.stage.find("Layer")[0];let r=s;console.log("stage",s);const l=[];for(let d=0;d<l.length;d++)l[d].destroy(),l[d].remove();a.each(i=>{i.attrs.id==e.attrs.id&&(console.log("updata type is image",i,e),r=i,o.kovaUpType="Image",r.zIndex(t.zIndex),r.opacity(t.opacity),c.draw(),l.push(new Konva.Tween({node:i,Opacity:t.opacity,duration:1,zIndex:t.zIndex,easing:Konva.Easings.ElasticEaseOut}).play()))}),n.each(t=>{t.attrs.id==e.attrs.id&&(o.kovaUpType="Group",r=t,l.push(new Konva.Tween({node:Object.assign(t,e),Opacity:.8,duration:1,easing:Konva.Easings.ElasticEaseOut}).play()))}),i.each(t=>{t.attrs.id==e.attrs.id&&(o.kovaUpType="Text",r=t,l.push(new Konva.Tween({node:Object.assign(t,e),Opacity:.8,duration:1,easing:Konva.Easings.ElasticEaseOut}).play()))}),"Image"!=o.kovaUpType&&(r.zIndex(t.index),r.opacity(t.opacity),c.draw()),o.stage.batchDraw(),o.stage.attrs.id==e.attrs.id&&(o.kovaUpType="Layer",o.stage=e),console.clear(),console.info("updata type is "+o.kovaUpType),console.log("konva数据更新成功"),o.updataProduct(o.productid)},regulate(e){switch(e){case"save":this.updataProduct(this.$route.query.productid);break;case"info":alert(this.stage.toJSON());break;case"top":this.headevisible=!this.headevisible;break;case"right":this.toggleClass("rightrow");break;case"search":this.$message({showClose:!0,duration:2e3,message:"开发中",type:"success"});break}},toggleClass(e){"rightrow"==e?this.rightrow=6==this.rightrow?0:6:this.leftrow=3==this.leftrow?0:3},clearImg(e){let t=" ";e&&(t=this.backgroundImage),console.log(e),console.log(this.backgroundImage),this.$refs["operation"].bachgroundurl=t},upProduct(e){return j(this,null,(function*(){if(Object(c["isImage"])(e)){let t=this.productconfig.config;t.konva.background=e;let o={config:t},i=yield Object(m["putProduct"])(this.productid,o);console.log(i),i&&this.$message({showClose:!0,duration:2e3,message:this.$translateTitle("组态背景更新成功"),type:"success"})}else this.$baseMessage(this.$translateTitle("非图片类型"),"error","dgiot-hey-message-error")}))},updataProduct(e){return j(this,null,(function*(){console.log("updatatopo");let t,o=this.productconfig.config;if("Layer"!=this.kovaUpType){if(!this.stage.toJSON())return;t=JSON.parse(this.stage.toJSON())}else t=this.stage;o.konva.Stage=t;let i=Object.assign(o,this.paramsconfig),a={config:i};yield Object(m["putProduct"])(e,a).then(e=>{console.log(e,"产品组态更新成功"),this.$message({showClose:!0,duration:2e3,message:this.$translateTitle("产品组态更新成功"),type:"success"})}).catch(e=>{this.$baseMessage(this.$translateTitle(""+e.error),"error","dgiot-hey-message-error")})}))},handleMqttMsg(e){let t=this;const o=t.$dgiotBus.router(this.$route.fullPath);var i=new RegExp("$dg/user/konva/"+e+"/report");t.topicKey=t.$dgiotBus.topicKey(o,i),t.$dgiotBus.$off(e),t.$dgiotBus.$on(e,e=>{const o=e.payload;let i,a=[];if(console.log("收到消息",o),!Object(c["isBase64"])(o))return void console.log("非base64数据类型");i=JSON.parse(Base64.decode(o)),console.log("消息解密消息",i),console.log(i.konva);const n=i.konva,s=t.stage.find("Text");console.log(s);const r=[];for(var l=0;l<r.length;l++)r[l].destroy();n.each(e=>{s.each(t=>{e.id==t.attrs.id?(console.log("更新节点",e),console.log(t),t.text(e.text),r.push(new Konva.Tween({node:t,duration:1,easing:Konva.Easings.ElasticEaseOut}).play())):a.push(e.id)})}),a&&console.log("以下组态id未更新",a),t.stage.batchDraw(),console.log("konva数据更新成功")})},handleCloseSub(){return j(this,null,(function*(){let e=this;"device"==e.$route.query.type&&(e.productid=e.$route.query.deviceid),e.handleMqttMsg(e.productid),e.stop_Mqtt=!0;var t=JSON.stringify({action:"stop_logger"}),o={topic:"$dg/user/konva/"+e.productid+"/report",text:t,retained:!0,qos:2};console.log("sendInfo",o),e.$refs.topoheader&&(console.log("订阅mqtt"),e.$refs.topoheader.handleCloseSub(o));const{productid:i,devaddr:a}=e.$route.query;let n={productid:i,devaddr:a};const{message:s="",data:c}=yield Object(u["_getTopo"])(n),{results:r=[]}=yield Object(m["queryProduct"])({where:{objectId:e.$route.query.productid}});e.productconfig=r[0],console.log(e.productconfig),"SUCCESS"==s&&(e.$refs["operation"]?e.$refs["operation"].productconfig=r[0]:console.log(" _this.$refs['operation']",e.$refs["operation"]),console.log(c.Stage.attrs.id),e.globalStageid=c.Stage.attrs.id,e.createKonva(c,e.globalStageid,"create"),e.paramsconfig={konva:c})}))},createKonva(e,t,o){let i;console.log("type",o);let a=this;i="create"!=o?e:e.Stage,console.log(e),console.log(i.attrs.height,i.attrs.width,"450"),i.attrs.height=a.stageConfig.height,i.attrs.width=a.stageConfig.width,console.log(i.attrs.height,i.attrs.width,"453");var n=document.querySelectorAll("._center")[0];let s=document.createElement("div");n.appendChild(s),s.setAttribute("id",t),console.log("globalStageid",t),console.log(JSON.stringify(i),"Stage"),a.stage=Konva.Node.create(i,t),a.$refs.topobase.createTopo(a.stage.toJSON(),moment(new Date).valueOf()),console.log("_this.$refs.topobase",a.$refs.topobase),console.log("data",e);var r=a.stage.find("Layer")[0];a.stage.on("click",e=>{var t=e.target;if(console.log(e,"stage node"),console.log(t,"stage target"),a.isDevice&&(t.attrs.draggable=!1,console.log("isDevice",t)),t==a.stage&&r.draw(),console.log(t.toJSON()),a.isDevice)return;if(a.setGraphNow(e.target),a.$refs["operation"].Shapeconfig=JSON.parse(t.toJSON()),!a.flag)return;console.log("类型",a.flag),console.log("this.draw",a.draw),console.log("color",a.graphColor),console.log("drawParams",a.drawParams);const o=a.graphColor,i=a.flag;console.log("params",a.drawParams);const n=a.stage.find("Group")[0],{offsetX:s,offsetY:c}=e.evt;var d=Object(l["default"])(i,s,c,o,a.drawParams);console.log("createState",d),n.add(d),r.draw(),r.batchDraw(),a.setFlag(""),a.setDraw(!1)});const d=a.stage.find("Group"),u=a.stage.find("Text");console.log(u,"Text"),!a.isDevice&&(null==u?void 0:u.length)&&u.forEach(e=>{e.on("mouseenter",(function(e){console.log(e,"Text mouseenter"),a.stage.container().style.cursor="move"})),e.on("mouseleave",(function(e){console.log(e,"Text mouseleave"),a.stage.container().style.cursor="default"})),e.on("dblclick",(function(e){var t;console.log(e,"Text dblclick"),console.log(a.stage.find("Transformer"),a.stage.find()),(null==(t=a.stage.find("Transformer"))?void 0:t.length)?a.stage.find("Transformer").destroy():console.log("_this.stage.find('Transformer')",a.stage.find("Transformer"));let o=this.getAbsolutePosition(),i=a.stage.container().getBoundingClientRect();console.log("eeeeeeeeeeeeeeeee",e);let n={x:i.left+o.x,y:i.top+o.y,color:e.target.attrs.fill,text:e.target.attrs.text},s=document.createElement("textarea");document.body.appendChild(s);let c=this.text();"双击编辑文字"===c?(s.value="",s.setAttribute("placeholder","请输入文字")):s.value=c,s.style.position="absolute",s.style.top=n.y+"px",s.style.left=n.x+"px",s.style.background="none",s.style.border="1px dashed #000",s.style.outline="none",s.style.color=n.color,s.focus(),this.setAttr("text",""),r.draw();let l=e=>{this.text(e||"双击编辑文字"),r.draw(),s&&document.body.removeChild(s)},d=e=>{13===e.keyCode&&(s.removeEventListener("blur",u),l(s.value))},u=()=>{s.removeEventListener("keydown",d),l(s.value)};s.addEventListener("keydown",d),s.addEventListener("blur",u)}))}),a.isDevice&&a.productconfig&&a.konvaClass.push("isDevice"),console.log(d,"Group"),!a.isDevice&&(null==d?void 0:d.length)&&d.forEach((function(e){e.on("dblclick",e=>{console.log(e,"Group dblclick");const t=new Konva.Transformer({borderStroke:"#000",borderStrokeWidth:1,borderDash:[5],keepRatio:!1,id:"Transformer_"+Object(c["uuid"])(6)});r.add(t),t.attachTo(e.target),r.draw(),console.log("#"+e.target.attrs.id);var o=e.target;console.log("当前图层层级",Number(o.zIndex())),a.setGraphNow(e.target),a.$refs["operation"].ShapeIndex=Number(o.zIndex()),a.$refs["operation"].ShapeOpacity=o.opacity(),a.rightrow||a.isDevice||(a.rightrow=6)}),e.on("mouseup",e=>{console.log(e,"_G mouseup"),!a.isDevice&&a.productid&&(a.headevisible=!0),document.body.style.cursor="pointer"}),e.on("mouseover",e=>{console.log(e,"_G mouseover"),document.body.style.cursor="pointer"}),e.on("mouseout",e=>{console.log(e,"_G mouseout");const t=e.target.id(),o=a.stage.find(e=>e.id===t);o.x=e.target.x(),o.y=e.target.y(),document.body.style.cursor="default"})}));var m=a.stage.find("Image");m.forEach(e=>{console.log("img node ",e);const t=new Image;t.src=e.getAttr("source");var o=e.getAttr("source")+"?"+Date.parse(new Date);console.log("img",t,"$('#konva')",$("#current1")),$("#current1").css("background-image",`url(${o})`),$("#current1").css("background-repeat","no-repeat"),$("#current1").css("background-size","100%,100%")}),!a.isDevice&&(null==d?void 0:d.length)&&d.forEach((function(e){e.on("dblclick",e=>{console.log(e,"Group dblclick");const t=new Konva.Transformer({borderStroke:"#000",borderStrokeWidth:1,borderDash:[5],keepRatio:!1,id:"Transformer_"+Object(c["uuid"])(6)});r.add(t),t.attachTo(e.target),r.draw(),console.log("#"+e.target.attrs.id);var o=e.target;console.log("当前图层层级",Number(o.zIndex())),a.setGraphNow(e.target),a.$refs["operation"].ShapeIndex=Number(o.zIndex()),a.$refs["operation"].ShapeOpacity=o.opacity(),a.rightrow||a.isDevice||(a.rightrow=6)}),e.on("mouseup",e=>{console.log(e,"Group mouseup"),!a.isDevice&&a.productid&&(a.headevisible=!0),document.body.style.cursor="pointer"}),e.on("mouseover",e=>{console.log(e,"Group mouseover"),document.body.style.cursor="pointer"}),e.on("mouseout",e=>{console.log(e,"Group mouseout");const t=e.target.id(),o=a.stage.find(e=>e.id===t);o.x=e.target.x(),o.y=e.target.y(),document.body.style.cursor="default"})})),r.draw(),r.batchDraw(),console.log("绘制完成"),this.$refs.topoheader&&this.$refs.topoheader.subscribe(a.productid)}})},F=k,T=(o("9159"),o("2877")),x=Object(T["a"])(F,i,a,!1,null,"2a7ef69a",null);t["default"]=x.exports},bd42:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"operation"},[e.Shapeconfig.attrs?t("el-tabs",{attrs:{stretch:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("div",{staticClass:"unvisible"},[t("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{display:"none"},attrs:{action:"https://jsonplaceholder.typicode.com/posts/","before-remove":e.beforeRemove,"file-list":e.fileList,limit:1,multiple:"","on-exceed":e.handleExceed,"on-preview":e.handlePreview,"on-remove":e.handleRemove}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),t("el-tab-pane",{attrs:{label:e.$translateTitle("konva.Configuration"),name:"setting"}},[e._l(e.Shapeconfig.attrs,(function(o,i,a){return t("el-form",{key:a,ref:"numberValidateForm",refInFor:!0,staticClass:"demo-ruleForm",attrs:{disabled:e.disabledForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:e.$translateTitle("konva."+i)}},[e.$lodash.isString(e.Shapeconfig.attrs[i])?t("el-input",{attrs:{disabled:e.disableKey.includes(i)},model:{value:e.Shapeconfig.attrs[i],callback:function(t){e.$set(e.Shapeconfig.attrs,i,t)},expression:"Shapeconfig.attrs[key]"}},["fill"==i?t("el-color-picker",{attrs:{slot:"append","show-alpha":"",size:"mini"},slot:"append",model:{value:e.Shapeconfig.attrs[i],callback:function(t){e.$set(e.Shapeconfig.attrs,i,t)},expression:"Shapeconfig.attrs[key]"}}):e._e()],1):e._e(),e.$lodash.isNumber(e.Shapeconfig.attrs[i])?t("el-input-number",{staticStyle:{width:"100%"},model:{value:e.Shapeconfig.attrs[i],callback:function(t){e.$set(e.Shapeconfig.attrs,i,t)},expression:"Shapeconfig.attrs[key]"}}):e._e(),e.$lodash.isBoolean(e.Shapeconfig.attrs[i])?t("el-switch",{staticStyle:{width:"100%"},attrs:{"active-text":e.$translateTitle("konva.draggable"),"inactive-text":e.$translateTitle("konva.undraggable")},model:{value:e.Shapeconfig.attrs[i],callback:function(t){e.$set(e.Shapeconfig.attrs,i,t)},expression:"Shapeconfig.attrs[key]"}}):e._e()],1)],1)})),t("div",{staticClass:"footer-panel"},[t("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){e.disabledForm=!e.disabledForm}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),t("el-button",{attrs:{type:"info"},nativeOn:{click:function(t){return e.saveKonvaitem(e.Shapeconfig)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")]),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.handleModule(e.wmxdialogVisible)}}},[e._v(" "+e._s(e.$translateTitle("product.physicalmodel"))+" ")])],1)],2),t("div",{staticClass:"TopoArom"},[t("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.wmxhandleClose,"close-on-click-modal":!1,title:e.wmxSituation+"自定义属性",top:"5vh",visible:e.wmxdialogVisible,width:"60%"},on:{"update:visible":function(t){e.wmxdialogVisible=t}}},[t("wmxdetail",{ref:"sizeForm",attrs:{"size-form1":e.sizeForm},on:{addDomain:e.addDomain,removeDomain:e.removeDomain,submitForm:e.submitForm,updataForm:e.updataForm,wmxhandleClose:e.wmxhandleClose}})],1)],1)],1):t("a-empty")],1)},a=[],n=o("aed5"),s=o("7212"),c=o("7a1d"),r=o("5880"),l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,o)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,f=(e,t)=>{for(var o in t||(t={}))p.call(t,o)&&g(e,o,t[o]);if(m)for(var o of m(t))h.call(t,o)&&g(e,o,t[o]);return e},_=(e,t)=>d(e,u(t)),b=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())}),y={name:"Operation",components:{wmxdetail:n["default"]},props:{stopMqtt:{type:Boolean,default:!1},drawerflag:{type:Boolean,default:!1},value:{type:Boolean,default:!1}},data(){return{disabledForm:!0,disableKey:["id","container","type"],ShapeIndex:0,ShapeOpacity:1,properties:[],wmxSituation:"",wmxdialogVisible:!1,disableLable:["id"],hideLable:["draggable"],ShowItem:["container"],collapseName:["1"],allunit:{},wmxData:[],showNewItem:!0,disabledModule:!1,options:[],sizeOption:[],wmxstart:1,wmxPageSize:2,isVisible:!0,showJson:!0,sizerule:{type:"int"},fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],Shapeconfig:{},productconfig:{},bachgroundurl:"",activeName:"setting"}},computed:f({},Object(r["mapGetters"])({sizeForm:"konva/sizeForm"})),watch:{Shapeconfig:{deep:!0,handler(e){this.disabledModule="Stage"==e.className}}},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:_(f({},Object(r["mapMutations"])({setSizeForm:"konva/setSizeForm"})),{removeDomain(e){var t=this.sizeForm.struct.indexOf(e);-1!==t&&this.sizeForm.struct.splice(t,1)},addDomain(){this.sizeForm.struct.push({attribute:"",attributevalue:""})},reset(e){const t={name:"",identifier:"",strategy:"20",resource:1,dis:"",dinumber:"528590",type:"int",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",unit:"",string:"",date:"String类型的UTC时间戳 (毫秒)",specs:{},round:"all",struct:[{attribute:"",attributevalue:""}],rate:1,offset:0,byteorder:"big",protocol:"normal",operatetype:"holdingRegister",originaltype:"int16",slaveid:256,collection:"%s",control:"%q",nobound:e};this.setSizeForm(t)},setZIndex(e,t){return b(this,null,(function*(){this.$emit("upconfig",e,t)}))},handleModule(e){return b(this,null,(function*(){const{thing:t={properties:[]}}=this.productconfig;let o=t.properties;this.properties=o,console.log("properties",o),console.log("Shapeconfig",this.Shapeconfig);let i={productid:this.$route.query.productid,shapeid:this.Shapeconfig.attrs.id};const{data:a}=yield Object(c["get_konva_thing"])(i),{konvathing:n,nobound:s}=a;if(console.log(n,"konvathing"),console.log(s,"nobound"),Object.values(n).length>0){this.wmxSituation="修改",console.log("物模型存在这个属性",n),console.log("this.wmxSituation",this.wmxSituation),this.reset(s);var r={};if(-1!=["float","double","int","long"].indexOf(n.dataType.type))r={name:n.name,devicetype:n.devicetype,type:n.dataType.type,endnumber:this.$objGet(n,"dataType.specs.max"),startnumber:this.$objGet(n,"dataType.specs.min"),step:this.$objGet(n,"dataType.specs.step"),unit:this.$objGet(n,"dataType.specs.unit"),precision:this.$objGet(n,"dataType.specs.precision"),dis:this.$objGet(n,"dataForm.address"),round:this.$objGet(n,"dataForm.round"),dinumber:this.$objGet(n,"dataForm.data"),rate:this.$objGet(n,"dataForm.rate"),offset:this.$objGet(n,"dataForm.offset"),order:this.$objGet(n,"dataForm.order"),protocol:this.$objGet(n,"dataForm.protocol"),operatetype:this.$objGet(n,"dataForm.operatetype"),originaltype:this.$objGet(n,"dataForm.originaltype"),iscount:this.$objGet(n,"dataForm.iscount"),countstrategy:this.$objGet(n,"dataForm.countstrategy"),countround:this.$objGet(n,"dataForm.countround"),countcollection:this.$objGet(n,"dataForm.countcollection"),slaveid:this.$objGet(n,"dataForm.slaveid"),collection:"",control:"",strategy:"",required:!0,ico:n.ico,isread:n.accessMode,isshow:n.isshow,identifier:n.identifier,editdatatype:!0},n.dataForm&&(r.collection=n.dataForm.collection,r.control=n.dataForm.control,r.strategy=n.dataForm.strategy);else if("bool"==n.dataType.type)r={name:n.name,devicetype:n.devicetype,type:n.dataType.type,true:n.dataType.specs[1],false:n.dataType.specs[0],startnumber:this.$objGet(n,"dataType.specs.min"),step:this.$objGet(n,"dataType.specs.step"),unit:this.$objGet(n,"dataType.specs.unit"),round:this.$objGet(n,"dataForm.round"),dis:this.$objGet(n,"dataForm.address"),dinumber:this.$objGet(n,"dataForm.data"),rate:this.$objGet(n,"dataForm.rate"),offset:this.$objGet(n,"dataForm.offset"),order:this.$objGet(n,"dataForm.order"),protocol:this.$objGet(n,"dataForm.protocol"),operatetype:this.$objGet(n,"dataForm.operatetype"),originaltype:this.$objGet(n,"dataForm.originaltype"),slaveid:this.$objGet(n,"dataForm.slaveid"),iscount:this.$objGet(n,"dataForm.iscount"),countstrategy:this.$objGet(n,"dataForm.countstrategy"),countround:this.$objGet(n,"dataForm.countround"),countcollection:this.$objGet(n,"dataForm.countcollection"),required:!1,ico:n.ico,isread:n.accessMode,isshow:n.isshow,identifier:n.identifier,collection:void 0==n.dataForm?"":n.dataForm.collection,control:void 0==n.dataForm?"":n.dataForm.control,strategy:void 0==n.dataForm?"":n.dataForm.strategy,editdatatype:!0};else if("image"==n.dataType.type)r={name:n.name,devicetype:n.devicetype,type:n.dataType.type,imagevalue:n.dataType.imagevalue,startnumber:this.$objGet(n,"dataType.specs.min"),step:this.$objGet(n,"dataType.specs.step"),unit:this.$objGet(n,"dataType.specs.unit"),round:this.$objGet(n,"dataForm.round"),dis:this.$objGet(n,"dataForm.address"),dinumber:this.$objGet(n,"dataForm.data"),rate:this.$objGet(n,"dataForm.rate"),offset:this.$objGet(n,"dataForm.offset"),order:this.$objGet(n,"dataForm.order"),protocol:this.$objGet(n,"dataForm.protocol"),operatetype:this.$objGet(n,"dataForm.operatetype"),originaltype:this.$objGet(n,"dataForm.originaltype"),slaveid:this.$objGet(n,"dataForm.slaveid"),iscount:this.$objGet(n,"dataForm.iscount"),countstrategy:this.$objGet(n,"dataForm.countstrategy"),countround:this.$objGet(n,"dataForm.countround"),countcollection:this.$objGet(n,"dataForm.countcollection"),required:!1,ico:n.ico,isread:n.accessMode,isshow:n.isshow,identifier:n.identifier,collection:void 0==n.dataForm?"":n.dataForm.collection,control:void 0==n.dataForm?"":n.dataForm.control,strategy:void 0==n.dataForm?"":n.dataForm.strategy,editdatatype:!0};else if("enum"==n.dataType.type){var l=[];for(const e in n.dataType.specs)l.push({attribute:e,attributevalue:n.dataType.specs[e]});r={name:n.name,devicetype:n.devicetype,type:n.dataType.type,specs:n.dataType.specs,struct:l,startnumber:this.$objGet(n,"dataType.specs.min"),step:this.$objGet(n,"dataType.specs.step"),unit:this.$objGet(n,"dataType.specs.unit"),round:this.$objGet(n,"dataForm.round"),dis:this.$objGet(n,"dataForm.address"),dinumber:this.$objGet(n,"dataForm.data"),rate:this.$objGet(n,"dataForm.rate"),offset:this.$objGet(n,"dataForm.offset"),order:this.$objGet(n,"dataForm.order"),protocol:this.$objGet(n,"dataForm.protocol"),operatetype:this.$objGet(n,"dataForm.operatetype"),originaltype:this.$objGet(n,"dataForm.originaltype"),slaveid:this.$objGet(n,"dataForm.slaveid"),iscount:this.$objGet(n,"dataForm.iscount"),countstrategy:this.$objGet(n,"dataForm.countstrategy"),countround:this.$objGet(n,"dataForm.countround"),countcollection:this.$objGet(n,"dataForm.countcollection"),required:!0,ico:n.ico,isread:n.accessMode,isshow:n.isshow,identifier:n.identifier,collection:void 0==n.dataForm?"":n.dataForm.collection,control:void 0==n.dataForm?"":n.dataForm.control,strategy:void 0==n.dataForm?"":n.dataForm.strategy,editdatatype:!0}}else"struct"==n.dataType.type?r={name:n.name,devicetype:n.devicetype,type:n.dataType.type,struct:n.dataType.specs,startnumber:this.$objGet(n,"dataType.specs.min"),step:this.$objGet(n,"dataType.specs.step"),unit:this.$objGet(n,"dataType.specs.unit"),round:this.$objGet(n,"dataForm.round"),dis:this.$objGet(n,"dataForm.address"),dinumber:this.$objGet(n,"dataForm.data"),rate:this.$objGet(n,"dataForm.rate"),offset:this.$objGet(n,"dataForm.offset"),order:this.$objGet(n,"dataForm.order"),protocol:this.$objGet(n,"dataForm.protocol"),operatetype:this.$objGet(n,"dataForm.operatetype"),originaltype:this.$objGet(n,"dataForm.originaltype"),slaveid:this.$objGet(n,"dataForm.slaveid"),iscount:this.$objGet(n,"dataForm.iscount"),countstrategy:this.$objGet(n,"dataForm.countstrategy"),countround:this.$objGet(n,"dataForm.countround"),countcollection:this.$objGet(n,"dataForm.countcollection"),required:!0,ico:n.ico,isread:n.accessMode,isshow:n.isshow,collection:void 0==n.dataForm?"":n.dataForm.collection,control:void 0==n.dataForm?"":n.dataForm.control,identifier:void 0==n.dataForm?"":n.identifier,strategy:void 0==n.dataForm?"":n.dataForm.strategy,editdatatype:!0}:"text"==n.dataType.type?r={name:n.name,devicetype:n.devicetype,type:n.dataType.type,collection:void 0==n.dataForm?"":n.dataForm.collection,control:void 0==n.dataForm?"":n.dataForm.control,string:n.dataType.size,startnumber:this.$objGet(n,"dataType.specs.min"),step:this.$objGet(n,"dataType.specs.step"),unit:this.$objGet(n,"dataType.specs.unit"),round:this.$objGet(n,"dataForm.round"),dis:this.$objGet(n,"dataForm.address"),dinumber:this.$objGet(n,"dataForm.data"),rate:this.$objGet(n,"dataForm.rate"),offset:this.$objGet(n,"dataForm.offset"),order:this.$objGet(n,"dataForm.order"),protocol:this.$objGet(n,"dataForm.protocol"),operatetype:this.$objGet(n,"dataForm.operatetype"),originaltype:this.$objGet(n,"dataForm.originaltype"),slaveid:this.$objGet(n,"dataForm.slaveid"),iscount:this.$objGet(n,"dataForm.iscount"),countstrategy:this.$objGet(n,"dataForm.countstrategy"),countround:this.$objGet(n,"dataForm.countround"),countcollection:this.$objGet(n,"dataForm.countcollection"),required:!0,ico:n.ico,isread:n.accessMode,isshow:n.isshow,identifier:n.identifier,strategy:void 0==n.dataForm?"":n.dataForm.strategy,editdatatype:!0}:"date"==n.dataType.type?r={name:n.name,devicetype:n.devicetype,type:n.dataType.type,collection:void 0==n.dataForm?"":n.dataForm.collection,control:void 0==n.dataForm?"":n.dataForm.control,strategy:void 0==n.dataForm?"":n.dataForm.strategy,startnumber:this.$objGet(n,"dataType.specs.min"),step:this.$objGet(n,"dataType.specs.step"),unit:this.$objGet(n,"dataType.specs.unit"),round:this.$objGet(n,"dataForm.round"),dis:this.$objGet(n,"dataForm.address"),order:this.$objGet(n,"dataForm.order"),dinumber:this.$objGet(n,"dataForm.data"),rate:this.$objGet(n,"dataForm.rate"),offset:this.$objGet(n,"dataForm.offset"),protocol:this.$objGet(n,"dataForm.protocol"),operatetype:this.$objGet(n,"dataForm.operatetype"),originaltype:this.$objGet(n,"dataForm.originaltype"),slaveid:this.$objGet(n,"dataForm.slaveid"),iscount:this.$objGet(n,"dataForm.iscount"),countstrategy:this.$objGet(n,"dataForm.countstrategy"),countround:this.$objGet(n,"dataForm.countround"),countcollection:this.$objGet(n,"dataForm.countcollection"),required:!0,ico:n.ico,isread:n.accessMode,isshow:n.isshow,identifier:n.identifier,editdatatype:!0}:"geopoint"==n.dataType.type&&(r={name:n.name,devicetype:n.devicetype,type:n.dataType.type,gpstype:n.dataType.gpstype,collection:void 0==n.dataForm?"":n.dataForm.collection,control:void 0==n.dataForm?"":n.dataForm.control,strategy:void 0==n.dataForm?"":n.dataForm.strategy,startnumber:this.$objGet(n,"dataType.specs.min"),step:this.$objGet(n,"dataType.specs.step"),unit:this.$objGet(n,"dataType.specs.unit"),round:this.$objGet(n,"dataForm.round"),dis:this.$objGet(n,"dataForm.address"),order:this.$objGet(n,"dataForm.order"),dinumber:this.$objGet(n,"dataForm.data"),rate:this.$objGet(n,"dataForm.rate"),offset:this.$objGet(n,"dataForm.offset"),protocol:this.$objGet(n,"dataForm.protocol"),operatetype:this.$objGet(n,"dataForm.operatetype"),originaltype:this.$objGet(n,"dataForm.originaltype"),slaveid:this.$objGet(n,"dataForm.slaveid"),iscount:this.$objGet(n,"dataForm.iscount"),countstrategy:this.$objGet(n,"dataForm.countstrategy"),countround:this.$objGet(n,"dataForm.countround"),countcollection:this.$objGet(n,"dataForm.countcollection"),required:!0,ico:n.ico,isread:n.accessMode,isshow:n.isshow,identifier:n.identifier,editdatatype:!0});r.nobound=[],this.setSizeForm(r)}else this.wmxSituation="新增",console.log("this.wmxSituation",this.wmxSituation),console.log("物模型不为空，但不存在这个属性",this.Shapeconfig),this.reset(s),this.wmxData=[],this.sizeForm.name=this.Shapeconfig.attrs.text,this.sizeForm.isdis=!0;this.wmxdialogVisible=!e}))},wmxhandleClose(){this.wmxdialogVisible=!1,this.Shapeconfig={},this.setSizeForm({}),this.$refs["sizeForm"].resource.disabled=!1,this.$dgiotBus.$emit("refresh",this.$route)},updataForm(e){console.log("子组件改变的值"),console.log(e),this.setSizeForm(e)},submitForm(e){console.log("sizeForm",e);var t={name:e.name,devicetype:e.devicetype,dataForm:{round:e.round,data:e.dinumber,address:e.dis,rate:e.rate,offset:e.offset,order:e.order,protocol:e.protocol,operatetype:e.operatetype,originaltype:e.originaltype,slaveid:e.slaveid,collection:e.collection,control:e.control,strategy:e.strategy,iscount:e.iscount,countstrategy:e.countstrategy,countround:e.countround,countcollection:e.countcollection},ico:e.ico,required:!0,accessMode:e.isread,isshow:e.isshow,identifier:e.identifier};if("float"==e.type||"double"==e.type||"int"==e.type||"long"==e.type){var o={dataType:{type:e.type.toLowerCase(),specs:{max:e.endnumber,min:e.startnumber,step:e.step,unit:""==e.unit?"":e.unit}}};Object.assign(t,o),this.showNewItem||(delete t.dataForm.operatetype,delete t.dataForm.originaltype,delete t.dataForm.slaveid)}else if("image"==e.type){o={dataType:{type:e.type.toLowerCase(),imagevalue:e.imagevalue,specs:{}}};Object.assign(t,o)}else if("bool"==e.type){o={dataType:{type:e.type.toLowerCase(),specs:{0:e.false,1:e.true}}};Object.assign(t,o)}else if("enum"==e.type){var i={};e.struct.map(e=>{var t=e["attribute"];i[t]=e["attributevalue"]});o={dataType:{type:e.type.toLowerCase(),specs:i}};Object.assign(t,o)}else if("struct"==e.type){o={dataType:{type:e.type.toLowerCase(),specs:e.struct}};Object.assign(t,o)}else if("string"==e.type){o={dataType:{type:e.type.toLowerCase(),size:e.string}};Object.assign(t,o)}else if("text"==e.type){o={dataType:{type:e.type.toLowerCase(),size:e.string,specs:{}}};Object.assign(t,o)}else if("date"==e.type){o={dataType:{type:e.type.toLowerCase()}};Object.assign(t,o)}else if("geopoint"==e.type){o={dataType:{type:e.type.toLowerCase(),gpstype:e.gpstype,specs:{}}};Object.assign(t,o)}let a={item:t,productid:this.$route.query.productid};Object(s["putThing"])(a).then(e=>{if(console.log("编辑",e),200==e.code){this.$message({showClose:!0,duration:2e3,type:"success",message:"编辑成功"});let e={identifier:t.identifier,name:t.name,productid:this.$route.query.productid,shapeid:this.Shapeconfig.attrs.id};Object(c["edit_konva_thing"])(e).then(e=>{console.log(e),this.handleCloseSub()}),this.wmxhandleClose()}else this.$message({showClose:!0,duration:2e3,type:"warning",message:"编辑失败"+e.msg})})},selectStruct(){},wmxCurrentChange(){},wmxSizeChange(){},isShowItem(e){return!this.ShowItem.includes(e)},isdisabled(e){return this.disableLable.includes(e)},isShowLable(e){return!this.hideLable.includes(e)},updataImg(e){this.$emit("upImg",e)},saveKonvaitem(e){console.log(e),this.$emit("upconfig",e)},handleCloseSub(){this.$emit("handleCloseSub")},clearImg(){this.isVisible=!this.isVisible,this.$emit("clearImg",this.isVisible)},upload(){this.$refs["upload"].$children[0].$refs.input.click()},handleRemove(e,t){console.log(e,t)},handlePreview(e){console.log(e)},handleExceed(e,t){this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${e.length} 个文件，共选择了 ${e.length+t.length} 个文件`)},beforeRemove(e,t){return this.$confirm(`确定移除 ${e.name}？`)}})},v=y,w=(o("c33d"),o("2877")),$=Object(w["a"])(v,i,a,!1,null,"debf00e4",null);t["default"]=$.exports},bf14:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"thing"},[t("el-dialog",{attrs:{"append-to-body":"",fullscreen:"",title:e.$translateTitle("topo.topo")+e.$translateTitle("topo.thing"),visible:e.thingDialog},on:{"update:visible":function(t){e.thingDialog=t}}},[t("dgiot-wmx",{ref:"sizeForm",attrs:{"size-form1":e.sizeForm},on:{addDas:e.addDas,addDomain:e.addDomain,removeDas:e.removeDas,removeDomain:e.removeDomain,submitForm:e.submitForm,updataForm:e.updataForm,wmxhandleClose:e.wmxhandleClose}})],1)],1)},a=[],n=o("aed5"),s=o("7212"),c=o("7a1d"),r=o("5880"),l=o("8ba7"),d=Object.defineProperty,u=Object.defineProperties,m=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,o)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,b=(e,t)=>{for(var o in t||(t={}))h.call(t,o)&&f(e,o,t[o]);if(p)for(var o of p(t))g.call(t,o)&&f(e,o,t[o]);return e},y=(e,t)=>u(e,m(t)),v=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())}),w={name:"Thing",components:{"dgiot-wmx":n["default"]},data(){return{thingType:"post",productconfig:{},thingDialog:!1,infoData:"Thing",thingArgs:{},text:"text",shapeid:"",viewInfo:{},das:[],daslist:[],toponobound:[],topokonvathing:{}}},computed:b({},Object(r["mapGetters"])({sizeForm:"konva/sizeForm"})),mounted(){this.$route.query.viewid&&this.view(this.$route.query.viewid),this.$dgiotBus.$off("busUpdata"),this.$dgiotBus.$on("busUpdata",()=>{}),this.$dgiotBus.$off("thingType"),this.$dgiotBus.$on("thingType",e=>{console.log(e,"type things"),this.thingType=e}),this.$baseEventBus.$off(this.$dgiotBus.topicKey("dgiot_thing","dgiotThing")),this.$baseEventBus.$on(this.$dgiotBus.topicKey("dgiot_thing","dgiotThing"),e=>{console.log("aaaaa",e),e&&"bind_topo"==e.type&&this.bindTopo(e)})},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:y(b({},Object(r["mapMutations"])({setSizeForm:"konva/setSizeForm"})),{view(e){return v(this,null,(function*(){const{data:t={}}=yield Object(l["getView"])(e);this.viewInfo=t}))},wmxhandleClose(){this.wmxdialogVisible=!1,this.setSizeForm({}),this.$refs["sizeForm"].resource.disabled=!1,this.$dgiotBus.$emit("refresh",this.$route)},updataForm(e){console.log("子组件改变的值"),console.log(e),this.setSizeForm(e)},addDas(){console.log(this.sizeForm),this.sizeForm.daslist.push({addr:""})},removeDas(e){var t=this.sizeForm.daslist.indexOf(e);-1!==t&&this.sizeForm.daslist.splice(t,1)},submitForm(e){console.log("sizeForm",e),console.log("thingType",this.thingType),console.log("toponobound",this.toponobound),console.log("topokonvathing",this.topokonvathing),console.info("如果type是put 走put，否则post"),1==_.isEmpty(this.topokonvathing)?this.thingType="post":this.thingType="put",this.toponobound.forEach(t=>{console.log(e.identifier,t.identifier,"identifier"),e.identifier==t.identifier&&(this.thingType="put")}),console.log("thingType",this.thingType);let t={item:e,productid:this.$route.query.productid};"post"==this.thingType?Object(s["postThing"])(t).then(t=>{if(console.log("编辑",t),200==t.code){this.$message({type:"success",message:"编辑成功"});let t={identifier:e.identifier,name:e.name,productid:this.$route.query.productid,shapeid:this.shapeid};Object(c["edit_konva_thing"])(t).then(e=>{console.log(e)}),this.wmxhandleClose()}else this.$message({showClose:!0,duration:2e3,type:"warning",message:"编辑失败"+t.msg})}):Object(s["putThing"])(t).then(t=>{if(console.log("编辑",t),200==t.code){this.$message({showClose:!0,duration:2e3,type:"success",message:"编辑成功"});let t={identifier:e.identifier,name:e.name,productid:this.$route.query.productid,shapeid:this.shapeid};Object(c["edit_konva_thing"])(t).then(e=>{console.log(e)}),this.wmxhandleClose()}else this.$message({showClose:!0,duration:2e3,type:"warning",message:"编辑失败"+t.msg})})},removeDomain(e){var t=this.sizeForm.struct.indexOf(e);-1!==t&&this.sizeForm.struct.splice(t,1)},addDomain(){this.sizeForm.struct.push({attribute:"",attributevalue:""})},updataTopo(){return v(this,null,(function*(){const e=this.$baseLoading();localStorage.setItem("konvaStale",canvas.stage.toJSON());yield Object(l["putView"])(this.$route.query.viewid,{data:_.merge({konva:{Stage:JSON.parse(canvas.stage.toJSON())}},this.viewInfo)});e.close(),this.$baseMessage(this.$translateTitle("user.update completed"),"success","dgiot-hey-message-success")}))},bindTopo(e){return v(this,null,(function*(){const t=this.$baseLoading();this.thingArgs={args:e,id:e.id,productid:e.id.split("_")[0],text:e.text},console.log("args",e);try{let n={productid:e.id.split("_")[0],shapeid:e.id.slice(11).replace("_text","")};this.shapeid=e.id;const{data:s,code:r=200,message:l="",error:d=""}=yield Object(c["get_konva_thing"])(n);if(204==r||d)return this.$baseMessage(l||d,"error",!1,"dgiot-hey-message-error"),void t.close();const{konvathing:u={},nobound:m=[]}=s;if(console.log(u,"konvathing"),console.log(m,"nobound"),this.toponobound=m,this.topokonvathing=u,Object.values(u).length>0){console.log("物模型存在这个属性",u),this.reset(m);var o={},i=[];if(u.dataType.das.forEach(e=>{i.push({addr:e})}),-1!=["float","double","int","long"].indexOf(u.dataType.type))o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,endnumber:this.$objGet(u,"dataType.specs.max"),startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),precision:this.$objGet(u,"dataType.specs.precision"),dis:this.$objGet(u,"dataForm.address"),round:this.$objGet(u,"dataForm.round"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),slaveid:this.$objGet(u,"dataForm.slaveid"),collection:"",control:"",strategy:"",required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,isstorage:u.isstorage,isaccumulate:u.isaccumulate,identifier:u.identifier,editdatatype:!0},u.dataForm&&(o.collection=u.dataForm.collection,o.control=u.dataForm.control,o.strategy=u.dataForm.strategy);else if("bool"==u.dataType.type)o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,true:u.dataType.specs[1],false:u.dataType.specs[0],startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!1,ico:u.ico,isread:u.accessMode,isshow:u.isshow,isstorage:u.isstorage,isaccumulate:u.isaccumulate,identifier:u.identifier,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,strategy:void 0==u.dataForm?"":u.dataForm.strategy,editdatatype:!0};else if("image"==u.dataType.type)o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,imagevalue:u.dataType.imagevalue,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!1,ico:u.ico,isread:u.accessMode,isshow:u.isshow,isstorage:u.isstorage,isaccumulate:u.isaccumulate,identifier:u.identifier,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,strategy:void 0==u.dataForm?"":u.dataForm.strategy,editdatatype:!0};else if("enum"==u.dataType.type){var a=[];for(const e in u.dataType.specs)a.push({attribute:e,attributevalue:u.dataType.specs[e]});o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,specs:u.dataType.specs,struct:a,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,isstorage:u.isstorage,isaccumulate:u.isaccumulate,identifier:u.identifier,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,strategy:void 0==u.dataForm?"":u.dataForm.strategy,editdatatype:!0}}else"struct"==u.dataType.type?o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,struct:u.dataType.specs,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,isstorage:u.isstorage,isaccumulate:u.isaccumulate,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,identifier:void 0==u.dataForm?"":u.identifier,strategy:void 0==u.dataForm?"":u.dataForm.strategy,editdatatype:!0}:"text"==u.dataType.type?o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,string:u.dataType.size,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),order:this.$objGet(u,"dataForm.order"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,isstorage:u.isstorage,isaccumulate:u.isaccumulate,identifier:u.identifier,strategy:void 0==u.dataForm?"":u.dataForm.strategy,editdatatype:!0}:"date"==u.dataType.type?o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,strategy:void 0==u.dataForm?"":u.dataForm.strategy,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),order:this.$objGet(u,"dataForm.order"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,isaccumulate:u.isaccumulate,isstorage:u.isstorage,identifier:u.identifier,editdatatype:!0}:"geopoint"==u.dataType.type&&(o={name:u.name,devicetype:u.devicetype,type:u.dataType.type,daslist:i,gpstype:u.dataType.gpstype,collection:void 0==u.dataForm?"":u.dataForm.collection,control:void 0==u.dataForm?"":u.dataForm.control,strategy:void 0==u.dataForm?"":u.dataForm.strategy,startnumber:this.$objGet(u,"dataType.specs.min"),step:this.$objGet(u,"dataType.specs.step"),unit:this.$objGet(u,"dataType.specs.unit"),round:this.$objGet(u,"dataForm.round"),dis:this.$objGet(u,"dataForm.address"),order:this.$objGet(u,"dataForm.order"),dinumber:this.$objGet(u,"dataForm.data"),rate:this.$objGet(u,"dataForm.rate"),offset:this.$objGet(u,"dataForm.offset"),protocol:this.$objGet(u,"dataForm.protocol"),operatetype:this.$objGet(u,"dataForm.operatetype"),originaltype:this.$objGet(u,"dataForm.originaltype"),slaveid:this.$objGet(u,"dataForm.slaveid"),iscount:this.$objGet(u,"dataForm.iscount"),countstrategy:this.$objGet(u,"dataForm.countstrategy"),countround:this.$objGet(u,"dataForm.countround"),countcollection:this.$objGet(u,"dataForm.countcollection"),required:!0,ico:u.ico,isread:u.accessMode,isshow:u.isshow,isaccumulate:u.isaccumulate,isstorage:u.isstorage,identifier:u.identifier,editdatatype:!0});o.nobound=[],o.protocol=u.dataForm.protocol,this.setSizeForm(o),this.$nextTick(()=>v(this,null,(function*(){yield this.$refs["sizeForm"].queryResource(),yield this.$refs["sizeForm"].queryProtocol(),this.$refs["sizeForm"].resource.value=u.dataForm.protocol,this.$refs["sizeForm"].resource.disabled=!!u.dataForm.protocol.length,this.$refs["sizeForm"].resource.arrlist=u.dataSource,this.$nextTick(()=>{this.$refs["sizeForm"].resource.data.forEach((e,t)=>{if(console.info(e,"物模型回显事件"),this.$refs["sizeForm"].resource.value===e.cType){for(var o in console.info(e,"物模型回显事件"),e.arr.forEach(e=>{e.allowCreate&&this.$refs["sizeForm"].dynamicTable(e,"回显",u.dataSource[e.showname])}),console.info(u.dataSource,"rowData.dataSource"),this.$refs["sizeForm"].resource.addchannel=u.dataSource,u.dataSource)for(var i in e.obj)o===i&&(e.obj[o]=rowData.dataSource[i]);console.info(e.obj,"set resource.obj")}this.$refs["sizeForm"].resource.changeData=u.dataSource,e.cType==u.dataForm.protocol&&console.log(e,"success")})}),console.log("refs sizeForm",this.$refs["sizeForm"])})))}else this.reset(m),this.wmxData=[],this.sizeForm.name=e.text,this.sizeForm.isdis=!0;this.thingDialog=!0,t.close()}catch(n){t.close(),console.log(n)}}))},reset(e){const t={name:"",identifier:"",strategy:"20",resource:1,dis:"0X10",dinumber:"528590",type:"int",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",isshow:!1,isstorage:!0,isaccumulate:!1,unit:"",string:"",date:"String类型的UTC时间戳 (毫秒)",specs:{},precision:3,das:[],daslist:[],round:"all",struct:[{attribute:"",attributevalue:""}],rate:1,offset:0,order:0,byteorder:"big",protocol:"normal",operatetype:"holdingRegister",originaltype:"int16",slaveid:256,collection:"%s",control:"%q",nobound:e,editdatatype:!1,iscount:"0",countstrategy:20,countround:"all",countcollection:"%s"};this.setSizeForm(t)}})},$=w,j=o("2877"),k=Object(j["a"])($,i,a,!1,null,null,null);t["default"]=k.exports},c23b:function(e,t,o){e.exports=o.p+"static/img/image_black_24dp.60931666.svg"},c250:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"TopoEvidence"},[t("el-dialog",{attrs:{title:e.$translateTitle("topo.topo")+e.$translateTitle("topo.thing"),visible:e.evidenceDialog,"append-to-body":"",top:"5vh"},on:{"update:visible":function(t){e.evidenceDialog=t}}},[e.evidence.id?t("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("i",{staticClass:"material-icons"},[e._v(" "+e._s(e.evidence.node.attrs.icon)+" ")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[e._v(" "+e._s(e.evidence.id?e.evidence.id.split("_")[0]:"")+" ")])],1),t("div",[e._v(" 类型的图元处理逻辑 "),t("br"),e._v(" 对应数据 "+e._s(e.evidence.evidenceList)+" "),"timeline"===e.evidence.node.attrs.icon?t("div",[t("dgiotChart",{ref:"charts",attrs:{"after-config":e.afterConfig,data:e.chartData,"data-zoom":e.chartDataZoom,extend:e.chartExtend,loading:e.loading,"set-option-opts":!1,settings:e.chartSettings,toolbox:e.toolbox,type:"line"}})],1):"live_tv"===e.evidence.node.attrs.icon||"videocam_black"===e.evidence.node.attrs.icon||"volume_mute"===e.evidence.node.attrs.icon?t("div"):"image"===e.evidence.node.attrs.icon?t("div",[t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{"preview-src-list":e.srcList,src:e.url}})],1):"folder_black"===e.evidence.node.attrs.icon?t("div"):t("div",[e._v(" 无该类型取证类型 "+e._s(e.evidence)+" ")])])]):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.evidenceDialog=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.evidenceDialog=!1}}},[e._v(" 确 定 ")])],1)],1),t("div",{staticClass:"TopoEvidence-content"},e._l(e.materialIcons,(function(o,i){return t("div",{key:i,staticClass:"TopoEvidence-content-icons"},[t("i",{directives:[{name:"dragBox",rawName:"v-dragBox"}],staticClass:"material-icons",attrs:{draggable:""},on:{click:function(t){return e.evidenceHandle(o,i)}}},[e._v(" "+e._s(o.icon)+" "),t("br"),t("el-link",{attrs:{underline:!1}},[e._v(e._s(o.text))])],1)])})),0)],1)},a=[],n=o("5880"),s=Object.defineProperty,c=Object.defineProperties,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,o)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))d.call(t,o)&&m(e,o,t[o]);if(l)for(var o of l(t))u.call(t,o)&&m(e,o,t[o]);return e},h=(e,t)=>c(e,r(t)),g=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())}),f={name:"TopoEvidence",components:{},directives:{dragBox:function(e){let t=e;t.onclick=e=>{},t.onmousedown=e=>{let o=e.clientX-t.offsetLeft,i=e.clientY-t.offsetTop;t.onmousemove=e=>{let a=e.clientX-o,n=e.clientY-i;t.style.left=a+"px",t.style.top=n+"px"},t.onmouseup=e=>{}}}},data(){return{url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",srcList:["https://fuss10.elemecdn.com/8/27/f01c15bb73e1ef3793e64e6b7bbccjpeg.jpeg","https://fuss10.elemecdn.com/1/8e/aeffeb4de74e2fde4bd74fc7b4486jpeg.jpeg"],loading:!1,evidence:{},chartSettings:{},chartExtend:{series:{barMaxWidth:35},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],left:"9%",bottom:-5,start:10,end:90}],grid:{right:40}},dataEmpty:!0,chartDataZoom:[{type:"slider"}],chartData:{columns:["日期","销售额"],rows:[{"日期":"1月1日","销售额":123},{"日期":"1月2日","销售额":1223},{"日期":"1月3日","销售额":2123},{"日期":"1月4日","销售额":4123},{"日期":"1月5日","销售额":3123},{"日期":"1月6日","销售额":7123}]},toolbox:{orient:"vertical",right:-5,feature:{dataZoom:{yAxisIndex:"none"},magicType:{type:["line","bar","histogram","pie","ring","waterfall","funnel","radar","heatmap","scatter","candle","stack"]},dataView:{show:!0,readOnly:!1},saveAsImage:{show:!0},restore:{show:!0}}},thingData:[],evidenceDialog:!1,coordinate:{client:{},elePosition:{}},materialIcons:[{icon:"videocam_black",type:"video",text:"视频",path:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"},{icon:"volume_mute",type:"audio",text:"音频",path:"M7 9v6h4l5 5V4l-5 5H7z"},{icon:"image",type:"image",text:"图片",path:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},{icon:"folder_black",type:"file",text:"文件",path:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"}]}},mounted(){this.$dgiotBus.$on(this.$dgiotBus.topicKey("dgiot_evidence","dgiotEvidence"),e=>{this.dgiotEvidence(e)})},methods:h(p({},Object(n["mapMutations"])({createdEvidence:"topo/createdEvidence"})),{afterConfig(e){return e.tooltip.showDelay=500,e},dgiotEvidence(e){return g(this,null,(function*(){this.evidenceDialog=!0,this.evidence=e}))},evidenceHandle(e,t){this.createdEvidence(_.merge(e,{index:t,fill:"orange",productid:this.$route.query.productid}))}})},b=f,y=(o("9d14"),o("8c6c"),o("2877")),v=Object(y["a"])(b,i,a,!1,null,"f83cad10",null);t["default"]=v.exports},c25c:function(e){e.exports=JSON.parse('["1/0.png","1/1.png","1/10.jpg","1/11.png","1/12.png","1/13.png","1/14.png","1/15.png","1/16.png","1/17.png","1/18.png","1/19.png","1/2.jpg","1/20.png","1/3.jpg","1/4.png","1/5.png","1/6.png","1/7.png","1/8.png","1/9.jpg"]')},c33d:function(e,t,o){"use strict";o("e76a")},ca4b:function(e,t,o){e.exports=o.p+"static/img/videocam_black_24dp.7834d8f5.svg"},cade:function(e,t,o){"use strict";o("acc5")},cd44:function(e,t,o){},d071:function(e,t,o){},d330:function(e,t,o){"use strict";o.r(t);var i=o("5880"),a=o("1285"),n=o("c008"),s=o("8ba7"),c=o("b8fa"),r=o("7365"),l=Object.defineProperty,d=Object.defineProperties,u=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,o)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,f=(e,t)=>{for(var o in t||(t={}))p.call(t,o)&&g(e,o,t[o]);if(m)for(var o of m(t))h.call(t,o)&&g(e,o,t[o]);return e},b=(e,t)=>d(e,u(t)),y=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())});const v=window["vue-aliplayer-v2"].default;t["default"]={name:"Index",components:{"vue-aliplayer-v2":v},data(){var e;return{badgePath:null!=(e=r["default"].info.Path)?e:[],options:{autoplay:!1,width:"220px",height:"180px",margin:"0 auto"},badge:{Unreviewed:[],Approved:[],notapproved:[]},taskType:"review",nowItem:{},types:{video:["video","videocam_black"],audio:["audio","volume_mute"],image:["image","image"],file:["file","archive"]},evidences:[],timer:new Date,evidenceid:"",ukey:"",auditDialog:!1,auditList:[],timeout:null,queryPayload:{excludeKeys:"data,basedata,content",include:"",order:"-createdAt",limit:10,skip:0,count:"objectId"},paginations:{layout:"total, sizes"},taskid:this.$route.query.taskid||"",suite:this.$route.query.suite&&this.$route.query.suite>=0?this.$route.query.suite:0,evidence:[],evidenceList:[],evidenceDialog:!1,task:{name:"",profile:{message:""}},asideShow:!0,loading:!1}},computed:f({scrollerHeight:function(){return"280px"}},Object(i["mapGetters"])({role:"acl/role"})),created(){this.setTreeFlag(!1)},mounted(){this.$baseEventBus.$off(this.$dgiotBus.topicKey("dgiot_evidence","dgiotEvidence")),this.$baseEventBus.$on(this.$dgiotBus.topicKey("dgiot_evidence","dgiotEvidence"),e=>{this.evidenceList=e,this.queryevidences()}),this.taskid&&(this.queryTask(this.taskid),this.queryEvidence(this.taskid),this.auditQuery(0,"init"))},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},watch:{},methods:b(f({},Object(i["mapActions"])({deleteTopo:"topo/deleteTopo",initKonva:"topo/initKonva",setTreeFlag:"settings/setTreeFlag",createdEvidence:"topo/createdEvidence"})),{clearKonvaText(){r["default"].layer.find("Text").forEach(e=>{0!=e.attrs.id.indexOf("_evidence_delete_text")&&(e.remove(),e.destroy())})},getNumberEvidence(e){return y(this,null,(function*(){this.clearKonvaText(),r["default"].info.badge=[];let t={path:[],batch:[]};e.forEach(e=>{t.batch.push({body:{order:"-createdAt",skip:0,count:"objectId",where:{reportId:this.nowItem.objectId,"original.controlid":e.attrs.id}},method:"GET",evidence:e.attrs.icon,path:"/classes/Evidence"}),t.path.push(e)});try{const e=yield this.$shuwa_batch({requests:t.batch});t.path.forEach((o,i)=>{var a;const n=new Konva.Text({id:t.path[i].attrs.x+"_evidence_delete_text",x:t.path[i].attrs.x,y:"volume_mute"===t.path[i].attrs.icon?t.path[i].attrs.y:t.path[i].attrs.y-13,text:null!=(a=e[i].success.count)?a:0,fontSize:24,fontFamily:"Calibri",fill:"orange"});r["default"].info.badge.push(n),r["default"].layer.add(n)})}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}}))},paginationQuery(e){return y(this,null,(function*(){this.queryPayload=e}))},clouseDraw(){try{this.evidenceDialog=!1,this.auditDialog=!1}catch(e){console.log(e),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+e,"error","dgiot-hey-message-error")}},saveEvidences(e,t,o){return y(this,null,(function*(){console.log(e,t,o);try{const t=this.$baseColorfullLoading(),i={original:o.original},a=yield Object(n["putEvidence"])(e,i);console.log(a),this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),t.close()}catch(i){console.log(i),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+i,"error","dgiot-hey-message-error")}}))},deleteFile(e,t,o){return y(this,null,(function*(){o.splice(t,1);try{const t=this.$baseColorfullLoading();yield Object(n["delEvidence"])(e);this.getNumberEvidence(this.badgePath),this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),t.close()}catch(i){console.log(i),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+i,"error","dgiot-hey-message-error")}}))},changeItem(e){return y(this,null,(function*(){try{const t=this.$baseColorfullLoading(),o={original:_.merge(e.original,{status:e.original.status,message:e.original.message})},i=yield Object(n["putEvidence"])(e.objectId,o);console.log(i),this.auditQuery(0,"init"),this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),t.close()}catch(t){console.log(t),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+t,"error","dgiot-hey-message-error")}}))},doUpload(e,t){return y(this,null,(function*(){this.timer=new Date,this.evidenceid=md5("Evidence"+this.ukey+Math.round(this.timer)).substring(0,10);const o=e.target.files[0],i=o.name.substring(o.name.lastIndexOf("."));try{const e={auth_token:Cookies.get("dgiot_auth_token"),scene:"evidence",code:"",path:"dgiot_file/evidence/"+t,output:"json",submit:"upload",file:o,filename:`${this.evidenceid}${i}`};console.warn("Evidence",e);var a=new FormData;for(let t in e)a.append(t,e[t]);const{NODE_ENV:n="development"}=Object({NODE_ENV:"production",VUE_APP_TITLE:"物联网开发平台",VUE_APP_AUTHOR:"h7ml",VUE_APP_UPDATE_TIME:"2022年07月01日22时26分03秒",VUE_APP_VERSION:"4.5.4",VUE_APP_Keywords:"一站式物联网PaaS平台|物联网应用服务",VUE_APP_Description:"提供物联网垂直领域应用使能平台及解决方案",VUE_APP_URL:"http://127.0.0.1:5080",VUE_APP_CDN_URL:"/dgiot_dashboard/public",BASE_URL:""}),s="development"==n?"http://127.0.0.1:5080/upload":"upload",{data:r}=yield Object(c["uppyUpload"])(s,a);(null==r?void 0:r.md5)&&this.depositEvidence(r);const l=this.$baseColorfullLoading();this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),l.close()}catch(n){console.log(n),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+n,"error","dgiot-hey-message-error")}}))},utc2beijing(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},depositEvidence(e){return y(this,null,(function*(){try{const t=this.$baseColorfullLoading(),o={objectId:this.evidenceid,ukey:this.ukey,timestamp:Math.round(this.timer),md5:e.md5,original:{taskid:this.taskid,controlid:this.evidenceList.node.attrs.id,path:e.path,type:this.evidenceList.node.attrs.type}};t.close();yield Object(n["postEvidence"])(this.nowItem.objectId,o);this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),this.getNumberEvidence(this.badgePath),t.close()}catch(t){console.log(t),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+t,"error","dgiot-hey-message-error")}this.queryevidences()}))},getUkey(e){return y(this,null,(function*(){var t;this.ukey="";try{const o={limit:1,order:"-createdAt",skip:0,keys:"devaddr",where:{parentId:e,product:"3f95880e09"}},i=this.$baseColorfullLoading(),{results:n=[]}=yield Object(a["queryDevice"])(o);(null==(t=null==n?void 0:n[0])?void 0:t.devaddr)?(this.ukey=n[0].devaddr,console.info("-----------------this.ukey",this.ukey)):this.$baseMessage(this.$translateTitle("cloudTest.There is no uKey for this product, please contact the administrator"),"error","dgiot-hey-message-error"),i.close()}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}}))},evidenceClick(e){return y(this,null,(function*(){this.evidences=[];try{const t=this.$baseColorfullLoading();(null==e?void 0:e.length)&&e.forEach(e=>{e.original.path="/dgiot_file"+e.original.path.split("/dgiot_file")[1]}),this.evidences=e,this.evidenceDialog=!0,t.close()}catch(t){console.log(t),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+t,"error","dgiot-hey-message-error")}}))},queryevidences(){return y(this,null,(function*(){this.evidences=[];try{const e=this.$baseColorfullLoading(),t={order:"-createdAt",skip:0,where:{reportId:this.nowItem.objectId,"original.controlid":this.evidenceList.node.attrs.id}},{results:o=[]}=yield Object(n["queryEvidence"])(t);(null==o?void 0:o.length)&&_.filter(o,(function(e){return e.original.path="/dgiot_file"+e.original.path.split("/dgiot_file")[1],"avgs"!==e.original.type})),this.evidences=o,this.evidenceDialog=!0,this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),e.close()}catch(e){console.log(e),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+e,"error","dgiot-hey-message-error")}}))},headerTask(e,t){return y(this,null,(function*(){var o,i,a,n;try{const s=this.$baseColorfullLoading();console.log(e,t);const c=JSON.parse(JSON.stringify(this.$route.query));c.taskid=e.objectId,c.suite=1,c.state="preview",c.message=null!=(i=null==(o=null==e?void 0:e.profile)?void 0:o.message)?i:"",c.back=null!=(n=null==(a=null==e?void 0:e.profile)?void 0:a.step)?n:"",c.step=-1==e.profile.step?1:e.profile.step,this.$router.push({path:this.$route.path,query:c}),s.close(),this.queryTask(c.taskid),this.queryEvidence(c.taskid)}catch(s){console.log(s),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+s,"error","dgiot-hey-message-error")}}))},auditQuery(e,t){return y(this,null,(function*(){this.taskType=t,this.badge={Unreviewed:[],Approved:[],notapproved:[]};try{const t={order:"-createdAt",skip:0,where:{"original.taskid":this.taskid,reportId:{$ne:this.taskid}}};1==e&&(this.auditDialog=!0);const{results:o}=yield Object(n["queryEvidence"])(t);this.auditList=_.filter(o,(function(e){return"avgs"!==e.original.type})),this.auditList.forEach(e=>{"未审核"==e.original.status?this.badge.Unreviewed.push(e):"通过审核"==e.original.status?this.badge.Approved.push(e):this.badge.notapproved.push(e)})}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}}))},queryEvidence(e){return y(this,null,(function*(){var t;try{const t=this.$baseColorfullLoading(),o={order:"title",skip:0,where:{type:"topo",class:"Device",key:e}},{results:i=[]}=yield Object(s["queryView"])(o);i.forEach(e=>{e.type="info"}),this.evidence=i,this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),t.close()}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}(null==(t=this.evidence)?void 0:t.length)&&(this.suite<this.evidence.length||(this.suite=0),this.activeBtn(this.evidence[this.suite],this.suite))}))},notapproved(e,t){return y(this,null,(function*(){if(this.badge.Unreviewed.length===this.auditList)return this.$baseMessage("当前任务证据没有被审核","warning","dgiot-hey-message-warning"),!1;try{const o=this.$baseColorfullLoading(),i={profile:_.merge(e.profile,{message:e.profile.message,step:t,endtime:moment(new Date).format("x")})};yield Object(a["putDevice"])(e.objectId,i);this.auditDialog=!1,this.$router.push({path:"/cloudTest/review"}),this.$baseMessage(this.$translateTitle("alert.Data request successfully"),"success","dgiot-hey-message-success"),o.close()}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}}))},finishEvidence(e,t){return y(this,null,(function*(){this.$baseConfirm(this.$translateTitle("cloudTest.Please confirm that all review items have been completed"),null,()=>y(this,null,(function*(){var o;try{if(!(null==(o=this.auditList)?void 0:o.length))return void this.$baseMessage("未提交任何证据","error","dgiot-hey-message-error");{const o=this.$baseColorfullLoading(),i={profile:_.merge(e.profile,{step:t})};yield Object(n["generatereport"])(e.objectId);yield Object(a["putDevice"])(e.objectId,i);this.$router.push({path:"/cloudTest/Task"}),o.close()}}catch(i){console.log(i),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+i,"error","dgiot-hey-message-error")}})))}))},queryTask(e){return y(this,null,(function*(){var t;try{const o=yield Object(a["getDevice"])(e);o?(this.task=_.merge({profile:{message:""}},o),(null==(t=null==o?void 0:o.parentId)?void 0:t.objectId)&&(yield this.getUkey(o.parentId.objectId))):this.task={name:"111",profile:{message:""}}}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}}))},activeBtn(e,t){return y(this,null,(function*(){this.nowItem=e;const o=JSON.parse(JSON.stringify(this.$route.query));o.suite=t,this.$router.push({path:this.$route.path,query:o}),this.loading=!0,this.evidence.forEach(e=>{e.type="info"}),e.type="success";const{konva:i}=e.data;r["default"].info.badge=[],yield this.initKonva({data:i.Stage,id:"konva"}),this.clearKonvaText(),yield setTimeout(()=>{var e;this.badgePath=[],r["default"].info.Path=[],this.loading=!1;const t={icon:"timeline",type:"delete",path:"M23,8c0,1.1-0.9,2-2,2c-0.18,0-0.35-0.02-0.51-0.07l-3.56,3.55C16.98,13.64,17,13.82,17,14c0,1.1-0.9,2-2,2s-2-0.9-2-2 c0-0.18,0.02-0.36,0.07-0.52l-2.55-2.55C10.36,10.98,10.18,11,10,11s-0.36-0.02-0.52-0.07l-4.55,4.56C4.98,15.65,5,15.82,5,16 c0,1.1-0.9,2-2,2s-2-0.9-2-2s0.9-2,2-2c0.18,0,0.35,0.02,0.51,0.07l4.56-4.55C8.02,9.36,8,9.18,8,9c0-1.1,0.9-2,2-2s2,0.9,2,2 c0,0.18-0.02,0.36-0.07,0.52l2.55,2.55C14.64,12.02,14.82,12,15,12s0.36,0.02,0.52,0.07l3.55-3.56C19.02,8.35,19,8.18,19,8 c0-1.1,0.9-2,2-2S23,6.9,23,8z"};this.createdEvidence(_.merge(t,{index:7,fill:"orange",productid:this.$route.query.taskid})),this.deleteTopo(window.deletePath),this.badgePath=null!=(e=_.filter(r["default"].info.Path,(function(e){return"timeline"!==e.attrs.icon})))?e:[],this.getNumberEvidence(this.badgePath)},1e3)}))}})}},d74f:function(e,t,o){"use strict";o("8815")},d979:function(e,t,o){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},e043:function(e){e.exports=JSON.parse('{"id":"2759556","name":"dgiot_topo","font_family":"dgiot","css_prefix_text":"dgiot-","description":"","glyphs":[{"icon_id":"14445240","name":"编辑修改","font_class":"bianjixiugai","unicode":"e6d0","unicode_decimal":59088},{"icon_id":"18211366","name":"电影","font_class":"dianying","unicode":"e7e2","unicode_decimal":59362},{"icon_id":"21497146","name":"权益中心","font_class":"quanyizhongxinbeifen","unicode":"e619","unicode_decimal":58905},{"icon_id":"14445241","name":"设置","font_class":"shezhi","unicode":"e6d1","unicode_decimal":59089},{"icon_id":"18211367","name":"会员","font_class":"huiyuan","unicode":"e7e3","unicode_decimal":59363},{"icon_id":"21497147","name":"门店","font_class":"mendian","unicode":"e61a","unicode_decimal":58906},{"icon_id":"14445242","name":"首页","font_class":"shouye","unicode":"e6d2","unicode_decimal":59090},{"icon_id":"18211368","name":"电影2","font_class":"dianying2","unicode":"e7e4","unicode_decimal":59364},{"icon_id":"23217888","name":"车身","font_class":"cheshen","unicode":"e61b","unicode_decimal":58907},{"icon_id":"14445243","name":"禁用","font_class":"jinyong","unicode":"e6d3","unicode_decimal":59091},{"icon_id":"18211369","name":"关机","font_class":"guanji","unicode":"e7e5","unicode_decimal":59365},{"icon_id":"23217889","name":"冲压","font_class":"chongya","unicode":"e61c","unicode_decimal":58908},{"icon_id":"14445244","name":"标签","font_class":"biaoqian","unicode":"e6d4","unicode_decimal":59092},{"icon_id":"18211370","name":"减少","font_class":"jianshao","unicode":"e7e6","unicode_decimal":59366},{"icon_id":"23217890","name":"标准","font_class":"biaozhun","unicode":"e61d","unicode_decimal":58909},{"icon_id":"14445245","name":"关联","font_class":"guanlian","unicode":"e6d5","unicode_decimal":59093},{"icon_id":"18211371","name":"后台管理","font_class":"houtaiguanli","unicode":"e7e7","unicode_decimal":59367},{"icon_id":"23217891","name":"分散调度","font_class":"fensantiaodu","unicode":"e61e","unicode_decimal":58910},{"icon_id":"14445246","name":"同步NC","font_class":"tongbuNC","unicode":"e6d6","unicode_decimal":59094},{"icon_id":"18211372","name":"动态","font_class":"dongtai","unicode":"e7e8","unicode_decimal":59368},{"icon_id":"23217892","name":"产量占比","font_class":"chanliangzhanbi","unicode":"e61f","unicode_decimal":58911},{"icon_id":"14445247","name":"启用","font_class":"qiyong","unicode":"e6d7","unicode_decimal":59095},{"icon_id":"18211373","name":"键盘","font_class":"jianpan","unicode":"e7e9","unicode_decimal":59369},{"icon_id":"23217893","name":"安全","font_class":"anquan","unicode":"e620","unicode_decimal":58912},{"icon_id":"14445248","name":"更新","font_class":"gengxin","unicode":"e6d8","unicode_decimal":59096},{"icon_id":"18211374","name":"剪刀 剪切","font_class":"jiandaojianqie","unicode":"e7ea","unicode_decimal":59370},{"icon_id":"23217894","name":"测试车单","font_class":"ceshichedan","unicode":"e621","unicode_decimal":58913},{"icon_id":"14445249","name":"反馈","font_class":"fankui","unicode":"e6d9","unicode_decimal":59097},{"icon_id":"18211375","name":"监控","font_class":"jiankong","unicode":"e7eb","unicode_decimal":59371},{"icon_id":"23217895","name":"实际订单","font_class":"shijidingdan","unicode":"e622","unicode_decimal":58914},{"icon_id":"15838406","name":"column-3","font_class":"3column","unicode":"e663","unicode_decimal":58979},{"icon_id":"18211376","name":"静音","font_class":"jingyin","unicode":"e7ec","unicode_decimal":59372},{"icon_id":"23217896","name":"出口单","font_class":"chukoudan","unicode":"e623","unicode_decimal":58915},{"icon_id":"15838423","name":"column-4","font_class":"column-4","unicode":"e664","unicode_decimal":58980},{"icon_id":"18211377","name":"客服","font_class":"kefu","unicode":"e7ed","unicode_decimal":59373},{"icon_id":"23217897","name":"进口","font_class":"jinkou","unicode":"e624","unicode_decimal":58916},{"icon_id":"15838424","name":"add","font_class":"add","unicode":"e665","unicode_decimal":58981},{"icon_id":"18211378","name":"均衡器","font_class":"junhengqi","unicode":"e7ee","unicode_decimal":59374},{"icon_id":"23217898","name":"年计划","font_class":"nianjihua","unicode":"e625","unicode_decimal":58917},{"icon_id":"15838425","name":"add-circle","font_class":"add-circle","unicode":"e666","unicode_decimal":58982},{"icon_id":"18211379","name":"激活成功","font_class":"jihuochenggong","unicode":"e7ef","unicode_decimal":59375},{"icon_id":"23217899","name":"配比","font_class":"peibi","unicode":"e626","unicode_decimal":58918},{"icon_id":"15838426","name":"adjust","font_class":"adjust","unicode":"e667","unicode_decimal":58983},{"icon_id":"18211380","name":"聊天","font_class":"liaotian","unicode":"e7f0","unicode_decimal":59376},{"icon_id":"23217900","name":"库存盘点","font_class":"kucunpandian","unicode":"e627","unicode_decimal":58919},{"icon_id":"15838427","name":"arrow-up-circle","font_class":"arrow-up-circle","unicode":"e668","unicode_decimal":58984},{"icon_id":"18211381","name":"密码锁","font_class":"mimasuo","unicode":"e7f1","unicode_decimal":59377},{"icon_id":"23217901","name":"量产单","font_class":"liangchandan","unicode":"e628","unicode_decimal":58920},{"icon_id":"15838428","name":"arrow-right-circle","font_class":"arrow-right-circle","unicode":"e669","unicode_decimal":58985},{"icon_id":"18211382","name":"拍照","font_class":"paizhao","unicode":"e7f2","unicode_decimal":59378},{"icon_id":"23217902","name":"销售预测","font_class":"xiaoshouyuce","unicode":"e629","unicode_decimal":58921},{"icon_id":"15838429","name":"arrow-down","font_class":"arrow-down","unicode":"e66a","unicode_decimal":58986},{"icon_id":"18211383","name":"摄像","font_class":"shexiang","unicode":"e7f3","unicode_decimal":59379},{"icon_id":"23217903","name":"仓库列表","font_class":"cangkuliebiao","unicode":"e62a","unicode_decimal":58922},{"icon_id":"15838430","name":"ashbin","font_class":"ashbin","unicode":"e66b","unicode_decimal":58987},{"icon_id":"18211384","name":"人脸识别","font_class":"renlianshibie","unicode":"e7f4","unicode_decimal":59380},{"icon_id":"23217904","name":"库存","font_class":"kucun","unicode":"e62b","unicode_decimal":58923},{"icon_id":"15838431","name":"arrow-right","font_class":"arrow-right","unicode":"e66c","unicode_decimal":58988},{"icon_id":"18211385","name":"蓝牙","font_class":"lanya","unicode":"e7f5","unicode_decimal":59381},{"icon_id":"23217905","name":"往来","font_class":"wanglai","unicode":"e62c","unicode_decimal":58924},{"icon_id":"15838432","name":"browse","font_class":"browse","unicode":"e66d","unicode_decimal":58989},{"icon_id":"18211386","name":"鼠标","font_class":"shubiao","unicode":"e7f6","unicode_decimal":59382},{"icon_id":"23217906","name":"涂装","font_class":"tuzhuang","unicode":"e62d","unicode_decimal":58925},{"icon_id":"15838433","name":"bottom","font_class":"bottom","unicode":"e66e","unicode_decimal":58990},{"icon_id":"18211387","name":"朋友圈","font_class":"pengyouquan","unicode":"e7f7","unicode_decimal":59383},{"icon_id":"23217907","name":"国产","font_class":"guochan","unicode":"e62e","unicode_decimal":58926},{"icon_id":"15838434","name":"back","font_class":"back","unicode":"e66f","unicode_decimal":58991},{"icon_id":"18211388","name":"数据","font_class":"shuju","unicode":"e7f8","unicode_decimal":59384},{"icon_id":"23217908","name":"管理","font_class":"guanli1","unicode":"e62f","unicode_decimal":58927},{"icon_id":"15838435","name":"bad","font_class":"bad","unicode":"e670","unicode_decimal":58992},{"icon_id":"18211389","name":"日志","font_class":"rizhi","unicode":"e7f9","unicode_decimal":59385},{"icon_id":"23217909","name":"目标班次","font_class":"mubiaobanci","unicode":"e630","unicode_decimal":58928},{"icon_id":"15838436","name":"arrow-double-left","font_class":"arrow-double-left","unicode":"e671","unicode_decimal":58993},{"icon_id":"18211390","name":"手机","font_class":"shouji","unicode":"e7fa","unicode_decimal":59386},{"icon_id":"23217910","name":"调度","font_class":"tiaodu","unicode":"e631","unicode_decimal":58929},{"icon_id":"15838437","name":"arrow-left-circle","font_class":"arrow-left-circle","unicode":"e6da","unicode_decimal":59098},{"icon_id":"18211391","name":"名片","font_class":"mingpian","unicode":"e7fb","unicode_decimal":59387},{"icon_id":"23217911","name":"月计划","font_class":"yuejihua","unicode":"e632","unicode_decimal":58930},{"icon_id":"15838438","name":"arrow-double-right","font_class":"arrow-double-right","unicode":"e6db","unicode_decimal":59099},{"icon_id":"18211392","name":"省电","font_class":"shengdian","unicode":"e7fc","unicode_decimal":59388},{"icon_id":"23217912","name":"质量管理","font_class":"zhiliangguanli","unicode":"e633","unicode_decimal":58931},{"icon_id":"15838439","name":"caps-lock","font_class":"caps-lock","unicode":"e6dc","unicode_decimal":59100},{"icon_id":"18211393","name":"图片","font_class":"tupian","unicode":"e7fd","unicode_decimal":59389},{"icon_id":"23217914","name":"总装","font_class":"zongzhuang","unicode":"e634","unicode_decimal":58932},{"icon_id":"15838440","name":"camera","font_class":"camera","unicode":"e6dd","unicode_decimal":59101},{"icon_id":"18211394","name":"视频","font_class":"shipin","unicode":"e7fe","unicode_decimal":59390},{"icon_id":"23217915","name":"jis","font_class":"jis","unicode":"e635","unicode_decimal":58933},{"icon_id":"15838441","name":"chart-bar","font_class":"chart-bar","unicode":"e6de","unicode_decimal":59102},{"icon_id":"18211395","name":"内存卡","font_class":"neicunka","unicode":"e7ff","unicode_decimal":59391},{"icon_id":"23217916","name":"运输","font_class":"yunshu","unicode":"e636","unicode_decimal":58934},{"icon_id":"15838442","name":"attachment","font_class":"attachment","unicode":"e6df","unicode_decimal":59103},{"icon_id":"18211396","name":"调节器","font_class":"tiaojieqi","unicode":"e800","unicode_decimal":59392},{"icon_id":"23528753","name":"未关联","font_class":"weiguanlian1","unicode":"e8a4","unicode_decimal":59556},{"icon_id":"15838443","name":"code","font_class":"code","unicode":"e6e0","unicode_decimal":59104},{"icon_id":"18211397","name":"添加","font_class":"tianjia","unicode":"e801","unicode_decimal":59393},{"icon_id":"23528754","name":"关联","font_class":"guanlian2","unicode":"e8a5","unicode_decimal":59557},{"icon_id":"15838444","name":"close","font_class":"close","unicode":"e6e1","unicode_decimal":59105},{"icon_id":"18211398","name":"文件","font_class":"wenjian","unicode":"e802","unicode_decimal":59394},{"icon_id":"23528957","name":"保存","font_class":"baocun1","unicode":"e8a6","unicode_decimal":59558},{"icon_id":"15838445","name":"check-item","font_class":"check-item","unicode":"e6e2","unicode_decimal":59106},{"icon_id":"18211399","name":"消息","font_class":"xiaoxi","unicode":"e803","unicode_decimal":59395},{"icon_id":"23528958","name":"文件","font_class":"wenjian1","unicode":"e8a7","unicode_decimal":59559},{"icon_id":"15838446","name":"calendar","font_class":"calendar","unicode":"e6e3","unicode_decimal":59107},{"icon_id":"18211400","name":"网络","font_class":"wangluo","unicode":"e804","unicode_decimal":59396},{"icon_id":"23529138","name":"搜索","font_class":"sousuo2","unicode":"e8a8","unicode_decimal":59560},{"icon_id":"15838447","name":"comment","font_class":"comment","unicode":"e6e4","unicode_decimal":59108},{"icon_id":"18211401","name":"校验 运营","font_class":"xiaoyanyunying","unicode":"e805","unicode_decimal":59397},{"icon_id":"23529139","name":"查看","font_class":"chakan1","unicode":"e8a9","unicode_decimal":59561},{"icon_id":"15838448","name":"column-vertical","font_class":"column-vertical","unicode":"e6e5","unicode_decimal":59109},{"icon_id":"18211402","name":"卫星","font_class":"weixing","unicode":"e806","unicode_decimal":59398},{"icon_id":"23532270","name":"送办＆发送","font_class":"a-songbanfasong","unicode":"e8aa","unicode_decimal":59562},{"icon_id":"15838449","name":"column-horizontal","font_class":"column-horizontal","unicode":"e6e6","unicode_decimal":59110},{"icon_id":"18211403","name":"音量大","font_class":"yinliangda","unicode":"e807","unicode_decimal":59399},{"icon_id":"23532309","name":"向右","font_class":"xiangyou","unicode":"e8ab","unicode_decimal":59563},{"icon_id":"15838450","name":"complete","font_class":"complete","unicode":"e6e7","unicode_decimal":59111},{"icon_id":"18211404","name":"应用","font_class":"yingyong","unicode":"e808","unicode_decimal":59400},{"icon_id":"23532310","name":"向左","font_class":"xiangzuo","unicode":"e8ac","unicode_decimal":59564},{"icon_id":"15838451","name":"chart-pie","font_class":"chart-pie","unicode":"e6e8","unicode_decimal":59112},{"icon_id":"18211405","name":"遥控器","font_class":"yaokongqi","unicode":"e809","unicode_decimal":59401},{"icon_id":"23532315","name":"向下","font_class":"xiangxia","unicode":"e8ad","unicode_decimal":59565},{"icon_id":"15838452","name":"cry","font_class":"cry","unicode":"e6e9","unicode_decimal":59113},{"icon_id":"18211406","name":"暂停","font_class":"zanting","unicode":"e80a","unicode_decimal":59402},{"icon_id":"23532316","name":"向上","font_class":"xiangshang","unicode":"e8ae","unicode_decimal":59566},{"icon_id":"15838453","name":"customer-service","font_class":"customer-service","unicode":"e6ea","unicode_decimal":59114},{"icon_id":"18211407","name":"音量小","font_class":"yinliangxiao","unicode":"e80b","unicode_decimal":59403},{"icon_id":"23532341","name":"删除＆减少","font_class":"a-shanchujianshao","unicode":"e8af","unicode_decimal":59567},{"icon_id":"15838454","name":"delete","font_class":"delete","unicode":"e6eb","unicode_decimal":59115},{"icon_id":"18211408","name":"游戏","font_class":"youxi","unicode":"e80c","unicode_decimal":59404},{"icon_id":"23532351","name":"新增","font_class":"xinzeng2","unicode":"e8b0","unicode_decimal":59568},{"icon_id":"15838455","name":"direction-down","font_class":"direction-down","unicode":"e6ec","unicode_decimal":59116},{"icon_id":"18211409","name":"指纹","font_class":"zhiwen","unicode":"e80d","unicode_decimal":59405},{"icon_id":"23532381","name":"关闭","font_class":"guanbi","unicode":"e8b1","unicode_decimal":59569},{"icon_id":"15838456","name":"copy","font_class":"copy","unicode":"e6ed","unicode_decimal":59117},{"icon_id":"18211410","name":"信息化系统","font_class":"xinxihuaxitong","unicode":"e80e","unicode_decimal":59406},{"icon_id":"23532453","name":"通过＆确定","font_class":"a-tongguoqueding","unicode":"e8b2","unicode_decimal":59570},{"icon_id":"15838457","name":"cut","font_class":"cut","unicode":"e6ee","unicode_decimal":59118},{"icon_id":"18211411","name":"音乐","font_class":"yinle","unicode":"e80f","unicode_decimal":59407},{"icon_id":"23532489","name":"分类","font_class":"fenlei","unicode":"e8b3","unicode_decimal":59571},{"icon_id":"15838458","name":"data-view","font_class":"data-view","unicode":"e6ef","unicode_decimal":59119},{"icon_id":"18211412","name":"余额","font_class":"yue","unicode":"e810","unicode_decimal":59408},{"icon_id":"23532490","name":"采购车","font_class":"caigouche","unicode":"e8b4","unicode_decimal":59572},{"icon_id":"15838459","name":"direction-down-circle","font_class":"direction-down-circle","unicode":"e6f0","unicode_decimal":59120},{"icon_id":"18211414","name":"语音","font_class":"yuyin","unicode":"e811","unicode_decimal":59409},{"icon_id":"23532491","name":"我的","font_class":"wode","unicode":"e8b5","unicode_decimal":59573},{"icon_id":"15838460","name":"direction-right","font_class":"direction-right","unicode":"e6f1","unicode_decimal":59121},{"icon_id":"18211415","name":"扫一扫","font_class":"saoyisao","unicode":"e812","unicode_decimal":59410},{"icon_id":"23532492","name":"朋友圈","font_class":"pengyouquan1","unicode":"e8b6","unicode_decimal":59574},{"icon_id":"15838461","name":"direction-up","font_class":"direction-up","unicode":"e6f2","unicode_decimal":59122},{"icon_id":"18211416","name":"邮件","font_class":"youjian","unicode":"e813","unicode_decimal":59411},{"icon_id":"23532493","name":"首页","font_class":"shouye2","unicode":"e8b7","unicode_decimal":59575},{"icon_id":"15838462","name":"discount","font_class":"discount","unicode":"e6f3","unicode_decimal":59123},{"icon_id":"18211417","name":"位置","font_class":"weizhi","unicode":"e814","unicode_decimal":59412},{"icon_id":"23532716","name":"待报价","font_class":"daibaojia1","unicode":"e8b8","unicode_decimal":59576},{"icon_id":"15838463","name":"direction-left","font_class":"direction-left","unicode":"e6f4","unicode_decimal":59124},{"icon_id":"18211434","name":"水滴","font_class":"shuidi","unicode":"e815","unicode_decimal":59413},{"icon_id":"23532717","name":"待发货","font_class":"daifahuo","unicode":"e8b9","unicode_decimal":59577},{"icon_id":"15838464","name":"download","font_class":"download","unicode":"e6f5","unicode_decimal":59125},{"icon_id":"18211435","name":"火焰","font_class":"huoyan","unicode":"e816","unicode_decimal":59414},{"icon_id":"23532718","name":"待确认","font_class":"daiqueren1","unicode":"e8ba","unicode_decimal":59578},{"icon_id":"15838465","name":"electronics","font_class":"electronics","unicode":"e6f6","unicode_decimal":59126},{"icon_id":"18211436","name":"木头","font_class":"mutou","unicode":"e817","unicode_decimal":59415},{"icon_id":"23532859","name":"店铺","font_class":"dianpu","unicode":"e8bb","unicode_decimal":59579},{"icon_id":"15838466","name":"drag","font_class":"drag","unicode":"e6f7","unicode_decimal":59127},{"icon_id":"18211437","name":"金锭","font_class":"jinding","unicode":"e818","unicode_decimal":59416},{"icon_id":"23532860","name":"菜单","font_class":"caidan1","unicode":"e8bc","unicode_decimal":59580},{"icon_id":"15838467","name":"elipsis","font_class":"elipsis","unicode":"e6f8","unicode_decimal":59128},{"icon_id":"18211438","name":"土堆","font_class":"tudui","unicode":"e819","unicode_decimal":59417},{"icon_id":"23532861","name":"定位","font_class":"dingwei","unicode":"e8bd","unicode_decimal":59581},{"icon_id":"15838468","name":"export","font_class":"export","unicode":"e6f9","unicode_decimal":59129},{"icon_id":"18211442","name":"锤子","font_class":"chuizi","unicode":"e81a","unicode_decimal":59418},{"icon_id":"23532862","name":"分享","font_class":"fenxiang1","unicode":"e8be","unicode_decimal":59582},{"icon_id":"15838469","name":"explain","font_class":"explain","unicode":"e6fa","unicode_decimal":59130},{"icon_id":"18211443","name":"安全帽","font_class":"anquanmao","unicode":"e81b","unicode_decimal":59419},{"icon_id":"23532863","name":"编辑","font_class":"bianji","unicode":"e8bf","unicode_decimal":59583},{"icon_id":"15838470","name":"edit","font_class":"edit","unicode":"e6fb","unicode_decimal":59131},{"icon_id":"18211444","name":"矿锄","font_class":"kuangchu","unicode":"e81c","unicode_decimal":59420},{"icon_id":"23532864","name":"查看","font_class":"chakan2","unicode":"e8c0","unicode_decimal":59584},{"icon_id":"15838471","name":"eye-close","font_class":"eye-close","unicode":"e6fc","unicode_decimal":59132},{"icon_id":"18211445","name":"矿铲铁锹","font_class":"kuangchantieqiao","unicode":"e81d","unicode_decimal":59421},{"icon_id":"23532865","name":"附件","font_class":"fujian","unicode":"e8c1","unicode_decimal":59585},{"icon_id":"15838472","name":"email","font_class":"email","unicode":"e6fd","unicode_decimal":59133},{"icon_id":"18211446","name":"施工","font_class":"shigong","unicode":"e81e","unicode_decimal":59422},{"icon_id":"23532866","name":"密码","font_class":"mima","unicode":"e8c2","unicode_decimal":59586},{"icon_id":"15838473","name":"error","font_class":"error","unicode":"e6fe","unicode_decimal":59134},{"icon_id":"18211447","name":"矿冶","font_class":"kuangye","unicode":"e81f","unicode_decimal":59423},{"icon_id":"23532867","name":"拍照","font_class":"paizhao1","unicode":"e8c3","unicode_decimal":59587},{"icon_id":"15838474","name":"favorite","font_class":"favorite","unicode":"e6ff","unicode_decimal":59135},{"icon_id":"18211455","name":"窗帘","font_class":"chuanglian","unicode":"e820","unicode_decimal":59424},{"icon_id":"23532868","name":"购物车","font_class":"gouwuche1","unicode":"e8c4","unicode_decimal":59588},{"icon_id":"15838475","name":"file-common","font_class":"file-common","unicode":"e700","unicode_decimal":59136},{"icon_id":"18211456","name":"沙发","font_class":"shafa","unicode":"e821","unicode_decimal":59425},{"icon_id":"23532869","name":"公告","font_class":"gonggao","unicode":"e8c5","unicode_decimal":59589},{"icon_id":"15838476","name":"file-delete","font_class":"file-delete","unicode":"e701","unicode_decimal":59137},{"icon_id":"18211457","name":"灯 发明","font_class":"dengfaming","unicode":"e822","unicode_decimal":59426},{"icon_id":"23532870","name":"清空","font_class":"qingkong","unicode":"e8c6","unicode_decimal":59590},{"icon_id":"15838477","name":"file-add","font_class":"file-add","unicode":"e702","unicode_decimal":59138},{"icon_id":"18211458","name":"台灯","font_class":"taideng","unicode":"e823","unicode_decimal":59427},{"icon_id":"23532871","name":"切换","font_class":"qiehuan","unicode":"e8c7","unicode_decimal":59591},{"icon_id":"15838478","name":"film","font_class":"film","unicode":"e703","unicode_decimal":59139},{"icon_id":"18211459","name":"双人床","font_class":"shuangrenchuang","unicode":"e824","unicode_decimal":59428},{"icon_id":"23532872","name":"扫一扫","font_class":"saoyisao1","unicode":"e8c8","unicode_decimal":59592},{"icon_id":"15838479","name":"fabulous","font_class":"fabulous","unicode":"e704","unicode_decimal":59140},{"icon_id":"18211460","name":"椅子","font_class":"yizi","unicode":"e825","unicode_decimal":59429},{"icon_id":"23532873","name":"配置","font_class":"peizhi","unicode":"e8c9","unicode_decimal":59593},{"icon_id":"15838480","name":"file","font_class":"file","unicode":"e705","unicode_decimal":59141},{"icon_id":"18211461","name":"卫浴","font_class":"weiyu","unicode":"e826","unicode_decimal":59430},{"icon_id":"23532874","name":"工作台","font_class":"gongzuotai1","unicode":"e8ca","unicode_decimal":59594},{"icon_id":"15838481","name":"folder-close","font_class":"folder-close","unicode":"e706","unicode_decimal":59142},{"icon_id":"18211462","name":"植物","font_class":"zhiwu","unicode":"e827","unicode_decimal":59431},{"icon_id":"23532875","name":"下载","font_class":"xiazai","unicode":"e8cb","unicode_decimal":59595},{"icon_id":"15838482","name":"filter","font_class":"filter","unicode":"e707","unicode_decimal":59143},{"icon_id":"18211463","name":"叶子","font_class":"yezi","unicode":"e828","unicode_decimal":59432},{"icon_id":"23532876","name":"客服","font_class":"kefu1","unicode":"e8cc","unicode_decimal":59596},{"icon_id":"15838483","name":"good","font_class":"good","unicode":"e708","unicode_decimal":59144},{"icon_id":"18211525","name":"船锚","font_class":"chuanmao","unicode":"e829","unicode_decimal":59433},{"icon_id":"23532877","name":"删除","font_class":"shanchu2","unicode":"e8cd","unicode_decimal":59597},{"icon_id":"15838484","name":"hide","font_class":"hide","unicode":"e709","unicode_decimal":59145},{"icon_id":"18211526","name":"地铁","font_class":"ditie","unicode":"e82a","unicode_decimal":59434},{"icon_id":"23532878","name":"结账","font_class":"jiezhang","unicode":"e8ce","unicode_decimal":59598},{"icon_id":"15838485","name":"home","font_class":"home","unicode":"e70a","unicode_decimal":59146},{"icon_id":"18211527","name":"飞机","font_class":"feiji","unicode":"e82b","unicode_decimal":59435},{"icon_id":"23532879","name":"消息","font_class":"xiaoxi1","unicode":"e8cf","unicode_decimal":59599},{"icon_id":"15838486","name":"history","font_class":"history","unicode":"e70b","unicode_decimal":59147},{"icon_id":"18211528","name":"船","font_class":"chuan","unicode":"e82c","unicode_decimal":59436},{"icon_id":"23532880","name":"设置","font_class":"shezhi2","unicode":"e8d0","unicode_decimal":59600},{"icon_id":"15838487","name":"file-open","font_class":"file-open","unicode":"e70c","unicode_decimal":59148},{"icon_id":"18211529","name":"公交","font_class":"gongjiao","unicode":"e82d","unicode_decimal":59437},{"icon_id":"23532881","name":"企业","font_class":"qiye","unicode":"e8d1","unicode_decimal":59601},{"icon_id":"15838488","name":"forward","font_class":"forward","unicode":"e70d","unicode_decimal":59149},{"icon_id":"18211530","name":"故障","font_class":"guzhang","unicode":"e82e","unicode_decimal":59438},{"icon_id":"23532882","name":"筛选","font_class":"shaixuan1","unicode":"e8d2","unicode_decimal":59602},{"icon_id":"15838489","name":"import","font_class":"import","unicode":"e70e","unicode_decimal":59150},{"icon_id":"18211531","name":"路障","font_class":"luzhang","unicode":"e82f","unicode_decimal":59439},{"icon_id":"23532883","name":"收藏","font_class":"shoucang1","unicode":"e8d3","unicode_decimal":59603},{"icon_id":"15838490","name":"image-text","font_class":"image-text","unicode":"e70f","unicode_decimal":59151},{"icon_id":"18211532","name":"火车","font_class":"huoche","unicode":"e830","unicode_decimal":59440},{"icon_id":"23532884","name":"组织架构","font_class":"zuzhijiagou","unicode":"e8d4","unicode_decimal":59604},{"icon_id":"15838491","name":"keyboard-26","font_class":"keyboard-26","unicode":"e710","unicode_decimal":59152},{"icon_id":"18211533","name":"火箭","font_class":"huojian","unicode":"e831","unicode_decimal":59441},{"icon_id":"23532885","name":"生成","font_class":"shengcheng","unicode":"e8d5","unicode_decimal":59605},{"icon_id":"15838492","name":"keyboard-9","font_class":"keyboard-9","unicode":"e711","unicode_decimal":59153},{"icon_id":"18211534","name":"摩托车","font_class":"motuoche","unicode":"e832","unicode_decimal":59442},{"icon_id":"23532886","name":"验证码","font_class":"yanzhengma","unicode":"e8d6","unicode_decimal":59606},{"icon_id":"15838493","name":"link","font_class":"link","unicode":"e712","unicode_decimal":59154},{"icon_id":"18211535","name":"停车位","font_class":"tingchewei","unicode":"e833","unicode_decimal":59443},{"icon_id":"23533093","name":"全屏","font_class":"quanping","unicode":"e8d7","unicode_decimal":59607},{"icon_id":"15838494","name":"layout","font_class":"layout","unicode":"e713","unicode_decimal":59155},{"icon_id":"18211536","name":"红绿灯","font_class":"honglvdeng","unicode":"e834","unicode_decimal":59444},{"icon_id":"23533094","name":"解除全屏","font_class":"jiechuquanping","unicode":"e8d8","unicode_decimal":59608},{"icon_id":"15838495","name":"fullscreen-shrink","font_class":"fullscreen-shrink","unicode":"e714","unicode_decimal":59156},{"icon_id":"18211537","name":"消火栓","font_class":"xiaohuoshuan","unicode":"e835","unicode_decimal":59445},{"icon_id":"23533113","name":"缩进侧边","font_class":"suojincebian","unicode":"e8d9","unicode_decimal":59609},{"icon_id":"15838496","name":"layers","font_class":"layers","unicode":"e715","unicode_decimal":59157},{"icon_id":"18211538","name":"小汽车","font_class":"xiaoqiche","unicode":"e836","unicode_decimal":59446},{"icon_id":"23533114","name":"展开侧边","font_class":"zhankaicebian","unicode":"e8da","unicode_decimal":59610},{"icon_id":"15838497","name":"lock","font_class":"lock","unicode":"e716","unicode_decimal":59158},{"icon_id":"18211539","name":"足迹","font_class":"zuji","unicode":"e837","unicode_decimal":59447},{"icon_id":"23533133","name":"隐藏","font_class":"yincang1","unicode":"e8db","unicode_decimal":59611},{"icon_id":"15838498","name":"fullscreen-expand","font_class":"fullscreen-expand","unicode":"e717","unicode_decimal":59159},{"icon_id":"18211540","name":"自行车","font_class":"zihangche","unicode":"e838","unicode_decimal":59448},{"icon_id":"23533134","name":"显示","font_class":"xianshi1","unicode":"e8dc","unicode_decimal":59612},{"icon_id":"15838499","name":"map","font_class":"map","unicode":"e718","unicode_decimal":59160},{"icon_id":"18211545","name":"PPT","font_class":"PPT","unicode":"e839","unicode_decimal":59449},{"icon_id":"23533147","name":"月结","font_class":"yuejie","unicode":"e8dd","unicode_decimal":59613},{"icon_id":"15838500","name":"meh","font_class":"meh","unicode":"e719","unicode_decimal":59161},{"icon_id":"18211546","name":"草稿箱","font_class":"caogaoxiang","unicode":"e83a","unicode_decimal":59450},{"icon_id":"23533148","name":"日历","font_class":"rili","unicode":"e8de","unicode_decimal":59614},{"icon_id":"15838501","name":"menu","font_class":"menu","unicode":"e71a","unicode_decimal":59162},{"icon_id":"18211547","name":"Word","font_class":"Word","unicode":"e83b","unicode_decimal":59451},{"icon_id":"23540780","name":"蚂蚁","font_class":"mayi","unicode":"e8df","unicode_decimal":59615},{"icon_id":"15838502","name":"loading","font_class":"loading","unicode":"e71b","unicode_decimal":59163},{"icon_id":"18211548","name":"购书","font_class":"goushu","unicode":"e83c","unicode_decimal":59452},{"icon_id":"23542803","name":"蜜蜂","font_class":"mifeng","unicode":"e8e0","unicode_decimal":59616},{"icon_id":"15838503","name":"help","font_class":"help","unicode":"e71c","unicode_decimal":59164},{"icon_id":"18211549","name":"尺子","font_class":"chizi","unicode":"e83d","unicode_decimal":59453},{"icon_id":"23544190","name":"虎甲虫","font_class":"hujiachong","unicode":"e8e1","unicode_decimal":59617},{"icon_id":"15838504","name":"minus-circle","font_class":"minus-circle","unicode":"e71d","unicode_decimal":59165},{"icon_id":"18211550","name":"橡皮","font_class":"xiangpi","unicode":"e83e","unicode_decimal":59454},{"icon_id":"23548344","name":"扑了蛾","font_class":"pulee","unicode":"e8e2","unicode_decimal":59618},{"icon_id":"15838505","name":"modular","font_class":"modular","unicode":"e71e","unicode_decimal":59166},{"icon_id":"18211551","name":"卷宗","font_class":"juanzong","unicode":"e83f","unicode_decimal":59455},{"icon_id":"23548996","name":"毛毛虫","font_class":"maomaochong","unicode":"e8e3","unicode_decimal":59619},{"icon_id":"15838506","name":"notification","font_class":"notification","unicode":"e71f","unicode_decimal":59167},{"icon_id":"18211552","name":"铅笔","font_class":"qianbi","unicode":"e840","unicode_decimal":59456},{"icon_id":"23552448","name":"蚊子","font_class":"wenzi","unicode":"e8e4","unicode_decimal":59620},{"icon_id":"15838507","name":"mic","font_class":"mic","unicode":"e720","unicode_decimal":59168},{"icon_id":"18211553","name":"工作 出差","font_class":"gongzuochucha","unicode":"e841","unicode_decimal":59457},{"icon_id":"23554743","name":"蜻蜓","font_class":"qingting","unicode":"e8e5","unicode_decimal":59621},{"icon_id":"15838508","name":"more","font_class":"more","unicode":"e721","unicode_decimal":59169},{"icon_id":"18211554","name":"纸张","font_class":"zhizhang","unicode":"e842","unicode_decimal":59458},{"icon_id":"23557332","name":"蚯蚓","font_class":"qiuyin","unicode":"e8e6","unicode_decimal":59622},{"icon_id":"15838509","name":"pad","font_class":"pad","unicode":"e722","unicode_decimal":59170},{"icon_id":"18211555","name":"excel","font_class":"excel","unicode":"e843","unicode_decimal":59459},{"icon_id":"23557872","name":"胖小","font_class":"pangxiao","unicode":"e8e7","unicode_decimal":59623},{"icon_id":"15838510","name":"operation","font_class":"operation","unicode":"e723","unicode_decimal":59171},{"icon_id":"18211556","name":"菜单","font_class":"caidan","unicode":"e844","unicode_decimal":59460},{"icon_id":"23564403","name":"跳蚤","font_class":"tiaozao","unicode":"e8e8","unicode_decimal":59624},{"icon_id":"15838511","name":"play","font_class":"play","unicode":"e724","unicode_decimal":59172},{"icon_id":"18211563","name":"保存","font_class":"baocun","unicode":"e845","unicode_decimal":59461},{"icon_id":"23566027","name":"绿豆蝇","font_class":"lvdouying","unicode":"e8e9","unicode_decimal":59625},{"icon_id":"15838512","name":"print","font_class":"print","unicode":"e725","unicode_decimal":59173},{"icon_id":"18211564","name":"编辑 申请","font_class":"bianjishenqing","unicode":"e846","unicode_decimal":59462},{"icon_id":"23568015","name":"蚂蚱子","font_class":"mazhazi","unicode":"e8ea","unicode_decimal":59626},{"icon_id":"15838513","name":"mobile-phone","font_class":"mobile-phone","unicode":"e726","unicode_decimal":59174},{"icon_id":"18211565","name":"标签","font_class":"biaoqian1","unicode":"e847","unicode_decimal":59463},{"icon_id":"23571730","name":"甲壳虫","font_class":"jiachong","unicode":"e8eb","unicode_decimal":59627},{"icon_id":"15838514","name":"minus","font_class":"minus","unicode":"e727","unicode_decimal":59175},{"icon_id":"18211566","name":"变更审核","font_class":"biangengshenhe","unicode":"e848","unicode_decimal":59464},{"icon_id":"23573643","name":"蜘蛛","font_class":"zhizhu","unicode":"e8ec","unicode_decimal":59628},{"icon_id":"15838515","name":"navigation","font_class":"navigation","unicode":"e728","unicode_decimal":59176},{"icon_id":"18211567","name":"采购","font_class":"caigou","unicode":"e849","unicode_decimal":59465},{"icon_id":"23576031","name":"蝴蝶","font_class":"hudie","unicode":"e8ed","unicode_decimal":59629},{"icon_id":"15838516","name":"pdf","font_class":"pdf","unicode":"e729","unicode_decimal":59177},{"icon_id":"18211568","name":"查看更多","font_class":"chakangengduo","unicode":"e84a","unicode_decimal":59466},{"icon_id":"23577068","name":"雅麥蝶","font_class":"yamaidie","unicode":"e8ee","unicode_decimal":59630},{"icon_id":"15838517","name":"prompt","font_class":"prompt","unicode":"e72a","unicode_decimal":59178},{"icon_id":"18211569","name":"查看审批表","font_class":"chakanshenpibiao","unicode":"e84b","unicode_decimal":59467},{"icon_id":"23597932","name":"黄蜂","font_class":"huangfeng","unicode":"e8ef","unicode_decimal":59631},{"icon_id":"15838518","name":"move","font_class":"move","unicode":"e72b","unicode_decimal":59179},{"icon_id":"18211570","name":"待确认","font_class":"daiqueren","unicode":"e84c","unicode_decimal":59468},{"icon_id":"23600896","name":"马蜂","font_class":"mafeng","unicode":"e8f0","unicode_decimal":59632},{"icon_id":"15838519","name":"refresh","font_class":"refresh","unicode":"e72c","unicode_decimal":59180},{"icon_id":"18211571","name":"导出","font_class":"daochu1","unicode":"e84d","unicode_decimal":59469},{"icon_id":"23604187","name":"菜花蝶","font_class":"caihuadie","unicode":"e8f1","unicode_decimal":59633},{"icon_id":"15838520","name":"run-up","font_class":"run-up","unicode":"e72d","unicode_decimal":59181},{"icon_id":"18211572","name":"打样","font_class":"dayang1","unicode":"e84e","unicode_decimal":59470},{"icon_id":"23604188","name":"彩蝶","font_class":"caidie","unicode":"e8f2","unicode_decimal":59634},{"icon_id":"15838521","name":"picture","font_class":"picture","unicode":"e72e","unicode_decimal":59182},{"icon_id":"18211573","name":"产品入市","font_class":"chanpinrushi","unicode":"e84f","unicode_decimal":59471},{"icon_id":"15838522","name":"run-in","font_class":"run-in","unicode":"e72f","unicode_decimal":59183},{"icon_id":"18211574","name":"待报价","font_class":"daibaojia","unicode":"e850","unicode_decimal":59472},{"icon_id":"15838523","name":"pin","font_class":"pin","unicode":"e730","unicode_decimal":59184},{"icon_id":"18211575","name":"发布询价","font_class":"fabuxunjia","unicode":"e851","unicode_decimal":59473},{"icon_id":"15838524","name":"save","font_class":"save","unicode":"e731","unicode_decimal":59185},{"icon_id":"18211576","name":"打印","font_class":"dayin","unicode":"e852","unicode_decimal":59474},{"icon_id":"15838525","name":"search","font_class":"search","unicode":"e732","unicode_decimal":59186},{"icon_id":"18211577","name":"返回","font_class":"fanhui","unicode":"e853","unicode_decimal":59475},{"icon_id":"15838526","name":"share","font_class":"share","unicode":"e733","unicode_decimal":59187},{"icon_id":"18211578","name":"分配","font_class":"fenpei1","unicode":"e854","unicode_decimal":59476},{"icon_id":"15838527","name":"scanning","font_class":"scanning","unicode":"e734","unicode_decimal":59188},{"icon_id":"18211579","name":"发货2","font_class":"fahuo2","unicode":"e855","unicode_decimal":59477},{"icon_id":"15838528","name":"security","font_class":"security","unicode":"e735","unicode_decimal":59189},{"icon_id":"18211580","name":"发货","font_class":"fahuo","unicode":"e856","unicode_decimal":59478},{"icon_id":"15838529","name":"sign-out","font_class":"sign-out","unicode":"e736","unicode_decimal":59190},{"icon_id":"18211581","name":"发起","font_class":"faqi","unicode":"e857","unicode_decimal":59479},{"icon_id":"15838530","name":"select","font_class":"select","unicode":"e737","unicode_decimal":59191},{"icon_id":"18211582","name":"导入","font_class":"daoru1","unicode":"e858","unicode_decimal":59480},{"icon_id":"15838531","name":"stop","font_class":"stop","unicode":"e738","unicode_decimal":59192},{"icon_id":"18211583","name":"发送","font_class":"fasong","unicode":"e859","unicode_decimal":59481},{"icon_id":"15838532","name":"success","font_class":"success","unicode":"e739","unicode_decimal":59193},{"icon_id":"18211584","name":"更多","font_class":"gengduo","unicode":"e85a","unicode_decimal":59482},{"icon_id":"15838533","name":"smile","font_class":"smile","unicode":"e73a","unicode_decimal":59194},{"icon_id":"18211585","name":"购物车","font_class":"gouwuche","unicode":"e85b","unicode_decimal":59483},{"icon_id":"15838534","name":"switch","font_class":"switch","unicode":"e73b","unicode_decimal":59195},{"icon_id":"18211586","name":"方案改善","font_class":"fangangaishan","unicode":"e85c","unicode_decimal":59484},{"icon_id":"15838535","name":"setting","font_class":"setting","unicode":"e73c","unicode_decimal":59196},{"icon_id":"18211587","name":"工作台","font_class":"gongzuotai","unicode":"e85d","unicode_decimal":59485},{"icon_id":"15838536","name":"survey","font_class":"survey","unicode":"e73d","unicode_decimal":59197},{"icon_id":"18211588","name":"黑名单","font_class":"heimingdan1","unicode":"e85e","unicode_decimal":59486},{"icon_id":"15838537","name":"task","font_class":"task","unicode":"e73e","unicode_decimal":59198},{"icon_id":"18211589","name":"禁用","font_class":"jinyong1","unicode":"e85f","unicode_decimal":59487},{"icon_id":"15838538","name":"skip","font_class":"skip","unicode":"e73f","unicode_decimal":59199},{"icon_id":"18211590","name":"合同","font_class":"hetong","unicode":"e860","unicode_decimal":59488},{"icon_id":"15838539","name":"text","font_class":"text","unicode":"e740","unicode_decimal":59200},{"icon_id":"18211591","name":"竞标","font_class":"jingbiao","unicode":"e861","unicode_decimal":59489},{"icon_id":"15838540","name":"time","font_class":"time","unicode":"e741","unicode_decimal":59201},{"icon_id":"18211592","name":"开示报价","font_class":"kaishibaojia","unicode":"e862","unicode_decimal":59490},{"icon_id":"15838541","name":"telephone-out","font_class":"telephone-out","unicode":"e742","unicode_decimal":59202},{"icon_id":"18211593","name":"开发供应商","font_class":"kaifagongyingshang","unicode":"e863","unicode_decimal":59491},{"icon_id":"15838542","name":"toggle-left","font_class":"toggle-left","unicode":"e743","unicode_decimal":59203},{"icon_id":"18211594","name":"流程1","font_class":"liucheng1","unicode":"e864","unicode_decimal":59492},{"icon_id":"15838543","name":"toggle-right","font_class":"toggle-right","unicode":"e744","unicode_decimal":59204},{"icon_id":"18211595","name":"启用","font_class":"qiyong1","unicode":"e865","unicode_decimal":59493},{"icon_id":"15838544","name":"telephone","font_class":"telephone","unicode":"e745","unicode_decimal":59205},{"icon_id":"18211596","name":"流程3","font_class":"liucheng3","unicode":"e866","unicode_decimal":59494},{"icon_id":"15838545","name":"top","font_class":"top","unicode":"e746","unicode_decimal":59206},{"icon_id":"18211597","name":"流程2","font_class":"liucheng2","unicode":"e867","unicode_decimal":59495},{"icon_id":"15838546","name":"unlock","font_class":"unlock","unicode":"e747","unicode_decimal":59207},{"icon_id":"18211598","name":"前往","font_class":"qianwang","unicode":"e868","unicode_decimal":59496},{"icon_id":"15838547","name":"user","font_class":"user","unicode":"e748","unicode_decimal":59208},{"icon_id":"18211599","name":"删除","font_class":"shanchu1","unicode":"e869","unicode_decimal":59497},{"icon_id":"15838548","name":"upload","font_class":"upload","unicode":"e749","unicode_decimal":59209},{"icon_id":"18211600","name":"首页","font_class":"shouye1","unicode":"e86a","unicode_decimal":59498},{"icon_id":"15838549","name":"work","font_class":"work","unicode":"e74a","unicode_decimal":59210},{"icon_id":"18211601","name":"设置","font_class":"shezhi1","unicode":"e86b","unicode_decimal":59499},{"icon_id":"15838550","name":"training","font_class":"training","unicode":"e74b","unicode_decimal":59211},{"icon_id":"18211602","name":"收起","font_class":"shouqi","unicode":"e86c","unicode_decimal":59500},{"icon_id":"15838551","name":"warning","font_class":"warning","unicode":"e74c","unicode_decimal":59212},{"icon_id":"18211603","name":"时间","font_class":"shijian","unicode":"e86d","unicode_decimal":59501},{"icon_id":"15838552","name":"zoom-in","font_class":"zoom-in","unicode":"e74d","unicode_decimal":59213},{"icon_id":"18211604","name":"筛选","font_class":"shaixuan","unicode":"e86e","unicode_decimal":59502},{"icon_id":"15838554","name":"zoom-out","font_class":"zoom-out","unicode":"e74e","unicode_decimal":59214},{"icon_id":"18211605","name":"申购","font_class":"shengou","unicode":"e86f","unicode_decimal":59503},{"icon_id":"15838560","name":"add-bold","font_class":"add-bold","unicode":"e74f","unicode_decimal":59215},{"icon_id":"18211606","name":"申领","font_class":"shenling","unicode":"e870","unicode_decimal":59504},{"icon_id":"15838561","name":"arrow-left-bold","font_class":"arrow-left-bold","unicode":"e750","unicode_decimal":59216},{"icon_id":"18211607","name":"日历1","font_class":"rili1","unicode":"e871","unicode_decimal":59505},{"icon_id":"15838562","name":"arrow-up-bold","font_class":"arrow-up-bold","unicode":"e751","unicode_decimal":59217},{"icon_id":"18211608","name":"受理","font_class":"shouli1","unicode":"e872","unicode_decimal":59506},{"icon_id":"15838563","name":"close-bold","font_class":"close-bold","unicode":"e752","unicode_decimal":59218},{"icon_id":"18211609","name":"日历2","font_class":"rili2","unicode":"e873","unicode_decimal":59507},{"icon_id":"15838564","name":"arrow-down-bold","font_class":"arrow-down-bold","unicode":"e753","unicode_decimal":59219},{"icon_id":"18211610","name":"替换","font_class":"tihuan","unicode":"e874","unicode_decimal":59508},{"icon_id":"15838565","name":"minus-bold","font_class":"minus-bold","unicode":"e754","unicode_decimal":59220},{"icon_id":"18211611","name":"关联","font_class":"guanlian1","unicode":"e875","unicode_decimal":59509},{"icon_id":"15838566","name":"arrow-right-bold","font_class":"arrow-right-bold","unicode":"e755","unicode_decimal":59221},{"icon_id":"18211612","name":"通讯录","font_class":"tongxunlu","unicode":"e876","unicode_decimal":59510},{"icon_id":"15838567","name":"select-bold","font_class":"select-bold","unicode":"e756","unicode_decimal":59222},{"icon_id":"18211613","name":"推荐","font_class":"tuijian1","unicode":"e877","unicode_decimal":59511},{"icon_id":"15838581","name":"arrow-up-filling","font_class":"arrow-up-filling","unicode":"e757","unicode_decimal":59223},{"icon_id":"18211614","name":"通知2","font_class":"tongzhi2","unicode":"e878","unicode_decimal":59512},{"icon_id":"15838582","name":"arrow-down-filling","font_class":"arrow-down-filling","unicode":"e758","unicode_decimal":59224},{"icon_id":"18211615","name":"退回","font_class":"tuihui1","unicode":"e879","unicode_decimal":59513},{"icon_id":"15838583","name":"arrow-left-filling","font_class":"arrow-left-filling","unicode":"e759","unicode_decimal":59225},{"icon_id":"18211616","name":"同步至NC","font_class":"tongbuzhiNC","unicode":"e87a","unicode_decimal":59514},{"icon_id":"15838584","name":"arrow-right-filling","font_class":"arrow-right-filling","unicode":"e75a","unicode_decimal":59226},{"icon_id":"18211617","name":"搜索","font_class":"sousuo1","unicode":"e87b","unicode_decimal":59515},{"icon_id":"15838585","name":"caps-unlock-filling","font_class":"caps-unlock-filling","unicode":"e75b","unicode_decimal":59227},{"icon_id":"18211618","name":"网络报价","font_class":"wangluobaojia","unicode":"e87c","unicode_decimal":59516},{"icon_id":"15838586","name":"comment-filling","font_class":"comment-filling","unicode":"e75c","unicode_decimal":59228},{"icon_id":"18211619","name":"刷新 更新","font_class":"shuaxingengxin","unicode":"e87d","unicode_decimal":59517},{"icon_id":"15838587","name":"check-item-filling","font_class":"check-item-filling","unicode":"e75d","unicode_decimal":59229},{"icon_id":"18211620","name":"通知","font_class":"tongzhi","unicode":"e87e","unicode_decimal":59518},{"icon_id":"15838588","name":"clock-filling","font_class":"clock-filling","unicode":"e75e","unicode_decimal":59230},{"icon_id":"18211621","name":"意见反馈","font_class":"yijianfankui","unicode":"e87f","unicode_decimal":59519},{"icon_id":"15838589","name":"delete-filling","font_class":"delete-filling","unicode":"e75f","unicode_decimal":59231},{"icon_id":"18211622","name":"新增","font_class":"xinzeng1","unicode":"e880","unicode_decimal":59520},{"icon_id":"15838590","name":"decline-filling","font_class":"decline-filling","unicode":"e760","unicode_decimal":59232},{"icon_id":"18211623","name":"展开","font_class":"zhankai","unicode":"e881","unicode_decimal":59521},{"icon_id":"15838591","name":"dynamic-filling","font_class":"dynamic-filling","unicode":"e761","unicode_decimal":59233},{"icon_id":"18211624","name":"指派","font_class":"zhipai1","unicode":"e882","unicode_decimal":59522},{"icon_id":"15838592","name":"intermediate-filling","font_class":"intermediate-filling","unicode":"e762","unicode_decimal":59234},{"icon_id":"18211625","name":"未关联","font_class":"weiguanlian","unicode":"e883","unicode_decimal":59523},{"icon_id":"14183038","name":"4_查看","font_class":"4_chakan","unicode":"e672","unicode_decimal":58994},{"icon_id":"15838593","name":"favorite-filling","font_class":"favorite-filling","unicode":"e763","unicode_decimal":59235},{"icon_id":"18211626","name":"重置","font_class":"zhongzhi1","unicode":"e884","unicode_decimal":59524},{"icon_id":"14183039","name":"2_删除","font_class":"2_shanchu","unicode":"e673","unicode_decimal":58995},{"icon_id":"15838594","name":"layout-filling","font_class":"layout-filling","unicode":"e764","unicode_decimal":59236},{"icon_id":"18211627","name":"下发","font_class":"xiafa1","unicode":"e885","unicode_decimal":59525},{"icon_id":"14183040","name":"6_撤回","font_class":"6_chehui","unicode":"e674","unicode_decimal":58996},{"icon_id":"15838595","name":"help-filling","font_class":"help-filling","unicode":"e765","unicode_decimal":59237},{"icon_id":"18211628","name":"详情","font_class":"xiangqing1","unicode":"e886","unicode_decimal":59526},{"icon_id":"14183042","name":"10_发送","font_class":"10_fasong","unicode":"e675","unicode_decimal":58997},{"icon_id":"15838596","name":"history-filling","font_class":"history-filling","unicode":"e766","unicode_decimal":59238},{"icon_id":"18211629","name":"重新询价","font_class":"zhongxinxunjia1","unicode":"e887","unicode_decimal":59527},{"icon_id":"14183043","name":"8_通过","font_class":"8_tongguo","unicode":"e676","unicode_decimal":58998},{"icon_id":"15838597","name":"filter-filling","font_class":"filter-filling","unicode":"e767","unicode_decimal":59239},{"icon_id":"18211630","name":"终止询价","font_class":"zhongzhixunjia1","unicode":"e888","unicode_decimal":59528},{"icon_id":"14183044","name":"13_筛选","font_class":"13_shaixuan","unicode":"e677","unicode_decimal":58999},{"icon_id":"15838598","name":"file-common-filling","font_class":"file-common-filling","unicode":"e768","unicode_decimal":59240},{"icon_id":"18211631","name":"资料初审","font_class":"ziliaochushen","unicode":"e889","unicode_decimal":59529},{"icon_id":"14183045","name":"11_保存","font_class":"11_baocun","unicode":"e678","unicode_decimal":59000},{"icon_id":"15838599","name":"news-filling","font_class":"news-filling","unicode":"e769","unicode_decimal":59241},{"icon_id":"18211632","name":"数据统计","font_class":"shujutongji","unicode":"e88a","unicode_decimal":59530},{"icon_id":"14183046","name":"9_退回","font_class":"9_tuihui","unicode":"e679","unicode_decimal":59001},{"icon_id":"15838600","name":"edit-filling","font_class":"edit-filling","unicode":"e76a","unicode_decimal":59242},{"icon_id":"18211635","name":"暴雨雷阵雨","font_class":"baoyuleizhenyu","unicode":"e88b","unicode_decimal":59531},{"icon_id":"14183047","name":"18_未还款","font_class":"18_weihuankuan","unicode":"e67a","unicode_decimal":59002},{"icon_id":"15838601","name":"fullscreen-expand-filling","font_class":"fullscreen-expand-filling","unicode":"e76b","unicode_decimal":59243},{"icon_id":"18211636","name":"冰雹","font_class":"bingbao","unicode":"e88c","unicode_decimal":59532},{"icon_id":"14183048","name":"14_搜索","font_class":"14_sousuo","unicode":"e67b","unicode_decimal":59003},{"icon_id":"15838602","name":"smile-filling","font_class":"smile-filling","unicode":"e76c","unicode_decimal":59244},{"icon_id":"18211637","name":"大暴雨","font_class":"dabaoyu","unicode":"e88d","unicode_decimal":59533},{"icon_id":"14183049","name":"7_驳回","font_class":"7_bohui","unicode":"e67c","unicode_decimal":59004},{"icon_id":"15838603","name":"rise-filling","font_class":"rise-filling","unicode":"e76d","unicode_decimal":59245},{"icon_id":"18211638","name":"暴雪","font_class":"baoxue","unicode":"e88e","unicode_decimal":59534},{"icon_id":"14183050","name":"15_解封","font_class":"15_jiefeng","unicode":"e67d","unicode_decimal":59005},{"icon_id":"15838604","name":"picture-filling","font_class":"picture-filling","unicode":"e76e","unicode_decimal":59246},{"icon_id":"18211639","name":"大雨","font_class":"dayu","unicode":"e88f","unicode_decimal":59535},{"icon_id":"14183051","name":"16_封存","font_class":"16_fengcun","unicode":"e67e","unicode_decimal":59006},{"icon_id":"15838605","name":"notification-filling","font_class":"notification-filling","unicode":"e76f","unicode_decimal":59247},{"icon_id":"18211640","name":"冻雨","font_class":"dongyu","unicode":"e890","unicode_decimal":59536},{"icon_id":"14183052","name":"22_日历","font_class":"22_rili","unicode":"e67f","unicode_decimal":59007},{"icon_id":"15838606","name":"user-filling","font_class":"user-filling","unicode":"e770","unicode_decimal":59248},{"icon_id":"18211641","name":"大雪","font_class":"daxue","unicode":"e891","unicode_decimal":59537},{"icon_id":"14183053","name":"26_解绑","font_class":"26_jiebang","unicode":"e680","unicode_decimal":59008},{"icon_id":"15838607","name":"setting-filling","font_class":"setting-filling","unicode":"e771","unicode_decimal":59249},{"icon_id":"18211642","name":"多云","font_class":"duoyun","unicode":"e892","unicode_decimal":59538},{"icon_id":"14183054","name":"28_分配用户","font_class":"28_fenpeiyonghu","unicode":"e681","unicode_decimal":59009},{"icon_id":"15838608","name":"switch-filling","font_class":"switch-filling","unicode":"e772","unicode_decimal":59250},{"icon_id":"18211643","name":"强沙尘暴","font_class":"qiangshachenbao","unicode":"e893","unicode_decimal":59539},{"icon_id":"14183055","name":"27_关联","font_class":"27_guanlian","unicode":"e682","unicode_decimal":59010},{"icon_id":"15838609","name":"work-filling","font_class":"work-filling","unicode":"e773","unicode_decimal":59251},{"icon_id":"18211644","name":"沙尘暴","font_class":"shachenbao","unicode":"e894","unicode_decimal":59540},{"icon_id":"14183056","name":"24_发言、对话、留言","font_class":"24_fayanduihualiuyan","unicode":"e683","unicode_decimal":59011},{"icon_id":"15838610","name":"task-filling","font_class":"task-filling","unicode":"e774","unicode_decimal":59252},{"icon_id":"18211645","name":"晴","font_class":"qing","unicode":"e895","unicode_decimal":59541},{"icon_id":"14183057","name":"20_销假","font_class":"20_xiaojia","unicode":"e684","unicode_decimal":59012},{"icon_id":"15838611","name":"success-filling","font_class":"success-filling","unicode":"e775","unicode_decimal":59253},{"icon_id":"18211646","name":"雾","font_class":"wu","unicode":"e896","unicode_decimal":59542},{"icon_id":"14183058","name":"12_移动","font_class":"12_yidong","unicode":"e685","unicode_decimal":59013},{"icon_id":"15838612","name":"warning-filling","font_class":"warning-filling","unicode":"e776","unicode_decimal":59254},{"icon_id":"18211647","name":"微风","font_class":"weifeng","unicode":"e897","unicode_decimal":59543},{"icon_id":"14183059","name":"19_套餐","font_class":"19_taocan","unicode":"e686","unicode_decimal":59014},{"icon_id":"15838613","name":"folder-filling","font_class":"folder-filling","unicode":"e777","unicode_decimal":59255},{"icon_id":"18211648","name":"龙卷风","font_class":"longjuanfeng","unicode":"e898","unicode_decimal":59544},{"icon_id":"14183060","name":"23_邮件","font_class":"23_youjian","unicode":"e687","unicode_decimal":59015},{"icon_id":"15838614","name":"map-filling","font_class":"map-filling","unicode":"e778","unicode_decimal":59256},{"icon_id":"18211649","name":"雾霾","font_class":"wumai","unicode":"e899","unicode_decimal":59545},{"icon_id":"14183061","name":"17_还款","font_class":"17_huankuan","unicode":"e688","unicode_decimal":59016},{"icon_id":"15838615","name":"prompt-filling","font_class":"prompt-filling","unicode":"e779","unicode_decimal":59257},{"icon_id":"18211650","name":"阴","font_class":"yin","unicode":"e89a","unicode_decimal":59546},{"icon_id":"14183062","name":"30_结束","font_class":"30_jieshu","unicode":"e689","unicode_decimal":59017},{"icon_id":"15838616","name":"meh-filling","font_class":"meh-filling","unicode":"e77a","unicode_decimal":59258},{"icon_id":"18211651","name":"特大暴雨","font_class":"tedabaoyu","unicode":"e89b","unicode_decimal":59547},{"icon_id":"14183063","name":"31_退出","font_class":"31_tuichu","unicode":"e68a","unicode_decimal":59018},{"icon_id":"15838617","name":"cry-filling","font_class":"cry-filling","unicode":"e77b","unicode_decimal":59259},{"icon_id":"18211652","name":"小雪","font_class":"xiaoxue","unicode":"e89c","unicode_decimal":59548},{"icon_id":"14183064","name":"36_下架","font_class":"36_xiajia","unicode":"e68b","unicode_decimal":59019},{"icon_id":"15838618","name":"top-filling","font_class":"top-filling","unicode":"e77c","unicode_decimal":59260},{"icon_id":"18211653","name":"扬沙","font_class":"yangsha","unicode":"e89d","unicode_decimal":59549},{"icon_id":"14183065","name":"25_密码","font_class":"25_mima","unicode":"e68c","unicode_decimal":59020},{"icon_id":"15838619","name":"home-filling","font_class":"home-filling","unicode":"e77d","unicode_decimal":59261},{"icon_id":"18211654","name":"阵雨","font_class":"zhenyu","unicode":"e89e","unicode_decimal":59550},{"icon_id":"14183066","name":"21_查看上月","font_class":"21_chakanshangyue","unicode":"e68d","unicode_decimal":59021},{"icon_id":"15838620","name":"sorting","font_class":"sorting","unicode":"e77e","unicode_decimal":59262},{"icon_id":"18211655","name":"雨夹雪","font_class":"yujiaxue","unicode":"e89f","unicode_decimal":59551},{"icon_id":"14183067","name":"34_下载","font_class":"34_xiazai","unicode":"e68e","unicode_decimal":59022},{"icon_id":"18211044","name":"餐具","font_class":"canju","unicode":"e7a0","unicode_decimal":59296},{"icon_id":"18211656","name":"中雪","font_class":"zhongxue","unicode":"e8a0","unicode_decimal":59552},{"icon_id":"14183068","name":"42_图片","font_class":"42_tupian","unicode":"e68f","unicode_decimal":59023},{"icon_id":"18211045","name":"额枪","font_class":"eqiang","unicode":"e7a1","unicode_decimal":59297},{"icon_id":"18211657","name":"小雨","font_class":"xiaoyu","unicode":"e8a1","unicode_decimal":59553},{"icon_id":"14183069","name":"43_主题","font_class":"43_zhuti","unicode":"e690","unicode_decimal":59024},{"icon_id":"18211046","name":"风力发电","font_class":"fenglifadian","unicode":"e7a2","unicode_decimal":59298},{"icon_id":"18211658","name":"中雨","font_class":"zhongyu","unicode":"e8a2","unicode_decimal":59554},{"icon_id":"14183070","name":"45_帮助","font_class":"45_bangzhu","unicode":"e691","unicode_decimal":59025},{"icon_id":"18211047","name":"公司","font_class":"gongsi","unicode":"e7a3","unicode_decimal":59299},{"icon_id":"18211659","name":"沙尘","font_class":"shachen","unicode":"e8a3","unicode_decimal":59555},{"icon_id":"14183071","name":"46_首页","font_class":"46_shouye","unicode":"e692","unicode_decimal":59026},{"icon_id":"18211048","name":"公正","font_class":"gongzheng","unicode":"e7a4","unicode_decimal":59300},{"icon_id":"18267904","name":"版权","font_class":"banquan","unicode":"e98b","unicode_decimal":59787},{"icon_id":"14183072","name":"50_系统信息","font_class":"50_xitongxinxi","unicode":"e693","unicode_decimal":59027},{"icon_id":"18211049","name":"金融","font_class":"jinrong","unicode":"e7a5","unicode_decimal":59301},{"icon_id":"18267905","name":"安全隐私","font_class":"anquanyinsi","unicode":"e98c","unicode_decimal":59788},{"icon_id":"14183073","name":"35_上架","font_class":"35_shangjia","unicode":"e694","unicode_decimal":59028},{"icon_id":"18211050","name":"工作服","font_class":"gongzuofu","unicode":"e7a6","unicode_decimal":59302},{"icon_id":"18267906","name":"底层架构","font_class":"dicengjiagou","unicode":"e98d","unicode_decimal":59789},{"icon_id":"14183074","name":"38_车辆","font_class":"38_cheliang","unicode":"e695","unicode_decimal":59029},{"icon_id":"18211051","name":"奖杯","font_class":"jiangbei","unicode":"e7a7","unicode_decimal":59303},{"icon_id":"18267907","name":"仓储仓库","font_class":"cangchucangku","unicode":"e98e","unicode_decimal":59790},{"icon_id":"14183075","name":"53_其他","font_class":"53_qita","unicode":"e696","unicode_decimal":59030},{"icon_id":"18211052","name":"卡片","font_class":"kapian","unicode":"e7a8","unicode_decimal":59304},{"icon_id":"18267908","name":"饼图图表","font_class":"bingtutubiao","unicode":"e98f","unicode_decimal":59791},{"icon_id":"14183076","name":"47_绩效群组","font_class":"47_jixiaoqunzu","unicode":"e697","unicode_decimal":59031},{"icon_id":"18211053","name":"咖啡coffee","font_class":"kafeicoffee","unicode":"e7a9","unicode_decimal":59305},{"icon_id":"18267909","name":"处方","font_class":"chufang","unicode":"e990","unicode_decimal":59792},{"icon_id":"14183077","name":"29_流程","font_class":"29_liucheng","unicode":"e698","unicode_decimal":59032},{"icon_id":"18211054","name":"旅行箱 出差","font_class":"lvhangxiangchucha","unicode":"e7aa","unicode_decimal":59306},{"icon_id":"18267910","name":"查验","font_class":"chayan","unicode":"e991","unicode_decimal":59793},{"icon_id":"14183078","name":"32_导入","font_class":"32_daoru","unicode":"e699","unicode_decimal":59033},{"icon_id":"18211055","name":"男士","font_class":"nanshi","unicode":"e7ab","unicode_decimal":59307},{"icon_id":"18267911","name":"二维码","font_class":"erweima","unicode":"e992","unicode_decimal":59794},{"icon_id":"14183079","name":"33_导出","font_class":"33_daochu","unicode":"e69a","unicode_decimal":59034},{"icon_id":"18211056","name":"篮球","font_class":"lanqiu","unicode":"e7ac","unicode_decimal":59308},{"icon_id":"18267912","name":"发票","font_class":"fapiao","unicode":"e993","unicode_decimal":59795},{"icon_id":"14183080","name":"5_重置","font_class":"5_zhongzhi","unicode":"e69b","unicode_decimal":59035},{"icon_id":"18211057","name":"女士","font_class":"nvshi","unicode":"e7ad","unicode_decimal":59309},{"icon_id":"18267913","name":"分布式","font_class":"fenbushi","unicode":"e994","unicode_decimal":59796},{"icon_id":"14183081","name":"55_园区订餐","font_class":"55_yuanqudingcan","unicode":"e69c","unicode_decimal":59036},{"icon_id":"18211058","name":"闹钟","font_class":"naozhong","unicode":"e7ae","unicode_decimal":59310},{"icon_id":"18267914","name":"存储","font_class":"cunchu","unicode":"e995","unicode_decimal":59797},{"icon_id":"14183082","name":"51_工作群组","font_class":"51_gongzuoqunzu","unicode":"e69d","unicode_decimal":59037},{"icon_id":"18211059","name":"面膜","font_class":"mianmo","unicode":"e7af","unicode_decimal":59311},{"icon_id":"18267915","name":"订单","font_class":"dingdan","unicode":"e996","unicode_decimal":59798},{"icon_id":"14183083","name":"41_设置","font_class":"41_shezhi","unicode":"e69e","unicode_decimal":59038},{"icon_id":"18211060","name":"品牌","font_class":"pinpai","unicode":"e7b0","unicode_decimal":59312},{"icon_id":"18267916","name":"服务器","font_class":"fuwuqi1","unicode":"e997","unicode_decimal":59799},{"icon_id":"14183084","name":"48_我的权限","font_class":"48_wodequanxian","unicode":"e69f","unicode_decimal":59039},{"icon_id":"18211061","name":"培训室","font_class":"peixunshi","unicode":"e7b1","unicode_decimal":59313},{"icon_id":"18267917","name":"分支","font_class":"fenzhi","unicode":"e998","unicode_decimal":59800},{"icon_id":"14183085","name":"44_清除","font_class":"44_qingchu","unicode":"e6a0","unicode_decimal":59040},{"icon_id":"18211062","name":"钱包","font_class":"qianbao","unicode":"e7b2","unicode_decimal":59314},{"icon_id":"18267918","name":"丰富多元","font_class":"fengfuduoyuan","unicode":"e999","unicode_decimal":59801},{"icon_id":"14183087","name":"63_考勤报表","font_class":"63_kaoqinbaobiao","unicode":"e6a1","unicode_decimal":59041},{"icon_id":"18211063","name":"礼物盒","font_class":"liwuhe","unicode":"e7b3","unicode_decimal":59315},{"icon_id":"18267919","name":"工厂","font_class":"gongchang","unicode":"e99a","unicode_decimal":59802},{"icon_id":"14183088","name":"59_资金","font_class":"59_zijin","unicode":"e6a2","unicode_decimal":59042},{"icon_id":"18211064","name":"沙漏","font_class":"shalou","unicode":"e7b4","unicode_decimal":59316},{"icon_id":"18267920","name":"合同","font_class":"hetong1","unicode":"e99b","unicode_decimal":59803},{"icon_id":"14183089","name":"60_空间","font_class":"60_kongjian","unicode":"e6a3","unicode_decimal":59043},{"icon_id":"18211065","name":"收藏","font_class":"shoucang","unicode":"e7b5","unicode_decimal":59317},{"icon_id":"18267921","name":"海关港口","font_class":"haiguangangkou","unicode":"e99c","unicode_decimal":59804},{"icon_id":"14183090","name":"62_排班管理","font_class":"62_paibanguanli","unicode":"e6a4","unicode_decimal":59044},{"icon_id":"18211066","name":"旗帜","font_class":"qizhi","unicode":"e7b6","unicode_decimal":59318},{"icon_id":"18267922","name":"公益","font_class":"gongyi","unicode":"e99d","unicode_decimal":59805},{"icon_id":"14183091","name":"70_抽奖","font_class":"70_choujiang","unicode":"e6a5","unicode_decimal":59045},{"icon_id":"18211067","name":"图钉","font_class":"tuding","unicode":"e7b7","unicode_decimal":59319},{"icon_id":"18267923","name":"哈希","font_class":"haxi","unicode":"e99e","unicode_decimal":59806},{"icon_id":"14183092","name":"69_审批中心","font_class":"69_shenpizhongxin","unicode":"e6a6","unicode_decimal":59046},{"icon_id":"18211068","name":"票券2","font_class":"piaoquan2","unicode":"e7b8","unicode_decimal":59320},{"icon_id":"18267924","name":"技术服务","font_class":"jishufuwu","unicode":"e99f","unicode_decimal":59807},{"icon_id":"14183093","name":"73_查询统计","font_class":"73_chaxuntongji","unicode":"e6a7","unicode_decimal":59047},{"icon_id":"18211069","name":"勋章","font_class":"xunzhang","unicode":"e7b9","unicode_decimal":59321},{"icon_id":"18267925","name":"降本","font_class":"jiangben","unicode":"e9a0","unicode_decimal":59808},{"icon_id":"14183094","name":"66_园区报表","font_class":"66_yuanqubaobiao","unicode":"e6a8","unicode_decimal":59048},{"icon_id":"18211070","name":"人力资源","font_class":"renliziyuan","unicode":"e7ba","unicode_decimal":59322},{"icon_id":"18267926","name":"接口配置","font_class":"jiekoupeizhi","unicode":"e9a1","unicode_decimal":59809},{"icon_id":"14183095","name":"52_APP管理","font_class":"52_APPguanli","unicode":"e6a9","unicode_decimal":59049},{"icon_id":"18211071","name":"饮料","font_class":"yinliao","unicode":"e7bb","unicode_decimal":59323},{"icon_id":"18267927","name":"监管风控","font_class":"jianguanfengkong","unicode":"e9a2","unicode_decimal":59810},{"icon_id":"14183096","name":"37_住宿","font_class":"37_zhusu","unicode":"e6aa","unicode_decimal":59050},{"icon_id":"18211072","name":"指南针","font_class":"zhinanzhen","unicode":"e7bc","unicode_decimal":59324},{"icon_id":"18267928","name":"精确准确","font_class":"jingquezhunque","unicode":"e9a3","unicode_decimal":59811},{"icon_id":"14183097","name":"67_惠员报表","font_class":"67_huiyuanbaobiao","unicode":"e6ab","unicode_decimal":59051},{"icon_id":"18211073","name":"社区","font_class":"shequ","unicode":"e7bd","unicode_decimal":59325},{"icon_id":"18267929","name":"快速高效","font_class":"kuaisugaoxiao","unicode":"e9a4","unicode_decimal":59812},{"icon_id":"14183098","name":"54_会议室","font_class":"54_huiyishi","unicode":"e6ac","unicode_decimal":59052},{"icon_id":"18211074","name":"色板","font_class":"seban","unicode":"e7be","unicode_decimal":59326},{"icon_id":"18267930","name":"开放","font_class":"kaifang","unicode":"e9a5","unicode_decimal":59813},{"icon_id":"14183099","name":"68_审批设置","font_class":"68_shenpishezhi","unicode":"e6ad","unicode_decimal":59053},{"icon_id":"18211075","name":"显示","font_class":"xianshi","unicode":"e7bf","unicode_decimal":59327},{"icon_id":"18267931","name":"链接","font_class":"lianjie","unicode":"e9a6","unicode_decimal":59814},{"icon_id":"14183100","name":"72_应用","font_class":"72_yingyong","unicode":"e6ae","unicode_decimal":59054},{"icon_id":"18211076","name":"隐藏","font_class":"yincang","unicode":"e7c0","unicode_decimal":59328},{"icon_id":"18267932","name":"灵活扩展","font_class":"linghuokuozhan","unicode":"e9a7","unicode_decimal":59815},{"icon_id":"14183101","name":"39_班车","font_class":"39_banche","unicode":"e6af","unicode_decimal":59055},{"icon_id":"18211077","name":"票券","font_class":"piaoquan","unicode":"e7c1","unicode_decimal":59329},{"icon_id":"18267933","name":"卖家购物车","font_class":"maijiagouwuche","unicode":"e9a8","unicode_decimal":59816},{"icon_id":"14183102","name":"71_问卷","font_class":"71_wenjuan","unicode":"e6b0","unicode_decimal":59056},{"icon_id":"18211078","name":"外星人","font_class":"waixingren","unicode":"e7c2","unicode_decimal":59330},{"icon_id":"18267934","name":"流转","font_class":"liuzhuan","unicode":"e9a9","unicode_decimal":59817},{"icon_id":"14183103","name":"65_支付设置","font_class":"65_zhifushezhi","unicode":"e6b1","unicode_decimal":59057},{"icon_id":"18211079","name":"五金","font_class":"wujin","unicode":"e7c3","unicode_decimal":59331},{"icon_id":"18267935","name":"联盟链","font_class":"lianmenglian","unicode":"e9aa","unicode_decimal":59818},{"icon_id":"14183104","name":"40_二维码","font_class":"40_erweima","unicode":"e6b2","unicode_decimal":59058},{"icon_id":"18211080","name":"生日","font_class":"shengri","unicode":"e7c4","unicode_decimal":59332},{"icon_id":"18267936","name":"卖家店铺","font_class":"maijiadianpu","unicode":"e9ab","unicode_decimal":59819},{"icon_id":"14183105","name":"58_卡券","font_class":"58_kaquan","unicode":"e6b3","unicode_decimal":59059},{"icon_id":"18211081","name":"足球","font_class":"zuqiu","unicode":"e7c5","unicode_decimal":59333},{"icon_id":"18267937","name":"管理","font_class":"guanli","unicode":"e9ac","unicode_decimal":59820},{"icon_id":"14183106","name":"56_深圳餐厅","font_class":"56_shenzhencanting","unicode":"e6b4","unicode_decimal":59060},{"icon_id":"18211082","name":"个人贷款","font_class":"gerendaikuan","unicode":"e7c6","unicode_decimal":59334},{"icon_id":"18267938","name":"区块","font_class":"qukuai","unicode":"e9ad","unicode_decimal":59821},{"icon_id":"14183107","name":"64_支付账户","font_class":"64_zhifuzhanghu","unicode":"e6b5","unicode_decimal":59061},{"icon_id":"18211083","name":"领导","font_class":"lingdao","unicode":"e7c7","unicode_decimal":59335},{"icon_id":"18267939","name":"平台","font_class":"pingtai","unicode":"e9ae","unicode_decimal":59822},{"icon_id":"14183108","name":"57_知识库","font_class":"57_zhishiku","unicode":"e6b6","unicode_decimal":59062},{"icon_id":"18211335","name":"试管","font_class":"shiguan","unicode":"e7c8","unicode_decimal":59336},{"icon_id":"18267940","name":"票据","font_class":"piaoju","unicode":"e9af","unicode_decimal":59823},{"icon_id":"14183109","name":"49_权限设置","font_class":"49_quanxianshezhi","unicode":"e6b7","unicode_decimal":59063},{"icon_id":"18211336","name":"听诊器","font_class":"tingzhenqi","unicode":"e7c9","unicode_decimal":59337},{"icon_id":"18267941","name":"全领域规模","font_class":"quanlingyuguimo","unicode":"e9b0","unicode_decimal":59824},{"icon_id":"14445216","name":"分配","font_class":"fenpei","unicode":"e6b8","unicode_decimal":59064},{"icon_id":"18211337","name":"高温","font_class":"gaowen","unicode":"e7ca","unicode_decimal":59338},{"icon_id":"18267942","name":"欧元","font_class":"ouyuan","unicode":"e9b1","unicode_decimal":59825},{"icon_id":"14445217","name":"详情","font_class":"xiangqing","unicode":"e6b9","unicode_decimal":59065},{"icon_id":"18211338","name":"针管","font_class":"zhenguan","unicode":"e7cb","unicode_decimal":59339},{"icon_id":"21497122","name":"维修","font_class":"weixiu","unicode":"e602","unicode_decimal":58882},{"icon_id":"14445218","name":"受理","font_class":"shouli","unicode":"e6ba","unicode_decimal":59066},{"icon_id":"18211339","name":"烧瓶","font_class":"shaoping","unicode":"e7cc","unicode_decimal":59340},{"icon_id":"21497123","name":"全部","font_class":"aichegujiabeifen7","unicode":"e603","unicode_decimal":58883},{"icon_id":"14445219","name":"指派","font_class":"zhipai","unicode":"e6bb","unicode_decimal":59067},{"icon_id":"18211340","name":"洗手液","font_class":"xishouye","unicode":"e7cd","unicode_decimal":59341},{"icon_id":"21497124","name":"新车报价","font_class":"xinchebaojia","unicode":"e604","unicode_decimal":58884},{"icon_id":"14445220","name":"退回","font_class":"tuihui","unicode":"e6bc","unicode_decimal":59068},{"icon_id":"18211341","name":"医院","font_class":"yiyuan","unicode":"e7ce","unicode_decimal":59342},{"icon_id":"21497125","name":"我的砍价","font_class":"wodekanjia","unicode":"e605","unicode_decimal":58885},{"icon_id":"14445221","name":"发布","font_class":"fabu","unicode":"e6bd","unicode_decimal":59069},{"icon_id":"18211342","name":"温度计","font_class":"wenduji","unicode":"e7cf","unicode_decimal":59343},{"icon_id":"21497126","name":"爱车估价","font_class":"aichegujiabeifen","unicode":"e606","unicode_decimal":58886},{"icon_id":"14445222","name":"删除","font_class":"shanchu","unicode":"e6be","unicode_decimal":59070},{"icon_id":"18211348","name":"TV电视","font_class":"TVdianshi","unicode":"e7d0","unicode_decimal":59344},{"icon_id":"21497127","name":"专家答疑","font_class":"zhuanjiadayibeifen","unicode":"e607","unicode_decimal":58887},{"icon_id":"14445223","name":"开发","font_class":"kaifa","unicode":"e6bf","unicode_decimal":59071},{"icon_id":"18211349","name":"U盘","font_class":"Upan","unicode":"e7d1","unicode_decimal":59345},{"icon_id":"21497128","name":"做保养","font_class":"zuobaoyang","unicode":"e608","unicode_decimal":58888},{"icon_id":"14445224","name":"开示","font_class":"kaishi","unicode":"e6c0","unicode_decimal":59072},{"icon_id":"18211350","name":"HD高清","font_class":"HDgaoqing","unicode":"e7d2","unicode_decimal":59346},{"icon_id":"21497129","name":"油卡充值","font_class":"youkachongzhi","unicode":"e609","unicode_decimal":58889},{"icon_id":"14445225","name":"推荐","font_class":"tuijian","unicode":"e6c1","unicode_decimal":59073},{"icon_id":"18211351","name":"WiFi","font_class":"WiFi","unicode":"e7d3","unicode_decimal":59347},{"icon_id":"21497130","name":"购买","font_class":"maichepin","unicode":"e60a","unicode_decimal":58890},{"icon_id":"14445226","name":"代发","font_class":"daifa","unicode":"e6c2","unicode_decimal":59074},{"icon_id":"18211352","name":"WiFi2","font_class":"WiFi2","unicode":"e7d4","unicode_decimal":59348},{"icon_id":"21497131","name":"买车险","font_class":"maichexianbeifen","unicode":"e60b","unicode_decimal":58891},{"icon_id":"14445227","name":"终止询价","font_class":"zhongzhixunjia","unicode":"e6c3","unicode_decimal":59075},{"icon_id":"18211353","name":"Windows","font_class":"Windows","unicode":"e7d5","unicode_decimal":59349},{"icon_id":"21497132","name":"换轮胎","font_class":"huanluntai","unicode":"e60c","unicode_decimal":58892},{"icon_id":"14445228","name":"重新询价","font_class":"zhongxinxunjia","unicode":"e6c4","unicode_decimal":59076},{"icon_id":"18211354","name":"4K","font_class":"4K","unicode":"e7d6","unicode_decimal":59350},{"icon_id":"21497133","name":"保养手册","font_class":"baoyangshoucebeifen","unicode":"e60d","unicode_decimal":58893},{"icon_id":"14445229","name":"新增","font_class":"xinzeng","unicode":"e6c5","unicode_decimal":59077},{"icon_id":"18211355","name":"堡垒机","font_class":"baoleiji","unicode":"e7d7","unicode_decimal":59351},{"icon_id":"21497134","name":"爱车","font_class":"aichegujiabeifen12","unicode":"e60e","unicode_decimal":58894},{"icon_id":"14445230","name":"查看","font_class":"chakan","unicode":"e6c6","unicode_decimal":59078},{"icon_id":"18211356","name":"点赞","font_class":"dianzan","unicode":"e7d8","unicode_decimal":59352},{"icon_id":"21497135","name":"罚款代缴","font_class":"fakuandaijiaobeifen","unicode":"e60f","unicode_decimal":58895},{"icon_id":"14445231","name":"打样","font_class":"dayang","unicode":"e6c7","unicode_decimal":59079},{"icon_id":"18211357","name":"电话","font_class":"dianhua","unicode":"e7d9","unicode_decimal":59353},{"icon_id":"21497136","name":"新车必备","font_class":"xinchebibei","unicode":"e610","unicode_decimal":58896},{"icon_id":"14445232","name":"下发","font_class":"xiafa","unicode":"e6c8","unicode_decimal":59080},{"icon_id":"18211358","name":"充电中","font_class":"chongdianzhong","unicode":"e7da","unicode_decimal":59354},{"icon_id":"21497137","name":"查违章","font_class":"chaweizhang","unicode":"e611","unicode_decimal":58897},{"icon_id":"14445233","name":"搜索","font_class":"sousuo","unicode":"e6c9","unicode_decimal":59081},{"icon_id":"18211359","name":"播放","font_class":"bofang","unicode":"e7db","unicode_decimal":59355},{"icon_id":"21497138","name":"首页","font_class":"aichegujiabeifen5","unicode":"e612","unicode_decimal":58898},{"icon_id":"14445234","name":"导出","font_class":"daochu","unicode":"e6ca","unicode_decimal":59082},{"icon_id":"18211360","name":"地图","font_class":"ditu","unicode":"e7dc","unicode_decimal":59356},{"icon_id":"21497139","name":"设置","font_class":"zhuanchezhuanyongbeifen","unicode":"e613","unicode_decimal":58899},{"icon_id":"14445235","name":"黑名单","font_class":"heimingdan","unicode":"e6cb","unicode_decimal":59083},{"icon_id":"18211361","name":"电量","font_class":"dianliang","unicode":"e7dd","unicode_decimal":59357},{"icon_id":"21497140","name":"自助洗车","font_class":"zizhuxiche","unicode":"e614","unicode_decimal":58900},{"icon_id":"14445236","name":"重置","font_class":"zhongzhi","unicode":"e6cc","unicode_decimal":59084},{"icon_id":"18211362","name":"电脑","font_class":"diannao","unicode":"e7de","unicode_decimal":59358},{"icon_id":"21497142","name":"金融买车","font_class":"jinrongmaichebeifen","unicode":"e615","unicode_decimal":58901},{"icon_id":"14445237","name":"导入","font_class":"daoru","unicode":"e6cd","unicode_decimal":59085},{"icon_id":"18211363","name":"服务器","font_class":"fuwuqi","unicode":"e7df","unicode_decimal":59359},{"icon_id":"21497143","name":"驾照查分","font_class":"jiazhaochafenbeifen","unicode":"e616","unicode_decimal":58902},{"icon_id":"14445238","name":"审核初审","font_class":"shenhechushen","unicode":"e6ce","unicode_decimal":59086},{"icon_id":"18211364","name":"分享","font_class":"fenxiang","unicode":"e7e0","unicode_decimal":59360},{"icon_id":"21497144","name":"年检代办","font_class":"nianjiandaibanbeifen","unicode":"e617","unicode_decimal":58903},{"icon_id":"14445239","name":"变更","font_class":"biangeng","unicode":"e6cf","unicode_decimal":59087},{"icon_id":"18211365","name":"谷歌浏览器","font_class":"gugeliulanqi","unicode":"e7e1","unicode_decimal":59361},{"icon_id":"21497145","name":"用户反馈","font_class":"yonghufankuibeifen","unicode":"e618","unicode_decimal":58904}]}')},e22f:function(e,t,o){},e35a:function(e,t,o){},e556:function(e,t,o){"use strict";o.r(t);const i=[{element:".tabs",popover:{title:"取证控件",description:"用户显示当前页面报告相关配置和取证元素的相关配置",position:"right"},padding:0},{element:".konva-container-baseCol-baseContainer",popover:{title:"报告视图",description:"用于显示当前页面报告相关配置",position:"top"}}];t["default"]=i},e76a:function(e,t,o){},e8d2:function(e,t,o){e.exports=o.p+"static/img/folder_black_24dp.143fa2e1.svg"},eb54:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":"",visible:e.dialogFormVisible,width:"100vh"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(" "+e._s(e.$translateTitle("button.determine"))+" ")])]},proxy:!0}])},[t("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{label:"表名",prop:"class"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"","default-first-option":"",filterable:""},on:{change:e.changeClass},model:{value:e.form.class,callback:function(t){e.$set(e.form,"class",t)},expression:"form.class"}},e._l(e.DbaTable,(function(e){return t("el-option",{key:e.className,attrs:{label:e.className,value:e.className}})})),1)],1),t("el-form-item",{attrs:{label:"类型",prop:"type"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"","default-first-option":"",filterable:""},on:{change:e.changeType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.Types,(function(o){return t("el-option",{key:o.label,attrs:{label:o.label,value:o.value}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(o.label))]),t("span",{staticStyle:{float:"right","font-size":"13px",color:"#8492a6"}},[e._v(" "+e._s(o.value)+" ")])])})),1)],1),t("el-form-item",{attrs:{label:e.$translateTitle("home.language")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"","default-first-option":"",filterable:""},model:{value:e.form.language,callback:function(t){e.$set(e.form,"language",t)},expression:"form.language"}},e._l(e.lang,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"key",prop:"key"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",clearable:"","default-first-option":"",filterable:"",size:"mini"},model:{value:e.form.key,callback:function(t){e.$set(e.form,"key",t)},expression:"form.key"}},e._l(e.keys,(function(o){return t("el-option",{key:o.objectId,attrs:{label:o.objectId,value:o.objectId}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(o.objectId))]),t("span",{staticStyle:{float:"right","font-size":"13px",color:"#8492a6"}},[e._v(" "+e._s(o.description||o.name||o.title||o.username||o.type)+" ")])])})),1)],1),t("el-form-item",{attrs:{label:e.$translateTitle("product.title"),prop:"title"}},[t("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),t("el-form-item",{attrs:{label:e.$translateTitle("task.data"),prop:"data"}},[t("div",{staticStyle:{height:"30vh",overflow:"auto"}},[t("dgiot-monaco-plus",{key:e.upKey,ref:"monacoCode",attrs:{codes:e.codes,lang:"json","read-only":!1,theme:"vs-dark"}})],1)])],1)],1)},a=[],n=o("8ba7"),s=o("5880"),c=o("22f9"),r=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(e,t,o)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,g=(e,t)=>{for(var o in t||(t={}))m.call(t,o)&&h(e,o,t[o]);if(u)for(var o of u(t))p.call(t,o)&&h(e,o,t[o]);return e},f=(e,t)=>l(e,d(t)),_=(e,t,o)=>new Promise((i,a)=>{var n=e=>{try{c(o.next(e))}catch(t){a(t)}},s=e=>{try{c(o.throw(e))}catch(t){a(t)}},c=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,s);c((o=o.apply(e,t)).next())}),b={name:"TableEdit",data(){return{lang:[{label:"中文简体",value:"zh"},{label:"english",value:"en"},{label:"日本語",value:"jp"}],upKey:(new Date).getMilliseconds(),DbaTable:[],Types:[{value:"amis",label:"低代码"},{value:"notification",label:"告警联动"},{value:"reportFrom",label:"报告表单"},{value:"deviceInfo",label:"设备信息"},{value:"amis_view",label:"低代码预览"},{value:"topo",label:"组态"},{value:"profile",label:"设备控制"},{value:"content",label:"数据展示"},{value:"pressureconfig",label:"压测配置"},{value:"sms_template",label:"短信模板"}],keys:[],activeName:"first",amisKey:moment(new Date).format("X"),type:"",codes:"{}",viewId:"",form:{class:"Product",title:"",author:""},rules:{title:[{required:!0,trigger:"blur",message:"请输入标题"}],author:[{required:!0,trigger:"blur",message:"请输入作者"}]},title:"",dialogFormVisible:!1}},computed:g({},Object(s["mapGetters"])({amisJson:"amis/amisJson"})),watch:{"form.data":{handler(e){this.codes=JSON.stringify(e,null,4),this.upKey=(new Date).getMilliseconds()},immediate:!0,deep:!0}},created(){this.changeClass("Product")},methods:f(g({},Object(s["mapMutations"])({set_amisJson:"amis/set_amisJson"})),{showEdit(e){this.form=e,this.dialogFormVisible=!0},changeType(e){return _(this,null,(function*(){this.codes={},this.form.data={};const t=e.trim().toLowerCase().replace(e[0],e[0].toUpperCase());try{const e=yield Object(c["getDlinkJson"])(t);this.form.data=e||{},this.codes=JSON.stringify(this.form.data,null,4),this.upKey=(new Date).getMilliseconds(),this.$refs["monacoCode"].setValue(this.codes)}catch(o){console.log(o),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+o,"error","dgiot-hey-message-error")}}))},changeClass(e){return _(this,null,(function*(){if(!e)return!1;try{console.log(e);const t={order:"-updatedAt"},{results:o=[]}=yield this.$query_object(e,t);console.log(o),this.keys=o}catch(t){console.log(t),this.$baseMessage(this.$translateTitle("alert.Data request error")+""+t,"error","dgiot-hey-message-error")}}))},close(){this.dialogFormVisible=!1},save(){console.log(this.$refs.monacoCode.$refs.monacoEditor.editor.getValue()),this.$refs["form"].validate(e=>_(this,null,(function*(){if(e){const{title:e,type:t,key:o}=this.form,i={data:JSON.parse(this.$refs.monacoCode.$refs.monacoEditor.editor.getValue()),language:this.form.language,class:this.form.class,title:e,type:t,key:o};if("add"==this.type){yield Object(n["postView"])(i);this.$message({showClose:!0,duration:2e3,message:""+this.$translateTitle("user.Save the template successfully"),type:"success"})}else{const{msg:e}=yield Object(n["putView"])(this.viewId,i);this.$message({showClose:!0,duration:2e3,message:""+this.$translateTitle("user.Save the template successfully"),type:"success"})}this.$emit("fetch-data"),this.close()}})))}})},y=b,v=o("2877"),w=Object(v["a"])(y,i,a,!1,null,null,null);t["default"]=w.exports},f14e:function(e,t,o){e.exports=o.p+"static/img/live_tv_black_24dp.cb61ecfd.svg"},f235:function(e,t,o){"use strict";o("5a6c")},f27c:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"topo"}})},a=[],n=o("5880"),s=Object.defineProperty,c=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,o)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,u=(e,t)=>{for(var o in t||(t={}))r.call(t,o)&&d(e,o,t[o]);if(c)for(var o of c(t))l.call(t,o)&&d(e,o,t[o]);return e},m={name:"DgiotKonva",components:{},props:{objectId:{default:"",required:!0,type:String},code:{default:()=>{},required:!0,type:Object}},data(){return{infoData:"dgiotKonva"}},mounted(){this.initKonva({data:this.code.Stage,id:"topo"}),this.$nextTick(()=>{konvaUtils.loadKonva(canvas.layer)})},methods:u({},Object(n["mapMutations"])({initKonva:"topo/initKonva"}))},p=m,h=(o("17ea"),o("2877")),g=Object(h["a"])(p,i,a,!1,null,"d48bc0f2",null);t["default"]=g.exports},f8a2:function(e,t,o){},fcf5:function(e,t,o){}}]);