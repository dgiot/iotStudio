{
    "version": 3,
    "file": "Custom.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Custom.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport memoize from 'lodash/memoize';\nimport {Renderer, RendererProps} from '../factory';\n\nimport {anyChanged} from '../utils/helper';\nimport {BaseSchema} from '../Schema';\nimport FormItem, {FormControlProps} from './Form/Item';\n\n/**\n * 自定义组件\n */\nexport interface CustomSchema extends BaseSchema {\n  /**\n   * 实现自定义功能的渲染器，主要给 JS SDK 和可视化编辑器里使用。\n   *\n   * 文档：https://baidu.gitee.io/amis/components/custom\n   */\n  type: 'custom';\n  onMount?: Function | string;\n  onUpdate?: Function | string;\n  onUnmount?: Function | string;\n  inline?: boolean;\n  id?: string;\n  html?: string;\n}\n\nexport interface CustomProps extends FormControlProps, CustomSchema {\n  className?: string;\n  value?: any;\n  wrapperComponent?: any;\n  inline?: boolean;\n}\n\n// 添加resolver，指定所有参数的联合字符串为key。因为最后一个参数为函数体\n// 缓存一下，避免在 crud 中的自定义组件被大量执行\nconst getFunction = memoize((...args) => {\n  return new Function(...args);\n}, (...args) => JSON.stringify(args));\n\nexport class Custom extends React.Component<CustomProps, object> {\n  static defaultProps: Partial<CustomProps> = {\n    inline: false\n  };\n\n  dom: any;\n  onUpdate: Function = () => {};\n  onMount: Function = () => {};\n  onUnmount: Function = () => {};\n\n  constructor(props: CustomProps) {\n    super(props);\n    this.dom = React.createRef();\n    if (props.onMount) {\n      if (typeof props.onMount === 'string') {\n        this.onMount = getFunction(\n          'dom',\n          'value',\n          'onChange',\n          'props',\n          props.onMount\n        );\n      } else {\n        this.onMount = props.onMount;\n      }\n    }\n    if (props.onUpdate) {\n      if (typeof props.onUpdate === 'string') {\n        this.onUpdate = getFunction(\n          'dom',\n          'data',\n          'prevData',\n          'props',\n          props.onUpdate\n        );\n      } else {\n        this.onUpdate = props.onUpdate;\n      }\n    }\n    if (props.onUnmount) {\n      if (typeof props.onUnmount === 'string') {\n        this.onUnmount = getFunction('props', props.onUnmount);\n      } else {\n        this.onUnmount = props.onUnmount;\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps: CustomProps) {\n    if (anyChanged(['data'], this.props, prevProps)) {\n      const {data} = this.props;\n      this.onUpdate(this.dom, data, prevProps.data, this.props);\n    }\n  }\n\n  componentDidMount() {\n    const {value, onChange} = this.props;\n    this.onMount(this.dom.current, value, onChange, this.props);\n  }\n\n  componentwillUnmount() {\n    this.onUnmount(this.props);\n  }\n\n  render() {\n    const {\n      className,\n      html,\n      id,\n      wrapperComponent,\n      inline,\n      translate: __,\n      classnames: cx\n    } = this.props;\n    const Component = wrapperComponent || inline ? 'span' : 'div';\n    return (\n      <Component\n        ref={this.dom}\n        className={cx(className)}\n        id={id}\n        dangerouslySetInnerHTML={{__html: html ? html : ''}}\n      ></Component>\n    );\n  }\n}\n\n@FormItem({\n  type: 'custom'\n})\nexport class CustomRenderer extends Custom {}\n"
    ]
}