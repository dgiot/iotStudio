{"version":3,"sources":["webpack://echarts.[name]/webpack/universalModuleDefinition","webpack://echarts.[name]/webpack/bootstrap","webpack://echarts.[name]/external \"echarts\"","webpack://echarts.[name]/d:/.workspace/.open/echarts-amap/src/amap.js","webpack://echarts.[name]/d:/.workspace/.open/echarts-amap/src/AMapCoordSys.js","webpack://echarts.[name]/d:/.workspace/.open/echarts-amap/src/AMapModel.js","webpack://echarts.[name]/d:/.workspace/.open/echarts-amap/src/AMapView.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","registerCoordinateSystem","registerAction","type","event","update","payload","ecModel","eachComponent","aMapModel","amap","getAMap","center","getCenter","setCenterAndZoom","lng","lat","getZoom","version","echarts","AMapCoordSys","api","this","_amap","dimensions","_mapOffset","_api","setZoom","zoom","_zoom","setCenter","_center","lnglatToPixel","setMapOffset","mapOffset","dataToPoint","data","point","AMap","LngLat","px","lngLatToContainer","x","y","pointToData","pt","containerToLngLat","getViewRect","graphic","BoundingRect","getWidth","getHeight","getRoamTransform","matrix","amapCoordSys","getDom","amapModel","viewportRoot","getZr","painter","getViewportRoot","Error","__amap","amapRoot","querySelector","style","left","top","removeChild","document","createElement","cssText","classList","add","appendChild","options","__options","util","clone","Map","layer","__layer","CustomLayer","setMap","getLayer","hide","__mapOffset","coordinateSystem","show","eachSeries","seriesModel","extendComponentModel","getMapOptions","option","centerOrZoomChanged","a","b","defaultOption","extendComponentView","render","rendering","coordSys","moveHandler","e","offsetEl","parentNode","parseInt","dispatchAction","zoomEndHandler","fn","time","context","lock","args","wrapperFn","later","throttledResizeHandler","getInstanceByDom","resize","apply","arguments","setTimeout","off","_oldZoomEndHandler","_oldResizeHandler","on"],"mappings":"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","file":"echarts-amap.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"echarts\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"echarts\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"amap\"] = factory(require(\"echarts\"));\n\telse\n\t\troot[\"echarts\"] = root[\"echarts\"] || {}, root[\"echarts\"][\"amap\"] = factory(root[\"echarts\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","/**\r\n * BMap component extension\r\n */\r\nrequire('echarts').registerCoordinateSystem(\r\n  'amap', require('./AMapCoordSys')\r\n);\r\nrequire('./AMapModel');\r\nrequire('./AMapView');\r\n\r\n// Action\r\nrequire('echarts').registerAction({\r\n  type: 'amapRoam',\r\n  event: 'amapRoam',\r\n  update: 'updateLayout'\r\n}, function (payload, ecModel) {\r\n  ecModel.eachComponent('amap', function (aMapModel) {\r\n    var amap = aMapModel.getAMap();\r\n    var center = amap.getCenter();\r\n    aMapModel.setCenterAndZoom([center.lng, center.lat], amap.getZoom());\r\n  });\r\n});\r\n\r\nmodule.exports = {\r\n  version: process.env.VERSION\r\n};\r\n","var echarts = require('echarts');\r\n\r\nfunction AMapCoordSys(amap, api) {\r\n  this._amap = amap;\r\n  this.dimensions = ['lng', 'lat'];\r\n  this._mapOffset = [0, 0];\r\n\r\n  this._api = api;\r\n}\r\n\r\nAMapCoordSys.prototype.dimensions = ['lng', 'lat'];\r\n\r\nAMapCoordSys.prototype.setZoom = function (zoom) {\r\n  this._zoom = zoom;\r\n};\r\n\r\nAMapCoordSys.prototype.setCenter = function (center) {\r\n  this._center = this._amap.lnglatToPixel(center);//, 10)\r\n};\r\n\r\nAMapCoordSys.prototype.setMapOffset = function (mapOffset) {\r\n  this._mapOffset = mapOffset;\r\n};\r\n\r\nAMapCoordSys.prototype.getAMap = function () {\r\n  return this._amap;\r\n};\r\n\r\nAMapCoordSys.prototype.dataToPoint = function (data) {\r\n  var point = new AMap.LngLat(data[0], data[1]);\r\n  var px = this._amap.lngLatToContainer(point);//, this._zoom);\r\n  var mapOffset = this._mapOffset;\r\n  return [px.x - mapOffset[0], px.y - mapOffset[1]];\r\n};\r\n\r\nAMapCoordSys.prototype.pointToData = function (pt) {\r\n  var mapOffset = this._mapOffset;\r\n  var pt = this._amap.containerToLngLat({\r\n    x: pt[0] + mapOffset[0],\r\n    y: pt[1] + mapOffset[1]\r\n  });\r\n  return [pt.lng, pt.lat];\r\n};\r\n\r\nAMapCoordSys.prototype.getViewRect = function () {\r\n  var api = this._api;\r\n  return new echarts.graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight());\r\n};\r\n\r\nAMapCoordSys.prototype.getRoamTransform = function () {\r\n  return echarts.matrix.create();\r\n};\r\n\r\nvar Overlay;\r\n\r\n// For deciding which dimensions to use when creating list data\r\nAMapCoordSys.dimensions = AMapCoordSys.prototype.dimensions;\r\n\r\nAMapCoordSys.create = function (ecModel, api) {\r\n  var amapCoordSys;\r\n  var root = api.getDom();\r\n\r\n  // TODO Dispose\r\n  ecModel.eachComponent('amap', function (amapModel) {\r\n    var viewportRoot = api.getZr().painter.getViewportRoot();\r\n    if (typeof AMap === 'undefined') {\r\n      throw new Error('AMap api is not loaded');\r\n    }\r\n\r\n    if (amapCoordSys) {\r\n      throw new Error('Only one amap component can exist');\r\n    }\r\n    if (!amapModel.__amap) {\r\n      // Not support IE8\r\n      var amapRoot = root.querySelector('.ec-extension-amap');\r\n      if (amapRoot) {\r\n          // Reset viewport left and top, which will be changed\r\n          // in moving handler in AMapView\r\n          viewportRoot.style.left = '0px';\r\n          viewportRoot.style.top = '0px';\r\n          root.removeChild(amapRoot);\r\n      }\r\n      amapRoot = document.createElement('div');\r\n      amapRoot.style.cssText = 'width:100%;height:100%';\r\n      // Not support IE8\r\n      amapRoot.classList.add('ec-extension-amap');\r\n      root.appendChild(amapRoot);\r\n\r\n      var options = amapModel.get() || {};\r\n      options = amapModel.__options = echarts.util.clone(options);\r\n      var amap = amapModel.__amap = new AMap.Map(amapRoot, options);\r\n\r\n      var layer = amapModel.__layer = new AMap.CustomLayer(viewportRoot);\r\n      layer.setMap(amap);\r\n    }\r\n    var amap = amapModel.getAMap();\r\n    var layer = amapModel.getLayer();\r\n    layer.hide();\r\n\r\n    var zoom = amap.getZoom();\r\n    var center = amap.getCenter();\r\n\r\n    amapCoordSys = new AMapCoordSys(amap, api);\r\n    amapCoordSys.setMapOffset(amapModel.__mapOffset || [0, 0]);\r\n    amapCoordSys.setZoom(zoom);\r\n    amapCoordSys.setCenter([center.lng, center.lat]);\r\n\r\n    amapModel.coordinateSystem = amapCoordSys;\r\n    layer.show();\r\n  });\r\n\r\n  ecModel.eachSeries(function (seriesModel) {\r\n    if (seriesModel.get('coordinateSystem') === 'amap') {\r\n      seriesModel.coordinateSystem = amapCoordSys;\r\n    }\r\n  });\r\n};\r\n\r\nmodule.exports = AMapCoordSys;\r\n","function v2Equal(a, b) {\r\n  return a && b && a[0] === b[0] && a[1] === b[1];\r\n}\r\n\r\nmodule.exports = require('echarts').extendComponentModel({\r\n  type: 'amap',\r\n\r\n  getAMap: function () {\r\n    // __amap is injected when creating AMapCoordSys\r\n    return this.__amap;\r\n  },\r\n\r\n  getLayer: function() {\r\n    // __layer is injected when creating AMapCoordSys\r\n    return this.__layer;\r\n  },\r\n\r\n  getMapOptions: function() {\r\n    return this.__options;\r\n  },\r\n\r\n  setCenterAndZoom: function (center, zoom) {\r\n    this.option.center = center;\r\n    this.option.zoom = zoom;\r\n  },\r\n\r\n  centerOrZoomChanged: function (center, zoom) {\r\n    var option = this.option;\r\n    return !(v2Equal(center, option.center) && zoom === option.zoom);\r\n  },\r\n\r\n  defaultOption: {\r\n    center: [116.397475,39.908695],\r\n    zoom: 4,\r\n  }\r\n});\r\n","/*\r\n * this function bollowed from:\r\n * https://github.com/Leaflet/Leaflet/blob/master/src/core/Util.js\r\n */\r\nfunction throttle(fn, time, context) {\r\n\tvar lock, args, wrapperFn, later;\r\n\r\n\tlater = function () {\r\n\t\t// reset lock and call if queued\r\n\t\tlock = false;\r\n\t\tif (args) {\r\n\t\t\twrapperFn.apply(context, args);\r\n\t\t\targs = false;\r\n\t\t}\r\n\t};\r\n\r\n\twrapperFn = function () {\r\n\t\tif (lock) {\r\n\t\t\t// called too soon, queue to call later\r\n\t\t\targs = arguments;\r\n\r\n\t\t} else {\r\n\t\t\t// call and lock until later\r\n\t\t\tfn.apply(context, arguments);\r\n\t\t\tsetTimeout(later, time);\r\n\t\t\tlock = true;\r\n\t\t}\r\n\t};\r\n\r\n\treturn wrapperFn;\r\n}\r\n\r\nvar echarts = require('echarts');\r\n\r\nmodule.exports = require('echarts').extendComponentView({\r\n  type: 'amap',\r\n\r\n  render: function (aMapModel, ecModel, api) {\r\n    var rendering = true;\r\n\r\n    var amap = aMapModel.getAMap();\r\n    var viewportRoot = api.getZr().painter.getViewportRoot();\r\n    var coordSys = aMapModel.coordinateSystem;\r\n    var moveHandler = function (e) {\r\n      if (rendering) {\r\n          return;\r\n      }\r\n      var offsetEl = viewportRoot.parentNode.parentNode.parentNode;\r\n      var mapOffset = [\r\n          -parseInt(offsetEl.style.left, 10) || 0,\r\n          -parseInt(offsetEl.style.top, 10) || 0\r\n      ];\r\n      viewportRoot.style.left = mapOffset[0] + 'px';\r\n      viewportRoot.style.top = mapOffset[1] + 'px';\r\n\r\n      coordSys.setMapOffset(mapOffset);\r\n      aMapModel.__mapOffset = mapOffset;\r\n\r\n      api.dispatchAction({\r\n          type: 'amapRoam'\r\n      });\r\n    };\r\n\r\n    function zoomEndHandler() {\r\n      if (rendering) {\r\n          return;\r\n      }\r\n      api.dispatchAction({\r\n          type: 'amapRoam'\r\n      });\r\n    }\r\n\r\n    function resizeHandler(e) {\r\n      echarts.getInstanceByDom(api.getDom()).resize();\r\n      moveHandler.call(this, e)\r\n    }\r\n\r\n    var throttledResizeHandler = throttle(resizeHandler, 300, amap);\r\n\r\n    // amap.off('movestart', this._oldMoveHandler);\r\n    amap.off('zoomend', this._oldZoomEndHandler);\r\n    amap.off('moveend', this._oldZoomEndHandler);\r\n    amap.off('complete', this._oldZoomEndHandler);\r\n    aMapModel.get('resizeEnable') && amap.off('resize', this._oldResizeHandler);\r\n\r\n    // amap.on('movestart', moveHandler);\r\n    amap.on('zoomend', zoomEndHandler);\r\n    amap.on('moveend', zoomEndHandler);\r\n    amap.on('complete', zoomEndHandler);\r\n    aMapModel.get('resizeEnable') && amap.on('resize', throttledResizeHandler);\r\n\r\n    // this._oldMoveHandler = moveHandler;\r\n    this._oldZoomEndHandler = zoomEndHandler;\r\n    this._oldResizeHandler = throttledResizeHandler;\r\n\r\n    // var roam = aMapModel.get('roam');\r\n    // if (roam && roam !== 'scale') {\r\n    //     amap.enableDragging();\r\n    // }\r\n    // else {\r\n    //     amap.disableDragging();\r\n    // }\r\n    // if (roam && roam !== 'move') {\r\n    //     amap.enableScrollWheelZoom();\r\n    //     amap.enableDoubleClickZoom();\r\n    //     amap.enablePinchToZoom();\r\n    // }\r\n    // else {\r\n    //     amap.disableScrollWheelZoom();\r\n    //     amap.disableDoubleClickZoom();\r\n    //     amap.disablePinchToZoom();\r\n    // }\r\n\r\n    rendering = false;\r\n  }\r\n});\r\n"],"sourceRoot":""}
